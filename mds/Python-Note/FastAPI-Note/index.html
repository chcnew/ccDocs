
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="个人学习记录的知识笔记">
      
      
        <meta name="author" content="HC">
      
      
        <link rel="canonical" href="https://chcnew.github.io/ccDocs/mds/Python-Note/FastAPI-Note/">
      
      
        <link rel="prev" href="../django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/">
      
      
        <link rel="next" href="../../GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>FastAPI-Note - CC学习文档库</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../static/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fastapi-uv-study" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="CC学习文档库" class="md-header__button md-logo" aria-label="CC学习文档库" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m99.3 256.1 69.4-119.9c-5.6-12.2-8.8-25.8-8.8-40.2 0-53 43-96 96-96s96 43 96 96c0 14.3-3.1 27.9-8.8 40.2l44.4 76.7c-23.1 26-53.7 45.1-88.4 53.8L256 191.9l-68.1 117.6c21.5 6.8 44.3 10.5 68.1 10.5 70.7 0 133.8-32.7 174.9-84 11.1-13.8 31.2-16 45-5s16 31.2 5 45C428.2 341.8 347 384 256.1 384c-35.4 0-69.4-6.4-100.7-18.1l-56.7 97.8c-4.7 8.1-11.7 14.7-20.1 18.9l-55.4 27.7c-5 2.5-10.9 2.2-15.6-.7S0 501.5 0 496v-55.4c0-8.4 2.2-16.7 6.5-24.1l60-103.7c-12.8-11.2-24.6-23.5-35.3-36.8-11.1-13.8-8.8-33.9 5-45s33.9-8.8 45 5c5.7 7.1 11.8 13.8 18.2 20.1zm281.8 151.8c32.5-13 62.4-31 88.9-52.9l35.6 61.5c4.2 7.3 6.5 15.6 6.5 24.1V496c0 5.5-2.9 10.7-7.6 13.6s-10.6 3.2-15.6.7l-55.4-27.7c-8.4-4.2-15.4-10.8-20.1-18.9zM256 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CC学习文档库
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FastAPI-Note
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-tabs__link">
          
  
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/" class="md-tabs__link">
          
  
  
  Golang

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Vue3-Note/vue3-%E5%85%A5%E9%97%A8/" class="md-tabs__link">
          
  
  
  Vue3

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Docker-Note/DockerLearningNote/" class="md-tabs__link">
          
  
  
  Docker

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" class="md-tabs__link">
          
  
  
  DataBase

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="md-tabs__link">
          
  
  
  LinuxEnvConf

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/" class="md-tabs__link">
          
  
  
  Others

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CC学习文档库" class="md-nav__button md-logo" aria-label="CC学习文档库" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m99.3 256.1 69.4-119.9c-5.6-12.2-8.8-25.8-8.8-40.2 0-53 43-96 96-96s96 43 96 96c0 14.3-3.1 27.9-8.8 40.2l44.4 76.7c-23.1 26-53.7 45.1-88.4 53.8L256 191.9l-68.1 117.6c21.5 6.8 44.3 10.5 68.1 10.5 70.7 0 133.8-32.7 174.9-84 11.1-13.8 31.2-16 45-5s16 31.2 5 45C428.2 341.8 347 384 256.1 384c-35.4 0-69.4-6.4-100.7-18.1l-56.7 97.8c-4.7 8.1-11.7 14.7-20.1 18.9l-55.4 27.7c-5 2.5-10.9 2.2-15.6-.7S0 501.5 0 496v-55.4c0-8.4 2.2-16.7 6.5-24.1l60-103.7c-12.8-11.2-24.6-23.5-35.3-36.8-11.1-13.8-8.8-33.9 5-45s33.9-8.8 45 5c5.7 7.1 11.8 13.8 18.2 20.1zm281.8 151.8c32.5-13 62.4-31 88.9-52.9l35.6 61.5c4.2 7.3 6.5 15.6 6.5 24.1V496c0 5.5-2.9 10.7-7.6 13.6s-10.6 3.2-15.6.7l-55.4-27.7c-8.4-4.2-15.4-10.8-20.1-18.9zM256 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/></svg>

    </a>
    CC学习文档库
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并发编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    异步编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DRF-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DRF框架
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../celery-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    celery-Note
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    django项目部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    FastAPI-Note
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    FastAPI-Note
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      1 FastAPI是什么？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      2 FastAPI特点
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-fastapidjangoflask" class="md-nav__link">
    <span class="md-ellipsis">
      3 FastAPI与Django、Flask区别
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      4 FastAPI技术组件架构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5 相关文档学习链接
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      6 FastAPI项目开发特性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      7 FastAPI为什么快
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 FastAPI为什么快">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 支持异步的框架
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 事件循环是什么
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 程序并发维度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uv" class="md-nav__link">
    <span class="md-ellipsis">
      一、uv创建项目
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、uv创建项目">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 安装依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      2 查看项目声明的依赖（pyproject.toml ）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      3 FastAPI简单接口示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4 接口自动化测试用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastapi-" class="md-nav__link">
    <span class="md-ellipsis">
      二、FastAPI-项目结构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      三、模块化开发示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、模块化开发示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mainpy" class="md-nav__link">
    <span class="md-ellipsis">
      1 main.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-appcoreconfigpy" class="md-nav__link">
    <span class="md-ellipsis">
      2 app/core/config.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-appcorehttp_clientpy" class="md-nav__link">
    <span class="md-ellipsis">
      3 app/core/http_client.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-appapiv1indexpy" class="md-nav__link">
    <span class="md-ellipsis">
      4 app/api/v1/index.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-appapiv1projectpy" class="md-nav__link">
    <span class="md-ellipsis">
      5 app/api/v1/project.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-appapiv1versionpy" class="md-nav__link">
    <span class="md-ellipsis">
      6 app/api/v1/version.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      四、两个核心组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、两个核心组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-starlette-asgi" class="md-nav__link">
    <span class="md-ellipsis">
      1 Starlette - ASGI 框架
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pydantic-" class="md-nav__link">
    <span class="md-ellipsis">
      2 Pydantic - 数据验证与解析库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    <span class="md-ellipsis">
      五、http协议
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      六、开发模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、开发模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1 前后端不分离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 前后端分离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      七、API接口概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、API接口概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rpc-remote-procedure-call" class="md-nav__link">
    <span class="md-ellipsis">
      1 RPC（ Remote Procedure Call ）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-restful" class="md-nav__link">
    <span class="md-ellipsis">
      2 Restful
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-restful-api" class="md-nav__link">
    <span class="md-ellipsis">
      3 RESTful API规范
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 RESTful API规范">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-restful" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 restful规范
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 幂等性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 序列化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      八、FastAPI请求接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、FastAPI请求接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1 支持的请求方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2 路径参数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-include_router" class="md-nav__link">
    <span class="md-ellipsis">
      3 路由组(include_router)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      九、工厂函数创建app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      十、路径参数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      十一、字符串查询参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、字符串查询参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1 参数定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pydantic" class="md-nav__link">
    <span class="md-ellipsis">
      2 结合Pydantic包定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Golang
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Golang
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoLang-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vue3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Vue3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/vue3-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vue3-入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vue3-组合式API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/Vue3%2BTS%2BPnpm-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vue3+TS+Pnpm-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Docker-Note/DockerLearningNote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker-Note
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Docker-Note/DockerVMLocalTest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker本地测试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Docker-Note/DockerCSERVER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker容器化部署
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    DataBase
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            DataBase
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MySQL优化实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MongoDB-入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SqlAlchemyStudy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PyMySQLStudy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RedisStdudy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LinuxEnvConf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            LinuxEnvConf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx配置文件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LinuxEnv-Note/WSL-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WSL-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    http协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    uwsgi+nginx两种协议代理配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      1 FastAPI是什么？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      2 FastAPI特点
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-fastapidjangoflask" class="md-nav__link">
    <span class="md-ellipsis">
      3 FastAPI与Django、Flask区别
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      4 FastAPI技术组件架构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5 相关文档学习链接
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      6 FastAPI项目开发特性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      7 FastAPI为什么快
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 FastAPI为什么快">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 支持异步的框架
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 事件循环是什么
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 程序并发维度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uv" class="md-nav__link">
    <span class="md-ellipsis">
      一、uv创建项目
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、uv创建项目">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 安装依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      2 查看项目声明的依赖（pyproject.toml ）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      3 FastAPI简单接口示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4 接口自动化测试用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastapi-" class="md-nav__link">
    <span class="md-ellipsis">
      二、FastAPI-项目结构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      三、模块化开发示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、模块化开发示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mainpy" class="md-nav__link">
    <span class="md-ellipsis">
      1 main.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-appcoreconfigpy" class="md-nav__link">
    <span class="md-ellipsis">
      2 app/core/config.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-appcorehttp_clientpy" class="md-nav__link">
    <span class="md-ellipsis">
      3 app/core/http_client.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-appapiv1indexpy" class="md-nav__link">
    <span class="md-ellipsis">
      4 app/api/v1/index.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-appapiv1projectpy" class="md-nav__link">
    <span class="md-ellipsis">
      5 app/api/v1/project.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-appapiv1versionpy" class="md-nav__link">
    <span class="md-ellipsis">
      6 app/api/v1/version.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      四、两个核心组件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、两个核心组件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-starlette-asgi" class="md-nav__link">
    <span class="md-ellipsis">
      1 Starlette - ASGI 框架
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pydantic-" class="md-nav__link">
    <span class="md-ellipsis">
      2 Pydantic - 数据验证与解析库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    <span class="md-ellipsis">
      五、http协议
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      六、开发模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、开发模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1 前后端不分离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 前后端分离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      七、API接口概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、API接口概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rpc-remote-procedure-call" class="md-nav__link">
    <span class="md-ellipsis">
      1 RPC（ Remote Procedure Call ）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-restful" class="md-nav__link">
    <span class="md-ellipsis">
      2 Restful
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-restful-api" class="md-nav__link">
    <span class="md-ellipsis">
      3 RESTful API规范
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 RESTful API规范">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-restful" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 restful规范
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 幂等性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 序列化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      八、FastAPI请求接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、FastAPI请求接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1 支持的请求方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2 路径参数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-include_router" class="md-nav__link">
    <span class="md-ellipsis">
      3 路由组(include_router)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      九、工厂函数创建app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      十、路径参数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      十一、字符串查询参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、字符串查询参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1 参数定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pydantic" class="md-nav__link">
    <span class="md-ellipsis">
      2 结合Pydantic包定义
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="fastapi-uv-study">FastAPI-uv-study<a class="headerlink" href="#fastapi-uv-study" title="Permanent link">&para;</a></h1>
<p>个人入门学习项目 -- 学习笔记 -- 2025</p>
<h3 id="1-fastapi">1 FastAPI是什么？<a class="headerlink" href="#1-fastapi" title="Permanent link">&para;</a></h3>
<ul>
<li>FastAPI是一个高性能的 Web 框架，用于构建基于 Python 的 API；</li>
</ul>
<p>基于标准的 Python 类型提示(type hints) -- Pydantic；</p>
<p>通过利用 Python 的异步特性(如 async和 await)，提供了极高的性能 -- Starlette；</p>
<p>基于 Uvicorn 运行的 FastAP|程序是 截止2025年 最快的 Python web 框架  -- 运行工具。</p>
<h3 id="2-fastapi">2 FastAPI特点<a class="headerlink" href="#2-fastapi" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>高性能</strong>：性能接近 Node.js 和 Golang，基于异步 Web 服务框架 Starlette。</li>
<li><strong>自动生成文档</strong>：开发接口会自动生成交互式文档，便于开发者理解与调试API。</li>
<li><strong>支持类型提示</strong>：完全采用Python3.6+支持的类型提示，代码更简洁清晰，支持自动数据验证与错误处理。</li>
<li><strong>异步支持</strong>：FastAPI原生支持 ASGI 协议，很方便的使用 async/await 语法开发异步接口，非常适合处理 I/O密集型 任务，如文件操作、数据库操作、外部接口调用等。</li>
<li><strong>开发效率高</strong>：借助 FastAPI，开发者可以在更短的时间内开发出性能优秀、类型安全的 API。它提供了许多内置工具，如数据验证、序列化、依赖注入等，减少手动编写样板代码的需求。</li>
<li><strong>数据验证和序列化</strong>：FastAPI使用 Pydantic 进行数据验证和序列化，这使得开发者能够轻松定义和验证复杂的数据结构，确保 API的输入输出都符合预期。</li>
</ul>
<h3 id="3-fastapidjangoflask">3 FastAPI与Django、Flask区别<a class="headerlink" href="#3-fastapidjangoflask" title="Permanent link">&para;</a></h3>
<ul>
<li>FastAPI 非常适合搭建高性能的API微服务，特别是在需要处理大量并发请求或数据验证的场景。</li>
<li>Flask 是一个轻量级框架，适用于简单应用或原型开发，处理复杂的需求或许需要额外的配置。</li>
<li>Django 是一个全功能的框架，适合构建包含数据库、认证、管理后台的复杂应用；但对于纯API项目来说，选择该框架会比较笨重。</li>
</ul>
<h3 id="4-fastapi">4 FastAPI技术组件架构<a class="headerlink" href="#4-fastapi" title="Permanent link">&para;</a></h3>
<p><img alt="image-20251029231204591" src="image-20251029231204591.png" /> </p>
<h3 id="5">5 相关文档学习链接<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>FastAPl</strong>：https://fastapi.tiangolo.com/zh/FastAPI</li>
</ul>
<p>是一个高性能的Web 框架，基于标准 Python 类型提示构建 API。</p>
<ul>
<li><strong>Starlette</strong>：https://www.starlette.io/Starlette</li>
</ul>
<p>FastAP|是构建在 Starlette 之上的一个 Web 框架，是一个轻量级的 ASGI框架/工具包，适合用 Python 构建异步 Web 服务；</p>
<p>在FastAPI项目开发中，甚至会引入Starlette的一些方法模块。</p>
<ul>
<li><strong>Pydantic</strong>：https://docs.pydantic.dev/latest/Pydantic</li>
</ul>
<p>是 Python 使用最广泛的数据验证、数据转换库。</p>
<ul>
<li><strong>Tortoise</strong>：https://tortoise.github.io/index.html</li>
</ul>
<p>文档地址：https://tortoise.org.cn/index.html</p>
<p><strong>Tortoise ORM 是一个易于使用的异步 ORM(对象关系映射器)</strong></p>
<p>SQLAlchemy也是一个功能非常强大的 Python ORM 框架但不支持异步。</p>
<ul>
<li><strong>Jinja</strong>：https://jinja.palletsprojects.com/en/3.1.x/</li>
</ul>
<p>Jinja 是一个快速、富有表现力、可扩展的模板引擎，用于开发前端页面</p>
<ul>
<li><strong>Uvicorn</strong>：https://www.uvicorn.org/Uvicorn</li>
</ul>
<p>一个基于 ASGl(Asynchronous Server Gateway Interface)的高性能、轻量级的 Python Web 服务器。</p>
<ul>
<li><strong>Docker</strong>： https://www.docker.com/</li>
</ul>
<p>Docker 是用于部署和运行应用程序。它使用容器技术来打包应用程序及其依赖项，使得应用程序可以在任何环境下一致地运行，无论是在开发、测试还是生产环境。</p>
<ul>
<li><strong>uv</strong>：推荐使用 <strong>uv</strong>  创建管理虚拟环境的 FastAPI 学习项目</li>
</ul>
<p>uv 是一个现代的python环境管理器，非常好用，使用Rust语言开发的，速度很快</p>
<p>官方地址：https://github.com/astral-sh/uv</p>
<p>中文文档：https://hellowac.github.io/uv-zh-cn/</p>
<ul>
<li>相关开源后台管理系统：</li>
</ul>
<p>https://github.com/Richard0403/FluxPanel</p>
<h3 id="6-fastapi">6 FastAPI项目开发特性<a class="headerlink" href="#6-fastapi" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>类型声明特性</strong>：</p>
</li>
<li>
<p>使用了大量的Python类型声明，即从fromtyping引入很多数据类型</p>
</li>
<li>
<p>函数的入参都会声明类型，方便数据类型检查、也方便代码提示</p>
</li>
<li>
<p><strong>数据模型类特性</strong>：</p>
</li>
<li>
<p>大量使用数据模型类，例如API的入参、处理、返回、到数据库的存储</p>
</li>
<li>
<p>例如入参和返回，都预定义一个类，表达数据的模式(有哪些字段、每个字段的类型)</p>
</li>
<li>
<p><strong>便捷支持异步编程特性</strong>：</p>
</li>
<li>
<p>对于数据库、API、文件的调用，大量结合async和await的异步编程</p>
</li>
</ul>
<h3 id="7-fastapi">7 FastAPI为什么快<a class="headerlink" href="#7-fastapi" title="Permanent link">&para;</a></h3>
<h4 id="71">7.1 支持异步的框架<a class="headerlink" href="#71" title="Permanent link">&para;</a></h4>
<ul>
<li>FastAP构建在 <strong>Starlette</strong> 之上，<strong>Starlette</strong> 本身就是一个 优秀的、高性能 ASGI 异步框架。</li>
<li>同一个线程中，当一个任务执行到需要 <strong>等待 I/O（例如网络请求、文件读写、数据库查询）</strong> 时，它不会阻塞当前线程，而是<strong>把控制权交还给事件循环</strong>，从而让该线程去执行其他任务。</li>
</ul>
<h4 id="72">7.2 事件循环是什么<a class="headerlink" href="#72" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>事件循环：是一个协调协程执行的调度中心，靠操作系统通知驱动，而不是暴力轮询。</strong></p>
</li>
<li>
<p>事件循环不会一直去“轮询”所有任务（易错点）；</p>
</li>
<li>把所有等待中的 I/O 操作注册到操作系统的 <strong>I/O多路复用机制</strong>；</li>
<li>当有任务的 I/O 完成时，<strong>操作系统通知事件循环</strong>；</li>
<li>事件循环再调度相应协程继续执行。</li>
</ul>
<h4 id="73">7.3 程序并发维度<a class="headerlink" href="#73" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>多机器并行</strong>：</li>
<li>在多个机器上运行同样的程序，同时处理任务；</li>
<li>例如大数据技术 Hadoop/Hive/Spark</li>
<li><strong>多进程并行</strong>：</li>
<li>在单个机器上运行单个程序，程序中启用多个进程同时处理任务</li>
<li>针对CPU密集型任务，选用多进程处理更合适，例如数学计算和科学计算、图像和视频处理、解压缩文件等；</li>
<li><strong>多线程并发</strong>：</li>
<li>一个进程可以启动多个进程同时处理任务，但是注意python中由于GIL的存在，并不会真正的并行执行；
     但由于I/O操作时，会释放GIL，所以对I/O密集型操作的程序依然可以采用多线程；</li>
<li>I/O密集型任务，例如文件操作、网络请求、数据库操作等</li>
<li><strong>多协程并发</strong>：</li>
<li>协程是一种编程抽象，但不是硬件或操作系统层面的原生实体；但是事件循环是真实存在的设计</li>
<li>协程在用户空间实现，不涉及内核；上下文切换开销极小，针对I/O密集型任务考虑首选，能很好的处理高并发任务</li>
</ul>
<h2 id="uv">一、uv创建项目<a class="headerlink" href="#uv" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># 创建项目</span>
uv<span class="w"> </span>init<span class="w"> </span>FastAPI-uv-study
<span class="nb">cd</span><span class="w"> </span>FastAPI-uv-study

<span class="c1"># 创建虚拟环境</span>
uv<span class="w"> </span>venv<span class="w"> </span>.venv

<span class="c1"># 激活虚拟环境</span>
.venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate

<span class="c1"># 退出虚拟环境</span>
.venv<span class="se">\S</span>cripts<span class="se">\d</span>eactivate

<span class="c1"># ##### uv 可以指定已安装在系统python版本 ##### </span>

<span class="c1"># 创建虚拟环境并使用指定 Python</span>
uv<span class="w"> </span>python<span class="w"> </span>list<span class="w">                     </span><span class="c1"># 看有哪些 Python</span>
uv<span class="w"> </span>venv<span class="w"> </span>.venv<span class="w"> </span>--python<span class="o">=</span><span class="m">3</span>.10<span class="w">        </span><span class="c1"># 用指定版本创建虚拟环境</span>
.venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate<span class="w">             </span><span class="c1"># 激活虚拟环境</span>
</code></pre></div>
<h3 id="1">1 安装依赖<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p>新项目建议使用：uv add xxx</p>
<p>以前 pip 管理的旧项目：uv add install xxx</p>
<p>这里按新项目方式：</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>add<span class="w"> </span>fastapi<span class="w"> </span><span class="s2">&quot;uvicorn[standard]&quot;</span>
uv<span class="w"> </span>add<span class="w"> </span>pytest<span class="w"> </span>--dev

<span class="c1"># --dev 参数：表示只用于开发环境的依赖，避免在生产环境安装多余依赖</span>

<span class="c1"># 生产环境同步安装依赖命令</span>
uv<span class="w"> </span>sync
uv<span class="w"> </span>sync<span class="w"> </span>--dev<span class="w"> </span><span class="c1"># 如果有必要在生产也安装开发环境相关依赖，则使用该命令</span>

<span class="c1"># 删除依赖</span>
uv<span class="w"> </span>remove<span class="w"> </span>&lt;包名&gt;
</code></pre></div>
<h3 id="2-pyprojecttoml">2 查看项目声明的依赖（pyproject.toml ）<a class="headerlink" href="#2-pyprojecttoml" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>uv tree</code></td>
<td>以依赖树形式显示项目安装的所有包（生产 + 开发）</td>
</tr>
<tr>
<td><code>uv tree --dev</code></td>
<td>仅查看开发依赖</td>
</tr>
<tr>
<td><code>uv export</code></td>
<td>导出所有依赖到 <code>requirements.txt</code> 形式</td>
</tr>
<tr>
<td><code>uv export --dev</code></td>
<td>包含开发依赖一起导出</td>
</tr>
</tbody>
</table>
<h3 id="3-fastapi">3 FastAPI简单接口示例<a class="headerlink" href="#3-fastapi" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">简单示例</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">gender</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># 创建5条示例数据</span>
<span class="n">MOCK_DATA</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;张三&quot;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s2">&quot;男&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;李四&quot;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s2">&quot;男&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;王五&quot;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s2">&quot;男&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;赵六&quot;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s2">&quot;男&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;小红&quot;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s2">&quot;女&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/user/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">User</span><span class="p">)</span>  <span class="c1"># 定义路由和返回类型</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">MOCK_DATA</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">user</span>
    <span class="k">return</span> <span class="p">{}</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">8000</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;文档地址：http://127.0.0.1:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/docs&quot;</span><span class="p">)</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</code></pre></div>
<ul>
<li><strong>uvicorn</strong> 命令行启动</li>
</ul>
<div class="highlight"><pre><span></span><code>uvicorn<span class="w"> </span>main:app<span class="w"> </span>--reload<span class="w"> </span>--port<span class="w"> </span><span class="m">8000</span>
</code></pre></div>
<ul>
<li>数据返回结构定义（<strong>Pydantic</strong>）</li>
</ul>
<p>response_model参数用于定义接口返回字段与类型，在自动接口文档里面，可以查看（Schema）</p>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/user/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">User</span><span class="p">)</span>  <span class="c1"># 定义路由和返回类型</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="o">...</span> <span class="o">...</span>
</code></pre></div>
<p><img alt="image-20251102222230277" src="image-20251102222230277.png" />  </p>
<h3 id="4">4 接口自动化测试用例<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<p>需要安装pytest这个包搭配使用，写pytest相关测试用例；使用该测试客户端，不会调用网络接口，直接走对应的函数逻辑</p>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.testclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestClient</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">main</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">test_get_versions</span><span class="p">():</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/v1/version/?platform=xxx&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<p><strong>创建client对象</strong>，类型是Testclient，它是基于httpx；httpx是基于requests库的，可以直接使用requsts的语法，发送get/post/put/delete接口给API服务器。</p>
<p><strong>httpx</strong>：原生支持异步编程；你可以使用 asyncio 结合 httpx 实现异步 HTTP 请求，这在处理大量并发请求时效率更高。</p>
<p><strong>requests</strong>：仅支持同步请求。可以通过多线程或多进程实现并发，不如异步方式高效。每个测试程序，需要名字以 test_开头的函数(这是标准的 pytest 约定)每个test 开头的函数，就是一个测试函数，可以用于测试一个API接口。</p>
<h2 id="fastapi-">二、FastAPI-项目结构<a class="headerlink" href="#fastapi-" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>FastAPI-uv-study/
├──<span class="w"> </span>main.py<span class="w">                    </span><span class="c1"># 应用入口</span>
├──<span class="w"> </span>app/
│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>├──<span class="w"> </span>api/
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>v1/
│<span class="w">   </span>│<span class="w">       </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>│<span class="w">       </span>└──<span class="w"> </span>items.py<span class="w">       </span><span class="c1"># 模块化路由</span>
│<span class="w">   </span>├──<span class="w"> </span>core/
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>config.py<span class="w">          </span><span class="c1"># 配置文件</span>
│<span class="w">   </span>├──<span class="w"> </span>db/
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>database.py<span class="w">        </span><span class="c1"># 数据库连接</span>
│<span class="w">   </span>├──<span class="w"> </span>models/<span class="w">                </span><span class="c1"># 数据模型</span>
│<span class="w">   </span>└──<span class="w"> </span>schemas/<span class="w">               </span><span class="c1"># Pydantic 模型</span>
└──<span class="w"> </span>requirements.txt
</code></pre></div>
<h2 id="_1">三、模块化开发示例<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="1-mainpy">1 main.py<a class="headerlink" href="#1-mainpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">服务启动命令：uvicorn main:app --reload</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>  <span class="c1"># noqa</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">app.api.v1</span><span class="w"> </span><span class="kn">import</span> <span class="n">index</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">version</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.http_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">lifespan</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_app</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FastAPI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    创建 FastAPI 应用实例</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;FastAPI 模块化项目示例&quot;</span><span class="p">,</span>
        <span class="n">lifespan</span><span class="o">=</span><span class="n">lifespan</span>
    <span class="p">)</span>

    <span class="c1"># 注册路由 -路由组配置</span>
    <span class="n">routers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;/home&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;首页&quot;</span><span class="p">]})</span>
        <span class="p">],</span>
        <span class="s2">&quot;/api/v1&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;项目管理&quot;</span><span class="p">]}),</span>
            <span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;版本管理&quot;</span><span class="p">]}),</span>
        <span class="p">],</span>
        <span class="c1"># &quot;/api/v2&quot;:[]</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">routers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">router</span><span class="p">,</span> <span class="n">tags</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;文档地址：http://127.0.0.1:8000/docs&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;首页地址：http://127.0.0.1:8000/home/index/&quot;</span><span class="p">)</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;main:app&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h3 id="2-appcoreconfigpy">2 app/core/config.py<a class="headerlink" href="#2-appcoreconfigpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseConfig</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
    <span class="n">PROJECT_NAME</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;FastAPI-uv-study&quot;</span>
    <span class="n">DEBUG</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">DATABASE_URL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///./test.db&quot;</span>

    <span class="c1"># class Config:</span>
    <span class="c1">#     env_file = &quot;.env&quot;  # 支持从 .env 文件加载环境变量</span>


<span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
</code></pre></div>
<h3 id="3-appcorehttp_clientpy">3 app/core/http_client.py<a class="headerlink" href="#3-appcorehttp_clientpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">异步请求客户端</span>

<span class="sd">asynccontextmanager：</span>
<span class="sd">    名称：异步上下文管理器</span>
<span class="sd">    被装饰函数中 yield：分割进入与退出的操作</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">asynccontextmanager</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">aiohttp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>


<span class="c1"># 全局 session 管理</span>
<span class="k">class</span><span class="w"> </span><span class="nc">HTTPClient</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="n">http_client</span> <span class="o">=</span> <span class="n">HTTPClient</span><span class="p">()</span>


<span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">lifespan</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
    <span class="c1"># 启动时创建 session</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting application: </span><span class="si">{</span><span class="n">app</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">http_client</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">yield</span>
    <span class="c1"># 关闭时清理 session</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shutting down application: </span><span class="si">{</span><span class="n">app</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">http_client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<h3 id="4-appapiv1indexpy">4 app/api/v1/index.py<a class="headerlink" href="#4-appapiv1indexpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/index&quot;</span><span class="p">)</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is Index page&quot;</span><span class="p">}</span>
</code></pre></div>
<h3 id="5-appapiv1projectpy">5 app/api/v1/project.py<a class="headerlink" href="#5-appapiv1projectpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">aiohttp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.http_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">http_client</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/project&quot;</span><span class="p">)</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_projects</span><span class="p">(</span><span class="n">platform</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    获取项目列表</span>

<span class="sd">    Args:</span>
<span class="sd">     platform (str): 平台名称；示例：MTK6993</span>

<span class="sd">    Returns:</span>
<span class="sd">     dict: 包含项目列表的字典；示例：{&quot;projects&quot;: [p1, p2, p3...]}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 复用全局 session，避免每次创建</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">http_client</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;http://172.16.191.214:9777/api/get-projects-and-versions?platform=</span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientTimeout</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 添加超时</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">json_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 模拟耗时操作</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;projects&quot;</span><span class="p">:</span> <span class="n">json_dict</span><span class="p">[</span><span class="s1">&#39;projects&#39;</span><span class="p">]}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;上游服务错误: </span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">504</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;请求超时&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;服务内部错误: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="6-appapiv1versionpy">6 app/api/v1/version.py<a class="headerlink" href="#6-appapiv1versionpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">aiohttp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.http_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">http_client</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/version&quot;</span><span class="p">)</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_versions</span><span class="p">(</span><span class="n">platform</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    获取项目列表</span>

<span class="sd">    Args:</span>
<span class="sd">     platform (str): 平台名称；示例：MTK6993</span>

<span class="sd">    Returns:</span>
<span class="sd">     dict: 包含版本列表的字典；示例：{&quot;versions&quot;: [p1, p2, p3...]}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 复用全局 session，避免每次创建</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">http_client</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;http://172.16.191.214:9777/api/get-projects-and-versions?platform=</span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientTimeout</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 添加超时</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">json_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 模拟耗时操作</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;versions&quot;</span><span class="p">:</span> <span class="n">json_dict</span><span class="p">[</span><span class="s1">&#39;versions&#39;</span><span class="p">]}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;上游服务错误: </span><span class="si">{</span><span class="n">resp</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">504</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;请求超时&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;服务内部错误: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="_2">四、两个核心组件<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="1-starlette-asgi">1 Starlette - ASGI 框架<a class="headerlink" href="#1-starlette-asgi" title="Permanent link">&para;</a></h3>
<p><strong>Starlette</strong> 是一个 <strong>轻量级、高性能的 Python 异步 Web 框架 / ASGI 框架，提供底层 Web 能力（路由、请求、响应、中间件等）。</strong></p>
<p><strong>FastAPI</strong> 和 <a href="https://www.starlette.dev/"><strong>Starlette</strong></a> 完全兼容(并基于)。所以，你有的其他的 Starlette 代码也能正常工作。<code>FastAPI</code> 实际上是 <code>Starlette</code>的一个子类。</p>
<div class="highlight"><pre><span></span><code>      ┌─────────────────────────────┐
      │          FastAPI             │  ← 提供类型校验、依赖注入、OpenAPI、自动文档
      └──────────────▲──────────────┘
                     │ 继承
      ┌──────────────┴──────────────┐
      │          Starlette           │  ← 提供 ASGI、路由、中间件、请求/响应 等基础功能
      └──────────────▲──────────────┘
                     │
      ┌──────────────┴──────────────┐
      │            ASGI              │  ← 异步接口标准 (类似于 Flask 的 WSGI)
      └─────────────────────────────┘
</code></pre></div>
<p>通过 <strong>FastAPI</strong> 你可以获得所有 <strong>Starlette</strong> 的特性 ( FastAPI 就像加强版的 Starlette )：</p>
<ul>
<li>令人惊叹的性能。它是 <a href="https://github.com/encode/starlette#performance">Python 可用的最快的框架之一，和 <strong>NodeJS</strong> 及 <strong>Go</strong> 相当</a>。</li>
<li><strong>支持 WebSocket</strong> 。</li>
<li><strong>支持 GraphQL</strong> 。</li>
<li>后台任务处理。</li>
<li>Startup 和 shutdown 事件。</li>
<li>测试客户端基于 HTTPX。</li>
<li><strong>CORS</strong>, GZip, 静态文件, 流响应。</li>
<li>支持 <strong>Session 和 Cookie</strong> 。</li>
<li>100% 测试覆盖率。</li>
<li>代码库 100% 类型注释。</li>
</ul>
<h3 id="2-pydantic-">2 Pydantic - 数据验证与解析库<a class="headerlink" href="#2-pydantic-" title="Permanent link">&para;</a></h3>
<p><strong>Pydantic</strong> 是一个基于 Python <strong>类型注解（Type Hints）</strong> 的 <strong>数据验证与解析库</strong>。</p>
<p><strong>Pydantic理念</strong>：“使用标准的 Python 类型注解（typing），自动完成数据验证、类型转换和错误提示。”</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>✅ 类型验证</td>
<td>自动检查输入数据类型</td>
</tr>
<tr>
<td>🔄 类型转换</td>
<td>自动将字符串、数字等转成目标类型</td>
</tr>
<tr>
<td>🚨 错误提示</td>
<td>验证失败时返回结构化错误信息</td>
</tr>
<tr>
<td>🧱 默认值</td>
<td>支持字段默认值</td>
</tr>
<tr>
<td>🧾 JSON 序列化</td>
<td>支持 <code>.json()</code> 导出</td>
</tr>
<tr>
<td>🧠 嵌套模型</td>
<td>支持复杂嵌套结构</td>
</tr>
<tr>
<td>🔍 校验规则</td>
<td>支持正则、范围、长度等验证</td>
</tr>
</tbody>
</table>
<p><strong>Pydantic 使用示例</strong>：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">功能：演示使用pydantic</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;chc&#39;</span>  <span class="c1"># 也可以设置常量</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">hobby</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">signup_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">external_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;23&#39;</span><span class="p">,</span>
    <span class="s1">&#39;hobby&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="mi">99</span><span class="p">],</span>
    <span class="s1">&#39;signup_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-12-23 23:59:59&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">external_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>

<span class="c1"># 输出结果-自动转化</span>
<span class="c1"># {&#39;id&#39;: 1, &#39;name&#39;: &#39;chc&#39;, &#39;age&#39;: 23, &#39;hobby&#39;: [1, 2, 99], &#39;signup_time&#39;: datetime.datetime(2019, 12, 23, 23, 59, 59)}</span>
</code></pre></div>
<h3 id="3">3 总结<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>组件</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Starlette</strong></td>
<td>提供 ASGI 层、路由、中间件、HTTP/WebSocket 基础</td>
</tr>
<tr>
<td><strong>Pydantic</strong></td>
<td>提供数据模型、类型验证、序列化</td>
</tr>
<tr>
<td><strong>FastAPI</strong></td>
<td>把两者结合 + 自动生成文档 + 依赖注入机制</td>
</tr>
</tbody>
</table>
<p>三者的关系如下：</p>
<div class="highlight"><pre><span></span><code>       ┌───────────────┐
       │   Pydantic    │  ← 数据验证/Schema
       └──────▲────────┘
              │
┌─────────────┴────────────┐
│        FastAPI            │  ← 主框架 (封装 + 文档 + 依赖注入)
└─────────────▲────────────┘
              │
       ┌──────┴──────┐
       │  Starlette   │  ← 底层 ASGI 框架
       └──────────────┘
</code></pre></div>
<p><strong>Starlette</strong> 与 <strong>FastAPI</strong> 对比：</p>
<table>
<thead>
<tr>
<th>对比项</th>
<th><strong>Starlette</strong></th>
<th><strong>FastAPI</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>定位</td>
<td>底层 ASGI 框架</td>
<td>高级 Web 框架</td>
</tr>
<tr>
<td>特点</td>
<td>轻量、灵活、无类型系统</td>
<td>自动校验、自动文档</td>
</tr>
<tr>
<td>参数验证</td>
<td>手动</td>
<td>自动（基于类型提示 + Pydantic）</td>
</tr>
<tr>
<td>文档生成</td>
<td>无</td>
<td>自动生成 Swagger / ReDoc</td>
</tr>
<tr>
<td>学习难度</td>
<td>稍低层</td>
<td>高层封装更友好</td>
</tr>
<tr>
<td>推荐用途</td>
<td>自定义微框架、中间件、工具</td>
<td>RESTful API、微服务</td>
</tr>
</tbody>
</table>
<p>一句话记忆：<strong>FastAPI = Starlette + Pydantic + 自动文档 + 依赖注入</strong></p>
<h2 id="http">五、http协议<a class="headerlink" href="#http" title="Permanent link">&para;</a></h2>
<p><img alt="image-20251027231257400" src="image-20251027231257400.png" /> </p>
<p><strong>协议规范请求格式</strong>：协议://主机:端口 + 路径 + 参数 + 封装参数(如：请求头)</p>
<h2 id="_3">六、开发模式<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="1_1">1 前后端不分离<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<p><img alt="depended_frontend_backend" src="depended_frontend_backend.png" /> </p>
<h3 id="2">2 前后端分离<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p><img alt="indepent_frontend_backend-16318493319127" src="indepent_frontend_backend-16318493319127.png" /> </p>
<h2 id="api">七、API接口概念<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<p>应用程序编程接口（Application Programming Interface，API接口），就是应用程序对外提供了一个操作数据的入口，这个入口可以是一个函数或类方法，也可以是一个url地址或者一个网络地址。当客户端调用这个入口，应用程序则会执行对应代码操作，给客户端完成相对应的功能。</p>
<p>当然，api接口在工作中是比较常见的开发内容，有时候，我们会调用其他人编写的api接口，有时候，我们也需要提供api接口给其他人操作。由此就会带来一个问题，api接口往往都是一个函数、类方法、或者url或其他网络地址，不断是哪一种，当api接口编写过程中，我们都要考虑一个问题就是这个接口应该怎么编写？接口怎么写的更加容易维护和清晰，这就需要大家在调用或者编写api接口的时候要有一个明确的编写规范！！！</p>
<p>为了在团队内部形成共识、防止个人习惯差异引起的混乱，我们都需要找到一种大家都觉得很好的接口实现规范，而且这种规范能够让后端写的接口，用途一目了然，减少客户端和服务端双方之间的合作成本。</p>
<p>目前市面上大部分公司开发人员使用的<strong>接口实现规范主要有：RPC、restful。</strong></p>
<h3 id="1-rpc-remote-procedure-call">1 RPC（ Remote Procedure Call ）<a class="headerlink" href="#1-rpc-remote-procedure-call" title="Permanent link">&para;</a></h3>
<p>​   翻译成中文：<strong>远程过程调用[远程服务调用</strong>。从字面上理解就是访问/调用远程服务端提供的api接口。这种接口一般以服务或者过程式代码提供。</p>
<ul>
<li>
<p>服务端提供一个<strong>唯一的访问入口地址</strong>：http://api.xxx.com/ 或 http://www.xx.com/api 或者基于其他协议的地址</p>
</li>
<li>
<p>客户端请求服务端的时候，所有的操作都理解为动作(action)，一般web开发时，对应的就是HTTP请求的post请求</p>
</li>
<li>
<p>通过<strong>请求体</strong>参数，指定要调用的接口名称和接口所需的参数</p>
</li>
</ul>
<p>action=get_all_student&amp;class=301&amp;sex=1</p>
<p>m=get_all_student&amp;sex=1&amp;age=22</p>
<p>command=100&amp;sex=1&amp;age=22</p>
<p>RPC接口多了,对应函数名和参数就多了,前端在请求api接口时难找，对于年代久远的rpc服务端的代码也容易出现重复的接口</p>
<h3 id="2-restful">2 Restful<a class="headerlink" href="#2-restful" title="Permanent link">&para;</a></h3>
<p>​   翻译成中文：<strong>资源状态转换.(表征性状态转移)</strong></p>
<ul>
<li>把服务端提供的所有的数据/文件都看成资源， 那么通过api接口请求数据的操作，本质上来说就是对资源的操作了.</li>
</ul>
<p>因此，restful中要求，我们把当前接口对外提供哪种资源进行操作，就把<strong>资源的名称写在url地址</strong>。</p>
<ul>
<li>web开发中操作资源，最常见的最通用的无非就是增删查改，所以restful要求在地址栏中声明要操作的资源是什么。然后通过<strong>http请求动词</strong>来说明对该资源进行哪一种操作</li>
</ul>
<blockquote>
<p>POST http://www.xxx.com/api/students/   —&gt;  添加学生数据</p>
<p>GET http://www.xxx.com/api/students/   —&gt;  获取所有学生</p>
<p>GET http://www.xxx.com/api/students/<pk>/   —&gt;  获取id=pk的学生</p>
<p>DELETE http://www.xxx.com/api/students/<pk>/   —&gt;  删除id=pk的一个学生</p>
<p>PUT http://www.xxx.com/api/students/<pk>/   —&gt;  修改一个学生的全部信息 [id,name,sex,age,]</p>
<p>PATCH http://www.xxx.com/api/students/<pk>/   —&gt;  修改一个学生的部分信息[age]</p>
</blockquote>
<p>也就是说，我们仅需要通过url地址上的资源名称结合HTTP请求动作，就可以说明当前api接口的功能是什么了。</p>
<p>RPC动作为主的api接口规范，体现在接口名称上往往附带操作数据的动作。</p>
<p>Restful是以资源为主的api接口规范，体现在地址上就是资源就是以名词表达。</p>
<p>总结概括：增删改查查</p>
<h3 id="3-restful-api">3 RESTful API规范<a class="headerlink" href="#3-restful-api" title="Permanent link">&para;</a></h3>
<p><img alt="restful" src="restful.gif" /> </p>
<p>REST全称是Representational State Transfer，中文意思是表述（编者注：通常译为表征）性状态转移。 它首次出现在2000年Roy Fielding的博士论文中。</p>
<p>RESTful是一种专门为Web 开发而定义API接口的设计风格，尤其适用于前后端分离的应用模式中。</p>
<p>这种风格的理念认为后端开发任务就是提供数据的，对外提供的是数据资源的访问接口，所以在定义接口时，客户端访问的URL路径就表示这种要操作的数据资源。</p>
<p>而对于数据资源分别使用POST、DELETE、GET、UPDATE等请求动作来表达对数据的增删查改。</p>
<h4 id="31-restful">3.1 restful规范<a class="headerlink" href="#31-restful" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th style="text-align: left;">GET</th>
<th style="text-align: left;">/students</th>
<th style="text-align: left;">获取所有学生</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">请求方法</td>
<td style="text-align: left;">请求地址</td>
<td style="text-align: left;">后端操作</td>
</tr>
<tr>
<td style="text-align: left;">POST</td>
<td style="text-align: left;">/students</td>
<td style="text-align: left;">增加学生</td>
</tr>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;">/students/</td>
<td style="text-align: left;">获取编号为pk的学生</td>
</tr>
<tr>
<td style="text-align: left;">PUT</td>
<td style="text-align: left;">/students/</td>
<td style="text-align: left;">修改编号为pk的学生</td>
</tr>
<tr>
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">/students/</td>
<td style="text-align: left;">删除编号为pk的学生</td>
</tr>
</tbody>
</table>
<p>restful规范是一种通用的规范，不限制语言和开发框架的使用。事实上，我们可以使用任何一门语言，任何一个框架都可以实现符合restful规范的API接口。</p>
<p>参考文档：http://www.runoob.com/w3cnote/restful-architecture.html</p>
<h4 id="32">3.2 幂等性<a class="headerlink" href="#32" title="Permanent link">&para;</a></h4>
<p>接口实现过程中，会存在<strong>幂等性</strong>。所谓幂等性是指代<strong>客户端发起多次同样请求时，是否对于服务端里面的资源产生不同结果</strong>。如果<strong>多次请求</strong>，服务端<strong>结果</strong>还是<strong>一样</strong>，则属于<strong>幂等接口</strong>，如果多次请求，服务端产生结果是不一样的，则属于<strong>非幂等接口</strong>。</p>
<table>
<thead>
<tr>
<th style="text-align: left;">请求方式</th>
<th style="text-align: left;">是否幂等</th>
<th style="text-align: left;">是否安全</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">GET</td>
<td style="text-align: left;">幂等</td>
<td style="text-align: left;">安全</td>
</tr>
<tr>
<td style="text-align: left;">POST</td>
<td style="text-align: left;">不幂等</td>
<td style="text-align: left;">不安全</td>
</tr>
<tr>
<td style="text-align: left;">PUT/PATCH</td>
<td style="text-align: left;">幂等</td>
<td style="text-align: left;">不安全</td>
</tr>
<tr>
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">幂等</td>
<td style="text-align: left;">不安全</td>
</tr>
</tbody>
</table>
<h4 id="33">3.3 序列化<a class="headerlink" href="#33" title="Permanent link">&para;</a></h4>
<p>api接口开发，最核心最常见的一个代码编写过程就是序列化，所谓序列化就是把<strong>数据转换格式</strong>。</p>
<p>常见的序列化方式：json，pickle，base64，….</p>
<p>序列化可以分两个阶段：</p>
<p>​   <strong>序列化</strong>： 把我们识别的数据转换成指定的格式提供给别人。例如：我们在django中获取到的数据默认是模型对象，但是模型对象数据无法直接提供给前端或别的平台使用，所以我们需要把数据进行序列化，变成字符串或者json数据，提供给别人。</p>
<p>​   <strong>反序列化</strong>：把别人提供的数据转换/还原成我们需要的格式。例如：前端js提供过来的json数据，对于python而言json就是字符串，我们需要进行反序列化换成字典，然后接着字典再进行转换成模型对象，这样我们才能把数据保存到数据库中。</p>
<p><img alt="image-20210826145519130" src="image-20210826145519130-16318493451108.png" /> </p>
<h2 id="fastapi">八、FastAPI请求接口<a class="headerlink" href="#fastapi" title="Permanent link">&para;</a></h2>
<h3 id="1_2">1 支持的请求方式<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">put</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">patch</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">trace</span><span class="p">()</span>
</code></pre></div>
<h3 id="2_1">2 路径参数<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/items/</span><span class="si">{item_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">Item</span><span class="p">,</span>
    <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AAA&quot;</span><span class="p">],</span>
    <span class="n">summary</span><span class="o">=</span><span class="s2">&quot;this is summary&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;this is description&quot;</span><span class="p">,</span>
    <span class="n">response_description</span><span class="o">=</span> <span class="s2">&quot;this is response_description&quot;</span><span class="p">,</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="3-include_router">3 路由组(include_router)<a class="headerlink" href="#3-include_router" title="Permanent link">&para;</a></h3>
<ul>
<li>main.py</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">apps</span><span class="w"> </span><span class="kn">import</span> <span class="n">app01</span><span class="p">,</span> <span class="n">app02</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">app01</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/app01&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;第一章节：商城接口&quot;</span><span class="p">,</span> <span class="p">])</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">app02</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/app02&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;第二章节：用户中心接口&quot;</span><span class="p">,</span> <span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;main:app&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>app01..py</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>

<span class="n">app01</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">()</span>

<span class="nd">@app01</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/shop/food&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">shop_food</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;shop&quot;</span><span class="p">:</span> <span class="s2">&quot;food&quot;</span><span class="p">}</span>

<span class="nd">@app01</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/shop/bed&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">shop_food</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;shop&quot;</span><span class="p">:</span> <span class="s2">&quot;bed&quot;</span><span class="p">}</span>
</code></pre></div>
- app02..py</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>

<span class="n">app02</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">()</span>

<span class="nd">@app02</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/user/login&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">user_login</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;login&quot;</span><span class="p">}</span>

<span class="nd">@app02</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/user/reg&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">user_reg</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;reg&quot;</span><span class="p">}</span>
</code></pre></div>
<h2 id="app">九、工厂函数创建app<a class="headerlink" href="#app" title="Permanent link">&para;</a></h2>
<ul>
<li>main.py</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">服务启动命令：uvicorn main:app --reload</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>  <span class="c1"># noqa</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.middleware.cors</span><span class="w"> </span><span class="kn">import</span> <span class="n">CORSMiddleware</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">app.api.v1</span><span class="w"> </span><span class="kn">import</span> <span class="n">index</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">file</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.core.http_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">lifespan</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_app</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FastAPI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    创建 FastAPI 应用实例</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;FastAPI 模块化项目示例&quot;</span><span class="p">,</span>
        <span class="n">lifespan</span><span class="o">=</span><span class="n">lifespan</span>
    <span class="p">)</span>

    <span class="c1"># 注册路由 -路由组配置</span>
    <span class="n">routers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;/home&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;首页&quot;</span><span class="p">]})</span>
        <span class="p">],</span>
        <span class="s2">&quot;/api/v1&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;项目管理&quot;</span><span class="p">]}),</span>
            <span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;版本管理&quot;</span><span class="p">]}),</span>
            <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;文件管理&quot;</span><span class="p">]}),</span>
        <span class="p">],</span>
        <span class="c1"># &quot;/api/v2&quot;:[]</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">routers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">router</span><span class="p">,</span> <span class="n">tags</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>

    <span class="c1"># 允许多个源</span>
    <span class="n">origins</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;http://localhost:9008&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
        <span class="n">CORSMiddleware</span><span class="p">,</span>
        <span class="n">allow_origins</span><span class="o">=</span><span class="n">origins</span><span class="p">,</span>
        <span class="n">allow_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">allow_methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">],</span>
        <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span>
    <span class="n">port</span> <span class="o">=</span> <span class="mi">9777</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;文档地址：http://127.0.0.1:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/docs&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;首页地址：http://127.0.0.1:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">/home/index/&quot;</span><span class="p">)</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;main:app&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">9777</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="_4">十、路径参数<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<ul>
<li>需要使用括号：{} 将变量包裹起来</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># _*_ coding: utf-8 _*_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/user&quot;</span><span class="p">)</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/1&quot;</span><span class="p">)</span>  <span class="c1"># 有的场景可能需要：个别路由优先级 &gt; 路径参数路由，此时需要写在前面才会优先匹配</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;获取用户信息&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>  <span class="c1"># 同名变量，且注解为int类型，会自动转为int类型</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;获取用户信息&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;张三&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">}</span>
</code></pre></div>
<ul>
<li>工厂函数需要注册对应的路由分发实例</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># 注册路由 -路由组配置</span>
<span class="n">routers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;/home&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;首页&quot;</span><span class="p">]})</span>
    <span class="p">],</span>
    <span class="s2">&quot;/api/v1&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;项目管理&quot;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;版本管理&quot;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;文件管理&quot;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">router</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;用户管理&quot;</span><span class="p">]})</span>  <span class="c1"># 新增用户路由配置</span>
    <span class="p">],</span>
    <span class="c1"># &quot;/api/v2&quot;:[]</span>
<span class="p">}</span>
<span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">routers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">router</span><span class="p">,</span> <span class="n">tags</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">router</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
</code></pre></div>
<h2 id="_5">十一、字符串查询参数<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="1_3">1 参数定义<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h3>
<p>定义接口函数时，如果没有设置路径参数，但在接口函数定义了其他参数，那么其他参数将会自动识别为字符穿查询参数</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span>  <span class="c1"># noqa</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">APIRouter</span><span class="p">,</span> <span class="n">Depends</span>  <span class="c1"># noqa</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">d</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;获取用户信息&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">c</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="n">e</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div>
<ul>
<li>Union：具体联合类型（不可省略None类型）</li>
<li>Optional：可省略None类型填写，自动包含</li>
</ul>
<h3 id="2-pydantic">2 结合Pydantic包定义<a class="headerlink" href="#2-pydantic" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserInfoQuery</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">c</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">d</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">e</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">UserInfoQuery</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;获取用户信息&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">a</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">c</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">e</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">e</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">a</span><span class="p">,</span>
        <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">b</span><span class="p">,</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">c</span><span class="p">,</span>
        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">d</span><span class="p">,</span>
        <span class="s2">&quot;e&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">e</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div>
<p>这种方式定义接口，默认就使用json格式接收数据：</p>
<p><img alt="image-20251028220030633" src="image-20251028220030633.png" /> </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../static/javascripts/collapsible.js"></script>
      
    
  </body>
</html>