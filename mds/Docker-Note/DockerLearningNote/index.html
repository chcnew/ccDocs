
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="个人学习记录的知识笔记">
      
      
        <meta name="author" content="HC">
      
      
        <link rel="canonical" href="https://chcnew.github.io/ccDocs/mds/Docker-Note/DockerLearningNote/">
      
      
        <link rel="prev" href="../../Vue3-Note/Vue3%2BTS%2BPnpm-Note/">
      
      
        <link rel="next" href="../DockerVMLocalTest/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Docker-Note - CC学习文档库</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../static/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dockerlearningnote" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="CC学习文档库" class="md-header__button md-logo" aria-label="CC学习文档库" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m99.3 256.1 69.4-119.9c-5.6-12.2-8.8-25.8-8.8-40.2 0-53 43-96 96-96s96 43 96 96c0 14.3-3.1 27.9-8.8 40.2l44.4 76.7c-23.1 26-53.7 45.1-88.4 53.8L256 191.9l-68.1 117.6c21.5 6.8 44.3 10.5 68.1 10.5 70.7 0 133.8-32.7 174.9-84 11.1-13.8 31.2-16 45-5s16 31.2 5 45C428.2 341.8 347 384 256.1 384c-35.4 0-69.4-6.4-100.7-18.1l-56.7 97.8c-4.7 8.1-11.7 14.7-20.1 18.9l-55.4 27.7c-5 2.5-10.9 2.2-15.6-.7S0 501.5 0 496v-55.4c0-8.4 2.2-16.7 6.5-24.1l60-103.7c-12.8-11.2-24.6-23.5-35.3-36.8-11.1-13.8-8.8-33.9 5-45s33.9-8.8 45 5c5.7 7.1 11.8 13.8 18.2 20.1zm281.8 151.8c32.5-13 62.4-31 88.9-52.9l35.6 61.5c4.2 7.3 6.5 15.6 6.5 24.1V496c0 5.5-2.9 10.7-7.6 13.6s-10.6 3.2-15.6.7l-55.4-27.7c-8.4-4.2-15.4-10.8-20.1-18.9zM256 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CC学习文档库
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker-Note
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-tabs__link">
          
  
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/" class="md-tabs__link">
          
  
  
  Golang

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Vue3-Note/vue3-%E5%85%A5%E9%97%A8/" class="md-tabs__link">
          
  
  
  Vue3

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Docker

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" class="md-tabs__link">
          
  
  
  DataBase

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="md-tabs__link">
          
  
  
  LinuxEnvConf

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/" class="md-tabs__link">
          
  
  
  Others

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CC学习文档库" class="md-nav__button md-logo" aria-label="CC学习文档库" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m99.3 256.1 69.4-119.9c-5.6-12.2-8.8-25.8-8.8-40.2 0-53 43-96 96-96s96 43 96 96c0 14.3-3.1 27.9-8.8 40.2l44.4 76.7c-23.1 26-53.7 45.1-88.4 53.8L256 191.9l-68.1 117.6c21.5 6.8 44.3 10.5 68.1 10.5 70.7 0 133.8-32.7 174.9-84 11.1-13.8 31.2-16 45-5s16 31.2 5 45C428.2 341.8 347 384 256.1 384c-35.4 0-69.4-6.4-100.7-18.1l-56.7 97.8c-4.7 8.1-11.7 14.7-20.1 18.9l-55.4 27.7c-5 2.5-10.9 2.2-15.6-.7S0 501.5 0 496v-55.4c0-8.4 2.2-16.7 6.5-24.1l60-103.7c-12.8-11.2-24.6-23.5-35.3-36.8-11.1-13.8-8.8-33.9 5-45s33.9-8.8 45 5c5.7 7.1 11.8 13.8 18.2 20.1zm281.8 151.8c32.5-13 62.4-31 88.9-52.9l35.6 61.5c4.2 7.3 6.5 15.6 6.5 24.1V496c0 5.5-2.9 10.7-7.6 13.6s-10.6 3.2-15.6.7l-55.4-27.7c-8.4-4.2-15.4-10.8-20.1-18.9zM256 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64"/></svg>

    </a>
    CC学习文档库
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并发编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    异步编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/DRF-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DRF框架
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/celery-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    celery-Note
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    django项目部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/FastAPI-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FastAPI-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Golang
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Golang
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoLang-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vue3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Vue3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/vue3-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vue3-入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vue3-组合式API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Vue3-Note/Vue3%2BTS%2BPnpm-Note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vue3+TS+Pnpm-Note
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Docker-Note
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Docker-Note
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一、虚拟化技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、虚拟化技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1.了解虚拟化技术
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2.常见的虚拟化技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.常见的虚拟化技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-xen" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Xen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-vmware" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 VMWare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      二、Docker介绍
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、Docker介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1dockerhttpshubdockercom" class="md-nav__link">
    <span class="md-ellipsis">
      1.Docker官方仓库：**https://hub.docker.com/
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2docker" class="md-nav__link">
    <span class="md-ellipsis">
      2.Docker相关组件：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3docker" class="md-nav__link">
    <span class="md-ellipsis">
      3.Docker 镜像化方式与应用共存
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerlinux-ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      三、Docker安装linux ubuntu版本
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、Docker安装linux ubuntu版本">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1vmwareubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      1.VMware安装ubuntu服务器版
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.VMware安装ubuntu服务器版">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 安装过程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-ifconfig" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 ifconfig使用，需要安装相关工具包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-root" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 开启root用户及关闭
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 ssh连接
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-ubuntu2204ip" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 ubuntu22.04配置静态ip
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2ubuntudocker" class="md-nav__link">
    <span class="md-ellipsis">
      2.Ubuntu服务器版安装Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      四、Docker镜像加速配置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    <span class="md-ellipsis">
      五、Docker化应用程序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、Docker化应用程序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      1.docker run命令解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2run" class="md-nav__link">
    <span class="md-ellipsis">
      2.下载镜像具体应用run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    <span class="md-ellipsis">
      六、Docker单容器管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、Docker单容器管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker" class="md-nav__link">
    <span class="md-ellipsis">
      1.Docker基础常用命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2.嵌套使用删除容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.容器更多相关命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      4.docker run命令的延伸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5docker" class="md-nav__link">
    <span class="md-ellipsis">
      5.docker其他命令集合
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    <span class="md-ellipsis">
      七、Docker镜像特性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    <span class="md-ellipsis">
      八、Docker镜像构建（容器转为镜像）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、Docker镜像构建（容器转为镜像）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.容器转为镜像
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2dokcerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.DokcerFile脚本构建镜像
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.DokcerFile脚本构建镜像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 DockerFile命令构建
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 DockerFile指令说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 DockerFile指令说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    <span class="md-ellipsis">
      FROM ：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintainer" class="md-nav__link">
    <span class="md-ellipsis">
      MAINTAINER：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    <span class="md-ellipsis">
      RUN：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd" class="md-nav__link">
    <span class="md-ellipsis">
      CMD：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entrypoint" class="md-nav__link">
    <span class="md-ellipsis">
      ENTRYPOINT：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user" class="md-nav__link">
    <span class="md-ellipsis">
      USER：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expose" class="md-nav__link">
    <span class="md-ellipsis">
      EXPOSE：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    <span class="md-ellipsis">
      ENV：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add" class="md-nav__link">
    <span class="md-ellipsis">
      ADD：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy" class="md-nav__link">
    <span class="md-ellipsis">
      COPY：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    <span class="md-ellipsis">
      VOLUME：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workdir" class="md-nav__link">
    <span class="md-ellipsis">
      WORKDIR：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onbuild" class="md-nav__link">
    <span class="md-ellipsis">
      ONBUILD：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dockerfiletomcat" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DockerFile构建tomcat镜像示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rootdownloads" class="md-nav__link">
    <span class="md-ellipsis">
      下载至/root/downloads：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      DockerFile写入内容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      构建镜像处理过程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DockerVMLocalTest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker本地测试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DockerCSERVER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker容器化部署
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    DataBase
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            DataBase
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MySQL优化实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MongoDB-入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SqlAlchemyStudy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PyMySQLStudy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RedisStdudy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LinuxEnvConf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            LinuxEnvConf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx配置文件
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    http协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    uwsgi+nginx两种协议代理配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一、虚拟化技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、虚拟化技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1.了解虚拟化技术
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2.常见的虚拟化技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.常见的虚拟化技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-xen" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Xen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-vmware" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 VMWare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      二、Docker介绍
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、Docker介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1dockerhttpshubdockercom" class="md-nav__link">
    <span class="md-ellipsis">
      1.Docker官方仓库：**https://hub.docker.com/
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2docker" class="md-nav__link">
    <span class="md-ellipsis">
      2.Docker相关组件：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3docker" class="md-nav__link">
    <span class="md-ellipsis">
      3.Docker 镜像化方式与应用共存
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerlinux-ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      三、Docker安装linux ubuntu版本
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、Docker安装linux ubuntu版本">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1vmwareubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      1.VMware安装ubuntu服务器版
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.VMware安装ubuntu服务器版">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 安装过程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-ifconfig" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 ifconfig使用，需要安装相关工具包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-root" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 开启root用户及关闭
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 ssh连接
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-ubuntu2204ip" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 ubuntu22.04配置静态ip
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2ubuntudocker" class="md-nav__link">
    <span class="md-ellipsis">
      2.Ubuntu服务器版安装Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      四、Docker镜像加速配置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    <span class="md-ellipsis">
      五、Docker化应用程序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、Docker化应用程序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      1.docker run命令解析
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2run" class="md-nav__link">
    <span class="md-ellipsis">
      2.下载镜像具体应用run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    <span class="md-ellipsis">
      六、Docker单容器管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、Docker单容器管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1docker" class="md-nav__link">
    <span class="md-ellipsis">
      1.Docker基础常用命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2.嵌套使用删除容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.容器更多相关命令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      4.docker run命令的延伸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5docker" class="md-nav__link">
    <span class="md-ellipsis">
      5.docker其他命令集合
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    <span class="md-ellipsis">
      七、Docker镜像特性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    <span class="md-ellipsis">
      八、Docker镜像构建（容器转为镜像）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、Docker镜像构建（容器转为镜像）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.容器转为镜像
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2dokcerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.DokcerFile脚本构建镜像
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.DokcerFile脚本构建镜像">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 DockerFile命令构建
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 DockerFile指令说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 DockerFile指令说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    <span class="md-ellipsis">
      FROM ：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintainer" class="md-nav__link">
    <span class="md-ellipsis">
      MAINTAINER：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    <span class="md-ellipsis">
      RUN：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd" class="md-nav__link">
    <span class="md-ellipsis">
      CMD：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entrypoint" class="md-nav__link">
    <span class="md-ellipsis">
      ENTRYPOINT：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user" class="md-nav__link">
    <span class="md-ellipsis">
      USER：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expose" class="md-nav__link">
    <span class="md-ellipsis">
      EXPOSE：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    <span class="md-ellipsis">
      ENV：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add" class="md-nav__link">
    <span class="md-ellipsis">
      ADD：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy" class="md-nav__link">
    <span class="md-ellipsis">
      COPY：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    <span class="md-ellipsis">
      VOLUME：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workdir" class="md-nav__link">
    <span class="md-ellipsis">
      WORKDIR：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onbuild" class="md-nav__link">
    <span class="md-ellipsis">
      ONBUILD：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dockerfiletomcat" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DockerFile构建tomcat镜像示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rootdownloads" class="md-nav__link">
    <span class="md-ellipsis">
      下载至/root/downloads：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      DockerFile写入内容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      构建镜像处理过程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="dockerlearningnote">DockerLearningNote<a class="headerlink" href="#dockerlearningnote" title="Permanent link">&para;</a></h1>
<p>Learning is like sailing against the current; if you do not advance, you will retreat.</p>
<h2 id="_1">一、虚拟化技术<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="1">1.了解虚拟化技术<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>什么是虚拟化
  虚拟化，是指通过虚拟化技术将一台计算机虚拟为多台逻辑计算机。在一台计算机上同时运行多个逻辑计算机，每个逻辑计算机可运行不同的操作系统，并且应用程序都可以在相互独立的空间内运行而互不影响，从而显著提高计算机的工作效率。</p>
</li>
<li>
<p>什么是虚拟化技术
  虚拟化技术是一套解决方案。完整的情况需要CPU、主板芯片组、BIOS和软件的支持，例如VMM软件或者某些操作系统本身。即使只是CPU支持虚拟化技术，在配合VMM的软件情况下，也会比完全不支持虚拟化技术的系统有更好的性能。</p>
</li>
<li>
<p>虚拟化的类型
  全虚拟化（Full Virtualization)
  全虚拟化也成为原始虚拟化技术，该模型使用虚拟机协调guest操作系统和原始硬件，VMM在guest操作系统和裸硬件之间用于工作协调，一些受保护指令必须由Hypervisor（虚拟机管理程序）来捕获处理。全虚拟化的运行速度要快于硬件模拟，但是性能方面不如裸机。</p>
</li>
<li>
<p>半虚拟化（Para Virtualization）
  半虚拟化是另一种类似于全虚拟化的技术，它使用Hypervisor分享存取底层的硬件，但是它的guest操作系统集成了虚拟化方面的代码。该方法无需重新编译或引起陷阱，因为操作系统自身能够与虚拟进程进行很好的协作。半虚拟化需要guest操作系统做一些修改，使guest操作系统意识到自己是处于虚拟化环境的，但是半虚拟化提供了与原操作系统相近的性能。</p>
</li>
</ul>
<h3 id="2">2.常见的虚拟化技术<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<h4 id="21-kvm">2.1 KVM<a class="headerlink" href="#21-kvm" title="Permanent link">&para;</a></h4>
<p>KVM是指基于Linux内核（Kernel-based）的虚拟机（Virtual Machine）。也有人将KVM架构分解为两部分：KVM驱动，即linux kernel的一个模块和Qemu，即用于模拟虚拟机的用户空间组件，提供I/O设备模型，访问外设的途径。KVM最大的好处就在于它是与Linux内核集成的，所以速度很快。KVM的宿主操作系统必须是Linux，支持的客户机操作系统包括Linux、Windows、Solaris和BSD，运行在支持虚拟化扩展的x86和x86_64硬件架构上,cpu支持VT技术。KVM是一套虚拟化解决方案，不过因为这个方案实际上只实现了内核中对处理器(Intel VT, AMDSVM)虚拟化特性的支持，它缺乏设备虚拟化以及相应的用户空间管理虚拟机的工具，而Qemu是一套独立的虚拟化解决方案，KVM借用了QEMU的代码并加以精简，连同KVM一起构成了另一个独立的虚拟化解决方案，不妨称之为：KVM+QEMU。</p>
<h4 id="22-xen">2.2 Xen<a class="headerlink" href="#22-xen" title="Permanent link">&para;</a></h4>
<p>Xen是另一套独立的虚拟化解决方案，最初的Xen只支持半虚拟化，Intel VT技术出现后，添加了全虚拟化功能，这个全虚拟化功能也是借助了qemu实现，但不是完全依赖qemu。Xen是一个开放源代码虚拟机监视器，由剑桥大学开发。Xen的缺点是操作系统必须进行显式地修改（“移植”）以在Xen上运行（但是提供对用户应用的兼容性），所以比较麻烦。使得Xen无需特殊硬件支持，就能达到高性能的虚拟化。Linux的官方内核在较早之前已经去掉了对Xen的支持。</p>
<h4 id="23-vmware">2.3 VMWare<a class="headerlink" href="#23-vmware" title="Permanent link">&para;</a></h4>
<p>VMWare (Virtual Machine ware)是一个“虚拟PC”虚拟机管理软件。它的产品可以使你在一台机器上同时运行二个或更多Windows、DOS、LINUX系统。与“多启动”系统相比，VMWare采用了完全不同的概念。多启动系统在一个时刻只能运行一个系统，在系统切换时需要重新启动机器。VMWare是真正“同时”运行，多个操作系统在主系统的平台上，就象标准Windows应用程序那样切换。而且每个操作系统你都可以进行虚拟的分区、配置而不影响真实硬盘的数据，你甚至可以通过网卡将几台虚拟机用网卡连接为一个局域网，极其方便。安装在VMware操作系统性能上比直接安装在硬盘上的系统低不少，因此，比较适合学习和测试。</p>
<p>KVM、Xen、VMWare的对比如下表所示：</p>
<table>
<thead>
<tr>
<th>是否开源</th>
<th>是否免费</th>
<th>性能</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>KVM</td>
<td>是</td>
<td>是</td>
<td>高</td>
<td>1.KVM是内核本身的一部分，因此可以利用内核的优化和改进。2.高性能,稳定,无需修改客户机系统。3.开源、免费</td>
</tr>
<tr>
<td>XEN</td>
<td>是</td>
<td>是</td>
<td>高</td>
<td>1.性能较好。2.开源、免费、操作复杂，维护成本较高，目前已被RedHat抛弃</td>
</tr>
<tr>
<td>VMWare</td>
<td>否</td>
<td>否</td>
<td>一般</td>
<td>相对比较成熟的商业软件，市场占有率较大，不开源，需要付费</td>
</tr>
</tbody>
</table>
<p>Docker与传统虚拟机的比较：
  所有的应用程序都有自己的依赖关系，其中包括软件和硬件资源。 Docker是开发者的开放平台，通过将每个应用程序打包到容器中来隔离依赖关系。容器就像是轻量级的虚拟机，可以扩展到成千上万的节点，通过在不同虚拟环境中运行相同应用程序来帮助提升云的可移植性。虚拟机广泛用于云计算，通过使用虚拟机来实现隔离和资源控制。 虚拟机使用自己的内存管理加载完整的操作系统，使应用程序更加高效和安全，同时确保其高可用性。</p>
<p>Docker容器与虚拟机有什么不同？ 
  虚拟机具有完整的操作系统，其自身的内存管理通过相关的虚拟设备进行支持。 在虚拟机中，为用户操作系统和虚拟机管理程序分配有效的资源，从而可以在单台计算机（或主机）上并行运行一个或多个操作系统的多个实例。 每个客户操作系统都作为主机系统中的单个实体运行。 
  另一方面，Docker容器是使用Docker引擎而不是管理程序来执行的。 因此容器比虚拟机小，并且由于主机内核的共享，可以更快地启动，具有更好的性能，更少的隔离和更好的兼容性。 Docker容器能够共享一个内核并共享应用程序库，因此容器比虚拟机具有更低的系统开销，只要用户愿意使用单一平台来提供共享的操作系统，容器可以更快，更少资源。虚拟机可能需要几分钟才能创建并启动，而只需几秒钟即可创建并启动一个容器。与在虚拟机中运行应用程序相比，容器中包含的应用程序提供了卓越的性能。 
  Docker容器比虚拟机弱的一个关键指标就是“隔离”。英特尔的VT-d和VT-x技术为虚拟机提供了ring-1硬件隔离技术，因此虚拟机可以充分利用它的优势。它可以帮助虚拟机器高效使用资源和防止相互干扰。 Docker容器还没有任何形式的硬件隔离，因此它们容易受到攻击。</p>
<p>如何进行进行选择？ 
  选择容器还是虚拟机依赖于应用程序如何设计。 如果应用程序旨在提供可伸缩性和高可用性，那么容器是最好的选择，否则应用程序可以放置在虚拟机中。对于高I/O要求的业务，例如数据库服务，建议部署Docker+物理机，因为在虚拟机中部署Docker，I/O性能将受到虚拟机的限制。对于虚拟桌面服务等强调租户权限和安全的业务，建议采用虚拟机方式，虚拟机的多租户强隔离特性，保证租户在拥有虚机root权限的同时，其他租户和主机的安全。 
  或者更好的选择是混合方案，运行在虚拟机中的容器。 Docker容器可以在虚拟机内部运行，虚拟机并为它们提供经过验证的隔离，安全属性，移动性，动态虚拟网络等。为实现安全隔离和资源的高利用率，基本应该遵循：不同租户的业务运行采用虚拟机隔离，相似类型的业务部署在同一组容器上的思路。</p>
<p>结论
  Docker容器正在成为DevOps环境中的一个重要工具。 DevOps领域内的Docker Containers的用例非常多。在Docker容器上运行应用程序，然后在任何地方部署（Cloud或内部部署或任何Linux的风格）现在都已成为现实。 
  在异构环境中工作，虚拟机提供了高度的灵活性，而Docker容器主要关注应用程序及其依赖关系。Docker Containers允许通过使用每个云的虚拟机环境来处理云，从而轻松移植跨云的应用程序堆栈。这代表了一个有用的功能，在没有Docker Containers的情况下，必须以更加复杂和乏味的方式来实现。这里阐述的并不是关于放弃虚拟机，而是在必要时除了虚拟机之外，根据实际情况使用Docker容器，不认为Docker容器可以完全清除虚拟机。</p>
<h2 id="docker">二、Docker介绍<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h2>
<p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从Apache2.0协议开源。
Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。
容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。
Docker 从 17.03 版本之后分为 CE（Community Edition: 社区版） 和 EE（Enterprise Edition: 企业版），对于我们的学习使用社区版就可以了。</p>
<h3 id="1dockerhttpshubdockercom">1.Docker官方仓库：**<a href="https://hub.docker.com/">https://hub.docker.com/</a><a class="headerlink" href="#1dockerhttpshubdockercom" title="Permanent link">&para;</a></h3>
<h3 id="2docker">2.Docker相关组件：<a class="headerlink" href="#2docker" title="Permanent link">&para;</a></h3>
<p>Docker Client - Docker客户端</p>
<p>Docker Server - Docker daemon主要组成部分，接受用户通过Docker Client发送的请求，并且按照相应的路由规则实现路由分发。</p>
<p>Docker 镜像 - Docker镜像运行之后变为容器(docker run)</p>
<p>组件间的协作方式：</p>
<p>​   <img alt="image-20221009235132817" src="../DockerLearningNote.assets/image-20221009235132817.png" /> </p>
<h3 id="3docker">3.Docker 镜像化方式与应用共存<a class="headerlink" href="#3docker" title="Permanent link">&para;</a></h3>
<p>设计引入：</p>
<p>​   <img alt="image-20221010004115310" src="../DockerLearningNote.assets/image-20221010004115310.png" /> </p>
<p>改进设计：</p>
<p>​   <img alt="image-20221010004045870" src="../DockerLearningNote.assets/image-20221010004045870.png" /> </p>
<p>分层设计（如LAMP配置，各占一层，更新版本直接层级替换即可。）：</p>
<p>​   <img alt="image-20221010004157001" src="../DockerLearningNote.assets/image-20221010004157001.png" /> </p>
<h2 id="dockerlinux-ubuntu">三、Docker安装linux ubuntu版本<a class="headerlink" href="#dockerlinux-ubuntu" title="Permanent link">&para;</a></h2>
<p>Docker支持linux\windows\mac三种版本安装</p>
<h3 id="1vmwareubuntu">1.VMware安装ubuntu服务器版<a class="headerlink" href="#1vmwareubuntu" title="Permanent link">&para;</a></h3>
<h4 id="11">1.1 安装过程<a class="headerlink" href="#11" title="Permanent link">&para;</a></h4>
<p>前面配置就选择稍后安装操作系统...直至这里选择系统路径...</p>
<p><img alt="image-20221010183056256" src="../DockerLearningNote.assets/image-20221010183056256.png" /> </p>
<p><img alt="image-20221010183141189" src="../DockerLearningNote.assets/image-20221010183141189.png" /> </p>
<p>选择语言，没有中文，选择英语吧</p>
<p><img alt="image-20221010183239667" src="../DockerLearningNote.assets/image-20221010183239667.png" /> </p>
<p><img alt="image-20221010184210271" src="../DockerLearningNote.assets/image-20221010184210271.png" /> </p>
<p>安装ssh服务</p>
<p><img alt="image-20221010184531031" src="../DockerLearningNote.assets/image-20221010184531031.png" /> </p>
<p>配置第三方源：什么都不选，直接Done</p>
<p><img alt="image-20221010184609483" src="../DockerLearningNote.assets/image-20221010184609483.png" /> </p>
<p>安装完成，由于安装的是server版本，安装速度非常块，之后选择【Cancel update and reboot】“取消更新并重新启动”.。</p>
<p><img alt="image-20221010184743814" src="../DockerLearningNote.assets/image-20221010184743814.png" /> </p>
<p>安装完成，这里需要一点时间等待自动重启...</p>
<p><img alt="image-20221010185042959" src="../DockerLearningNote.assets/image-20221010185042959.png" /></p>
<p>出现错误！这是由于重启，任然加载iso文件导致，关闭虚拟机，不加载iso文件就好了。</p>
<p><img alt="image-20221010185540965" src="../DockerLearningNote.assets/image-20221010185540965.png" />  </p>
<p>重启后首次需要点击回车进入系统；</p>
<p>登录用户名和密码，输入我们设置的用户名密码（注：密码输入是隐式输入，不会显示）</p>
<p><img alt="image-20221010190004064" src="../DockerLearningNote.assets/image-20221010190004064.png" /> </p>
<p><img alt="image-20221010190447928" src="../DockerLearningNote.assets/image-20221010190447928.png" /> </p>
<h4 id="12-ifconfig">1.2 ifconfig使用，需要安装相关工具包<a class="headerlink" href="#12-ifconfig" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>net-tools
</code></pre></div>
<h4 id="13-root">1.3 开启root用户及关闭<a class="headerlink" href="#13-root" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code># 设置密码即开启root用户
sudo passwd root

# 删除密码即关闭root用户
sudo passwd -dl root
</code></pre></div>
<p>说明：ubuntu虽然开启root账户，但是ssh仍然不支持连接！只能本地切换；如需连接，需要配置相关文件。</p>
<h4 id="14-ssh">1.4 ssh连接<a class="headerlink" href="#14-ssh" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>chcnew@192.168.127.xxx
</code></pre></div>
<p>设置root开启ssh连接：</p>
<div class="highlight"><pre><span></span><code>vim<span class="w"> </span>/etc/ssh/sshd_config

<span class="c1"># 我们发现line  #PermitRootLogin prohibit-password</span>

<span class="c1"># 更改内容 </span>
PermitRootLogin<span class="w"> </span>yes

<span class="c1"># 保存后退出</span>
Esc<span class="w"> </span>+<span class="w"> </span>wq

<span class="c1"># 接下来重启ssh服务</span>
service<span class="w"> </span>ssh<span class="w"> </span>restart
</code></pre></div>
<h4 id="15-ubuntu2204ip">1.5 ubuntu22.04配置静态ip<a class="headerlink" href="#15-ubuntu2204ip" title="Permanent link">&para;</a></h4>
<p>安装相关服务：</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>network-manager
cat<span class="w"> </span>/etc/netplan/00-installer-config.yaml

<span class="c1"># 原本配置内容</span>
<span class="c1"># This is the network config written by &#39;subiquity&#39;</span>
network:
<span class="w">  </span>ethernets:
<span class="w">    </span>ens33:
<span class="w">      </span>dhcp4:<span class="w"> </span><span class="nb">true</span>
<span class="w">  </span>version:<span class="w"> </span><span class="m">2</span>
</code></pre></div>
<p>修改网络配置：</p>
<div class="highlight"><pre><span></span><code>network:
<span class="w">  </span>version:<span class="w"> </span><span class="m">2</span>
<span class="w">  </span>renderer:<span class="w"> </span>NetworkManager<span class="w">  </span><span class="c1"># 渲染器</span>
<span class="w">  </span>ethernets:
<span class="w">    </span>ens33:<span class="w">  </span><span class="c1"># 网卡名称</span>
<span class="w">      </span>dhcp4:<span class="w"> </span>no<span class="w">  </span><span class="c1"># 关闭dhcp4</span>
<span class="w">      </span>dhcp6:<span class="w"> </span>no<span class="w">  </span><span class="c1"># 关闭dhcp6</span>
<span class="w">      </span>addresses:<span class="w"> </span><span class="o">[</span><span class="m">192</span>.168.127.150/24<span class="o">]</span><span class="w">  </span><span class="c1"># 静态ip</span>
<span class="w">      </span>gateway4:<span class="w"> </span><span class="m">192</span>.168.127.2<span class="w">  </span><span class="c1"># 网关</span>
<span class="w">      </span>nameservers:
<span class="w">        </span>addresses:<span class="w"> </span><span class="o">[</span><span class="m">192</span>.168.127.1,114.114.114.114<span class="o">]</span><span class="w"> </span><span class="c1"># DNS - 第一个设置为PC共享给VM-net8的网络ip</span>
</code></pre></div>
<p>重载服务生效：</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>netplan<span class="w"> </span>apply

<span class="c1"># 测试网路</span>
ping<span class="w"> </span>www.baidu.com
</code></pre></div>
<h3 id="2ubuntudocker">2.Ubuntu服务器版安装Docker<a class="headerlink" href="#2ubuntudocker" title="Permanent link">&para;</a></h3>
<p>Docker官方安装指导：<a href="https://docs.docker.com/desktop/install/ubuntu/">https://docs.docker.com/desktop/install/ubuntu/</a></p>
<p>下载<strong>DEB package</strong>时，实时更新查看日志命令：</p>
<div class="highlight"><pre><span></span><code>tail -f 文件名
</code></pre></div>
<p>配置允许匿名用户上传文件ftp服务，<a href="https://blog.csdn.net/qq_43299421/article/details/115321927">vsftp配置参考：https://blog.csdn.net/qq_43299421/article/details/115321927</a></p>
<div class="highlight"><pre><span></span><code># 安装服务
sudo apt-get install vsftpd

# 开启服务
service vsftpd start

# 创建一个文件夹
sudo mkdir /home/uftp
chmod 777 /home/uftp

# 修改配置文件
sudo vim /etc/vsftpd.conf

修改允许匿名用户连接配置：
    anonymous_enable=YES  
打开允许上传文件注释配置：
    write_enable=YES
wq保存

# 重启服务
service vsftpd restart

# 测试ftp客户端连接
ftp 192.168.127.xxx

# 上传文件
put 文件路径
</code></pre></div>
<p>继续，根据官方网站提示，先安装docker-engine，再装docker-desktop...</p>
<p>最后，运行测试镜像转为容器：sudo docker run hello-world</p>
<p><img alt="image-20221010223530711" src="../DockerLearningNote.assets/image-20221010223530711.png" /> </p>
<h2 id="docker_1">四、Docker镜像加速配置<a class="headerlink" href="#docker_1" title="Permanent link">&para;</a></h2>
<p><strong>申请阿里云Docker官方加速应用：</strong><a href="https://help.aliyun.com/document_detail/60750.html">阿里云镜像加速器</a></p>
<p><strong>通过修改daemon配置文件/etc/docker/daemon.json来使用加速器(下面是我个人加速器-每个账户都不同)</strong></p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/docker
sudo<span class="w"> </span>tee<span class="w"> </span>/etc/docker/daemon.json<span class="w"> </span><span class="s">&lt;&lt;-&#39;EOF&#39;</span>
<span class="s">{</span>
<span class="s">  &quot;registry-mirrors&quot;: [&quot;https://ftvwjbmx.mirror.aliyuncs.com&quot;]</span>
<span class="s">}</span>
<span class="s">EOF</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker

<span class="c1"># docker进程查看</span>
ps<span class="w"> </span>-ef<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>docker
</code></pre></div>
<h2 id="docker_2">五、Docker化应用程序<a class="headerlink" href="#docker_2" title="Permanent link">&para;</a></h2>
<p>比如Wordpress运行环境需要LAMP：</p>
<ul>
<li>linux</li>
<li>
<p>apache、mod_rewrite</p>
</li>
<li>
<p>mysql5.6+</p>
</li>
<li>
<p>php5.6+</p>
</li>
</ul>
<h3 id="1docker-run">1.docker run命令解析<a class="headerlink" href="#1docker-run" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker run 镜像转为容器 --name 容器名称 --env 环境变量注入-d 后台运行 mariadb 镜像</span>
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>db<span class="w"> </span>--env<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>examplepwd<span class="w"> </span>-d<span class="w"> </span>mariadb

<span class="c1"># --link参数会向db容器的/etc/hosts件写一条解析记录，对应值为db容器的ip地址，这样可以访问到db容器</span>
<span class="c1"># 运行镜像 起名MyWordPress 链接db数据库:别名mysql -p设置端口映射 -d后台运行进程</span>
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>MyWordPress<span class="w"> </span>--link<span class="w"> </span>db:mysql<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>-d<span class="w"> </span>wordpress

<span class="c1"># 启动容器实例命令示例</span>
docker<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-itd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>mydocker<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--link<span class="w"> </span>mysql:mysql<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>/home/chcnew/shared1:/root/shared1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>/home/chcnew/shared2:/root/shared2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span><span class="m">4430</span>:443<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>/bin/bash
</code></pre></div>
<h3 id="2run">2.下载镜像具体应用run<a class="headerlink" href="#2run" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 拉取镜像到本地</span>
docker<span class="w"> </span>pull<span class="w"> </span>wordpress
docker<span class="w"> </span>pull<span class="w"> </span>mariadb

<span class="c1"># 查看本地镜像列表</span>
docker<span class="w"> </span>images

<span class="c1"># 运行镜像转为容器</span>
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>db<span class="w"> </span>--env<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>examplepwd<span class="w"> </span>-d<span class="w"> </span>mariadb
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>MyWordPress<span class="w"> </span>--link<span class="w"> </span>db:mysql<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>-d<span class="w"> </span>wordpress

<span class="c1"># 查看docker进程</span>
docker<span class="w"> </span>ps

<span class="c1"># 访问ip+端口就可以进入wordpress里面啦！</span>
</code></pre></div>
<p><strong>注意：镜像run成功的前提，必须至少有一个前台守护进程运行。</strong></p>
<h2 id="docker_3">六、Docker单容器管理<a class="headerlink" href="#docker_3" title="Permanent link">&para;</a></h2>
<p>Docker三个重要概念：仓库（Repository）、镜像（Image）和容器（Container）</p>
<p>运行命令示例：</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>MyWordPress<span class="w"> </span>--link<span class="w"> </span>db:mysql<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>-d<span class="w"> </span>wordpress
</code></pre></div>
<p>Docker指令基本用法：</p>
<p>docker + 关键字（command）+ 参数 参数值</p>
<h3 id="1docker">1.Docker基础常用命令<a class="headerlink" href="#1docker" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 镜像层面</span>
docker<span class="w"> </span>info<span class="w">  </span><span class="c1"># 信息查看</span>
docker<span class="w"> </span>search<span class="w"> </span>+<span class="w"> </span>镜像名<span class="w">  </span><span class="c1"># 仓库查询镜像</span>
docker<span class="w"> </span>pull<span class="w"> </span>+<span class="w"> </span>镜像名<span class="w">  </span><span class="c1"># 镜像下载，一般去hub.docker.com里面去找对应下载的命令</span>
docker<span class="w"> </span>images<span class="w">  </span><span class="c1"># 本地镜像信息列表查询</span>
docker<span class="w"> </span>rmi<span class="w"> </span>+<span class="w"> </span>镜像名:版本号<span class="w"> </span>或者<span class="w"> </span>镜像id（允许只写前4位）<span class="w"> </span><span class="c1"># 删除本地镜像</span>
docker<span class="w"> </span>run<span class="w">  </span><span class="c1"># 容器创建（运行镜像转容器）</span>

<span class="c1"># 容器层面</span>
docker<span class="w"> </span>ps<span class="w">  </span><span class="c1"># 容器正在运行的进程查询 查询到stop的容器</span>
docker<span class="w"> </span>ps<span class="w"> </span>-a<span class="w">  </span><span class="c1"># 可以查到全部run过的镜像（容器）</span>
docker<span class="w"> </span>start/stop<span class="w"> </span>+<span class="w"> </span>容器名<span class="w">  </span><span class="c1"># 容器启动/停止</span>
docker<span class="w"> </span>rm<span class="w"> </span>+<span class="w"> </span>容器名<span class="w">  </span><span class="c1"># 删除stop的容器</span>

<span class="c1"># docker指令除了单条使用，也可支持赋值使用、解析变量和嵌套使用。</span>
</code></pre></div>
<p>docker info命令注意查看Storage Driver:</p>
<div class="highlight"><pre><span></span><code>Storage<span class="w"> </span>Driver:<span class="w"> </span>overlay2<span class="w">  </span><span class="c1"># 正常，稳定</span>
Storage<span class="w"> </span>Driver:<span class="w"> </span>dm<span class="w"> </span><span class="c1"># 异常，不稳定</span>
</code></pre></div>
<h3 id="2_1">2.嵌套使用删除容器<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 强制删除全部容器</span>
<span class="c1"># 表示循环执行命令</span>
<span class="c1"># docker ps -a -q 表示列出全部容器id</span>
docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-a<span class="w"> </span>-q<span class="k">)</span>
</code></pre></div>
<p><a href="https://www.runoob.com/docker/docker-command-manual.html">Doker命令大全：https://www.runoob.com/docker/docker-command-manual.html</a></p>
<h3 id="3">3.容器更多相关命令<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p>每个容器被创建以后，都会自动分配一个CONTAINER ID作为唯一标识(128位)，这可以用于启动、停止、修改、删除等操作。</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>ps<span class="w"> </span>--no-trunc<span class="w">  </span><span class="c1"># 查看128位完整id</span>
docker<span class="w"> </span>start/stop<span class="w"> </span>CONTAINERID<span class="w">  </span><span class="c1"># 启动/停止容器 也可以通过别名启动/停止</span>
docker<span class="w"> </span>start/stop<span class="w"> </span>MyWordPress
docker<span class="w"> </span>inspect<span class="w"> </span>MyWordPress<span class="w">  </span><span class="c1"># 查看容器全部信息</span>
docker<span class="w"> </span>logs<span class="w"> </span>MyWordPress<span class="w">  </span><span class="c1"># 查看容器日志</span>
docker<span class="w"> </span>stats<span class="w"> </span>MyWordPress<span class="w">  </span><span class="c1"># 查看容器占用系统资源信息</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>+<span class="w"> </span>容器名<span class="w"> </span>+<span class="w"> </span>该容器内需要执行的命令<span class="w"> </span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>+<span class="w"> </span>容器名<span class="w"> </span>+<span class="w"> </span>/bin/bash<span class="w">  </span><span class="c1"># 进入容器内部的bash，直接在内部使用命令</span>
</code></pre></div>
<h3 id="4docker-run">4.docker run命令的延伸<a class="headerlink" href="#4docker-run" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>--restart<span class="o">=</span>always<span class="w">  </span><span class="c1"># 总是随着docker服务启动而自动启动</span>
-h<span class="w"> </span>x.xx.xxx<span class="w">  </span><span class="c1"># 设置容器主机名</span>
--dns<span class="w"> </span>xx.x.xx.x<span class="w">  </span><span class="c1"># 设置容器DNS服务器</span>
--dns-search<span class="w">  </span><span class="c1"># DNS搜索设置</span>
--add-host<span class="w"> </span>hostname:IP<span class="w">  </span><span class="c1"># 注入hostname&lt;&gt;IP解析，在容器内部进入/etc/hosts文件中，会多一条记录 hostname IP.</span>
--rm<span class="w">  </span><span class="c1"># 容器停止时自动删除</span>
</code></pre></div>
<h3 id="5docker">5.docker其他命令集合<a class="headerlink" href="#5docker" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 搜索镜像</span>
docker<span class="w"> </span>search<span class="w"> </span>ubuntu

<span class="c1"># 查看镜像占用空间</span>
docker<span class="w"> </span>system<span class="w"> </span>df
</code></pre></div>
<h2 id="docker_4">七、Docker镜像特性<a class="headerlink" href="#docker_4" title="Permanent link">&para;</a></h2>
<ol>
<li>镜像下载以后会有一个唯一表示IMAGE ID，这与容器创建时容器会有CONTAINER ID是一致的；唯一标识也可以用“镜像名:版本号”表示，最新稳定版本号latest</li>
<li>镜像的分层：Docker的镜像通过联合文件系统（union filesystem）将各层文件联合叠加在一起。</li>
<li>bootfs：用于系统引导的文件系统，bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引导加载kernel, Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</li>
<li>rootfs：rootfs (root file system) ，在bootfs之上。包含的就是典型 Linux 系统中的 /dev, /proc, /bin, /etc 等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。
传统模式中，系统启动时，内核挂载rootfs表现为“只读”模式，完整性自检完成后，将其挂载位“读写”模式。
Docker中，rootfs有内核挂载为“只读”模式，然后通过一个UFS技术，挂载一个“可写”层。</li>
<li>已有分层只能读不可写。</li>
<li>上层优先级永远大于下层，镜像之后转为容器，最上层即为可写层。</li>
</ol>
<h2 id="docker_5">八、Docker镜像构建（容器转为镜像）<a class="headerlink" href="#docker_5" title="Permanent link">&para;</a></h2>
<p>镜像构建有两种方式：容器转换和DockerFile构建</p>
<h3 id="1_1">1.容器转为镜像<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<p>容器 - &gt; 镜像，示例：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 容器转镜像 需要转换的容器名称 转换后的镜像名称:版本号</span>
docker<span class="w"> </span>commit<span class="w"> </span>ContainerName<span class="w"> </span>ImageName:VersionNO
</code></pre></div>
<p>实战，centos制作一个包含mysql的镜像：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 下载一个包含前台守护进程的centos，否则启动不了（网易云、阿里云镜像站都可以下载）</span>
docker<span class="w"> </span>pull<span class="w"> </span>hub.c.163.com/public/centos:6.7-tools
docker<span class="w"> </span>images
docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>mysql<span class="w"> </span>-d<span class="w"> </span>hub.c.163.com/public/centos
docker<span class="w"> </span>ps<span class="w"> </span>-a
<span class="c1"># 进入运行的容器mysql内部</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>mysql<span class="w"> </span>/bin/bash
yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>mysql<span class="w"> </span>mysql-server
service<span class="w"> </span>mysqld<span class="w"> </span>start
<span class="c1"># 配置mysql密码</span>
mysqladmin<span class="w"> </span>-uroot<span class="w"> </span>password<span class="w"> </span><span class="m">123</span>
mysql<span class="w"> </span>-uroot<span class="w"> </span>-ps
<span class="c1"># 创建一个数据库</span>
mysql&gt;<span class="w"> </span>create<span class="w"> </span>database<span class="w"> </span>learning<span class="p">;</span>
mysql&gt;<span class="w"> </span>show<span class="w"> </span>databases<span class="p">;</span>
<span class="c1"># 退出mysql数据库</span>
mysql&gt;<span class="w"> </span>exit<span class="p">;</span>
<span class="c1"># 退出mysql容器内部</span>
<span class="nb">exit</span>
<span class="c1"># 查看正在运行的容器</span>
docker<span class="w"> </span>ps<span class="w"> </span>-a
<span class="c1"># 将容器创建为镜像</span>
docker<span class="w"> </span>commit<span class="w"> </span>mysql<span class="w"> </span>mysqlImage:5.1
docker<span class="w"> </span>images
<span class="c1"># 此时就可以查看到新创建的镜像了</span>
<span class="c1"># 注意：这种方法，docker run镜像以后，内部mysql服务并不会自己启动！commit只是保存当时镜像。</span>
</code></pre></div>
<h3 id="2dokcerfile">2.DokcerFile脚本构建镜像<a class="headerlink" href="#2dokcerfile" title="Permanent link">&para;</a></h3>
<p>DockerFile是一种被Docker服务程序解释的脚本，它由一条一条的指令构成，每条指令对应linux相关命令，Docker服务程序将这些指令翻译成真正的linux命令。
DockerFile有自己的书写格式和支持的命令，Docker服务程序解决这些命令间的依赖关系，类似于makefile，Docker服务程序将读取DockerFile脚本，生成定制的镜像（Image）</p>
<h4 id="21-dockerfile">2.1 DockerFile命令构建<a class="headerlink" href="#21-dockerfile" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>home/jdk-tomcat
</code></pre></div>
<h4 id="22-dockerfile">2.2 DockerFile指令说明<a class="headerlink" href="#22-dockerfile" title="Permanent link">&para;</a></h4>
<h5 id="from">FROM ：<a class="headerlink" href="#from" title="Permanent link">&para;</a></h5>
<p>定制的镜像都是基于 FROM 的镜像，下面的 centos 就是定制需要的基础镜像。后续的操作都是基于 centos。构建仅能使用一个基础镜像。</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">centos:7.2</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">centos</span>
</code></pre></div>
<h5 id="maintainer">MAINTAINER：<a class="headerlink" href="#maintainer" title="Permanent link">&para;</a></h5>
<p>镜像维护者姓名或邮箱地址，对该镜像转容器之后使用docker inspect命令，可以查看到信息</p>
<div class="highlight"><pre><span></span><code><span class="k">MAINTAINER</span><span class="w"> </span><span class="s">ccplayer ccplay@163.com</span>
</code></pre></div>
<h5 id="run">RUN：<a class="headerlink" href="#run" title="Permanent link">&para;</a></h5>
<p>用于执行后面跟着的命令行命令。有以下俩种格式：</p>
<p>shell 格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">RUN</span><span class="w"> </span>&lt;命令行命令&gt;
<span class="c"># &lt;命令行命令&gt; 等同于，在终端操作的 shell 命令，例如：</span>
<span class="c"># RUN cd /temp wget https://download.xxx.xxx/xxx... | tar -zxvf</span>
</code></pre></div>
<p>exec 格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">RUN</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;可执行文件&quot;</span>,<span class="w"> </span><span class="s2">&quot;参数1&quot;</span>,<span class="w"> </span><span class="s2">&quot;参数2&quot;</span><span class="o">]</span>
<span class="c"># 例如：</span>
<span class="c"># RUN [&quot;./test.php&quot;, &quot;dev&quot;, &quot;offline&quot;] 等价于 RUN ./test.php dev offline</span>
</code></pre></div>
<p><strong>注意</strong>：Dockerfile 的指令每执行一次都会在 docker 上新建一层。所以过多无意义的层，会造成镜像膨胀过大。例如：</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">centos</span>
<span class="k">RUN</span><span class="w"> </span>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>wget
<span class="k">RUN</span><span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>redis.tar.gz<span class="w"> </span><span class="s2">&quot;http://download.redis.io/releases/redis-5.0.tar.gz&quot;</span>
<span class="k">RUN</span><span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>redis.tar.gz
</code></pre></div>
<p>以上执行会创建 3 层镜像。可简化为以下格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">centos</span>
<span class="k">RUN</span><span class="w"> </span>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>wget<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>redis.tar.gz<span class="w"> </span><span class="s2">&quot;http://download.redis.io/releases/redis-5.0.tar.gz&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>redis.tar.gz
</code></pre></div>
<p>如上，以 <strong>&amp;&amp;</strong> 符号连接命令，这样执行后，只会创建 1 层镜像。</p>
<h5 id="cmd">CMD：<a class="headerlink" href="#cmd" title="Permanent link">&para;</a></h5>
<p>类似于 RUN 指令，用于运行程序，但二者运行的时间点不同:</p>
<div class="highlight"><pre><span></span><code>CMD 在docker run 时运行。
RUN 是在 docker build。
</code></pre></div>
<p><strong>作用</strong>：为启动的容器指定默认要运行的程序，程序运行结束，容器也就结束。CMD 指令指定的程序可被 docker run 命令行参数中指定要运行的程序所覆盖。</p>
<p><strong>注意</strong>：如果 Dockerfile 中如果存在多个 CMD 指令，仅最后一个生效。</p>
<p><strong>格式</strong>：</p>
<div class="highlight"><pre><span></span><code><span class="k">CMD</span><span class="w"> </span>&lt;shell<span class="w"> </span>命令&gt;<span class="w"> </span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;可执行文件或命令&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;param1&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;param2&gt;&quot;</span><span class="p">,</span><span class="err">...</span><span class="p">]</span><span class="w"> </span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;param1&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;param2&gt;&quot;</span><span class="p">,</span><span class="err">...</span><span class="p">]</span><span class="w">  </span>#<span class="w"> </span>该写法是为<span class="w"> </span>ENTRYPOINT<span class="w"> </span>指令指定的程序提供默认参数
</code></pre></div>
<p>推荐使用第二种格式，执行过程比较明确。第一种格式实际上在运行的过程中也会自动转换成第二种格式运行，并且默认可执行文件是 sh。</p>
<h5 id="entrypoint">ENTRYPOINT：<a class="headerlink" href="#entrypoint" title="Permanent link">&para;</a></h5>
<p>类似于 CMD 指令，但其不会被 docker run 的命令行参数指定的指令所覆盖，而且这些命令行参数会被当作参数送给 ENTRYPOINT 指令指定的程序。</p>
<p>但是, 如果运行 docker run 时使用了 --entrypoint 选项，将覆盖 ENTRYPOINT 指令指定的程序。</p>
<p><strong>优点</strong>：在执行 docker run 的时候可以指定 ENTRYPOINT 运行所需的参数。</p>
<p><strong>注意</strong>：如果 Dockerfile 中如果存在多个 ENTRYPOINT 指令，仅最后一个生效。</p>
<p><strong>格式</strong>：</p>
<div class="highlight"><pre><span></span><code><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;executeable&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;param1&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;param2&gt;&quot;</span><span class="p">,</span><span class="err">...</span><span class="p">]</span>
</code></pre></div>
<p>可以搭配 CMD 命令使用：一般是变参才会使用 CMD ，这里的 CMD 等于是在给 ENTRYPOINT 传参，以下示例会提到。</p>
<p><strong>示例</strong>：</p>
<p>假设已通过 Dockerfile 构建了 nginx:test 镜像：</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">nginx</span>

<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nginx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">]</span><span class="w"> </span>#<span class="w"> </span>定参
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/etc/nginx/nginx.conf&quot;</span><span class="p">]</span><span class="w"> </span>#<span class="w"> </span>变参<span class="w"> </span>
</code></pre></div>
<p><strong>1、不传参运行</strong></p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w">  </span>nginx:test
</code></pre></div>
<p>容器内会默认运行以下命令，启动主进程。</p>
<div class="highlight"><pre><span></span><code>nginx -c /etc/nginx/nginx.conf
</code></pre></div>
<p><strong>2、传参运行</strong></p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w">  </span>nginx:test<span class="w"> </span>-c<span class="w"> </span>/etc/nginx/new.conf
</code></pre></div>
<p>容器内会默认运行以下命令，启动主进程(/etc/nginx/new.conf - 假设容器内已有此文件)</p>
<div class="highlight"><pre><span></span><code>nginx<span class="w"> </span>-c<span class="w"> </span>/etc/nginx/new.conf
</code></pre></div>
<h5 id="user">USER：<a class="headerlink" href="#user" title="Permanent link">&para;</a></h5>
<p>用于指定执行后续命令的用户和用户组，这边只是切换后续命令执行的用户（用户和用户组必须提前已经存在）。默认用户为root</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">USER</span><span class="w"> </span><span class="s">&lt;用户名&gt;[:&lt;用户组&gt;]</span>
</code></pre></div>
<h5 id="expose">EXPOSE：<a class="headerlink" href="#expose" title="Permanent link">&para;</a></h5>
<p>仅仅只是声明端口，显示作用而已。</p>
<p>作用：</p>
<ul>
<li>帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射。</li>
<li>在运行时使用随机端口映射时，也就是 docker run -P 时，会自动随机映射 EXPOSE 的端口。</li>
</ul>
<p>格式：</p>
<div class="highlight"><pre><span></span><code>EXPOSE &lt;端口1&gt; [&lt;端口2&gt;...]
</code></pre></div>
<h5 id="env">ENV：<a class="headerlink" href="#env" title="Permanent link">&para;</a></h5>
<p>设置环境变量，定义了环境变量，那么在后续的指令中，就可以使用这个环境变量。</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">ENV</span><span class="w"> </span>&lt;key&gt;<span class="w"> </span>&lt;value&gt;
<span class="k">ENV</span><span class="w"> </span>&lt;key1&gt;<span class="o">=</span>&lt;value1&gt;<span class="w"> </span>&lt;key2&gt;<span class="o">=</span>&lt;value2&gt;...
</code></pre></div>
<p>以下示例设置 NODE_VERSION = 7.0 ， 在后续的指令中可以通过 $NODE_VERSION 引用：</p>
<div class="highlight"><pre><span></span><code><span class="k">ENV</span><span class="w"> </span>NODE_VERSION<span class="w"> </span><span class="m">7</span>.0

<span class="k">RUN</span><span class="w"> </span>curl<span class="w"> </span>-SLO<span class="w"> </span><span class="s2">&quot;https://nodejs.org/dist/v</span><span class="nv">$NODE_VERSION</span><span class="s2">/node-v</span><span class="nv">$NODE_VERSION</span><span class="s2">-linux-x64.tar.xz&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-SLO<span class="w"> </span><span class="s2">&quot;https://nodejs.org/dist/v</span><span class="nv">$NODE_VERSION</span><span class="s2">/SHASUMS256.txt.asc&quot;</span>
</code></pre></div>
<p>构建镜像添加环境变量示例：
<div class="highlight"><pre><span></span><code>ENV JAVA_HOME /root/jdk1.7.0_25
ENV PATH=$JAVA_HOME/bin:$PATH
</code></pre></div></p>
<h5 id="add">ADD：<a class="headerlink" href="#add" title="Permanent link">&para;</a></h5>
<p>ADD 指令和 COPY 的使用格类似（同样需求下，官方推荐使用 COPY）。功能也类似，不同之处如下：</p>
<ul>
<li>ADD 的优点：在执行 &lt;源文件&gt; 为 tar 压缩文件的话，压缩格式为 gzip, bzip2 以及 xz 的情况下，会自动复制并解压到 &lt;目标路径&gt;。</li>
<li>ADD 的缺点：在不解压的前提下，无法复制 tar 压缩文件。会令镜像构建缓存失效，从而可能会令镜像构建变得比较缓慢。具体是否使用，可以根据是否需要自动解压来决定。</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">ADD</span><span class="w"> </span>&lt;src&gt;<span class="w"> </span>&lt;dest&gt;
&lt;src&gt;：相对被构建的源目录的相对路径，可以是文件或目录路径，也可以是远程url；
&lt;dest&gt;：container的绝对路径
</code></pre></div>
<h5 id="copy">COPY：<a class="headerlink" href="#copy" title="Permanent link">&para;</a></h5>
<p>复制指令，从上下文目录中复制文件或者目录到容器里指定路径。</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code><span class="k">ADD</span><span class="w"> </span>&lt;src&gt;<span class="w"> </span>&lt;dest&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">COPY</span><span class="w"> </span><span class="o">[</span>--chown<span class="o">=</span>&lt;user&gt;:&lt;group&gt;<span class="o">]</span><span class="w"> </span>&lt;源路径1&gt;...<span class="w">  </span>&lt;目标路径&gt;
<span class="k">COPY</span><span class="w"> </span><span class="o">[</span>--chown<span class="o">=</span>&lt;user&gt;:&lt;group&gt;<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;&lt;源路径1&gt;&quot;</span>,...<span class="w">  </span><span class="s2">&quot;&lt;目标路径&gt;&quot;</span><span class="o">]</span>
</code></pre></div>
<p><strong>[--chown=<user>:<group>]</strong>：可选参数，用户改变复制到容器内文件的拥有者和属组。</p>
<p><strong>&lt;源路径&gt;</strong>：源文件或者源目录，这里可以是通配符表达式，其通配符规则要满足 Go 的 filepath.Match 规则。例如：</p>
<div class="highlight"><pre><span></span><code><span class="k">COPY</span><span class="w"> </span>hom*<span class="w"> </span>/mydir/
<span class="k">COPY</span><span class="w"> </span>hom?.txt<span class="w"> </span>/mydir/
</code></pre></div>
<h5 id="volume">VOLUME：<a class="headerlink" href="#volume" title="Permanent link">&para;</a></h5>
<p>定义匿名数据卷。在启动容器时忘记挂载数据卷，会自动挂载到匿名卷。</p>
<p>作用：</p>
<ul>
<li>避免重要的数据，因容器重启而丢失，这是非常致命的。</li>
<li>避免容器不断变大。</li>
</ul>
<p>格式：</p>
<div class="highlight"><pre><span></span><code>VOLUME [&quot;&lt;路径1&gt;&quot;, &quot;&lt;路径2&gt;&quot;...]
VOLUME &lt;路径&gt;
</code></pre></div>
<p>在启动容器 docker run 的时候，我们可以通过 -v 参数修改挂载点。</p>
<h5 id="workdir">WORKDIR：<a class="headerlink" href="#workdir" title="Permanent link">&para;</a></h5>
<p>指定工作目录。用 WORKDIR 指定的工作目录，会在构建镜像的每一层中都存在。（WORKDIR 指定的工作目录，必须是提前创建好的）。</p>
<p>docker build 构建镜像过程中的，每一个 RUN 命令都是新建的一层。只有通过 WORKDIR 创建的目录才会一直存在。</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code>WORKDIR &lt;工作目录路径&gt;
</code></pre></div>
<h5 id="onbuild">ONBUILD：<a class="headerlink" href="#onbuild" title="Permanent link">&para;</a></h5>
<p>用于延迟构建命令的执行。简单的说，就是 Dockerfile 里用 ONBUILD 指定的命令，在本次构建镜像的过程中不会执行（假设镜像为 test-build）。当有新的 Dockerfile 使用了之前构建的镜像 FROM test-build ，这时执行新镜像的 Dockerfile 构建时候，会执行 test-build 的 Dockerfile 里的 ONBUILD 指定的命令。</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code>ONBUILD &lt;其它指令&gt;
</code></pre></div>
<p>使用场景：比如保证该镜像不能再次制作新镜像，可以设置销毁程序等。</p>
<h4 id="23-dockerfiletomcat">2.3 DockerFile构建tomcat镜像示例<a class="headerlink" href="#23-dockerfiletomcat" title="Permanent link">&para;</a></h4>
<p><strong>准备三个文件准备构建镜像</strong>：</p>
<ul>
<li>apache-tomcat-9.0.68.tar.gz</li>
<li>jdk-7u25linux-x64.tar.gz</li>
<li>DockerFile</li>
</ul>
<h4 id="rootdownloads"><strong>下载至/root/downloads：</strong><a class="headerlink" href="#rootdownloads" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://dlcdn.apache.org/tomcat/tomcat-10/v10.0.27/bin/apache-tomcat-10.0.27.tar.gz
wget<span class="w"> </span>https://download.oracle.com/otn/java/jdk/8u341-b10/424b9da4b48848379167015dcc250d8d/jdk-8u341-linux-aarch64.tar.gz
</code></pre></div>
<h4 id="dockerfile"><strong>DockerFile写入内容</strong><a class="headerlink" href="#dockerfile" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">centos:latest</span>
<span class="k">MAINTAINER</span><span class="w"> </span><span class="s">ccplayer@163.com</span>

<span class="k">ADD</span><span class="w"> </span>./apache-tomcat-9.0.68.tar.gz<span class="w"> </span>/root
<span class="k">ADD</span><span class="w"> </span>./jdk-7u25linux-x64.tar.gz<span class="w"> </span>/root

<span class="k">ENV</span><span class="w"> </span>TOMCAT_HOME<span class="w"> </span>/root/apache-tomcat-9.0.68
<span class="k">ENV</span><span class="w"> </span>JAVA_HOME<span class="w"> </span>/root/jdk1.8.0_341
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$PATH</span>

<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8080</span>

<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="nv">$TOMCAT_HOME</span>/bin/startup.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>tailf<span class="w"> </span><span class="nv">$TOMCAT_HOME</span>/logs/catalina.out
</code></pre></div>
<p><strong>DockerFile对应解释大概就是</strong></p>
<ol>
<li>基础镜像设置</li>
<li>信息标注设置</li>
<li>复制文件到/root下，tar格式自动解压</li>
<li>设置环境变量，jdk加入PATH环境变量</li>
<li>暴露端口提示</li>
<li>运行tomcat启动命令及日志查看作为前台守护进程。</li>
</ol>
<h4 id="_2"><strong>构建镜像处理过程</strong><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>images
docker<span class="w"> </span>pull<span class="w"> </span>centos
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../static/javascripts/collapsible.js"></script>
      
    
  </body>
</html>