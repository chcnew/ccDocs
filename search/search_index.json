{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"CC\u5b66\u4e60\u6587\u6863\u5e93\uff1a\u4e2a\u4eba\u6280\u672f\u5b66\u4e60\u7b14\u8bb0\u4e0e\u77e5\u8bc6\u6c89\u6dc0","text":"<p>\u6b22\u8fce\u6765\u5230 CC\u5b66\u4e60\u6587\u6863\u5e93\uff0c\u8fd9\u662f\u6211\u7684\u4e2a\u4eba\u6280\u672f\u5b66\u4e60\u7b14\u8bb0\u4e0e\u77e5\u8bc6\u6c89\u6dc0\u7a7a\u95f4\uff0c\u4e13\u6ce8\u4e8e\u8bb0\u5f55\u548c\u5206\u4eab\u6211\u5728 Python\u3001Golang\u3001Docker\u3001\u6570\u636e\u5e93 \u7b49\u6838\u5fc3\u6280\u672f\u9886\u57df\u7684\u7cfb\u7edf\u5b66\u4e60\u5386\u7a0b\u4e0e\u5b9e\u8df5\u5fc3\u5f97\u3002</p> <p>\u5b66\u65e0\u6b62\u5883</p> <p>\u4f5c\u4e3a\u4e00\u540d\u6301\u7eed\u63a2\u7d22\u548c\u5b9e\u8df5\u7684\u6280\u672f\u7231\u597d\u8005\uff0c\u6211\u6df1\u77e5\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7cfb\u7edf\u68b3\u7406\u4e0e\u53ca\u65f6\u590d\u76d8\u7684\u91cd\u8981\u6027\u3002\u56e0\u6b64\uff0c\u6211\u521b\u5efa\u4e86\u8fd9\u4e2a\u535a\u5ba2\u7f51\u7ad9\uff0c\u65e8\u5728\u5c06\u96f6\u6563\u7684\u77e5\u8bc6\u70b9\u7cfb\u7edf\u5316\uff0c\u5c06\u8e29\u8fc7\u7684\u201c\u5751\u201d\u548c\u7ecf\u9a8c\u6559\u8bad\u6587\u6863\u5316\u3002\u8fd9\u91cc\u4e0d\u662f\u7b80\u5355\u7684\u8d44\u6599\u5806\u780c\uff0c\u800c\u662f\u6211\u4e2a\u4eba\u5b66\u4e60\u8def\u5f84\u7684\u771f\u5b9e\u6620\u5c04\uff0c\u5305\u542b\u4e86\u5bf9\u6838\u5fc3\u6982\u5ff5\u7684\u6df1\u5ea6\u89e3\u8bfb\u3001\u5b9e\u6218\u9879\u76ee\u7684\u4ee3\u7801\u5b9e\u8df5\u3001\u5e38\u89c1\u95ee\u9898\u7684\u6392\u67e5\u601d\u8def\u4ee5\u53ca\u6700\u65b0\u6280\u672f\u52a8\u6001\u7684\u8ffd\u8e2a\u3002</p>"},{"location":"mds/Docker-Note/DockerCSERVER/","title":"CSERVER\u5bb9\u5668\u5316\u90e8\u7f72","text":"<p>\u672c\u6587\u4ee5&lt;SUSE Linux Enterprise Server 12 SP5&gt;\u7cfb\u7edf\u4e0b\u914d\u7f6e\u4e3a\u4f8b\uff0c\u5bb9\u5668\u5316\u90e8\u7f72\u5b89\u88c5CSERVER</p>"},{"location":"mds/Docker-Note/DockerCSERVER/#docker","title":"\u4e00\u3001\u5b89\u88c5docker","text":"<pre><code>echo y | sudo zypper install docker\ndocker --version\nsudo service docker start\n</code></pre> <p>json\u914d\u7f6e\uff1a/etc/docker/daemon.json</p> <pre><code>{\n  \"bip\": \"172.18.90.1/24\",\n  \"log-level\": \"warn\",\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"5\"\n  },\n  \"experimental\": true,\n  \"insecure-registries\": [\n    \"www.xxx1.com\",\n    \"www.xxx2.com:8095\",\n    \"www.xxx3.com:8080\"\n  ],\n  \"registry-mirrors\": [\n    \"https://ftvwjbmx.mirror.aliyuncs.com\"\n  ]\n}\n</code></pre> <pre><code>sudo service docker restart\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#docker_1","title":"\u4e8c\u3001docker\u4f7f\u7528","text":"<pre><code># \u955c\u50cf\u5217\u8868\ndocker images\n# \u62c9\u53d6\u955c\u50cf\ndocker pull www.xxx.com:880/ttt-xprs/cserver-env/ubuntu:latest\n# \u5220\u9664\u955c\u50cf\ndocker rmi &lt;IMAGE-ID&gt;\n\n# \u521b\u5efa\u65b0\u7684\u5bb9\u5668\ndocker run -itd www.xxx.com:880/ttt-xprs/cserver-env/ubuntu:latest /bin/bash\n\n# \u67e5\u770b\u5168\u90e8\u5bb9\u5668\u5217\u8868 \ndocker ps -a\n\n# \u542f\u52a8\u5bb9\u5668\ndocker start &lt;CONTAINER-ID&gt;\n\n# \u505c\u6b62\u5bb9\u5668\ndocker stop &lt;CONTAINER-ID&gt;\n\n# \u5bb9\u5668\u65e5\u5fd7\ndocker logs &lt;CONTAINER-ID&gt;\n\n# \u5220\u9664\u5bb9\u5668\ndocker rm &lt;CONTAINER-ID or IMAGE&gt;\n\n# \u8fdb\u5165\u5bb9\u5668\ndocker exec -it &lt;CONTAINER-ID&gt; /bin/bash\n\n# \u4fdd\u7559\u5bb9\u5668\u4e3a\u955c\u50cf\ndocker commit &lt;container_id&gt; cserver-env:latest\n</code></pre> <p>Dockerfile\uff1a</p> <pre><code># \u57fa\u7840\u955c\u50cf\nFROM www.xxx.com:880/ttt-xprs/cserver-env/ubuntu:base1.1\n\n# \u7ef4\u62a4\u8005\u4fe1\u606f\nMAINTAINER xxx ttt@ccc.com\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 80 8810-8819\n\n# \u51c6\u5907\u5de5\u4f5c\nRUN mkdir -p /data/Local &amp;&amp; chmod 755 -R /data/ &amp;&amp; \\\n    mkdir -p /root/DAY/ &amp;&amp; \\\n    mkdir -p /root/DAW/ &amp;&amp; \\\n    mkdir -p /hostip/ &amp;&amp; \\\n    python3 -m pip install --upgrade pip  &amp;&amp; \\\n    python3 -m pip uninstall -y xxx &amp;&amp; \\\n    pip3 install --user xxx\n\n# \u590d\u5236\u6587\u4ef6\nCOPY realip /hostip/\nCOPY run_env.sh /root/\n\n# \u6743\u9650\u8bbe\u7f6e\nRUN chmod +x /root/run_env.sh\n\n# \u5de5\u4f5c\u76ee\u5f55\nWORKDIR /root/\n\n# \u542f\u52a8\u8fdb\u7a0b\nENTRYPOINT [\"/root/run_env.sh\"]\n</code></pre> <pre><code># \u5f53\u524d\u76ee\u5f55\u4e2d\u67e5\u627e Dockerfile \u6587\u4ef6\uff0c\u5e76\u6839\u636e Dockerfile \u4e2d\u7684\u6307\u4ee4\u6784\u5efa\u51fa\u4e00\u4e2a\u955c\u50cf\ndocker build -t cserver-env:latest .\n</code></pre> <p>\u8fd9\u53e5\u547d\u4ee4\u662f\u5728 Docker \u73af\u5883\u4e2d\u542f\u52a8\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\uff0c\u5e76\u8fdb\u5165\u8be5\u5bb9\u5668\u7684\u4ea4\u4e92\u5f0f\u7ec8\u7aef\u3002\u5177\u4f53\u89e3\u91ca\u5982\u4e0b\uff1a - <code>docker run</code> \u662f\u542f\u52a8\u5bb9\u5668\u7684\u547d\u4ee4\u3002 - <code>-it</code> \u53c2\u6570\u8868\u793a\u5728\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u8fd0\u884c\u5bb9\u5668\uff0c\u5e76\u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u3002\u8fd9\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff0c\u5e76\u4e0e\u5bb9\u5668\u8fdb\u884c\u4ea4\u4e92\u3002 - <code>--rm</code> \u53c2\u6570\u8868\u793a\u5bb9\u5668\u9000\u51fa\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u5bb9\u5668\u5728\u9000\u51fa\u540e\u5360\u7528\u8fc7\u591a\u7684\u78c1\u76d8\u7a7a\u95f4\u3002 - <code>cserver-env:latest</code> \u662f\u8981\u542f\u52a8\u7684 Docker \u955c\u50cf\u7684\u540d\u79f0\u548c\u7248\u672c\u53f7\u3002\u8fd9\u91cc\u7684 <code>cserver-env</code> \u662f\u955c\u50cf\u7684\u540d\u79f0\uff0c<code>:latest</code> \u8868\u793a\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684\u955c\u50cf\u3002 - <code>/bin/bash</code> \u662f\u8981\u5728\u5bb9\u5668\u4e2d\u8fd0\u884c\u7684\u547d\u4ee4\u3002\u8fd9\u91cc\u7684 <code>/bin/bash</code> \u8868\u793a\u5728\u5bb9\u5668\u4e2d\u542f\u52a8 Bash Shell</p> <pre><code>docker run -it --rm cserver-env:latest /bin/bash\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#_1","title":"\u4e09\u3001\u78c1\u76d8\u6302\u8f7d","text":"<pre><code># \u8981\u5728docker\u4e2d\u6302\u8f7d\u786c\u76d8\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4(\u5176\u4e2d\uff0c`/host/path`\u662f\u5bbf\u4e3b\u673a\u4e0a\u7684\u8def\u5f84\uff0c`/container/path`\u662f\u5bb9\u5668\u5185\u7684\u8def\u5f84\uff0c`&lt;image_name&gt;`\u662f\u8981\u8fd0\u884c\u7684\u955c\u50cf\u540d\u79f0\u3002)\uff1a\ndocker run -itd -v /host/path:/container/path &lt;image_name&gt; /bin/bash\n# \u5b9e\u9645\u793a\u4f8b\ndocker run -itd -v /data/Local:/data/Local www.xxx.com:880/ttt-xprs/cserver-env/ubuntu /bin/bash\n\n# \u518d\u6b21\u67e5\u770b\u5bb9\u5668\u5217\u8868 \ndocker ps -a\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#docker_2","title":"\u56db\u3001docker\u7528\u6237\u7ec4","text":"<pre><code># \u5bbf\u4e3b\u673a\u521b\u5efa\u7528\u6237\nsudo useradd -m chcnew\nsudo passwd chcnew\n# \u67e5\u770b\u7528\u6237\u6240\u5c5e\u7528\u6237\u7ec4\ngroups chcnew\n# \u6dfb\u52a0\u81f3docker\u7528\u6237\u7ec4\nsudo usermod -aG docker chcnew\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#docker_3","title":"\u4e94\u3001\u590d\u5236\u672c\u5730\u6587\u4ef6\u81f3docker\u5bb9\u5668","text":"<pre><code>docker cp \u672c\u5730\u6587\u4ef6\u8def\u5f84 \u5bb9\u5668ID/\u5bb9\u5668NAME:\u5bb9\u5668\u5185\u8def\u5f84\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#_2","title":"\u516d\u3001\u514d\u5bc6\u767b\u5f55\u914d\u7f6e","text":"<pre><code># \u514d\u4ea4\u4e92\u751f\u6210\u5bc6\u94a5\n# -q \uff1a \u5b89\u9759\u6a21\u5f0f\uff0c\u4e00\u822c\u7528\u5728\u751f\u6210\u5bc6\u94a5\u4e0a\n# -N\uff1a \u751f\u6210\u4e00\u4e2a\u65b0\u5bc6\u94a5\n# -f : \u751f\u6210\u5bc6\u94a5\u7684\u6587\u4ef6\u8def\u5f84 &amp;&amp; # \u670d\u52a1\u5668\u7aef\u52a0\u5165\u8ba4\u8bc1\u5217\u8868\nssh-keygen -q -N \" \" -f ~/.ssh/id_rsa &amp;&amp; cat ~/.ssh/id_rsa.pub &gt; ~/.ssh/authorized_keys\n\n# \u542f\u52a8\u5bb9\u5668\u65f6\u5171\u4eab~/.ssh\u76ee\u5f55\n-v ${HOME}/.ssh:/root/.ssh\n\n# \u5bb9\u5668ssh\u81f3\u5bbf\u4e3b\u673a\nchmod 700 /root/.ssh/\nchmod 600 /root/.ssh/*\nssh -i /root/.ssh/cida_docker_key -o StrictHostKeyChecking=no root@192.168.127.150 -p 22 \"python3 -V\"\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#work","title":"WORK\u3001\u5b9e\u9645\u6b65\u9aa4","text":"<p>\u57fa\u7840\u955c\u50cf\u914d\u7f6e\uff1a</p> <p>\u200b   linux\u4f9d\u8d56\u9879</p> <pre><code>apt-get install jq -y\napt-get install gcc g++ -y\napt-get install make automake -y\napt-get install python3-dev -y\napt-get install libssl-dev -y\napt-get install libpcre3 libpcre3-dev -y\napt-get install zlib1g-dev -y\napt-get install openssl libssl-dev -y\napt-get install openssh-server -y\napt-get install libffi-dev -y\napt-get install libsqlite3-dev -y\napt-get install sqlite3 -y\napt-get install -y systemctl ntp ntpdate ntpstat\n</code></pre> <p>\u200b   \u4f9d\u8d56\u8f6f\u4ef6\u9879\uff1a</p> <pre><code>python3.9.11\njdk1.8.0_171\nnginx-1.18.0\ngit\n</code></pre> <p>\u200b   \u914d\u7f6e\u65f6\u949f\u540c\u6b65\uff1a</p> <pre><code># \u4fee\u6539\u914d\u7f6e\nvim /etc/ntp.conf\n# \u5199\u5165\u5185\u5bb9\nserver ntp01-in.xxx.com prefer\nserver ntp02-in.xxx.com\nserver ntp03-in.xxx.com\n#\u542f\u52a8ntp\u670d\u52a1 &amp; \u8bbe\u7f6entp\u670d\u52a1\u5f00\u673a\u81ea\u542f\u52a8 &amp; #\u67e5\u770b\u540c\u6b65\u72b6\u6001\nsystemctl start ntp &amp;&amp; systemctl enable ntp &amp;&amp; ntpstat\n</code></pre> <p>\u200b   \u955c\u50cf\u5236\u4f5c\u53ca\u542f\u52a8\u5bb9\u5668</p> <pre><code># \u955c\u50cf\u5217\u8868\ndocker images\n# \u62c9\u53d6\u955c\u50cf\ndocker pull www.xxx.com:880/ttt-xprs/cserver-env/ubuntu:latest\n\n# \u7f16\u5199Dockerfile\u5e76\u6784\u5efa\u955c\u50cf\nmkdir /usr/local/dockerTTT\ncd /usr/local/dockerTTT\nvim Dockerfile\n# \u5199\u5165\u6784\u5efa\u6b65\u9aa4\u6307\u4ee4\n# \u6700\u540e\u6784\u5efa\u547d\u4ee4\u8fd0\u884c\ndocker build -t cserver-env-ubuntu22.04:latest .\n\n# \u521b\u5efa\u5bb9\u5668\u4e14\u5171\u4eab\u76ee\u5f55\uff1a~/DAY\u3001~/DAW\u3001/data/Local\n# docker run --rm -itd -v /root/DAY:/root/DAY -v /root/DAW:/root/DAW -v /data/Local:/data/Local cserver-env-ubuntu22.04:latest /bin/bash\ndocker run -itd -v /root/DAY:/root/DAY -v /root/DAW:/root/DAW -v /data/Local:/data/Local cserver-env-ubuntu22.04:latest\n\n# \u8fdb\u5165\u5bb9\u5668\ndocker exec -it &lt;CONTAINER-ID&gt; /bin/bash\n\n# \u5bb9\u5668\u4fdd\u5b58\u4e3a\u955c\u50cf\ndocker commit &lt;CONTAINER-ID&gt; www.xxx.com:880/ttt-xprs/cserver-env/ubuntu\n</code></pre> <p>\u200b   \u81ea\u5b9a\u4e49\u5bb9\u5668\u7f51\u6bb5IP</p> <pre><code># \u521b\u5efa\u7f51\u7edc\ndocker network create --subnet 172.18.90.0/24 dockernet\n# \u9a8c\u8bc1\u914d\u7f6e\ndocker network inspect dockernet\n# \u5220\u9664\u7f51\u7edc\ndocker network rm dockernet\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#endfaq","title":"END\u3001FAQ","text":""},{"location":"mds/Docker-Note/DockerCSERVER/#susedocker","title":"SUSE\u542f\u52a8docker\u5b88\u62a4\u8fdb\u7a0b\u62a5\u9519","text":"<p>runc: symbol lookup error: runc: undefined symbol: seccomp_api_get</p> <pre><code>sudo zypper update runc libseccomp2\nsudo zypper install runc-1.0.3-lp152.2.12.1.x86_64\nsudo zypper install libseccomp2-2.4.1-lp152.1.3.x86_64\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#systemctl","title":"systemctl\u62a5\u9519","text":"<p>System has not been booted with systemd as init system (PID 1). Can't operate. Failed to connect to bus: Host is down</p> <p>\u5982\u4f55\u5904\u7406\uff1f</p> <pre><code>\u4e00\u3001\u7279\u6743\u53c2\u6570\u6267\u884c\ndocker run -itd --privileged=true --name my_centos my-centos /usr/sbin/init\ndocker exec -it my_centos /bin/bash\n\n\u4e8c\u3001\u66ff\u6362systemctl\nwget https://github.com/gdraheim/docker-systemctl-replacement/tree/master/files/docker/systemctl3.py -O /bin/systemctl\nchmod a+x /bin/systemctl\n</code></pre>"},{"location":"mds/Docker-Note/DockerCSERVER/#vmubuntu2204","title":"\u865a\u62df\u673aVM\u914d\u7f6eubuntu22.04","text":"<pre><code># \u4e0d\u5b58\u5728ens33\u7f51\u5361\nifconfig ens33 up\n# \u914d\u7f6e\u7f51\u7edc\ncd /etc/netplan/\nll\n# \u914d\u7f6e\u5185\u5bb9 -------------\n# This is the network config written by 'subiquity'\nnetwork:\n  version: 2\n  renderer: NetworkManager  # \u6e32\u67d3\u5668\n  ethernets:\n    ens33:  # \u7f51\u5361\u540d\u79f0\n      dhcp4: no  # \u5173\u95eddhcp4\n      dhcp6: no  # \u5173\u95eddhcp6\n      addresses: [192.168.127.150/24]  # \u9759\u6001ip\n      gateway4: 192.168.127.2  # NTA\u8bbe\u7f6e\u7f51\u5173\n      nameservers:\n        addresses: [192.168.127.1,114.114.114.114] # DNS\u8bbe\u7f6e\u5fc5\u987b\u901a\u8fc7\u5171\u4eab\u7f51\u7edc\u8bbe\u7f6e\u7684ip\n# ---------------------\n# \u7f51\u7edc\u914d\u7f6e0\u30011\u30012\n\u865a\u62df\u673a\u7f51\u7edc\u914d\u7f6e\u5b50\u7f51IP\uff1a192.168.127.0 \u63a9\u7801\uff1a255.255.255.0\n\u5171\u4eab\u7f51\u7edc\u7ed9net8\uff0c\u8bbe\u7f6eip\uff1a192.168.127.1\nNTA\u8bbe\u7f6e\u7f51\u5173\uff1a192.168.127.2\n#VM\u76f8\u5173\u4efb\u52a1\u7ba1\u7406\u56683\u4e2a\u670d\u52a1\u9700\u8981\u6253\u5f00\n# netplan\u670d\u52a1\u52a0\u8f7d\u914d\u7f6e\nnetplan apply\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/","title":"DockerLearningNote","text":"<p>Learning is like sailing against the current; if you do not advance, you will retreat.</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#_1","title":"\u4e00\u3001\u865a\u62df\u5316\u6280\u672f","text":""},{"location":"mds/Docker-Note/DockerLearningNote/#1","title":"1.\u4e86\u89e3\u865a\u62df\u5316\u6280\u672f","text":"<ul> <li> <p>\u4ec0\u4e48\u662f\u865a\u62df\u5316   \u865a\u62df\u5316\uff0c\u662f\u6307\u901a\u8fc7\u865a\u62df\u5316\u6280\u672f\u5c06\u4e00\u53f0\u8ba1\u7b97\u673a\u865a\u62df\u4e3a\u591a\u53f0\u903b\u8f91\u8ba1\u7b97\u673a\u3002\u5728\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u903b\u8f91\u8ba1\u7b97\u673a\uff0c\u6bcf\u4e2a\u903b\u8f91\u8ba1\u7b97\u673a\u53ef\u8fd0\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u4e14\u5e94\u7528\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u5728\u76f8\u4e92\u72ec\u7acb\u7684\u7a7a\u95f4\u5185\u8fd0\u884c\u800c\u4e92\u4e0d\u5f71\u54cd\uff0c\u4ece\u800c\u663e\u8457\u63d0\u9ad8\u8ba1\u7b97\u673a\u7684\u5de5\u4f5c\u6548\u7387\u3002</p> </li> <li> <p>\u4ec0\u4e48\u662f\u865a\u62df\u5316\u6280\u672f   \u865a\u62df\u5316\u6280\u672f\u662f\u4e00\u5957\u89e3\u51b3\u65b9\u6848\u3002\u5b8c\u6574\u7684\u60c5\u51b5\u9700\u8981CPU\u3001\u4e3b\u677f\u82af\u7247\u7ec4\u3001BIOS\u548c\u8f6f\u4ef6\u7684\u652f\u6301\uff0c\u4f8b\u5982VMM\u8f6f\u4ef6\u6216\u8005\u67d0\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\u3002\u5373\u4f7f\u53ea\u662fCPU\u652f\u6301\u865a\u62df\u5316\u6280\u672f\uff0c\u5728\u914d\u5408VMM\u7684\u8f6f\u4ef6\u60c5\u51b5\u4e0b\uff0c\u4e5f\u4f1a\u6bd4\u5b8c\u5168\u4e0d\u652f\u6301\u865a\u62df\u5316\u6280\u672f\u7684\u7cfb\u7edf\u6709\u66f4\u597d\u7684\u6027\u80fd\u3002</p> </li> <li> <p>\u865a\u62df\u5316\u7684\u7c7b\u578b   \u5168\u865a\u62df\u5316\uff08Full Virtualization)   \u5168\u865a\u62df\u5316\u4e5f\u6210\u4e3a\u539f\u59cb\u865a\u62df\u5316\u6280\u672f\uff0c\u8be5\u6a21\u578b\u4f7f\u7528\u865a\u62df\u673a\u534f\u8c03guest\u64cd\u4f5c\u7cfb\u7edf\u548c\u539f\u59cb\u786c\u4ef6\uff0cVMM\u5728guest\u64cd\u4f5c\u7cfb\u7edf\u548c\u88f8\u786c\u4ef6\u4e4b\u95f4\u7528\u4e8e\u5de5\u4f5c\u534f\u8c03\uff0c\u4e00\u4e9b\u53d7\u4fdd\u62a4\u6307\u4ee4\u5fc5\u987b\u7531Hypervisor\uff08\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\uff09\u6765\u6355\u83b7\u5904\u7406\u3002\u5168\u865a\u62df\u5316\u7684\u8fd0\u884c\u901f\u5ea6\u8981\u5feb\u4e8e\u786c\u4ef6\u6a21\u62df\uff0c\u4f46\u662f\u6027\u80fd\u65b9\u9762\u4e0d\u5982\u88f8\u673a\u3002</p> </li> <li> <p>\u534a\u865a\u62df\u5316\uff08Para Virtualization\uff09   \u534a\u865a\u62df\u5316\u662f\u53e6\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5168\u865a\u62df\u5316\u7684\u6280\u672f\uff0c\u5b83\u4f7f\u7528Hypervisor\u5206\u4eab\u5b58\u53d6\u5e95\u5c42\u7684\u786c\u4ef6\uff0c\u4f46\u662f\u5b83\u7684guest\u64cd\u4f5c\u7cfb\u7edf\u96c6\u6210\u4e86\u865a\u62df\u5316\u65b9\u9762\u7684\u4ee3\u7801\u3002\u8be5\u65b9\u6cd5\u65e0\u9700\u91cd\u65b0\u7f16\u8bd1\u6216\u5f15\u8d77\u9677\u9631\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u81ea\u8eab\u80fd\u591f\u4e0e\u865a\u62df\u8fdb\u7a0b\u8fdb\u884c\u5f88\u597d\u7684\u534f\u4f5c\u3002\u534a\u865a\u62df\u5316\u9700\u8981guest\u64cd\u4f5c\u7cfb\u7edf\u505a\u4e00\u4e9b\u4fee\u6539\uff0c\u4f7fguest\u64cd\u4f5c\u7cfb\u7edf\u610f\u8bc6\u5230\u81ea\u5df1\u662f\u5904\u4e8e\u865a\u62df\u5316\u73af\u5883\u7684\uff0c\u4f46\u662f\u534a\u865a\u62df\u5316\u63d0\u4f9b\u4e86\u4e0e\u539f\u64cd\u4f5c\u7cfb\u7edf\u76f8\u8fd1\u7684\u6027\u80fd\u3002</p> </li> </ul>"},{"location":"mds/Docker-Note/DockerLearningNote/#2","title":"2.\u5e38\u89c1\u7684\u865a\u62df\u5316\u6280\u672f","text":""},{"location":"mds/Docker-Note/DockerLearningNote/#21-kvm","title":"2.1 KVM","text":"<p>KVM\u662f\u6307\u57fa\u4e8eLinux\u5185\u6838\uff08Kernel-based\uff09\u7684\u865a\u62df\u673a\uff08Virtual Machine\uff09\u3002\u4e5f\u6709\u4eba\u5c06KVM\u67b6\u6784\u5206\u89e3\u4e3a\u4e24\u90e8\u5206\uff1aKVM\u9a71\u52a8\uff0c\u5373linux kernel\u7684\u4e00\u4e2a\u6a21\u5757\u548cQemu\uff0c\u5373\u7528\u4e8e\u6a21\u62df\u865a\u62df\u673a\u7684\u7528\u6237\u7a7a\u95f4\u7ec4\u4ef6\uff0c\u63d0\u4f9bI/O\u8bbe\u5907\u6a21\u578b\uff0c\u8bbf\u95ee\u5916\u8bbe\u7684\u9014\u5f84\u3002KVM\u6700\u5927\u7684\u597d\u5904\u5c31\u5728\u4e8e\u5b83\u662f\u4e0eLinux\u5185\u6838\u96c6\u6210\u7684\uff0c\u6240\u4ee5\u901f\u5ea6\u5f88\u5feb\u3002KVM\u7684\u5bbf\u4e3b\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u662fLinux\uff0c\u652f\u6301\u7684\u5ba2\u6237\u673a\u64cd\u4f5c\u7cfb\u7edf\u5305\u62ecLinux\u3001Windows\u3001Solaris\u548cBSD\uff0c\u8fd0\u884c\u5728\u652f\u6301\u865a\u62df\u5316\u6269\u5c55\u7684x86\u548cx86_64\u786c\u4ef6\u67b6\u6784\u4e0a,cpu\u652f\u6301VT\u6280\u672f\u3002KVM\u662f\u4e00\u5957\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u8fd9\u4e2a\u65b9\u6848\u5b9e\u9645\u4e0a\u53ea\u5b9e\u73b0\u4e86\u5185\u6838\u4e2d\u5bf9\u5904\u7406\u5668(Intel VT, AMDSVM)\u865a\u62df\u5316\u7279\u6027\u7684\u652f\u6301\uff0c\u5b83\u7f3a\u4e4f\u8bbe\u5907\u865a\u62df\u5316\u4ee5\u53ca\u76f8\u5e94\u7684\u7528\u6237\u7a7a\u95f4\u7ba1\u7406\u865a\u62df\u673a\u7684\u5de5\u5177\uff0c\u800cQemu\u662f\u4e00\u5957\u72ec\u7acb\u7684\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\uff0cKVM\u501f\u7528\u4e86QEMU\u7684\u4ee3\u7801\u5e76\u52a0\u4ee5\u7cbe\u7b80\uff0c\u8fde\u540cKVM\u4e00\u8d77\u6784\u6210\u4e86\u53e6\u4e00\u4e2a\u72ec\u7acb\u7684\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u4e0d\u59a8\u79f0\u4e4b\u4e3a\uff1aKVM+QEMU\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#22-xen","title":"2.2 Xen","text":"<p>Xen\u662f\u53e6\u4e00\u5957\u72ec\u7acb\u7684\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u6700\u521d\u7684Xen\u53ea\u652f\u6301\u534a\u865a\u62df\u5316\uff0cIntel VT\u6280\u672f\u51fa\u73b0\u540e\uff0c\u6dfb\u52a0\u4e86\u5168\u865a\u62df\u5316\u529f\u80fd\uff0c\u8fd9\u4e2a\u5168\u865a\u62df\u5316\u529f\u80fd\u4e5f\u662f\u501f\u52a9\u4e86qemu\u5b9e\u73b0\uff0c\u4f46\u4e0d\u662f\u5b8c\u5168\u4f9d\u8d56qemu\u3002Xen\u662f\u4e00\u4e2a\u5f00\u653e\u6e90\u4ee3\u7801\u865a\u62df\u673a\u76d1\u89c6\u5668\uff0c\u7531\u5251\u6865\u5927\u5b66\u5f00\u53d1\u3002Xen\u7684\u7f3a\u70b9\u662f\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u8fdb\u884c\u663e\u5f0f\u5730\u4fee\u6539\uff08\u201c\u79fb\u690d\u201d\uff09\u4ee5\u5728Xen\u4e0a\u8fd0\u884c\uff08\u4f46\u662f\u63d0\u4f9b\u5bf9\u7528\u6237\u5e94\u7528\u7684\u517c\u5bb9\u6027\uff09\uff0c\u6240\u4ee5\u6bd4\u8f83\u9ebb\u70e6\u3002\u4f7f\u5f97Xen\u65e0\u9700\u7279\u6b8a\u786c\u4ef6\u652f\u6301\uff0c\u5c31\u80fd\u8fbe\u5230\u9ad8\u6027\u80fd\u7684\u865a\u62df\u5316\u3002Linux\u7684\u5b98\u65b9\u5185\u6838\u5728\u8f83\u65e9\u4e4b\u524d\u5df2\u7ecf\u53bb\u6389\u4e86\u5bf9Xen\u7684\u652f\u6301\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#23-vmware","title":"2.3 VMWare","text":"<p>VMWare (Virtual Machine ware)\u662f\u4e00\u4e2a\u201c\u865a\u62dfPC\u201d\u865a\u62df\u673a\u7ba1\u7406\u8f6f\u4ef6\u3002\u5b83\u7684\u4ea7\u54c1\u53ef\u4ee5\u4f7f\u4f60\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u540c\u65f6\u8fd0\u884c\u4e8c\u4e2a\u6216\u66f4\u591aWindows\u3001DOS\u3001LINUX\u7cfb\u7edf\u3002\u4e0e\u201c\u591a\u542f\u52a8\u201d\u7cfb\u7edf\u76f8\u6bd4\uff0cVMWare\u91c7\u7528\u4e86\u5b8c\u5168\u4e0d\u540c\u7684\u6982\u5ff5\u3002\u591a\u542f\u52a8\u7cfb\u7edf\u5728\u4e00\u4e2a\u65f6\u523b\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u7cfb\u7edf\uff0c\u5728\u7cfb\u7edf\u5207\u6362\u65f6\u9700\u8981\u91cd\u65b0\u542f\u52a8\u673a\u5668\u3002VMWare\u662f\u771f\u6b63\u201c\u540c\u65f6\u201d\u8fd0\u884c\uff0c\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u5728\u4e3b\u7cfb\u7edf\u7684\u5e73\u53f0\u4e0a\uff0c\u5c31\u8c61\u6807\u51c6Windows\u5e94\u7528\u7a0b\u5e8f\u90a3\u6837\u5207\u6362\u3002\u800c\u4e14\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u4f60\u90fd\u53ef\u4ee5\u8fdb\u884c\u865a\u62df\u7684\u5206\u533a\u3001\u914d\u7f6e\u800c\u4e0d\u5f71\u54cd\u771f\u5b9e\u786c\u76d8\u7684\u6570\u636e\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u7f51\u5361\u5c06\u51e0\u53f0\u865a\u62df\u673a\u7528\u7f51\u5361\u8fde\u63a5\u4e3a\u4e00\u4e2a\u5c40\u57df\u7f51\uff0c\u6781\u5176\u65b9\u4fbf\u3002\u5b89\u88c5\u5728VMware\u64cd\u4f5c\u7cfb\u7edf\u6027\u80fd\u4e0a\u6bd4\u76f4\u63a5\u5b89\u88c5\u5728\u786c\u76d8\u4e0a\u7684\u7cfb\u7edf\u4f4e\u4e0d\u5c11\uff0c\u56e0\u6b64\uff0c\u6bd4\u8f83\u9002\u5408\u5b66\u4e60\u548c\u6d4b\u8bd5\u3002</p> <p>KVM\u3001Xen\u3001VMWare\u7684\u5bf9\u6bd4\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> \u662f\u5426\u5f00\u6e90 \u662f\u5426\u514d\u8d39 \u6027\u80fd \u4f18\u70b9 \u7f3a\u70b9 KVM \u662f \u662f \u9ad8 1.KVM\u662f\u5185\u6838\u672c\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u53ef\u4ee5\u5229\u7528\u5185\u6838\u7684\u4f18\u5316\u548c\u6539\u8fdb\u30022.\u9ad8\u6027\u80fd,\u7a33\u5b9a,\u65e0\u9700\u4fee\u6539\u5ba2\u6237\u673a\u7cfb\u7edf\u30023.\u5f00\u6e90\u3001\u514d\u8d39 XEN \u662f \u662f \u9ad8 1.\u6027\u80fd\u8f83\u597d\u30022.\u5f00\u6e90\u3001\u514d\u8d39\u3001\u64cd\u4f5c\u590d\u6742\uff0c\u7ef4\u62a4\u6210\u672c\u8f83\u9ad8\uff0c\u76ee\u524d\u5df2\u88abRedHat\u629b\u5f03 VMWare \u5426 \u5426 \u4e00\u822c \u76f8\u5bf9\u6bd4\u8f83\u6210\u719f\u7684\u5546\u4e1a\u8f6f\u4ef6\uff0c\u5e02\u573a\u5360\u6709\u7387\u8f83\u5927\uff0c\u4e0d\u5f00\u6e90\uff0c\u9700\u8981\u4ed8\u8d39 <p>Docker\u4e0e\u4f20\u7edf\u865a\u62df\u673a\u7684\u6bd4\u8f83\uff1a \u2003\u2003\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u81ea\u5df1\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5176\u4e2d\u5305\u62ec\u8f6f\u4ef6\u548c\u786c\u4ef6\u8d44\u6e90\u3002 Docker\u662f\u5f00\u53d1\u8005\u7684\u5f00\u653e\u5e73\u53f0\uff0c\u901a\u8fc7\u5c06\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6253\u5305\u5230\u5bb9\u5668\u4e2d\u6765\u9694\u79bb\u4f9d\u8d56\u5173\u7cfb\u3002\u5bb9\u5668\u5c31\u50cf\u662f\u8f7b\u91cf\u7ea7\u7684\u865a\u62df\u673a\uff0c\u53ef\u4ee5\u6269\u5c55\u5230\u6210\u5343\u4e0a\u4e07\u7684\u8282\u70b9\uff0c\u901a\u8fc7\u5728\u4e0d\u540c\u865a\u62df\u73af\u5883\u4e2d\u8fd0\u884c\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u6765\u5e2e\u52a9\u63d0\u5347\u4e91\u7684\u53ef\u79fb\u690d\u6027\u3002\u865a\u62df\u673a\u5e7f\u6cdb\u7528\u4e8e\u4e91\u8ba1\u7b97\uff0c\u901a\u8fc7\u4f7f\u7528\u865a\u62df\u673a\u6765\u5b9e\u73b0\u9694\u79bb\u548c\u8d44\u6e90\u63a7\u5236\u3002 \u865a\u62df\u673a\u4f7f\u7528\u81ea\u5df1\u7684\u5185\u5b58\u7ba1\u7406\u52a0\u8f7d\u5b8c\u6574\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u5e94\u7528\u7a0b\u5e8f\u66f4\u52a0\u9ad8\u6548\u548c\u5b89\u5168\uff0c\u540c\u65f6\u786e\u4fdd\u5176\u9ad8\u53ef\u7528\u6027\u3002</p> <p>Docker\u5bb9\u5668\u4e0e\u865a\u62df\u673a\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f  \u2003\u2003\u865a\u62df\u673a\u5177\u6709\u5b8c\u6574\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5176\u81ea\u8eab\u7684\u5185\u5b58\u7ba1\u7406\u901a\u8fc7\u76f8\u5173\u7684\u865a\u62df\u8bbe\u5907\u8fdb\u884c\u652f\u6301\u3002 \u5728\u865a\u62df\u673a\u4e2d\uff0c\u4e3a\u7528\u6237\u64cd\u4f5c\u7cfb\u7edf\u548c\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u5206\u914d\u6709\u6548\u7684\u8d44\u6e90\uff0c\u4ece\u800c\u53ef\u4ee5\u5728\u5355\u53f0\u8ba1\u7b97\u673a\uff08\u6216\u4e3b\u673a\uff09\u4e0a\u5e76\u884c\u8fd0\u884c\u4e00\u4e2a\u6216\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7684\u591a\u4e2a\u5b9e\u4f8b\u3002 \u6bcf\u4e2a\u5ba2\u6237\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f5c\u4e3a\u4e3b\u673a\u7cfb\u7edf\u4e2d\u7684\u5355\u4e2a\u5b9e\u4f53\u8fd0\u884c\u3002  \u2003\u2003\u53e6\u4e00\u65b9\u9762\uff0cDocker\u5bb9\u5668\u662f\u4f7f\u7528Docker\u5f15\u64ce\u800c\u4e0d\u662f\u7ba1\u7406\u7a0b\u5e8f\u6765\u6267\u884c\u7684\u3002 \u56e0\u6b64\u5bb9\u5668\u6bd4\u865a\u62df\u673a\u5c0f\uff0c\u5e76\u4e14\u7531\u4e8e\u4e3b\u673a\u5185\u6838\u7684\u5171\u4eab\uff0c\u53ef\u4ee5\u66f4\u5feb\u5730\u542f\u52a8\uff0c\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd\uff0c\u66f4\u5c11\u7684\u9694\u79bb\u548c\u66f4\u597d\u7684\u517c\u5bb9\u6027\u3002 Docker\u5bb9\u5668\u80fd\u591f\u5171\u4eab\u4e00\u4e2a\u5185\u6838\u5e76\u5171\u4eab\u5e94\u7528\u7a0b\u5e8f\u5e93\uff0c\u56e0\u6b64\u5bb9\u5668\u6bd4\u865a\u62df\u673a\u5177\u6709\u66f4\u4f4e\u7684\u7cfb\u7edf\u5f00\u9500\uff0c\u53ea\u8981\u7528\u6237\u613f\u610f\u4f7f\u7528\u5355\u4e00\u5e73\u53f0\u6765\u63d0\u4f9b\u5171\u4eab\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5bb9\u5668\u53ef\u4ee5\u66f4\u5feb\uff0c\u66f4\u5c11\u8d44\u6e90\u3002\u865a\u62df\u673a\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\u624d\u80fd\u521b\u5efa\u5e76\u542f\u52a8\uff0c\u800c\u53ea\u9700\u51e0\u79d2\u949f\u5373\u53ef\u521b\u5efa\u5e76\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\u3002\u4e0e\u5728\u865a\u62df\u673a\u4e2d\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u76f8\u6bd4\uff0c\u5bb9\u5668\u4e2d\u5305\u542b\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u5353\u8d8a\u7684\u6027\u80fd\u3002  \u2003\u2003Docker\u5bb9\u5668\u6bd4\u865a\u62df\u673a\u5f31\u7684\u4e00\u4e2a\u5173\u952e\u6307\u6807\u5c31\u662f\u201c\u9694\u79bb\u201d\u3002\u82f1\u7279\u5c14\u7684VT-d\u548cVT-x\u6280\u672f\u4e3a\u865a\u62df\u673a\u63d0\u4f9b\u4e86ring-1\u786c\u4ef6\u9694\u79bb\u6280\u672f\uff0c\u56e0\u6b64\u865a\u62df\u673a\u53ef\u4ee5\u5145\u5206\u5229\u7528\u5b83\u7684\u4f18\u52bf\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u865a\u62df\u673a\u5668\u9ad8\u6548\u4f7f\u7528\u8d44\u6e90\u548c\u9632\u6b62\u76f8\u4e92\u5e72\u6270\u3002 Docker\u5bb9\u5668\u8fd8\u6ca1\u6709\u4efb\u4f55\u5f62\u5f0f\u7684\u786c\u4ef6\u9694\u79bb\uff0c\u56e0\u6b64\u5b83\u4eec\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002</p> <p>\u5982\u4f55\u8fdb\u884c\u8fdb\u884c\u9009\u62e9\uff1f  \u2003\u2003\u9009\u62e9\u5bb9\u5668\u8fd8\u662f\u865a\u62df\u673a\u4f9d\u8d56\u4e8e\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u8bbe\u8ba1\u3002 \u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u65e8\u5728\u63d0\u4f9b\u53ef\u4f38\u7f29\u6027\u548c\u9ad8\u53ef\u7528\u6027\uff0c\u90a3\u4e48\u5bb9\u5668\u662f\u6700\u597d\u7684\u9009\u62e9\uff0c\u5426\u5219\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u653e\u7f6e\u5728\u865a\u62df\u673a\u4e2d\u3002\u5bf9\u4e8e\u9ad8I/O\u8981\u6c42\u7684\u4e1a\u52a1\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u670d\u52a1\uff0c\u5efa\u8bae\u90e8\u7f72Docker+\u7269\u7406\u673a\uff0c\u56e0\u4e3a\u5728\u865a\u62df\u673a\u4e2d\u90e8\u7f72Docker\uff0cI/O\u6027\u80fd\u5c06\u53d7\u5230\u865a\u62df\u673a\u7684\u9650\u5236\u3002\u5bf9\u4e8e\u865a\u62df\u684c\u9762\u670d\u52a1\u7b49\u5f3a\u8c03\u79df\u6237\u6743\u9650\u548c\u5b89\u5168\u7684\u4e1a\u52a1\uff0c\u5efa\u8bae\u91c7\u7528\u865a\u62df\u673a\u65b9\u5f0f\uff0c\u865a\u62df\u673a\u7684\u591a\u79df\u6237\u5f3a\u9694\u79bb\u7279\u6027\uff0c\u4fdd\u8bc1\u79df\u6237\u5728\u62e5\u6709\u865a\u673aroot\u6743\u9650\u7684\u540c\u65f6\uff0c\u5176\u4ed6\u79df\u6237\u548c\u4e3b\u673a\u7684\u5b89\u5168\u3002  \u2003\u2003\u6216\u8005\u66f4\u597d\u7684\u9009\u62e9\u662f\u6df7\u5408\u65b9\u6848\uff0c\u8fd0\u884c\u5728\u865a\u62df\u673a\u4e2d\u7684\u5bb9\u5668\u3002 Docker\u5bb9\u5668\u53ef\u4ee5\u5728\u865a\u62df\u673a\u5185\u90e8\u8fd0\u884c\uff0c\u865a\u62df\u673a\u5e76\u4e3a\u5b83\u4eec\u63d0\u4f9b\u7ecf\u8fc7\u9a8c\u8bc1\u7684\u9694\u79bb\uff0c\u5b89\u5168\u5c5e\u6027\uff0c\u79fb\u52a8\u6027\uff0c\u52a8\u6001\u865a\u62df\u7f51\u7edc\u7b49\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u9694\u79bb\u548c\u8d44\u6e90\u7684\u9ad8\u5229\u7528\u7387\uff0c\u57fa\u672c\u5e94\u8be5\u9075\u5faa\uff1a\u4e0d\u540c\u79df\u6237\u7684\u4e1a\u52a1\u8fd0\u884c\u91c7\u7528\u865a\u62df\u673a\u9694\u79bb\uff0c\u76f8\u4f3c\u7c7b\u578b\u7684\u4e1a\u52a1\u90e8\u7f72\u5728\u540c\u4e00\u7ec4\u5bb9\u5668\u4e0a\u7684\u601d\u8def\u3002</p> <p>\u7ed3\u8bba \u2003\u2003Docker\u5bb9\u5668\u6b63\u5728\u6210\u4e3aDevOps\u73af\u5883\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u5de5\u5177\u3002 DevOps\u9886\u57df\u5185\u7684Docker Containers\u7684\u7528\u4f8b\u975e\u5e38\u591a\u3002\u5728Docker\u5bb9\u5668\u4e0a\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\uff0c\u7136\u540e\u5728\u4efb\u4f55\u5730\u65b9\u90e8\u7f72\uff08Cloud\u6216\u5185\u90e8\u90e8\u7f72\u6216\u4efb\u4f55Linux\u7684\u98ce\u683c\uff09\u73b0\u5728\u90fd\u5df2\u6210\u4e3a\u73b0\u5b9e\u3002  \u2003\u2003\u5728\u5f02\u6784\u73af\u5883\u4e2d\u5de5\u4f5c\uff0c\u865a\u62df\u673a\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u7684\u7075\u6d3b\u6027\uff0c\u800cDocker\u5bb9\u5668\u4e3b\u8981\u5173\u6ce8\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u4f9d\u8d56\u5173\u7cfb\u3002Docker Containers\u5141\u8bb8\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a\u4e91\u7684\u865a\u62df\u673a\u73af\u5883\u6765\u5904\u7406\u4e91\uff0c\u4ece\u800c\u8f7b\u677e\u79fb\u690d\u8de8\u4e91\u7684\u5e94\u7528\u7a0b\u5e8f\u5806\u6808\u3002\u8fd9\u4ee3\u8868\u4e86\u4e00\u4e2a\u6709\u7528\u7684\u529f\u80fd\uff0c\u5728\u6ca1\u6709Docker Containers\u7684\u60c5\u51b5\u4e0b\uff0c\u5fc5\u987b\u4ee5\u66f4\u52a0\u590d\u6742\u548c\u4e4f\u5473\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u3002\u8fd9\u91cc\u9610\u8ff0\u7684\u5e76\u4e0d\u662f\u5173\u4e8e\u653e\u5f03\u865a\u62df\u673a\uff0c\u800c\u662f\u5728\u5fc5\u8981\u65f6\u9664\u4e86\u865a\u62df\u673a\u4e4b\u5916\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4f7f\u7528Docker\u5bb9\u5668\uff0c\u4e0d\u8ba4\u4e3aDocker\u5bb9\u5668\u53ef\u4ee5\u5b8c\u5168\u6e05\u9664\u865a\u62df\u673a\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker","title":"\u4e8c\u3001Docker\u4ecb\u7ecd","text":"<p>Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5e94\u7528\u5bb9\u5668\u5f15\u64ce\uff0c\u57fa\u4e8e Go \u8bed\u8a00 \u5e76\u9075\u4eceApache2.0\u534f\u8bae\u5f00\u6e90\u3002 Docker \u53ef\u4ee5\u8ba9\u5f00\u53d1\u8005\u6253\u5305\u4ed6\u4eec\u7684\u5e94\u7528\u4ee5\u53ca\u4f9d\u8d56\u5305\u5230\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u3001\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53d1\u5e03\u5230\u4efb\u4f55\u6d41\u884c\u7684 Linux \u673a\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u865a\u62df\u5316\u3002 \u5bb9\u5668\u662f\u5b8c\u5168\u4f7f\u7528\u6c99\u7bb1\u673a\u5236\uff0c\u76f8\u4e92\u4e4b\u95f4\u4e0d\u4f1a\u6709\u4efb\u4f55\u63a5\u53e3\uff08\u7c7b\u4f3c iPhone \u7684 app\uff09,\u66f4\u91cd\u8981\u7684\u662f\u5bb9\u5668\u6027\u80fd\u5f00\u9500\u6781\u4f4e\u3002 Docker \u4ece 17.03 \u7248\u672c\u4e4b\u540e\u5206\u4e3a CE\uff08Community Edition: \u793e\u533a\u7248\uff09 \u548c EE\uff08Enterprise Edition: \u4f01\u4e1a\u7248\uff09\uff0c\u5bf9\u4e8e\u6211\u4eec\u7684\u5b66\u4e60\u4f7f\u7528\u793e\u533a\u7248\u5c31\u53ef\u4ee5\u4e86\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#1dockerhttpshubdockercom","title":"1.Docker\u5b98\u65b9\u4ed3\u5e93\uff1a**https://hub.docker.com/","text":""},{"location":"mds/Docker-Note/DockerLearningNote/#2docker","title":"2.Docker\u76f8\u5173\u7ec4\u4ef6\uff1a","text":"<p>Docker Client - Docker\u5ba2\u6237\u7aef</p> <p>Docker Server - Docker daemon\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u63a5\u53d7\u7528\u6237\u901a\u8fc7Docker Client\u53d1\u9001\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14\u6309\u7167\u76f8\u5e94\u7684\u8def\u7531\u89c4\u5219\u5b9e\u73b0\u8def\u7531\u5206\u53d1\u3002</p> <p>Docker \u955c\u50cf - Docker\u955c\u50cf\u8fd0\u884c\u4e4b\u540e\u53d8\u4e3a\u5bb9\u5668(docker run)</p> <p>\u7ec4\u4ef6\u95f4\u7684\u534f\u4f5c\u65b9\u5f0f\uff1a</p> <p>\u200b    </p>"},{"location":"mds/Docker-Note/DockerLearningNote/#3docker","title":"3.Docker \u955c\u50cf\u5316\u65b9\u5f0f\u4e0e\u5e94\u7528\u5171\u5b58","text":"<p>\u8bbe\u8ba1\u5f15\u5165\uff1a</p> <p>\u200b    </p> <p>\u6539\u8fdb\u8bbe\u8ba1\uff1a</p> <p>\u200b    </p> <p>\u5206\u5c42\u8bbe\u8ba1\uff08\u5982LAMP\u914d\u7f6e\uff0c\u5404\u5360\u4e00\u5c42\uff0c\u66f4\u65b0\u7248\u672c\u76f4\u63a5\u5c42\u7ea7\u66ff\u6362\u5373\u53ef\u3002\uff09\uff1a</p> <p>\u200b    </p>"},{"location":"mds/Docker-Note/DockerLearningNote/#dockerlinux-ubuntu","title":"\u4e09\u3001Docker\u5b89\u88c5linux ubuntu\u7248\u672c","text":"<p>Docker\u652f\u6301linux\\windows\\mac\u4e09\u79cd\u7248\u672c\u5b89\u88c5</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#1vmwareubuntu","title":"1.VMware\u5b89\u88c5ubuntu\u670d\u52a1\u5668\u7248","text":""},{"location":"mds/Docker-Note/DockerLearningNote/#11","title":"1.1 \u5b89\u88c5\u8fc7\u7a0b","text":"<p>\u524d\u9762\u914d\u7f6e\u5c31\u9009\u62e9\u7a0d\u540e\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf...\u76f4\u81f3\u8fd9\u91cc\u9009\u62e9\u7cfb\u7edf\u8def\u5f84...</p> <p> </p> <p> </p> <p>\u9009\u62e9\u8bed\u8a00\uff0c\u6ca1\u6709\u4e2d\u6587\uff0c\u9009\u62e9\u82f1\u8bed\u5427</p> <p> </p> <p> </p> <p>\u5b89\u88c5ssh\u670d\u52a1</p> <p> </p> <p>\u914d\u7f6e\u7b2c\u4e09\u65b9\u6e90\uff1a\u4ec0\u4e48\u90fd\u4e0d\u9009\uff0c\u76f4\u63a5Done</p> <p> </p> <p>\u5b89\u88c5\u5b8c\u6210\uff0c\u7531\u4e8e\u5b89\u88c5\u7684\u662fserver\u7248\u672c\uff0c\u5b89\u88c5\u901f\u5ea6\u975e\u5e38\u5757\uff0c\u4e4b\u540e\u9009\u62e9\u3010Cancel update and reboot\u3011\u201c\u53d6\u6d88\u66f4\u65b0\u5e76\u91cd\u65b0\u542f\u52a8\u201d.\u3002</p> <p> </p> <p>\u5b89\u88c5\u5b8c\u6210\uff0c\u8fd9\u91cc\u9700\u8981\u4e00\u70b9\u65f6\u95f4\u7b49\u5f85\u81ea\u52a8\u91cd\u542f...</p> <p></p> <p>\u51fa\u73b0\u9519\u8bef\uff01\u8fd9\u662f\u7531\u4e8e\u91cd\u542f\uff0c\u4efb\u7136\u52a0\u8f7diso\u6587\u4ef6\u5bfc\u81f4\uff0c\u5173\u95ed\u865a\u62df\u673a\uff0c\u4e0d\u52a0\u8f7diso\u6587\u4ef6\u5c31\u597d\u4e86\u3002</p> <p> </p> <p>\u91cd\u542f\u540e\u9996\u6b21\u9700\u8981\u70b9\u51fb\u56de\u8f66\u8fdb\u5165\u7cfb\u7edf\uff1b</p> <p>\u767b\u5f55\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u8f93\u5165\u6211\u4eec\u8bbe\u7f6e\u7684\u7528\u6237\u540d\u5bc6\u7801\uff08\u6ce8\uff1a\u5bc6\u7801\u8f93\u5165\u662f\u9690\u5f0f\u8f93\u5165\uff0c\u4e0d\u4f1a\u663e\u793a\uff09</p> <p> </p> <p> </p>"},{"location":"mds/Docker-Note/DockerLearningNote/#12-ifconfig","title":"1.2 ifconfig\u4f7f\u7528\uff0c\u9700\u8981\u5b89\u88c5\u76f8\u5173\u5de5\u5177\u5305","text":"<pre><code>sudo apt install net-tools\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#13-root","title":"1.3 \u5f00\u542froot\u7528\u6237\u53ca\u5173\u95ed","text":"<pre><code># \u8bbe\u7f6e\u5bc6\u7801\u5373\u5f00\u542froot\u7528\u6237\nsudo passwd root\n\n# \u5220\u9664\u5bc6\u7801\u5373\u5173\u95edroot\u7528\u6237\nsudo passwd -dl root\n</code></pre> <p>\u8bf4\u660e\uff1aubuntu\u867d\u7136\u5f00\u542froot\u8d26\u6237\uff0c\u4f46\u662fssh\u4ecd\u7136\u4e0d\u652f\u6301\u8fde\u63a5\uff01\u53ea\u80fd\u672c\u5730\u5207\u6362\uff1b\u5982\u9700\u8fde\u63a5\uff0c\u9700\u8981\u914d\u7f6e\u76f8\u5173\u6587\u4ef6\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#14-ssh","title":"1.4 ssh\u8fde\u63a5","text":"<pre><code>ssh chcnew@192.168.127.xxx\n</code></pre> <p>\u8bbe\u7f6eroot\u5f00\u542fssh\u8fde\u63a5\uff1a</p> <pre><code>vim /etc/ssh/sshd_config\n\n# \u6211\u4eec\u53d1\u73b0line  #PermitRootLogin prohibit-password\n\n# \u66f4\u6539\u5185\u5bb9 \nPermitRootLogin yes\n\n# \u4fdd\u5b58\u540e\u9000\u51fa\nEsc + wq\n\n# \u63a5\u4e0b\u6765\u91cd\u542fssh\u670d\u52a1\nservice ssh restart\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#15-ubuntu2204ip","title":"1.5 ubuntu22.04\u914d\u7f6e\u9759\u6001ip","text":"<p>\u5b89\u88c5\u76f8\u5173\u670d\u52a1\uff1a</p> <pre><code>sudo apt-get install network-manager\ncat /etc/netplan/00-installer-config.yaml\n\n# \u539f\u672c\u914d\u7f6e\u5185\u5bb9\n# This is the network config written by 'subiquity'\nnetwork:\n  ethernets:\n    ens33:\n      dhcp4: true\n  version: 2\n</code></pre> <p>\u4fee\u6539\u7f51\u7edc\u914d\u7f6e\uff1a</p> <pre><code>network:\n  version: 2\n  renderer: NetworkManager  # \u6e32\u67d3\u5668\n  ethernets:\n    ens33:  # \u7f51\u5361\u540d\u79f0\n      dhcp4: no  # \u5173\u95eddhcp4\n      dhcp6: no  # \u5173\u95eddhcp6\n      addresses: [192.168.127.150/24]  # \u9759\u6001ip\n      gateway4: 192.168.127.2  # \u7f51\u5173\n      nameservers:\n        addresses: [192.168.127.1,114.114.114.114] # DNS - \u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u4e3aPC\u5171\u4eab\u7ed9VM-net8\u7684\u7f51\u7edcip\n</code></pre> <p>\u91cd\u8f7d\u670d\u52a1\u751f\u6548\uff1a</p> <pre><code>sudo netplan apply\n\n# \u6d4b\u8bd5\u7f51\u8def\nping www.baidu.com\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#2ubuntudocker","title":"2.Ubuntu\u670d\u52a1\u5668\u7248\u5b89\u88c5Docker","text":"<p>Docker\u5b98\u65b9\u5b89\u88c5\u6307\u5bfc\uff1ahttps://docs.docker.com/desktop/install/ubuntu/</p> <p>\u4e0b\u8f7dDEB package\u65f6\uff0c\u5b9e\u65f6\u66f4\u65b0\u67e5\u770b\u65e5\u5fd7\u547d\u4ee4\uff1a</p> <pre><code>tail -f \u6587\u4ef6\u540d\n</code></pre> <p>\u914d\u7f6e\u5141\u8bb8\u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6ftp\u670d\u52a1\uff0cvsftp\u914d\u7f6e\u53c2\u8003\uff1ahttps://blog.csdn.net/qq_43299421/article/details/115321927</p> <pre><code># \u5b89\u88c5\u670d\u52a1\nsudo apt-get install vsftpd\n\n# \u5f00\u542f\u670d\u52a1\nservice vsftpd start\n\n# \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\nsudo mkdir /home/uftp\nchmod 777 /home/uftp\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\nsudo vim /etc/vsftpd.conf\n\n\u4fee\u6539\u5141\u8bb8\u533f\u540d\u7528\u6237\u8fde\u63a5\u914d\u7f6e\uff1a\n    anonymous_enable=YES  \n\u6253\u5f00\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\u6ce8\u91ca\u914d\u7f6e\uff1a\n    write_enable=YES\nwq\u4fdd\u5b58\n\n# \u91cd\u542f\u670d\u52a1\nservice vsftpd restart\n\n# \u6d4b\u8bd5ftp\u5ba2\u6237\u7aef\u8fde\u63a5\nftp 192.168.127.xxx\n\n# \u4e0a\u4f20\u6587\u4ef6\nput \u6587\u4ef6\u8def\u5f84\n</code></pre> <p>\u7ee7\u7eed\uff0c\u6839\u636e\u5b98\u65b9\u7f51\u7ad9\u63d0\u793a\uff0c\u5148\u5b89\u88c5docker-engine\uff0c\u518d\u88c5docker-desktop...</p> <p>\u6700\u540e\uff0c\u8fd0\u884c\u6d4b\u8bd5\u955c\u50cf\u8f6c\u4e3a\u5bb9\u5668\uff1asudo docker run hello-world</p> <p> </p>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker_1","title":"\u56db\u3001Docker\u955c\u50cf\u52a0\u901f\u914d\u7f6e","text":"<p>\u7533\u8bf7\u963f\u91cc\u4e91Docker\u5b98\u65b9\u52a0\u901f\u5e94\u7528\uff1a\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5668</p> <p>\u901a\u8fc7\u4fee\u6539daemon\u914d\u7f6e\u6587\u4ef6/etc/docker/daemon.json\u6765\u4f7f\u7528\u52a0\u901f\u5668(\u4e0b\u9762\u662f\u6211\u4e2a\u4eba\u52a0\u901f\u5668-\u6bcf\u4e2a\u8d26\u6237\u90fd\u4e0d\u540c)</p> <pre><code>sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n  \"registry-mirrors\": [\"https://ftvwjbmx.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n# docker\u8fdb\u7a0b\u67e5\u770b\nps -ef | grep docker\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker_2","title":"\u4e94\u3001Docker\u5316\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u6bd4\u5982Wordpress\u8fd0\u884c\u73af\u5883\u9700\u8981LAMP\uff1a</p> <ul> <li>linux</li> <li> <p>apache\u3001mod_rewrite</p> </li> <li> <p>mysql5.6+</p> </li> <li> <p>php5.6+</p> </li> </ul>"},{"location":"mds/Docker-Note/DockerLearningNote/#1docker-run","title":"1.docker run\u547d\u4ee4\u89e3\u6790","text":"<pre><code># docker run \u955c\u50cf\u8f6c\u4e3a\u5bb9\u5668 --name \u5bb9\u5668\u540d\u79f0 --env \u73af\u5883\u53d8\u91cf\u6ce8\u5165-d \u540e\u53f0\u8fd0\u884c mariadb \u955c\u50cf\ndocker run --name db --env MYSQL_ROOT_PASSWORD=examplepwd -d mariadb\n\n# --link\u53c2\u6570\u4f1a\u5411db\u5bb9\u5668\u7684/etc/hosts\u4ef6\u5199\u4e00\u6761\u89e3\u6790\u8bb0\u5f55\uff0c\u5bf9\u5e94\u503c\u4e3adb\u5bb9\u5668\u7684ip\u5730\u5740\uff0c\u8fd9\u6837\u53ef\u4ee5\u8bbf\u95ee\u5230db\u5bb9\u5668\n# \u8fd0\u884c\u955c\u50cf \u8d77\u540dMyWordPress \u94fe\u63a5db\u6570\u636e\u5e93:\u522b\u540dmysql -p\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04 -d\u540e\u53f0\u8fd0\u884c\u8fdb\u7a0b\ndocker run --name MyWordPress --link db:mysql -p 8080:80 -d wordpress\n\n# \u542f\u52a8\u5bb9\u5668\u5b9e\u4f8b\u547d\u4ee4\u793a\u4f8b\ndocker run \\\n  -itd \\\n  --name mydocker \\\n  --link mysql:mysql \\\n  -v /home/chcnew/shared1:/root/shared1 \\\n  -v /home/chcnew/shared2:/root/shared2 \\\n  -p 8080:80 \\\n  -p 4430:443 \\\n  /bin/bash\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#2run","title":"2.\u4e0b\u8f7d\u955c\u50cf\u5177\u4f53\u5e94\u7528run","text":"<pre><code># \u62c9\u53d6\u955c\u50cf\u5230\u672c\u5730\ndocker pull wordpress\ndocker pull mariadb\n\n# \u67e5\u770b\u672c\u5730\u955c\u50cf\u5217\u8868\ndocker images\n\n# \u8fd0\u884c\u955c\u50cf\u8f6c\u4e3a\u5bb9\u5668\ndocker run --name db --env MYSQL_ROOT_PASSWORD=examplepwd -d mariadb\ndocker run --name MyWordPress --link db:mysql -p 8080:80 -d wordpress\n\n# \u67e5\u770bdocker\u8fdb\u7a0b\ndocker ps\n\n# \u8bbf\u95eeip+\u7aef\u53e3\u5c31\u53ef\u4ee5\u8fdb\u5165wordpress\u91cc\u9762\u5566\uff01\n</code></pre> <p>\u6ce8\u610f\uff1a\u955c\u50cfrun\u6210\u529f\u7684\u524d\u63d0\uff0c\u5fc5\u987b\u81f3\u5c11\u6709\u4e00\u4e2a\u524d\u53f0\u5b88\u62a4\u8fdb\u7a0b\u8fd0\u884c\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker_3","title":"\u516d\u3001Docker\u5355\u5bb9\u5668\u7ba1\u7406","text":"<p>Docker\u4e09\u4e2a\u91cd\u8981\u6982\u5ff5\uff1a\u4ed3\u5e93\uff08Repository\uff09\u3001\u955c\u50cf\uff08Image\uff09\u548c\u5bb9\u5668\uff08Container\uff09</p> <p>\u8fd0\u884c\u547d\u4ee4\u793a\u4f8b\uff1a</p> <pre><code>docker run --name MyWordPress --link db:mysql -p 8080:80 -d wordpress\n</code></pre> <p>Docker\u6307\u4ee4\u57fa\u672c\u7528\u6cd5\uff1a</p> <p>docker + \u5173\u952e\u5b57\uff08command\uff09+ \u53c2\u6570 \u53c2\u6570\u503c</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#1docker","title":"1.Docker\u57fa\u7840\u5e38\u7528\u547d\u4ee4","text":"<pre><code># \u955c\u50cf\u5c42\u9762\ndocker info  # \u4fe1\u606f\u67e5\u770b\ndocker search + \u955c\u50cf\u540d  # \u4ed3\u5e93\u67e5\u8be2\u955c\u50cf\ndocker pull + \u955c\u50cf\u540d  # \u955c\u50cf\u4e0b\u8f7d\uff0c\u4e00\u822c\u53bbhub.docker.com\u91cc\u9762\u53bb\u627e\u5bf9\u5e94\u4e0b\u8f7d\u7684\u547d\u4ee4\ndocker images  # \u672c\u5730\u955c\u50cf\u4fe1\u606f\u5217\u8868\u67e5\u8be2\ndocker rmi + \u955c\u50cf\u540d:\u7248\u672c\u53f7 \u6216\u8005 \u955c\u50cfid\uff08\u5141\u8bb8\u53ea\u5199\u524d4\u4f4d\uff09 # \u5220\u9664\u672c\u5730\u955c\u50cf\ndocker run  # \u5bb9\u5668\u521b\u5efa\uff08\u8fd0\u884c\u955c\u50cf\u8f6c\u5bb9\u5668\uff09\n\n# \u5bb9\u5668\u5c42\u9762\ndocker ps  # \u5bb9\u5668\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u67e5\u8be2 \u67e5\u8be2\u5230stop\u7684\u5bb9\u5668\ndocker ps -a  # \u53ef\u4ee5\u67e5\u5230\u5168\u90e8run\u8fc7\u7684\u955c\u50cf\uff08\u5bb9\u5668\uff09\ndocker start/stop + \u5bb9\u5668\u540d  # \u5bb9\u5668\u542f\u52a8/\u505c\u6b62\ndocker rm + \u5bb9\u5668\u540d  # \u5220\u9664stop\u7684\u5bb9\u5668\n\n# docker\u6307\u4ee4\u9664\u4e86\u5355\u6761\u4f7f\u7528\uff0c\u4e5f\u53ef\u652f\u6301\u8d4b\u503c\u4f7f\u7528\u3001\u89e3\u6790\u53d8\u91cf\u548c\u5d4c\u5957\u4f7f\u7528\u3002\n</code></pre> <p>docker info\u547d\u4ee4\u6ce8\u610f\u67e5\u770bStorage Driver:</p> <pre><code>Storage Driver: overlay2  # \u6b63\u5e38\uff0c\u7a33\u5b9a\nStorage Driver: dm # \u5f02\u5e38\uff0c\u4e0d\u7a33\u5b9a\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#2_1","title":"2.\u5d4c\u5957\u4f7f\u7528\u5220\u9664\u5bb9\u5668","text":"<pre><code># \u5f3a\u5236\u5220\u9664\u5168\u90e8\u5bb9\u5668\n# \u8868\u793a\u5faa\u73af\u6267\u884c\u547d\u4ee4\n# docker ps -a -q \u8868\u793a\u5217\u51fa\u5168\u90e8\u5bb9\u5668id\ndocker rm -f $(docker ps -a -q)\n</code></pre> <p>Doker\u547d\u4ee4\u5927\u5168\uff1ahttps://www.runoob.com/docker/docker-command-manual.html</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#3","title":"3.\u5bb9\u5668\u66f4\u591a\u76f8\u5173\u547d\u4ee4","text":"<p>\u6bcf\u4e2a\u5bb9\u5668\u88ab\u521b\u5efa\u4ee5\u540e\uff0c\u90fd\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u4e2aCONTAINER ID\u4f5c\u4e3a\u552f\u4e00\u6807\u8bc6(128\u4f4d)\uff0c\u8fd9\u53ef\u4ee5\u7528\u4e8e\u542f\u52a8\u3001\u505c\u6b62\u3001\u4fee\u6539\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u3002</p> <pre><code>docker ps --no-trunc  # \u67e5\u770b128\u4f4d\u5b8c\u6574id\ndocker start/stop CONTAINERID  # \u542f\u52a8/\u505c\u6b62\u5bb9\u5668 \u4e5f\u53ef\u4ee5\u901a\u8fc7\u522b\u540d\u542f\u52a8/\u505c\u6b62\ndocker start/stop MyWordPress\ndocker inspect MyWordPress  # \u67e5\u770b\u5bb9\u5668\u5168\u90e8\u4fe1\u606f\ndocker logs MyWordPress  # \u67e5\u770b\u5bb9\u5668\u65e5\u5fd7\ndocker stats MyWordPress  # \u67e5\u770b\u5bb9\u5668\u5360\u7528\u7cfb\u7edf\u8d44\u6e90\u4fe1\u606f\ndocker exec + \u5bb9\u5668\u540d + \u8be5\u5bb9\u5668\u5185\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4 \ndocker exec -it + \u5bb9\u5668\u540d + /bin/bash  # \u8fdb\u5165\u5bb9\u5668\u5185\u90e8\u7684bash\uff0c\u76f4\u63a5\u5728\u5185\u90e8\u4f7f\u7528\u547d\u4ee4\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#4docker-run","title":"4.docker run\u547d\u4ee4\u7684\u5ef6\u4f38","text":"<pre><code>--restart=always  # \u603b\u662f\u968f\u7740docker\u670d\u52a1\u542f\u52a8\u800c\u81ea\u52a8\u542f\u52a8\n-h x.xx.xxx  # \u8bbe\u7f6e\u5bb9\u5668\u4e3b\u673a\u540d\n--dns xx.x.xx.x  # \u8bbe\u7f6e\u5bb9\u5668DNS\u670d\u52a1\u5668\n--dns-search  # DNS\u641c\u7d22\u8bbe\u7f6e\n--add-host hostname:IP  # \u6ce8\u5165hostname&lt;&gt;IP\u89e3\u6790\uff0c\u5728\u5bb9\u5668\u5185\u90e8\u8fdb\u5165/etc/hosts\u6587\u4ef6\u4e2d\uff0c\u4f1a\u591a\u4e00\u6761\u8bb0\u5f55 hostname IP.\n--rm  # \u5bb9\u5668\u505c\u6b62\u65f6\u81ea\u52a8\u5220\u9664\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#5docker","title":"5.docker\u5176\u4ed6\u547d\u4ee4\u96c6\u5408","text":"<pre><code># \u641c\u7d22\u955c\u50cf\ndocker search ubuntu\n\n# \u67e5\u770b\u955c\u50cf\u5360\u7528\u7a7a\u95f4\ndocker system df\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker_4","title":"\u4e03\u3001Docker\u955c\u50cf\u7279\u6027","text":"<ol> <li>\u955c\u50cf\u4e0b\u8f7d\u4ee5\u540e\u4f1a\u6709\u4e00\u4e2a\u552f\u4e00\u8868\u793aIMAGE ID\uff0c\u8fd9\u4e0e\u5bb9\u5668\u521b\u5efa\u65f6\u5bb9\u5668\u4f1a\u6709CONTAINER ID\u662f\u4e00\u81f4\u7684\uff1b\u552f\u4e00\u6807\u8bc6\u4e5f\u53ef\u4ee5\u7528\u201c\u955c\u50cf\u540d:\u7248\u672c\u53f7\u201d\u8868\u793a\uff0c\u6700\u65b0\u7a33\u5b9a\u7248\u672c\u53f7latest</li> <li>\u955c\u50cf\u7684\u5206\u5c42\uff1aDocker\u7684\u955c\u50cf\u901a\u8fc7\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\uff08union filesystem\uff09\u5c06\u5404\u5c42\u6587\u4ef6\u8054\u5408\u53e0\u52a0\u5728\u4e00\u8d77\u3002</li> <li>bootfs\uff1a\u7528\u4e8e\u7cfb\u7edf\u5f15\u5bfc\u7684\u6587\u4ef6\u7cfb\u7edf\uff0cbootfs(boot file system)\u4e3b\u8981\u5305\u542bbootloader\u548ckernel, bootloader\u4e3b\u8981\u662f\u5f15\u5bfc\u52a0\u8f7dkernel, Linux\u521a\u542f\u52a8\u65f6\u4f1a\u52a0\u8f7dbootfs\u6587\u4ef6\u7cfb\u7edf\uff0c\u5728Docker\u955c\u50cf\u7684\u6700\u5e95\u5c42\u662fbootfs\u3002\u8fd9\u4e00\u5c42\u4e0e\u6211\u4eec\u5178\u578b\u7684Linux/Unix\u7cfb\u7edf\u662f\u4e00\u6837\u7684\uff0c\u5305\u542bboot\u52a0\u8f7d\u5668\u548c\u5185\u6838\u3002\u5f53boot\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\u6574\u4e2a\u5185\u6838\u5c31\u90fd\u5728\u5185\u5b58\u4e2d\u4e86\uff0c\u6b64\u65f6\u5185\u5b58\u7684\u4f7f\u7528\u6743\u5df2\u7531bootfs\u8f6c\u4ea4\u7ed9\u5185\u6838\uff0c\u6b64\u65f6\u7cfb\u7edf\u4e5f\u4f1a\u5378\u8f7dbootfs\u3002</li> <li>rootfs\uff1arootfs (root file system) \uff0c\u5728bootfs\u4e4b\u4e0a\u3002\u5305\u542b\u7684\u5c31\u662f\u5178\u578b Linux \u7cfb\u7edf\u4e2d\u7684 /dev, /proc, /bin, /etc \u7b49\u6807\u51c6\u76ee\u5f55\u548c\u6587\u4ef6\u3002rootfs\u5c31\u662f\u5404\u79cd\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u53d1\u884c\u7248\uff0c\u6bd4\u5982Ubuntu\uff0cCentos\u7b49\u7b49\u3002 \u4f20\u7edf\u6a21\u5f0f\u4e2d\uff0c\u7cfb\u7edf\u542f\u52a8\u65f6\uff0c\u5185\u6838\u6302\u8f7drootfs\u8868\u73b0\u4e3a\u201c\u53ea\u8bfb\u201d\u6a21\u5f0f\uff0c\u5b8c\u6574\u6027\u81ea\u68c0\u5b8c\u6210\u540e\uff0c\u5c06\u5176\u6302\u8f7d\u4f4d\u201c\u8bfb\u5199\u201d\u6a21\u5f0f\u3002 Docker\u4e2d\uff0crootfs\u6709\u5185\u6838\u6302\u8f7d\u4e3a\u201c\u53ea\u8bfb\u201d\u6a21\u5f0f\uff0c\u7136\u540e\u901a\u8fc7\u4e00\u4e2aUFS\u6280\u672f\uff0c\u6302\u8f7d\u4e00\u4e2a\u201c\u53ef\u5199\u201d\u5c42\u3002</li> <li>\u5df2\u6709\u5206\u5c42\u53ea\u80fd\u8bfb\u4e0d\u53ef\u5199\u3002</li> <li>\u4e0a\u5c42\u4f18\u5148\u7ea7\u6c38\u8fdc\u5927\u4e8e\u4e0b\u5c42\uff0c\u955c\u50cf\u4e4b\u540e\u8f6c\u4e3a\u5bb9\u5668\uff0c\u6700\u4e0a\u5c42\u5373\u4e3a\u53ef\u5199\u5c42\u3002</li> </ol>"},{"location":"mds/Docker-Note/DockerLearningNote/#docker_5","title":"\u516b\u3001Docker\u955c\u50cf\u6784\u5efa\uff08\u5bb9\u5668\u8f6c\u4e3a\u955c\u50cf\uff09","text":"<p>\u955c\u50cf\u6784\u5efa\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u5bb9\u5668\u8f6c\u6362\u548cDockerFile\u6784\u5efa</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#1_1","title":"1.\u5bb9\u5668\u8f6c\u4e3a\u955c\u50cf","text":"<p>\u5bb9\u5668 - &gt; \u955c\u50cf\uff0c\u793a\u4f8b\uff1a</p> <pre><code># \u5bb9\u5668\u8f6c\u955c\u50cf \u9700\u8981\u8f6c\u6362\u7684\u5bb9\u5668\u540d\u79f0 \u8f6c\u6362\u540e\u7684\u955c\u50cf\u540d\u79f0:\u7248\u672c\u53f7\ndocker commit ContainerName ImageName:VersionNO\n</code></pre> <p>\u5b9e\u6218\uff0ccentos\u5236\u4f5c\u4e00\u4e2a\u5305\u542bmysql\u7684\u955c\u50cf\uff1a</p> <pre><code># \u4e0b\u8f7d\u4e00\u4e2a\u5305\u542b\u524d\u53f0\u5b88\u62a4\u8fdb\u7a0b\u7684centos\uff0c\u5426\u5219\u542f\u52a8\u4e0d\u4e86\uff08\u7f51\u6613\u4e91\u3001\u963f\u91cc\u4e91\u955c\u50cf\u7ad9\u90fd\u53ef\u4ee5\u4e0b\u8f7d\uff09\ndocker pull hub.c.163.com/public/centos:6.7-tools\ndocker images\ndocker run --name mysql -d hub.c.163.com/public/centos\ndocker ps -a\n# \u8fdb\u5165\u8fd0\u884c\u7684\u5bb9\u5668mysql\u5185\u90e8\ndocker exec -it mysql /bin/bash\nyum -y install mysql mysql-server\nservice mysqld start\n# \u914d\u7f6emysql\u5bc6\u7801\nmysqladmin -uroot password 123\nmysql -uroot -ps\n# \u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\nmysql&gt; create database learning;\nmysql&gt; show databases;\n# \u9000\u51famysql\u6570\u636e\u5e93\nmysql&gt; exit;\n# \u9000\u51famysql\u5bb9\u5668\u5185\u90e8\nexit\n# \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps -a\n# \u5c06\u5bb9\u5668\u521b\u5efa\u4e3a\u955c\u50cf\ndocker commit mysql mysqlImage:5.1\ndocker images\n# \u6b64\u65f6\u5c31\u53ef\u4ee5\u67e5\u770b\u5230\u65b0\u521b\u5efa\u7684\u955c\u50cf\u4e86\n# \u6ce8\u610f\uff1a\u8fd9\u79cd\u65b9\u6cd5\uff0cdocker run\u955c\u50cf\u4ee5\u540e\uff0c\u5185\u90e8mysql\u670d\u52a1\u5e76\u4e0d\u4f1a\u81ea\u5df1\u542f\u52a8\uff01commit\u53ea\u662f\u4fdd\u5b58\u5f53\u65f6\u955c\u50cf\u3002\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#2dokcerfile","title":"2.DokcerFile\u811a\u672c\u6784\u5efa\u955c\u50cf","text":"<p>DockerFile\u662f\u4e00\u79cd\u88abDocker\u670d\u52a1\u7a0b\u5e8f\u89e3\u91ca\u7684\u811a\u672c\uff0c\u5b83\u7531\u4e00\u6761\u4e00\u6761\u7684\u6307\u4ee4\u6784\u6210\uff0c\u6bcf\u6761\u6307\u4ee4\u5bf9\u5e94linux\u76f8\u5173\u547d\u4ee4\uff0cDocker\u670d\u52a1\u7a0b\u5e8f\u5c06\u8fd9\u4e9b\u6307\u4ee4\u7ffb\u8bd1\u6210\u771f\u6b63\u7684linux\u547d\u4ee4\u3002 DockerFile\u6709\u81ea\u5df1\u7684\u4e66\u5199\u683c\u5f0f\u548c\u652f\u6301\u7684\u547d\u4ee4\uff0cDocker\u670d\u52a1\u7a0b\u5e8f\u89e3\u51b3\u8fd9\u4e9b\u547d\u4ee4\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u7c7b\u4f3c\u4e8emakefile\uff0cDocker\u670d\u52a1\u7a0b\u5e8f\u5c06\u8bfb\u53d6DockerFile\u811a\u672c\uff0c\u751f\u6210\u5b9a\u5236\u7684\u955c\u50cf\uff08Image\uff09</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#21-dockerfile","title":"2.1 DockerFile\u547d\u4ee4\u6784\u5efa","text":"<pre><code>docker build -t home/jdk-tomcat\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#22-dockerfile","title":"2.2 DockerFile\u6307\u4ee4\u8bf4\u660e","text":""},{"location":"mds/Docker-Note/DockerLearningNote/#from","title":"FROM \uff1a","text":"<p>\u5b9a\u5236\u7684\u955c\u50cf\u90fd\u662f\u57fa\u4e8e FROM \u7684\u955c\u50cf\uff0c\u4e0b\u9762\u7684 centos \u5c31\u662f\u5b9a\u5236\u9700\u8981\u7684\u57fa\u7840\u955c\u50cf\u3002\u540e\u7eed\u7684\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e centos\u3002\u6784\u5efa\u4ec5\u80fd\u4f7f\u7528\u4e00\u4e2a\u57fa\u7840\u955c\u50cf\u3002</p> <pre><code>FROM centos:7.2\nFROM centos\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#maintainer","title":"MAINTAINER\uff1a","text":"<p>\u955c\u50cf\u7ef4\u62a4\u8005\u59d3\u540d\u6216\u90ae\u7bb1\u5730\u5740\uff0c\u5bf9\u8be5\u955c\u50cf\u8f6c\u5bb9\u5668\u4e4b\u540e\u4f7f\u7528docker inspect\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u4fe1\u606f</p> <pre><code>MAINTAINER ccplayer ccplay@163.com\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#run","title":"RUN\uff1a","text":"<p>\u7528\u4e8e\u6267\u884c\u540e\u9762\u8ddf\u7740\u7684\u547d\u4ee4\u884c\u547d\u4ee4\u3002\u6709\u4ee5\u4e0b\u4fe9\u79cd\u683c\u5f0f\uff1a</p> <p>shell \u683c\u5f0f\uff1a</p> <pre><code>RUN &lt;\u547d\u4ee4\u884c\u547d\u4ee4&gt;\n# &lt;\u547d\u4ee4\u884c\u547d\u4ee4&gt; \u7b49\u540c\u4e8e\uff0c\u5728\u7ec8\u7aef\u64cd\u4f5c\u7684 shell \u547d\u4ee4\uff0c\u4f8b\u5982\uff1a\n# RUN cd /temp wget https://download.xxx.xxx/xxx... | tar -zxvf\n</code></pre> <p>exec \u683c\u5f0f\uff1a</p> <pre><code>RUN [\"\u53ef\u6267\u884c\u6587\u4ef6\", \"\u53c2\u65701\", \"\u53c2\u65702\"]\n# \u4f8b\u5982\uff1a\n# RUN [\"./test.php\", \"dev\", \"offline\"] \u7b49\u4ef7\u4e8e RUN ./test.php dev offline\n</code></pre> <p>\u6ce8\u610f\uff1aDockerfile \u7684\u6307\u4ee4\u6bcf\u6267\u884c\u4e00\u6b21\u90fd\u4f1a\u5728 docker \u4e0a\u65b0\u5efa\u4e00\u5c42\u3002\u6240\u4ee5\u8fc7\u591a\u65e0\u610f\u4e49\u7684\u5c42\uff0c\u4f1a\u9020\u6210\u955c\u50cf\u81a8\u80c0\u8fc7\u5927\u3002\u4f8b\u5982\uff1a</p> <pre><code>FROM centos\nRUN yum -y install wget\nRUN wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.tar.gz\"\nRUN tar -xvf redis.tar.gz\n</code></pre> <p>\u4ee5\u4e0a\u6267\u884c\u4f1a\u521b\u5efa 3 \u5c42\u955c\u50cf\u3002\u53ef\u7b80\u5316\u4e3a\u4ee5\u4e0b\u683c\u5f0f\uff1a</p> <pre><code>FROM centos\nRUN yum -y install wget \\\n    &amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.tar.gz\" \\\n    &amp;&amp; tar -xvf redis.tar.gz\n</code></pre> <p>\u5982\u4e0a\uff0c\u4ee5 &amp;&amp; \u7b26\u53f7\u8fde\u63a5\u547d\u4ee4\uff0c\u8fd9\u6837\u6267\u884c\u540e\uff0c\u53ea\u4f1a\u521b\u5efa 1 \u5c42\u955c\u50cf\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#cmd","title":"CMD\uff1a","text":"<p>\u7c7b\u4f3c\u4e8e RUN \u6307\u4ee4\uff0c\u7528\u4e8e\u8fd0\u884c\u7a0b\u5e8f\uff0c\u4f46\u4e8c\u8005\u8fd0\u884c\u7684\u65f6\u95f4\u70b9\u4e0d\u540c:</p> <pre><code>CMD \u5728docker run \u65f6\u8fd0\u884c\u3002\nRUN \u662f\u5728 docker build\u3002\n</code></pre> <p>\u4f5c\u7528\uff1a\u4e3a\u542f\u52a8\u7684\u5bb9\u5668\u6307\u5b9a\u9ed8\u8ba4\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u7a0b\u5e8f\u8fd0\u884c\u7ed3\u675f\uff0c\u5bb9\u5668\u4e5f\u5c31\u7ed3\u675f\u3002CMD \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f\u53ef\u88ab docker run \u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u6307\u5b9a\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\u6240\u8986\u76d6\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c Dockerfile \u4e2d\u5982\u679c\u5b58\u5728\u591a\u4e2a CMD \u6307\u4ee4\uff0c\u4ec5\u6700\u540e\u4e00\u4e2a\u751f\u6548\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>CMD &lt;shell \u547d\u4ee4&gt; \nCMD [\"&lt;\u53ef\u6267\u884c\u6587\u4ef6\u6216\u547d\u4ee4&gt;\",\"&lt;param1&gt;\",\"&lt;param2&gt;\",...] \nCMD [\"&lt;param1&gt;\",\"&lt;param2&gt;\",...]  # \u8be5\u5199\u6cd5\u662f\u4e3a ENTRYPOINT \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f\u63d0\u4f9b\u9ed8\u8ba4\u53c2\u6570\n</code></pre> <p>\u63a8\u8350\u4f7f\u7528\u7b2c\u4e8c\u79cd\u683c\u5f0f\uff0c\u6267\u884c\u8fc7\u7a0b\u6bd4\u8f83\u660e\u786e\u3002\u7b2c\u4e00\u79cd\u683c\u5f0f\u5b9e\u9645\u4e0a\u5728\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u4f1a\u81ea\u52a8\u8f6c\u6362\u6210\u7b2c\u4e8c\u79cd\u683c\u5f0f\u8fd0\u884c\uff0c\u5e76\u4e14\u9ed8\u8ba4\u53ef\u6267\u884c\u6587\u4ef6\u662f sh\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#entrypoint","title":"ENTRYPOINT\uff1a","text":"<p>\u7c7b\u4f3c\u4e8e CMD \u6307\u4ee4\uff0c\u4f46\u5176\u4e0d\u4f1a\u88ab docker run \u7684\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\u7684\u6307\u4ee4\u6240\u8986\u76d6\uff0c\u800c\u4e14\u8fd9\u4e9b\u547d\u4ee4\u884c\u53c2\u6570\u4f1a\u88ab\u5f53\u4f5c\u53c2\u6570\u9001\u7ed9 ENTRYPOINT \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f\u3002</p> <p>\u4f46\u662f, \u5982\u679c\u8fd0\u884c docker run \u65f6\u4f7f\u7528\u4e86 --entrypoint \u9009\u9879\uff0c\u5c06\u8986\u76d6 ENTRYPOINT \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f\u3002</p> <p>\u4f18\u70b9\uff1a\u5728\u6267\u884c docker run \u7684\u65f6\u5019\u53ef\u4ee5\u6307\u5b9a ENTRYPOINT \u8fd0\u884c\u6240\u9700\u7684\u53c2\u6570\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c Dockerfile \u4e2d\u5982\u679c\u5b58\u5728\u591a\u4e2a ENTRYPOINT \u6307\u4ee4\uff0c\u4ec5\u6700\u540e\u4e00\u4e2a\u751f\u6548\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>ENTRYPOINT [\"&lt;executeable&gt;\",\"&lt;param1&gt;\",\"&lt;param2&gt;\",...]\n</code></pre> <p>\u53ef\u4ee5\u642d\u914d CMD \u547d\u4ee4\u4f7f\u7528\uff1a\u4e00\u822c\u662f\u53d8\u53c2\u624d\u4f1a\u4f7f\u7528 CMD \uff0c\u8fd9\u91cc\u7684 CMD \u7b49\u4e8e\u662f\u5728\u7ed9 ENTRYPOINT \u4f20\u53c2\uff0c\u4ee5\u4e0b\u793a\u4f8b\u4f1a\u63d0\u5230\u3002</p> <p>\u793a\u4f8b\uff1a</p> <p>\u5047\u8bbe\u5df2\u901a\u8fc7 Dockerfile \u6784\u5efa\u4e86 nginx:test \u955c\u50cf\uff1a</p> <pre><code>FROM nginx\n\nENTRYPOINT [\"nginx\", \"-c\"] # \u5b9a\u53c2\nCMD [\"/etc/nginx/nginx.conf\"] # \u53d8\u53c2 \n</code></pre> <p>1\u3001\u4e0d\u4f20\u53c2\u8fd0\u884c</p> <pre><code>docker run  nginx:test\n</code></pre> <p>\u5bb9\u5668\u5185\u4f1a\u9ed8\u8ba4\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8\u4e3b\u8fdb\u7a0b\u3002</p> <pre><code>nginx -c /etc/nginx/nginx.conf\n</code></pre> <p>2\u3001\u4f20\u53c2\u8fd0\u884c</p> <pre><code>docker run  nginx:test -c /etc/nginx/new.conf\n</code></pre> <p>\u5bb9\u5668\u5185\u4f1a\u9ed8\u8ba4\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8\u4e3b\u8fdb\u7a0b(/etc/nginx/new.conf - \u5047\u8bbe\u5bb9\u5668\u5185\u5df2\u6709\u6b64\u6587\u4ef6)</p> <pre><code>nginx -c /etc/nginx/new.conf\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#user","title":"USER\uff1a","text":"<p>\u7528\u4e8e\u6307\u5b9a\u6267\u884c\u540e\u7eed\u547d\u4ee4\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\uff0c\u8fd9\u8fb9\u53ea\u662f\u5207\u6362\u540e\u7eed\u547d\u4ee4\u6267\u884c\u7684\u7528\u6237\uff08\u7528\u6237\u548c\u7528\u6237\u7ec4\u5fc5\u987b\u63d0\u524d\u5df2\u7ecf\u5b58\u5728\uff09\u3002\u9ed8\u8ba4\u7528\u6237\u4e3aroot</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>USER &lt;\u7528\u6237\u540d&gt;[:&lt;\u7528\u6237\u7ec4&gt;]\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#expose","title":"EXPOSE\uff1a","text":"<p>\u4ec5\u4ec5\u53ea\u662f\u58f0\u660e\u7aef\u53e3\uff0c\u663e\u793a\u4f5c\u7528\u800c\u5df2\u3002</p> <p>\u4f5c\u7528\uff1a</p> <ul> <li>\u5e2e\u52a9\u955c\u50cf\u4f7f\u7528\u8005\u7406\u89e3\u8fd9\u4e2a\u955c\u50cf\u670d\u52a1\u7684\u5b88\u62a4\u7aef\u53e3\uff0c\u4ee5\u65b9\u4fbf\u914d\u7f6e\u6620\u5c04\u3002</li> <li>\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u968f\u673a\u7aef\u53e3\u6620\u5c04\u65f6\uff0c\u4e5f\u5c31\u662f docker run -P \u65f6\uff0c\u4f1a\u81ea\u52a8\u968f\u673a\u6620\u5c04 EXPOSE \u7684\u7aef\u53e3\u3002</li> </ul> <p>\u683c\u5f0f\uff1a</p> <pre><code>EXPOSE &lt;\u7aef\u53e31&gt; [&lt;\u7aef\u53e32&gt;...]\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#env","title":"ENV\uff1a","text":"<p>\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5b9a\u4e49\u4e86\u73af\u5883\u53d8\u91cf\uff0c\u90a3\u4e48\u5728\u540e\u7eed\u7684\u6307\u4ee4\u4e2d\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>ENV &lt;key&gt; &lt;value&gt;\nENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...\n</code></pre> <p>\u4ee5\u4e0b\u793a\u4f8b\u8bbe\u7f6e NODE_VERSION = 7.0 \uff0c \u5728\u540e\u7eed\u7684\u6307\u4ee4\u4e2d\u53ef\u4ee5\u901a\u8fc7 $NODE_VERSION \u5f15\u7528\uff1a</p> <pre><code>ENV NODE_VERSION 7.0\n\nRUN curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\" \\\n  &amp;&amp; curl -SLO \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\"\n</code></pre> <p>\u6784\u5efa\u955c\u50cf\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\u793a\u4f8b\uff1a <pre><code>ENV JAVA_HOME /root/jdk1.7.0_25\nENV PATH=$JAVA_HOME/bin:$PATH\n</code></pre></p>"},{"location":"mds/Docker-Note/DockerLearningNote/#add","title":"ADD\uff1a","text":"<p>ADD \u6307\u4ee4\u548c COPY \u7684\u4f7f\u7528\u683c\u7c7b\u4f3c\uff08\u540c\u6837\u9700\u6c42\u4e0b\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528 COPY\uff09\u3002\u529f\u80fd\u4e5f\u7c7b\u4f3c\uff0c\u4e0d\u540c\u4e4b\u5904\u5982\u4e0b\uff1a</p> <ul> <li>ADD \u7684\u4f18\u70b9\uff1a\u5728\u6267\u884c &lt;\u6e90\u6587\u4ef6&gt; \u4e3a tar \u538b\u7f29\u6587\u4ef6\u7684\u8bdd\uff0c\u538b\u7f29\u683c\u5f0f\u4e3a gzip, bzip2 \u4ee5\u53ca xz \u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u81ea\u52a8\u590d\u5236\u5e76\u89e3\u538b\u5230 &lt;\u76ee\u6807\u8def\u5f84&gt;\u3002</li> <li>ADD \u7684\u7f3a\u70b9\uff1a\u5728\u4e0d\u89e3\u538b\u7684\u524d\u63d0\u4e0b\uff0c\u65e0\u6cd5\u590d\u5236 tar \u538b\u7f29\u6587\u4ef6\u3002\u4f1a\u4ee4\u955c\u50cf\u6784\u5efa\u7f13\u5b58\u5931\u6548\uff0c\u4ece\u800c\u53ef\u80fd\u4f1a\u4ee4\u955c\u50cf\u6784\u5efa\u53d8\u5f97\u6bd4\u8f83\u7f13\u6162\u3002\u5177\u4f53\u662f\u5426\u4f7f\u7528\uff0c\u53ef\u4ee5\u6839\u636e\u662f\u5426\u9700\u8981\u81ea\u52a8\u89e3\u538b\u6765\u51b3\u5b9a\u3002</li> </ul> <pre><code>ADD &lt;src&gt; &lt;dest&gt;\n&lt;src&gt;\uff1a\u76f8\u5bf9\u88ab\u6784\u5efa\u7684\u6e90\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u53ef\u4ee5\u662f\u6587\u4ef6\u6216\u76ee\u5f55\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u8fdc\u7a0burl\uff1b\n&lt;dest&gt;\uff1acontainer\u7684\u7edd\u5bf9\u8def\u5f84\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#copy","title":"COPY\uff1a","text":"<p>\u590d\u5236\u6307\u4ee4\uff0c\u4ece\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\u590d\u5236\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u5230\u5bb9\u5668\u91cc\u6307\u5b9a\u8def\u5f84\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>ADD &lt;src&gt; &lt;dest&gt;\n</code></pre> <pre><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;\u6e90\u8def\u5f841&gt;...  &lt;\u76ee\u6807\u8def\u5f84&gt;\nCOPY [--chown=&lt;user&gt;:&lt;group&gt;] [\"&lt;\u6e90\u8def\u5f841&gt;\",...  \"&lt;\u76ee\u6807\u8def\u5f84&gt;\"]\n</code></pre> <p>[--chown=:]\uff1a\u53ef\u9009\u53c2\u6570\uff0c\u7528\u6237\u6539\u53d8\u590d\u5236\u5230\u5bb9\u5668\u5185\u6587\u4ef6\u7684\u62e5\u6709\u8005\u548c\u5c5e\u7ec4\u3002 <p>&lt;\u6e90\u8def\u5f84&gt;\uff1a\u6e90\u6587\u4ef6\u6216\u8005\u6e90\u76ee\u5f55\uff0c\u8fd9\u91cc\u53ef\u4ee5\u662f\u901a\u914d\u7b26\u8868\u8fbe\u5f0f\uff0c\u5176\u901a\u914d\u7b26\u89c4\u5219\u8981\u6ee1\u8db3 Go \u7684 filepath.Match \u89c4\u5219\u3002\u4f8b\u5982\uff1a</p> <pre><code>COPY hom* /mydir/\nCOPY hom?.txt /mydir/\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#volume","title":"VOLUME\uff1a","text":"<p>\u5b9a\u4e49\u533f\u540d\u6570\u636e\u5377\u3002\u5728\u542f\u52a8\u5bb9\u5668\u65f6\u5fd8\u8bb0\u6302\u8f7d\u6570\u636e\u5377\uff0c\u4f1a\u81ea\u52a8\u6302\u8f7d\u5230\u533f\u540d\u5377\u3002</p> <p>\u4f5c\u7528\uff1a</p> <ul> <li>\u907f\u514d\u91cd\u8981\u7684\u6570\u636e\uff0c\u56e0\u5bb9\u5668\u91cd\u542f\u800c\u4e22\u5931\uff0c\u8fd9\u662f\u975e\u5e38\u81f4\u547d\u7684\u3002</li> <li>\u907f\u514d\u5bb9\u5668\u4e0d\u65ad\u53d8\u5927\u3002</li> </ul> <p>\u683c\u5f0f\uff1a</p> <pre><code>VOLUME [\"&lt;\u8def\u5f841&gt;\", \"&lt;\u8def\u5f842&gt;\"...]\nVOLUME &lt;\u8def\u5f84&gt;\n</code></pre> <p>\u5728\u542f\u52a8\u5bb9\u5668 docker run \u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 -v \u53c2\u6570\u4fee\u6539\u6302\u8f7d\u70b9\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#workdir","title":"WORKDIR\uff1a","text":"<p>\u6307\u5b9a\u5de5\u4f5c\u76ee\u5f55\u3002\u7528 WORKDIR \u6307\u5b9a\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u4f1a\u5728\u6784\u5efa\u955c\u50cf\u7684\u6bcf\u4e00\u5c42\u4e2d\u90fd\u5b58\u5728\u3002\uff08WORKDIR \u6307\u5b9a\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u5fc5\u987b\u662f\u63d0\u524d\u521b\u5efa\u597d\u7684\uff09\u3002</p> <p>docker build \u6784\u5efa\u955c\u50cf\u8fc7\u7a0b\u4e2d\u7684\uff0c\u6bcf\u4e00\u4e2a RUN \u547d\u4ee4\u90fd\u662f\u65b0\u5efa\u7684\u4e00\u5c42\u3002\u53ea\u6709\u901a\u8fc7 WORKDIR \u521b\u5efa\u7684\u76ee\u5f55\u624d\u4f1a\u4e00\u76f4\u5b58\u5728\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>WORKDIR &lt;\u5de5\u4f5c\u76ee\u5f55\u8def\u5f84&gt;\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#onbuild","title":"ONBUILD\uff1a","text":"<p>\u7528\u4e8e\u5ef6\u8fdf\u6784\u5efa\u547d\u4ee4\u7684\u6267\u884c\u3002\u7b80\u5355\u7684\u8bf4\uff0c\u5c31\u662f Dockerfile \u91cc\u7528 ONBUILD \u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u5728\u672c\u6b21\u6784\u5efa\u955c\u50cf\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u6267\u884c\uff08\u5047\u8bbe\u955c\u50cf\u4e3a test-build\uff09\u3002\u5f53\u6709\u65b0\u7684 Dockerfile \u4f7f\u7528\u4e86\u4e4b\u524d\u6784\u5efa\u7684\u955c\u50cf FROM test-build \uff0c\u8fd9\u65f6\u6267\u884c\u65b0\u955c\u50cf\u7684 Dockerfile \u6784\u5efa\u65f6\u5019\uff0c\u4f1a\u6267\u884c test-build \u7684 Dockerfile \u91cc\u7684 ONBUILD \u6307\u5b9a\u7684\u547d\u4ee4\u3002</p> <p>\u683c\u5f0f\uff1a</p> <pre><code>ONBUILD &lt;\u5176\u5b83\u6307\u4ee4&gt;\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a\u6bd4\u5982\u4fdd\u8bc1\u8be5\u955c\u50cf\u4e0d\u80fd\u518d\u6b21\u5236\u4f5c\u65b0\u955c\u50cf\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u9500\u6bc1\u7a0b\u5e8f\u7b49\u3002</p>"},{"location":"mds/Docker-Note/DockerLearningNote/#23-dockerfiletomcat","title":"2.3 DockerFile\u6784\u5efatomcat\u955c\u50cf\u793a\u4f8b","text":"<p>\u51c6\u5907\u4e09\u4e2a\u6587\u4ef6\u51c6\u5907\u6784\u5efa\u955c\u50cf\uff1a</p> <ul> <li>apache-tomcat-9.0.68.tar.gz</li> <li>jdk-7u25linux-x64.tar.gz</li> <li>DockerFile</li> </ul>"},{"location":"mds/Docker-Note/DockerLearningNote/#rootdownloads","title":"\u4e0b\u8f7d\u81f3/root/downloads\uff1a","text":"<pre><code>wget https://dlcdn.apache.org/tomcat/tomcat-10/v10.0.27/bin/apache-tomcat-10.0.27.tar.gz\nwget https://download.oracle.com/otn/java/jdk/8u341-b10/424b9da4b48848379167015dcc250d8d/jdk-8u341-linux-aarch64.tar.gz\n</code></pre>"},{"location":"mds/Docker-Note/DockerLearningNote/#dockerfile","title":"DockerFile\u5199\u5165\u5185\u5bb9","text":"<pre><code>FROM centos:latest\nMAINTAINER ccplayer@163.com\n\nADD ./apache-tomcat-9.0.68.tar.gz /root\nADD ./jdk-7u25linux-x64.tar.gz /root\n\nENV TOMCAT_HOME /root/apache-tomcat-9.0.68\nENV JAVA_HOME /root/jdk1.8.0_341\nENV PATH=$JAVA_HOME/bin:$PATH\n\nEXPOSE 8080\n\nENTRYPOINT $TOMCAT_HOME/bin/startup.sh &amp;&amp; tailf $TOMCAT_HOME/logs/catalina.out\n</code></pre> <p>DockerFile\u5bf9\u5e94\u89e3\u91ca\u5927\u6982\u5c31\u662f</p> <ol> <li>\u57fa\u7840\u955c\u50cf\u8bbe\u7f6e</li> <li>\u4fe1\u606f\u6807\u6ce8\u8bbe\u7f6e</li> <li>\u590d\u5236\u6587\u4ef6\u5230/root\u4e0b\uff0ctar\u683c\u5f0f\u81ea\u52a8\u89e3\u538b</li> <li>\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0cjdk\u52a0\u5165PATH\u73af\u5883\u53d8\u91cf</li> <li>\u66b4\u9732\u7aef\u53e3\u63d0\u793a</li> <li>\u8fd0\u884ctomcat\u542f\u52a8\u547d\u4ee4\u53ca\u65e5\u5fd7\u67e5\u770b\u4f5c\u4e3a\u524d\u53f0\u5b88\u62a4\u8fdb\u7a0b\u3002</li> </ol>"},{"location":"mds/Docker-Note/DockerLearningNote/#_2","title":"\u6784\u5efa\u955c\u50cf\u5904\u7406\u8fc7\u7a0b","text":"<pre><code>docker images\ndocker pull centos\n</code></pre>"},{"location":"mds/Docker-Note/DockerVMLocalTest/","title":"DockerVMLocalTest","text":"<p>docker\u6280\u672fvm\u865a\u62df\u673a\u4e2d\u6d4b\u8bd5\u5b66\u4e60</p>"},{"location":"mds/Docker-Note/DockerVMLocalTest/#vm","title":"\u4e00\u3001VM\u865a\u62df\u673a\u914d\u7f6e","text":"<p>\u4e0b\u8f7d\u5b89\u88c5ubuntu 22.04.3 LTS (Jammy Jellyfish)\u955c\u50cf\u81f3\u865a\u62df\u673a\uff0c\u914d\u7f6e\u7f51\u7edc\uff1a</p> <p> </p> <p> </p> <p> </p> <p> </p> <p> </p>"},{"location":"mds/Docker-Note/DockerVMLocalTest/#docker","title":"\u4e8c\u3001\u5b89\u88c5docker","text":""},{"location":"mds/Docker-Note/DockerVMLocalTest/#1ubuntu2204docker","title":"1.\u672c\u5730ubuntu22.04\u865a\u62df\u673a\u5b89\u88c5docker","text":"<pre><code># \u5347\u7ea7\u7cfb\u7edf\u5305\nsudo apt list --upgradable\nsudo apt update\nsudo apt upgrade\n\n# \u66f4\u65b0\u7cfb\u7edf\u672c\u8eab\nsudo apt dist-upgrade \n\n# \u91cd\u542f\u4e14\u6e05\u7406\u4f9d\u8d56\nsudo reboot\nsudo apt autoremove\n\n# \u5378\u8f7d\u65e7\u6587\u4ef6\napt-get remove docker docker-engine docker.io containerd runc\n\n# \u5b89\u88c5\u4f9d\u8d56\napt-get install ca-certificates curl gnupg lsb-release\n\n# \u6dfb\u52a0Docker\u5b98\u65b9\u7684GPG\u5bc6\u94a5\ncurl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n\n# \u6dfb\u52a0Docker\u7684\u8f6f\u4ef6\u6e90 \nsudo add-apt-repository \"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n\n# \u5b89\u88c5docker\napt-get install docker-ce docker-ce-cli containerd.io\n\n# \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709root\u7528\u6237\u548cdocker\u7ec4\u7684\u7528\u6237\u624d\u80fd\u8fd0\u884cDocker\u547d\u4ee4,\u5c06\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230docker\u7ec4\uff0c\u4ee5\u907f\u514d\u6bcf\u6b21\u4f7f\u7528Docker\u65f6\u90fd\u9700\u8981\u4f7f\u7528sudo\nsudo usermod -aG docker $USER\n\n# \u542f\u52a8\u670d\u52a1\nsystemctl start docker\n\n# \u5b89\u88c5\u4f9d\u8d56\napt-get -y install apt-transport-https ca-certificates curl software-properties-common\n\n# \u91cd\u542f\u751f\u6548\nservice docker restart\n\n# \u67e5\u770b\u7248\u672c\ndocker version\n\n# \u67e5\u770b\u955c\u50cf\ndocker images\n</code></pre>"},{"location":"mds/Docker-Note/DockerVMLocalTest/#2centosdocker","title":"2.CentOS(\u817e\u8baf\u4e91)\u5b89\u88c5docker","text":"<pre><code>sudo uname -r\nsudo yum remove docker \\\n    docker-client \\\n    docker-client-latest \\\n    docker-common \\\n    docker-latest \\\n    docker-latest-logrotate \\\n    docker-logrotate \\\n    docker-selinux \\\n    docker-engine-selinux \\\n    docker-engine\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n# \u914d\u7f6e\u963f\u91cc\u4e91yum\u6e90\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nsudo yum makecache fast\nsudo yum -y install docker-ce\nsudo systemctl start docker\ndocker run hello-world\n\n# \u67e5\u770bdocker-ce\u7248\u672c\nyum list docker-ce --showduplicates | sort -r\n\n# \u5b89\u88c5docker-ce \nyum install docker-ce-25.0.5-1.el7 -y\n</code></pre>"},{"location":"mds/Docker-Note/DockerVMLocalTest/#docker_1","title":"\u4e09\u3001docker\u955c\u50cf","text":"<p>docker hub\u79bb\u7ebf\u4e0b\u8f7d\u7f51\uff1ahttps://pull.7ii.win/</p> <p>\u200b   \u672c\u5730\u6587\u4ef6\u5bfc\u5165tar\u955c\u50cf</p> <pre><code>docker load -i image.tar\n</code></pre> <p>\u200b   \u5bfc\u51fatar\u955c\u50cf\u81f3\u672c\u5730\u6587\u4ef6</p> <pre><code>docker save -o image.tar image_name:tag\n</code></pre> <pre><code>docker run -itd ubuntu:22.04 /bin/bash\ndocker exec -it &lt;cid&gt; /bin/bash\n\necho \"deb http://xxx\" &gt;sources.list\napt-get update\napt-get upgrade\n\napt-get install -y vim sudo python3 pip \npip config set global.index-url https://mirrors.aliyun.com/pypi/simple\npip config set install.trusted-host mirrors.aliyun.com\n</code></pre>"},{"location":"mds/Docker-Note/DockerVMLocalTest/#nginx","title":"\u56db\u3001\u914d\u7f6enginx\u7cfb\u7edf\u670d\u52a1\u793a\u4f8b","text":"<pre><code>vim /etc/systemd/system/nginx.service\n</code></pre> <p>\u5173\u4e8eservice\uff1ahttps://blog.csdn.net/www_dong/article/details/128026839</p> <pre><code>[Unit]\nDescription=Nginx HTTP Server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s stop\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <pre><code>systemctl daemon-reload\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/","title":"01BasicSciences\u6838\u5fc3\u7b14\u8bb0","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_1","title":"\ud83d\udcda \u5f00\u53d1\u73af\u5883\u914d\u7f6e","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1","title":"1 \u7f16\u8bd1\u5668\u4e0b\u8f7d","text":"<p>https://golang.google.cn/doc/install</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-window","title":"2 window\u5f00\u53d1\u73af\u5883\u914d\u7f6e","text":"<p>\u53c2\u7167linux\u914d\u7f6e</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-linux","title":"3 Linux\u5f00\u53d1\u73af\u5883\u914d\u7f6e","text":"<pre><code># \u5b89\u88c5\u4f4d\u7f6e\n/opt/go\n\n# \u53ef\u6267\u884c\u6587\u4ef6\n/opt/go/bin/go\n\n# \u73af\u5883\u53d8\u91cf\u914d\u7f6e ~/.bashrc \u6216 /etc/profile\nexport PATH=/opt/go/bin:$PATH\n\nexport GOROOT=/opt/go\nexport GOPATH=/home/ccplayer/goProjects\nexport GOBIN=/home/ccplayer/goProjects/bin\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4","title":"4 \u76ee\u5f55\u7ed3\u6784","text":"<pre><code>/home/ccplayer/goProjects/\n    -bin\n    -pkg\n    -src\n        -crm\n            -app.go\n        -autoclick\n            -ac.go\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5","title":"5 \u76f8\u5173\u7f16\u8bd1\u3001\u6267\u884c\u547d\u4ee4","text":"<pre><code># \u7f16\u8bd1\u4e0e\u8fd0\u884c\ngo run app.go\n\n# \u7f16\u8bd1\u51fa\u4e8c\u8fdb\u5236\u6587\u4ef6\ngo build\ngo build -o myapp app.go\ngo install  # \u9ed8\u8ba4\u7f16\u8bd1\u751f\u6210\u4f4d\u7f6e\uff1a$GOPATH/bin\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6","title":"6 \u6269\u5c55\uff1a\u7f16\u8bd1\u7ed3\u679c\u7c7b\u578b","text":"<p>go install \u53ef\u4ee5\u4ea7\u751f\u7ed3\u679c\u6587\u4ef6\u5b58\u5728 $GOPATH/bin \u4e0e $GOPATH/pkg \u4e0b\u9762\uff0cbin\u4e0b\u662f\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800cpkg\u4e0b\u9762\u662f\u5305\u6587\u4ef6\uff08\u4f9b\u5176\u4ed6\u7a0b\u5e8f\u5458\u5f15\u7528\uff09</p> <p><code>GO111MODULE</code> \u662f Go \u8bed\u8a00\u7684\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u7528\u4e8e\u63a7\u5236 Go \u7684\u4f9d\u8d56\u7ba1\u7406\u6a21\u5f0f\uff08GOPATH \u6a21\u5f0f vs Go Modules \u6a21\u5f0f\uff09\u3002\u5b83\u7684\u540d\u5b57\u6765\u6e90\u4e8e Go 1.11 \u7248\u672c\u9996\u6b21\u5f15\u5165 Modules \u529f\u80fd</p> <p>\u6240\u4ee5\u5982\u679c\u662f\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\uff1aGOPATH \u6a21\u5f0f or Go Modules \u6a21\u5f0f\u90fd\u53ef\u4ee5\uff08set GO111MODULE=auto + \u751f\u6210\u6839\u76ee\u5f55\u4e0bgo.mod\u6587\u4ef6\uff09\uff1b</p> <p>\u5982\u679c\u662f\u7f16\u8bd1\u5305\u6587\u4ef6\uff1aGOPATH \u6a21\u5f0f\u624d\u4f1a\u751f\u6210\uff08set GO111MODULE=auto + \u5220\u9664\u6839\u76ee\u5f55\u4e0bgo.mod\u6587\u4ef6\uff09</p> <pre><code>go install\n</code></pre> <ul> <li>\u4ea7\u51fa\u53ef\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6</li> </ul> <pre><code># \u542b\u6709main\u51fd\u6570\u7684go\u6587\u4ef6\ngo build \u6216 go install\n</code></pre> <ul> <li>\u4ea7\u51fa\u4f9b\u5176\u4ed6\u5f00\u53d1\u8005\u4f7f\u7528\u7684\u5305\u6587\u4ef6\uff08.a\u6587\u4ef6\uff09</li> </ul> <p> </p> <p>IDE - goland\u53ef\u4ee5\u652f\u6301\u914d\u7f6e\u5355\u4e2a\u9879\u76ee\u5bf9\u5e94\u7684GOPATH\u76ee\u5f55\uff0c\u8fd9\u6837\u5c31\u65b9\u4fbf\u6bcf\u4e2a\u9879\u76ee\u5355\u72ec\u7684\u5f00\u53d1\u73af\u5883\u53d8\u91cf\uff0c\u4ea7\u7269\u751f\u6210\u5728\u5f53\u524d\u9879\u76ee\u8def\u5f84\u3002</p> <p>.a \u6587\u4ef6\u4f5c\u4e3a\u4e2d\u95f4\u4ea7\u7269\uff0c\u4e0d\u652f\u6301\u76f4\u63a5\u5728\u4ee3\u7801\u4e2d\u5bfc\u5165\u4f7f\u7528\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_2","title":"\ud83d\udcda \u5305\u7ba1\u7406\u5668","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-go-mod","title":"1 go mod","text":"<p>---------- go mod\u5305\u7ba1\u7406\u5668\u6a21\u5f0f\u8bbe\u7f6e ----------</p> <p>\u67e5\u770b\u5f53\u524d\u914d\u7f6e\uff1ago env</p> <p>\u5f00\u53d1\u63a8\u8350\u4f7f\u7528\u5305\u7684\u65b9\u5f0f\uff0c\u5c31\u9700\u8981\u914d\u7f6ego.mod\u6587\u4ef6</p> <p>GO111MODULE=off\uff0c\u65e0\u6a21\u5757\u652f\u6301\uff0cgo\u547d\u4ee4\u884c\u5c06\u4e0d\u4f1a\u652f\u6301module\u529f\u80fd\uff0c\u5bfb\u627e\u4f9d\u8d56\u5305\u7684\u65b9\u5f0f\u5c06\u4f1a\u6cbf\u7528\u65e7\u7248\u672c\u90a3\u79cd\u901a\u8fc7vendor\u76ee\u5f55\u6216\u8005GOPATH\u6a21\u5f0f\u6765\u67e5\u627e\u3002</p> <p>GO111MODULE=on\uff0c\u6a21\u5757\u652f\u6301\uff0cgo\u547d\u4ee4\u884c\u4f1a\u4f7f\u7528modules\uff0c\u800c\u4e00\u70b9\u4e5f\u4e0d\u4f1a\u53bbGOPATH\u76ee\u5f55\u4e0b\u67e5\u627e\u3002</p> <p>GO111MODULE=auto\uff0c\u9ed8\u8ba4\u503c\uff0cgo\u547d\u4ee4\u884c\u5c06\u4f1a\u6839\u636e\u5f53\u524d\u76ee\u5f55\u6765\u51b3\u5b9a\u662f\u5426\u542f\u7528module\u529f\u80fd\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\u60c5\u5f62\uff1a</p> <ol> <li>\u5f53\u524d\u76ee\u5f55\u5728GOPATH/src\u4e4b\u5916\u4e14\u8be5\u76ee\u5f55\u5305\u542bgo.mod\u6587\u4ef6\uff0c\u5f00\u542f\u6a21\u5757\u652f\u6301\uff1b</li> <li>\u5f53\u524d\u6587\u4ef6\u5728\u5305\u542bgo.mod\u6587\u4ef6\u7684\u76ee\u5f55\u4e0b\u9762\u3002</li> </ol> <p>\u8bbe\u7f6e\uff1aGO111MODULE=on\uff081.11\u4e4b\u540e\u7248\u672c\u652f\u6301\u5305\u7ba1\u7406\uff09</p> <pre><code>go env -w GO111MODULE=on\n</code></pre> <p>\u56fd\u5185\u4ee3\u7406\u8bbe\u7f6e\uff1a</p> <pre><code>go env -w GOPROXY=https://goproxy.cn,direct\n</code></pre> <p>linux\uff1a</p> <pre><code>echo -n \"export GO111MODULE=on\" &gt;&gt; ~/.profile\necho -n \"export GOPROXY=https://goproxy.cn\" &gt;&gt; ~/.profile\nsource ~/.profile\n</code></pre> <p>----------\u7406\u89e3go\u8bed\u8a00\u4e2d\u5305\u7ba1\u7406\u65b9\u5f0f----------</p> <p>main\u5305\uff08package main\uff09\uff1a\u9ed8\u8ba4\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\uff0c\u4e14\u5fc5\u987b\u5199\u4e00\u4e2amain\u51fd\u6570\uff08\u7a0b\u5e8f\u5165\u53e3\uff09\uff0c\u7f16\u8bd1\u65f6\uff0c\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-go","title":"2 Go\u8bed\u8a00\u5e38\u7528\u547d\u4ee4","text":"<pre><code>go mod tidy # \u6574\u7406\u548c\u4f18\u5316\u9879\u76ee\u7684 go.mod \u548c go.sum \u6587\u4ef6\uff08\u81ea\u52a8\u4e0b\u8f7d\u53ca\u5220\u9664\u4f9d\u8d56\uff09\ngo mod download # \u4e0b\u8f7d\u4f9d\u8d56\u5305\ngo mod edit # \u7f16\u8f91go.mod\u6587\u4ef6\ngo mod graph\ngo mod init # \u5728\u5f53\u524d\u76ee\u5f55\u521d\u59cb\u5316mod\ngo mod vendor # \u5c06\u4f9d\u8d56\u590d\u5236\u5230vendor\u4e0b\ngo mod verify # \u9a8c\u8bc1\u4f9d\u8d56\u662f\u5426\u6b63\u786e\ngo mod why # \u89e3\u91ca\u4e3a\u4ec0\u4e48\u9700\u8981\u4f9d\u8d56\n\ngo get \u5305 # \u4e0b\u8f7d\u4f9d\u8d56\ngo get -u \u5305 # -u\uff1a\u66f4\u65b0\u6216\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\ngo get -u &lt;[\u5305]@[\u7248\u672c\u53f7]&gt;  # \u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_3","title":"\ud83d\udcda \u53d8\u91cf","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_1","title":"1 \u53d8\u91cf\u58f0\u660e","text":"<pre><code>var name string = \"chc\"\nvar name = \"chc\"\nname := \"chc\"  // \u63a8\u8350\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2","title":"2 \u53d8\u91cf\u8d4b\u503c","text":"<pre><code>name1 := \"tom\"\nname2 := name1  // \u91cd\u65b0\u5f00\u8f9f\u4e00\u5757\u5185\u5b58\u7a7a\u95f4\u5b58\u653e - \u4e0e\u90fd\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\u5730\u5740\u7684python\u4e0d\u540c\n</code></pre> <p>\u5bf9\u5e94\u5185\u5b58\u56fe\u5982\u4e0b\uff1a</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_4","title":"\ud83d\udcda \u5e38\u91cf","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_2","title":"1 \u5e38\u91cf\u58f0\u660e","text":"<pre><code>const (\n    NAME   = \"chc\"\n    AGE    = 18\n    GENDER = \"\u7537\"\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_1","title":"2 \u5e38\u91cf\u5efa\u8bae","text":"<ul> <li>\u516c\u5171\u5e38\u91cf\uff1a\u9996\u5b57\u6bcd\u5927\u5199\u9a7c\u5cf0\u5f0f\uff08\u5982 <code>Name</code>\uff09\u3002</li> <li>\u79c1\u6709\u5e38\u91cf\uff1a\u5168\u5c0f\u5199\u6216\u5c0f\u9a7c\u5cf0\uff08\u5982 <code>defaultName</code>\uff09\u3002</li> <li>\u5168\u5927\u5199\uff1a\u4ec5\u5728\u9700\u8981\u5f3a\u8c03\u5e38\u91cf\u5c5e\u6027\uff08\u7c7b\u4f3c\u5176\u4ed6\u8bed\u8a00\u7684 <code>CONST</code>\uff09\u65f6\u4f7f\u7528\uff0c\u4f46\u975e\u5fc5\u987b\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_5","title":"\ud83d\udcda \u6d41\u7a0b\u63a7\u5236\u8bed\u53e5","text":"<p>\u5728Go\u8bed\u8a00\u4e2d\uff0cswitch\u8bed\u53e5\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u8303\u56f4\u503c\uff0c\u8fd9\u4e0e\u5176\u4ed6\u4e00\u4e9b\u8bed\u8a00\u7684switch\u8bed\u53e5\u6709\u6240\u4e0d\u540c\u3002\u4ee5\u4e0b\u662f\u51e0\u79cd\u4f7f\u7528switch\u5224\u65ad\u8303\u56f4\u503c\u7684\u65b9\u6cd5\uff1a</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-switch","title":"1. \u4f7f\u7528\u8868\u8fbe\u5f0fswitch\u5224\u65ad\u8303\u56f4","text":"<pre><code>score := 85\n\nswitch {\ncase score &gt;= 90:\n    fmt.Println(\"\u4f18\u79c0\")\ncase score &gt;= 80:\n    fmt.Println(\"\u826f\u597d\")\ncase score &gt;= 60:\n    fmt.Println(\"\u53ca\u683c\")\ndefault:\n    fmt.Println(\"\u4e0d\u53ca\u683c\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-fallthrough","title":"2. \u4f7f\u7528fallthrough\u5b9e\u73b0\u8303\u56f4\u7a7f\u900f","text":"<pre><code>temperature := 25\n\nswitch {\ncase temperature &lt; 0:\n    fmt.Println(\"\u51b0\u51bb\")\n    fallthrough\ncase temperature &lt; 10:\n    fmt.Println(\"\u5bd2\u51b7\")\ncase temperature &lt; 20:\n    fmt.Println(\"\u51c9\u723d\")\ncase temperature &lt; 30:\n    fmt.Println(\"\u6e29\u6696\")\ndefault:\n    fmt.Println(\"\u708e\u70ed\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3","title":"3. \u591a\u4e2a\u6761\u4ef6\u7ec4\u5408\u5224\u65ad\u8303\u56f4","text":"<pre><code>age := 25\n\nswitch age {\ncase 1, 2, 3:\n    fmt.Println(\"\u5a74\u5e7c\u513f\")\ncase 4, 5, 6:\n    fmt.Println(\"\u5e7c\u513f\")\ncase 7, 8, 9, 10, 11, 12:\n    fmt.Println(\"\u513f\u7ae5\")\ndefault:\n    if age &gt;= 13 &amp;&amp; age &lt; 20 {\n        fmt.Println(\"\u9752\u5c11\u5e74\")\n    } else if age &gt;= 20 &amp;&amp; age &lt; 60 {\n        fmt.Println(\"\u6210\u5e74\u4eba\")\n    } else {\n        fmt.Println(\"\u8001\u5e74\u4eba\")\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-switch","title":"4. \u7c7b\u578bswitch\u7ed3\u5408\u8303\u56f4\u5224\u65ad","text":"<pre><code>func checkType(v interface{}) {\n    switch v := v.(type) {\n    case int:\n        if v &gt; 100 {\n            fmt.Println(\"\u5927\u6574\u6570\")\n        } else {\n            fmt.Println(\"\u5c0f\u6574\u6570\")\n        }\n    case float64:\n        if v &gt; 0 {\n            fmt.Println(\"\u6b63\u6d6e\u70b9\u6570\")\n        } else {\n            fmt.Println(\"\u8d1f\u6d6e\u70b9\u6570\u6216\u96f6\")\n        }\n    default:\n        fmt.Println(\"\u672a\u77e5\u7c7b\u578b\")\n    }\n}\n</code></pre> <p>Go\u8bed\u8a00\u7684switch\u8bed\u53e5\u975e\u5e38\u7075\u6d3b\uff0c\u4e0d\u9700\u8981\u50cf\u5176\u4ed6\u8bed\u8a00\u90a3\u6837\u5728\u6bcf\u4e2acase\u540e\u52a0break\uff0c\u9ed8\u8ba4\u4e0d\u4f1a\u7a7f\u900f\u5230\u4e0b\u4e00\u4e2acase\u3002</p> <p>\u5982\u679c\u9700\u8981\u7a7f\u900f\uff0c\u53ef\u4ee5\u663e\u5f0f\u4f7f\u7528<code>fallthrough</code>\u5173\u952e\u5b57\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_6","title":"\ud83d\udcda\u7f16\u7801","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-ascii","title":"1 ASCII\u7f16\u7801","text":"<pre><code>00000000 00000000\n... ...\n11111111 11111111\n</code></pre> <p>\u6700\u5927\u80fd\u8868\u793a\u5b57\u7b26\u6570\u91cf\uff1a2**16 = 65536 - 1</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-unicode","title":"2 unicode\u4e07\u56fd\u7801\u6807\u51c6","text":"<p>unicode\u662f\u4e00\u79cd\u8bbe\u8ba1\u6807\u51c6\uff0c\u4e0d\u662f\u5177\u4f53\u7684\u7f16\u7801\u5b9e\u73b0</p> <pre><code>00000000 00000000 00000000 00000000\n... ...\n11111111 11111111 11111111 11111111\n</code></pre> <p>\u6700\u5927\u80fd\u8868\u793a\u5b57\u7b26\u6570\u91cf\uff1a2**32 = 4294967296 - 1</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-utf-8","title":"3 utf-8\u7f16\u7801","text":"<p>\u5bf9\u4e8e\u542b\u6709\u4e2d\u6587\u8868\u793a\u7684\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u6700\u5e38\u7528\u7684\u7f16\u7801\uff08\u517c\u5bb9ASCII\u7f16\u7801\uff09\uff1a\u8303\u56f4\u51b3\u5b9a\u4e00\u4e2a\u6c49\u5b57\u4e00\u822c\u90fd\u662f3\u4e2a\u5b57\u8282\uff0824\u4f4d\uff09</p> <pre><code>00000000 00000000 00000000\n... ...\n11111111 11111111 11111111\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_7","title":"\ud83d\udcda \u6570\u636e\u7c7b\u578b","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_3","title":"1 \u6574\u578b\u4e4b\u95f4\u8f6c\u6362","text":"<p>int \u7c7b\u578b\u6570\u636e\u8f6c\u6362\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u5404\u4e2a\u4f4d\u6570\u8868\u793a\u503c\u8303\u56f4\uff1b\u4ece\u8303\u56f4\u5927\u7684\u5411\u5c0f\u7684\u8f6c\u6362\uff0c\u5c24\u5176\u8981\u6ce8\u610f\uff1a</p> <pre><code>func main() {\n    var a int16 = 128\n    b := int8(a)\n    fmt.Println(b)\n}\n\n// \u7ed3\u679c\u4e3a -128  -&gt; \u6570\u636e\u6ea2\u51fa\uff0c\u5219\u4f1a\u6309\u8d85\u8fc7\u7684\u6570\u5b57\u8f6e\u8be2\u5bf9\u5e94\uff0c\u4e0d\u4f1a\u62a5\u9519\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_2","title":"2 \u4e0d\u540c\u7c7b\u578b\u8f6c\u6362","text":"<pre><code>func main() {\n    // \u6574\u578b\u8f6c\u4e3a\u5b57\u7b26\u4e32\n    var a int16 = 128\n    b := strconv.Itoa(int(a)) // \u4f20\u53c2\u53ea\u80fd\u662fint\u7c7b\u578b\uff1b\u6709\u4e00\u4e2a\u503c\u8fd4\u56de\n    fmt.Println(b, reflect.TypeOf(b))\n\n    // \u5b57\u7b26\u4e32\u8f6c\u4e3a\u6574\u578b\n    var c string = \"100\"\n    result, err := strconv.Atoi(c) // \u6709\u4e24\u4e2a\u503c\u8fd4\u56de\n    if err != nil {\n        fmt.Println(\"\u8f6c\u6362\u5931\u8d25\uff1a\", result, reflect.TypeOf(result), err)\n    } else {\n        fmt.Println(\"\u8f6c\u6362\u6210\u529f\uff1a\", result, reflect.TypeOf(result), err)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_1","title":"3 \u5b57\u7b26\u4e32\u7684\u672c\u8d28","text":"<pre><code>func main() {\n    name1 := \"ch\u660c\"\n    name2 := \"\u5c91\u9e3f\u660c\"\n    fmt.Println(len(name1), len(name2))                                       // \u5b57\u8282\u957f\u5ea6\n    fmt.Println(utf8.RuneCountInString(name1), utf8.RuneCountInString(name2)) // \u5b57\u7b26\u957f\u5ea6\n    fmt.Println([]byte(name1), []byte(name2))\n\n    rs1 := []rune(name1)\n    rs2 := []rune(name2)\n    fmt.Println(rs1, rs2) // unicode\u7801\u70b9\u5207\u7247\uff08\u5341\u8fdb\u5236\uff09\n\n    var ru1 []string\n    var ru2 []string\n\n    myList1 := [2][]rune{rs1, rs2}\n    myList2 := [2][]string{ru1, ru2}\n\n    fmt.Println(myList2)\n\n    for i := 0; i &lt; len(myList1); i++ {\n        for _, v := range myList1[i] {\n            myList2[i] = append(myList2[i], strconv.FormatInt(int64(v), 16))\n        }\n    }\n    fmt.Println(myList2) // unicode\u7801\u70b9\u5207\u7247\uff08\u5341\u516d\u8fdb\u5236\uff09\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_1","title":"4 \u5b57\u7b26\u4e32\u5e38\u7528\u65b9\u6cd5","text":"<pre><code>len(text) // \u5b57\u8282\u957f\u5ea6\nutf8.RuneCountInString(text) // \u5b57\u7b26\u957f\u5ea6\nstrings.HasPrefix(text, \"xxx\") // \u662f\u5426\u4ee5xxx\u5f00\u5934\nstrings.HasSuffix(text, \"xxx\") // \u662f\u5426\u4ee5xxx\u7ed3\u5c3e\nstrings.Contains(text, \"xxx\") // \u662f\u5426\u5305\u542bxxx\nstrings.ToLower(text) // \u82f1\u6587\u53d8\u5c0f\u5199\nstrings.ToUpper(text) // \u82f1\u6587\u53d8\u5927\u5199\nstrings.ToTitle(text) // \u82f1\u6587\u53d8\u5927\u5199 - \u9488\u5bf9\u67d0\u4e9b\u62c9\u4e01\u6587\u5b57\uff0c\u4e0d\u540c\u4e8eToUpper\nstrings.Title(text) // \u6bcf\u4e2a\u7a7a\u683c\u4e4b\u540e\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u53d8\u5927\u5199 -- Go 1.18+ \u5df2\u5f03\u7528\nstrings.Trim(text, \"xxx\") // \u53bb\u9664\u4e24\u8fb9\u5b50\u4e32xxx\nstrings.TrimLeft(text, \"xxx\") // \u53bb\u9664\u5de6\u8fb9\u5b50\u4e32xxx\nstrings.TrimRight(text, \"xxx\") // \u53bb\u9664\u53f3\u8fb9\u5b50\u4e32xxx\nstrings.Replace(text, \"xv\", \"YY\", 1) // \u4ece\u5de6\u5230\u53f3\u67e5\u627e\u5230\u7b2c1\u4e2a\u5339\u914d\u66ff\u6362\nstrings.Replace(text, \"xv\", \"YY\", 2) // \u4ece\u5de6\u5230\u53f3\u67e5\u627e\u5230\u524d2\u4e2a\u5339\u914d\u66ff\u6362\nstrings.Replace(text, \"xv\", \"YY\", -1) // \u5168\u90e8\u5339\u914d\u66ff\u6362\nstrings.ReplaceAll(text, \"x\", \"Y\") // \u5168\u90e8\u5339\u914d\u66ff\u6362\nstrings.Split(text, \" \") // \u5206\u5272\u5b57\u7b26\u4e32 -&gt; []string \u7c7b\u578b\u7684\u5207\u7247\nstrings.Join([]string{\"a\", \"b\", \"c\"}, \"-\") // \u62fc\u63a5 -&gt; \u5c06[]string \u7c7b\u578b\u7684\u5207\u7247\u62fc\u63a5\n\n// \u62fc\u63a5\u5b57\u7b26\u4e32go 1.10+ \u7248\u672c\u9ad8\u6548\u7387\u5199\u6cd5\uff1a\nvar builder strings.Builder\nbuilder.WriteString(\"a\")\nbuilder.WriteString(\"b\")\nbuilder.WriteString(\"c\")\nfmt.Println(builder.String())\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_1","title":"5 \u5b57\u7b26\u4e32\u4e0e\u5bf9\u5e94\u7801\u70b9\u6570\u4e92\u76f8\u8f6c\u6362","text":"<pre><code>fmt.Println(string(65))                   // A -&gt; \u7801\u70b9\u8f6c\u5b57\u7b26\nnum, size := utf8.DecodeRuneInString(\"A\") // 65 1 -&gt; \u5b57\u7b26\u8f6c\u7801\u70b9\uff0c\u591a\u4e2a\u5b57\u7b26\u5219\u53ea\u5904\u7406\u7b2c\u4e00\u4e2a\u5b57\u7b26\nfmt.Println(num, size)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_8","title":"\ud83d\udcda \u8fdb\u5236\u8f6c\u6362\u51fd\u6570","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_4","title":"1 \u5341\u8fdb\u5236\u8f6c\u5176\u4ed6\u8fdb\u5236\uff08\u6570\u5b57\u8f6c\u5b57\u7b26\u4e32\uff09","text":"<pre><code>func main() {\n    a := 2025\n    b := strconv.FormatInt(int64(a), 10)\n    fmt.Println(b, reflect.TypeOf(b)) // \u83b7\u53d6\u6570\u636e\u7c7b\u578b\u4e3astring\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_3","title":"2 \u5176\u4ed6\u8fdb\u5236\u8f6c\u5341\u8fdb\u5236\uff08\u5b57\u7b26\u4e32\u8f6c\u6570\u5b57\uff09","text":"<pre><code>func main() {\n    // strconv.ParseInt\u51fd\u6570\u53c2\u6570\u89e3\u91ca\uff1a\n    // \u7b2c1\u4e2a\u53c2\u6570\uff1a\u9700\u8981\u8f6c\u6362\u7684\u5b57\u7b26\n    // \u7b2c2\u4e2a\u53c2\u6570\uff1a\u628a\u6587\u672c\u6309\u586b\u5199\u5bf9\u5e94\u8fdb\u5236\u53bb\u8f6c\u6362\n    // \u7b2c3\u4e2a\u53c2\u6570\uff1a\u9650\u5b9a\u8f6c\u6362\u65f6\u4f7f\u7528\u7684\u6570\u5b57\u8303\u56f4(\u4e0e\u7ed3\u679c\u65e0\u5173)\n    // \u6ce8\u610f\uff1a\u8fd4\u56de\u7ed3\u679c\u6c38\u8fdc\u662fint64\u7c7b\u578b\u7684\u6570\u5b57\n    a := \"1010000101\"\n    jz := 2\n    b, err := strconv.ParseInt(a, jz, 64)\n    if err != nil {\n        fmt.Println(\"\u8f6c\u6362\u5931\u8d25\uff1a\", b, reflect.TypeOf(b)) // \u83b7\u53d6\u6570\u636e\u7c7b\u578b\u4e3aint64\n    } else {\n        fmt.Println(\"\u8f6c\u6362\u6210\u529f\uff1a\", b, reflect.TypeOf(b)) // \u83b7\u53d6\u6570\u636e\u7c7b\u578b\u4e3aint64\n\n        c := strconv.FormatInt(b, 16)\n        fmt.Println(c) // \u5341\u8fdb\u5236\u8f6c\u4e3a\u5176\u4ed6\u8fdb\u5236\uff0c\u83b7\u53d6\u6570\u636e\u7c7b\u578b\u4e3astring\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_9","title":"\ud83d\udcda \u6570\u7ec4(\u957f\u5ea6\u56fa\u5b9a)","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_5","title":"1 \u57fa\u672c\u539f\u7406","text":"<p>\u6ce8\u610f\u4e8b\u9879\uff1a\u6570\u7ec4\u662f\u503c\u7c7b\u578b\uff0c\u6240\u4ee5\u9488\u5bf9\u4f20\u5165\u4e00\u4e2a\u6570\u7ec4\u5230\u51fd\u6570\u5185\u4fee\u6539\uff0c\u5f53\u51fd\u6570\u6267\u884c\u4e4b\u540e\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u51fd\u6570\u5916\u7684\u6570\u7ec4\u503c\uff0c\u76f8\u5f53\u4e8e\u5728\u5404\u81ea\u7684\u6808\u5185\u6709\u6548\u3002</p> <p></p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_4","title":"2 \u6570\u7ec4\u53ef\u53d8\u4e0e\u62f7\u8d1d","text":"<p>\u53ef\u53d8\uff1a\u6570\u7ec4\u957f\u5ea6\u3001\u7c7b\u578b\u4e0d\u80fd\u4fee\u6539\uff0c\u5143\u7d20\u53ef\u4ee5\u4fee\u6539\uff1b</p> <p>\u62f7\u8d1d\uff1a\u6570\u7ec4\u53d8\u91cf\u5728\u8d4b\u503c\u65f6\u4f1a\u91cd\u65b0\u62f7\u8d1d</p> <pre><code>func main() {\n    name1 := [2]string{\"\u5c91\u9e3f\u660c\", \"cenhongchang\"}\n    name2 := name1\n    name2[0] = \"chc\"\n    fmt.Println(name1, name2)\n    // \u6267\u884c\u7ed3\u679c\uff1a[\u5c91\u9e3f\u660c cenhongchang] [chc cenhongchang]\n    // \u7ed3\u679c\u8868\u660e\uff1a1.\u6570\u7ec4\u5143\u7d20\u53ef\u4ee5\u88ab\u4fee\u6539\uff1b2.\u6570\u7ec4\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u4f1a\u91cd\u65b0\u62f7\u8d1d\u4e00\u4efd\uff08\u8fd9\u4e0epython\u4e0d\u540c\uff09\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_10","title":"\ud83d\udcda \u5207\u7247(\u957f\u5ea6\u53ef\u53d8)","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_6","title":"1 \u5207\u7247\u6982\u5ff5","text":"<p>\u5207\u7247(slice)\u662f Golang \u4e2d\u4e00\u79cd\u6bd4\u8f83\u7279\u6b8a\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u66f4\u4fbf\u4e8e\u4f7f\u7528\u548c\u7ba1\u7406\u6570\u636e\u96c6\u5408\u3002</p> <p>\u5207\u7247\u662f\u56f4\u7ed5\u52a8\u6001\u6570\u7ec4\u7684\u6982\u5ff5\u6784\u5efa\u7684\uff0c\u53ef\u4ee5\u6309\u9700\u81ea\u52a8\u589e\u957f\u548c\u7f29\u5c0f\u3002</p> <p>\u5207\u7247\u7684\u52a8\u6001\u589e\u957f\u662f\u901a\u8fc7\u5185\u7f6e\u51fd\u6570 append() \u6765\u5b9e\u73b0\u7684\uff0c\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u5feb\u901f\u4e14\u9ad8\u6548\u5730\u589e\u957f\u5207\u7247\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bf9\u5207\u7247\u518d\u6b21\u5207\u5272\uff0c\u7f29\u5c0f\u4e00\u4e2a\u5207\u7247\u7684\u5927\u5c0f\u3002\u56e0\u4e3a\u5207\u7247\u7684\u5e95\u5c42\u4e5f\u662f\u5728\u8fde\u7eed\u7684\u5185\u5b58\u5757\u4e2d\u5206\u914d\u7684\uff0c\u6240\u4ee5\u5207\u7247\u8fd8\u80fd\u83b7\u5f97\u7d22\u5f15\u3001\u8fed\u4ee3\u4ee5\u53ca\u4e3a\u5783\u573e\u56de\u6536\u4f18\u5316\u7684\u597d\u5904\u3002</p> <p></p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_5","title":"2 \u5207\u7247\u521b\u5efa","text":"<pre><code>\u65b9\u5f0f\u4e00\uff1a\uff1b\nvar numbers []int\nvar numbers = []int{11, 22, 33}\nnumbers := []int{11, 22, 33}\n\n\u65b9\u5f0f\u4e8c\uff1amake(type, len, cap)  //\u7c7b\u578b\u3001\u957f\u5ea6\u3001\u5bb9\u91cf\nnumbers := make([]int, 3, 3}\n\n\u4e24\u79cd\u65b9\u5f0f\u521b\u5efa\u7684\u533a\u522b\uff1a\n\u65b9\u5f0f\u4e00\u521b\u5efa\u7684\u5207\u7247\u4e8b\u5148\u5b58\u5728\uff0c\u7a0b\u5e8f\u5458\u53ef\u89c1\uff1b\n\u65b9\u5f0f\u4e8c\u521b\u5efa\u7684\u5207\u7247\u4f1a\u521b\u5efa\u65b0\u7684\u6570\u7ec4\uff0c\u662f\u7531\u5207\u7247\u81ea\u8eab\u5728\u5e95\u5c42\u7ef4\u62a4\uff0c\u7a0b\u5e8f\u5458\u4e0d\u53ef\u89c1\u3002\n\n\u6613\u6df7\u6dc6\u70b9\uff1a\nslicePointer := new([]int)  // new\u5c31\u662f\u7528\u6765\u521b\u5efa\u6307\u9488\u7c7b\u578b\u53d8\u91cf\u7684\uff0c\u4f1a\u81ea\u52a8\u521d\u59cb\u5316\uff1bslicePointer\u6307\u5411\u957f\u5ea6\u4e3a0\u3001\u5bb9\u91cf\u4e3a0\u7684\u5207\u7247\nvar slicePointer *[]int  // slicePointer\u4e3anil\uff0c\u7c7b\u578b\u53c8\u662f\u6307\u9488\u7c7b\u578b\uff0c\u6240\u4ee5\u4e5f\u79f0\u7a7a\u6307\u9488\uff1b\u7a7a\u6307\u9488\u65e0\u6cd5\u89e3\u5f15\u7528\u83b7\u53d6\u503c\uff0c\u4f1a\u62a5\u9519\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_2","title":"3 \u5207\u7247\u4e0e\u6570\u7ec4\u533a\u522b","text":"\u7279\u6027 \u6570\u7ec4\uff08Array\uff09 \u5207\u7247\uff08Slice\uff09 \u957f\u5ea6 \u56fa\u5b9a \u52a8\u6001\u53ef\u53d8 \u7c7b\u578b \u503c\u7c7b\u578b\uff08\u590d\u5236\u6574\u4e2a\u6570\u636e\uff09 \u5f15\u7528\u7c7b\u578b\uff08\u5171\u4eab\u5e95\u5c42\u6570\u7ec4\uff09 \u5185\u5b58\u5206\u914d \u901a\u5e38\u5728\u6808\u4e0a \u901a\u5e38\u5728\u5806\u4e0a \u58f0\u660e\u957f\u5ea6 \u5fc5\u987b\u663e\u5f0f\u6216\u901a\u8fc7<code>[...]</code>\u63a8\u65ad \u53ef\u52a8\u6001\u6269\u5c55 \u6027\u80fd \u65e0GC\u538b\u529b\uff0c\u4f46\u590d\u5236\u6210\u672c\u9ad8 \u6709GC\u538b\u529b\uff0c\u4f46\u64cd\u4f5c\u7075\u6d3b <ul> <li>\u6570\u7ec4\uff1a</li> <li>\u9700\u8981\u56fa\u5b9a\u5927\u5c0f\u4e14\u5bf9\u5185\u5b58\u654f\u611f\u7684\u573a\u666f\uff08\u5982\u52a0\u5bc6\u7b97\u6cd5\u4e2d\u7684\u5757\u5904\u7406\uff09\u3002</li> <li>\u660e\u786e\u77e5\u9053\u5143\u7d20\u6570\u91cf\u4e14\u65e0\u9700\u4fee\u6539\u957f\u5ea6\u65f6\uff08\u5982\u6708\u4efd\u540d\u79f0\uff09\u3002</li> <li>\u5207\u7247\uff1a</li> <li>\u7edd\u5927\u591a\u6570\u573a\u666f\uff08\u52a8\u6001\u6570\u636e\u96c6\u5408\u3001\u51fd\u6570\u4f20\u53c2\u7b49\uff09\u3002</li> <li>\u9700\u8981\u52a8\u6001\u589e\u5220\u5143\u7d20\u65f6\uff08\u5982\u8bfb\u53d6\u6587\u4ef6\u3001HTTP\u8bf7\u6c42\u4f53\uff09\u3002</li> </ul> <pre><code>// \u6570\u7ec4\uff08\u503c\u4f20\u9012\uff09\na := [3]int{1, 2, 3}\nb := a         // \u590d\u5236\u6574\u4e2a\u6570\u7ec4\nb[0] = 100     // \u4fee\u6539b\u4e0d\u4f1a\u5f71\u54cda\nfmt.Println(a) // [1 2 3]\n\n// \u5207\u7247\uff08\u5f15\u7528\u4f20\u9012\uff09\nx := []int{1, 2, 3}\ny := x         // \u5171\u4eab\u5e95\u5c42\u6570\u7ec4\ny[0] = 100     // \u4fee\u6539y\u4f1a\u5f71\u54cdx\nfmt.Println(x) // [100 2 3]\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_2","title":"4 \u5207\u7247\u81ea\u52a8\u6269\u5bb9","text":"<p>\u5728 Go \u8bed\u8a00\u7684\u6700\u65b0\u7248\u672c\uff08\u5982 Go 1.19 \u53ca\u4ee5\u4e0a\uff09\uff0c\u5207\u7247\u7684\u81ea\u52a8\u6269\u5bb9\u89c4\u5219\u76f8\u8f83\u4e8e\u65e7\u7248\u672c\uff08\u5982 Go 1.17 \u53ca\u4e4b\u524d\uff09\u6709\u6240\u8c03\u6574\uff0c\u91c7\u7528\u4e86\u66f4\u5e73\u6ed1\u7684\u589e\u957f\u7b56\u7565\uff0c\u800c\u975e\u7b80\u5355\u7684\u201c\u5c0f\u4e8e 1024 \u65f6 2 \u500d\u6269\u5bb9\uff0c\u5927\u4e8e\u7b49\u4e8e 1024 \u65f6 1.25 \u500d\u6269\u5bb9\u201d\u7684\u56fa\u5b9a\u89c4\u5219\u3002\u4ee5\u4e0b\u662f\u8be6\u7ec6\u7684\u6269\u5bb9\u673a\u5236\uff1a</p> <ul> <li>\u5bb9\u91cf\u8f83\u5c0f\uff08&lt; 256\uff09\u65f6\uff1a\u4ecd\u7136\u91c7\u7528 2 \u500d\u6269\u5bb9\uff0c\u4ee5\u51cf\u5c11\u9891\u7e41\u6269\u5bb9\u5e26\u6765\u7684\u6027\u80fd\u635f\u801718\u3002</li> <li>\u5bb9\u91cf\u8f83\u5927\uff08\u2265 256\uff09\u65f6\uff1a\u6269\u5bb9\u56e0\u5b50\u4f1a\u9010\u6b65\u964d\u4f4e\uff0c\u4ece 2.0 \u9010\u6e10\u8fc7\u6e21\u5230 1.25 \u500d\u5de6\u53f3\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u6d6a\u8d39110\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41","title":"4.1 \u5177\u4f53\u6269\u5bb9\u56e0\u5b50\u53d8\u5316","text":"<p>\u4e0d\u540c\u521d\u59cb\u5bb9\u91cf\u4e0b\u7684\u6269\u5bb9\u56e0\u5b50\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> \u521d\u59cb\u5bb9\u91cf\uff08Starting Cap\uff09 \u6269\u5bb9\u56e0\u5b50\uff08Growth Factor\uff09 256 2.0 512 1.63 1024 1.44 2048 1.35 4096 1.30 <p>\u8fd9\u4e2a\u53d8\u5316\u4f7f\u5f97\u6269\u5bb9\u7b56\u7565\u66f4\u52a0\u5e73\u6ed1\uff0c\u907f\u514d\u4e86\u5927\u5bb9\u91cf\u5207\u7247\u65f6\u5185\u5b58\u7684\u8fc7\u5ea6\u589e\u957f\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#42","title":"4.2 \u7279\u6b8a\u60c5\u51b5","text":"<ul> <li>\u8ffd\u52a0\u5143\u7d20\u8d85\u51fa\u5f53\u524d\u5bb9\u91cf 2 \u500d\uff1a\u5982\u679c <code>append</code> \u64cd\u4f5c\u540e\u7684\u65b0\u957f\u5ea6\u8d85\u8fc7\u5f53\u524d\u5bb9\u91cf\u7684 2 \u500d\uff0c\u5219\u76f4\u63a5\u6309\u65b0\u957f\u5ea6\u5206\u914d\u5bb9\u91cf\uff0c\u800c\u4e0d\u662f\u6309\u589e\u957f\u56e0\u5b50\u8ba1\u7b9746\u3002</li> <li>\u5185\u5b58\u5bf9\u9f50\u4f18\u5316\uff1aGo \u5728\u8ba1\u7b97\u65b0\u5bb9\u91cf\u65f6\u8fd8\u4f1a\u8003\u8651\u5185\u5b58\u5bf9\u9f50\uff0c\u6700\u7ec8\u5206\u914d\u7684\u5bb9\u91cf\u53ef\u80fd\u4f1a\u6bd4\u8ba1\u7b97\u503c\u7a0d\u5927\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u788e\u7247</li> </ul> <pre><code>s := make([]int, 0, 2)\ns = append(s, 1, 2) // \u5bb9\u91cf\u8db3\u591f\uff0c\u4e0d\u6269\u5bb9\ns = append(s, 3)    // \u5bb9\u91cf\u4e0d\u8db3\uff0c\u6269\u5bb9\u81f3 4\uff082 \u2192 4\uff09\ns = append(s, 4, 5) // \u5bb9\u91cf\u4e0d\u8db3\uff0c\u6269\u5bb9\u81f3 8\uff084 \u2192 8\uff09\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#43","title":"4.3 \u6700\u4f73\u5b9e\u8df5","text":"<p>\u60c5\u666f1\uff1a\u6ca1\u6709\u89e6\u53d1\u81ea\u52a8\u6269\u5bb9\uff0c\u5207\u7247\u53d8\u91cf\u5171\u4eab\u5e95\u5c42\u6570\u7ec4</p> <pre><code>func main() {\n    v1 := make([]int, 1, 3) // [0]\n    v2 := append(v1, 99)    // [0 99]\n    fmt.Println(v1, v2)     // [0] [0 99]\n    v1[0] = -1\n    fmt.Println(v1, v2) // [-1] [-1 99]\n} \n</code></pre> <p>\u60c5\u666f2\uff1a\u89e6\u53d1\u81ea\u52a8\u6269\u5bb9\uff0c\u65b0\u7684\u5207\u7247\u4f1a\u65b0\u5bf9\u5e94\u4e00\u4e2a\u65b0\u7684\u5e95\u5c42\u6570\u7ec4</p> <pre><code>func main() {\n    v1 := make([]int, 1, 3)      // [0]\n    v2 := append(v1, 99, 88, 77) // [0 99 88 77] -&gt; \u6dfb\u52a0\u5143\u7d20\u5df2\u7ecf\u8d85\u8fc7\u5bb9\u91cf\uff0c\u4f1a\u81ea\u52a8\u6269\u5bb9\n    fmt.Println(v1, v2)          // [0] [0 99 88 77]\n    v1[0] = -1\n    fmt.Println(v1, v2) // [-1] [0 99 88 77]\n}\n</code></pre> <ul> <li>\u9884\u5206\u914d\u5bb9\u91cf\uff1a\u5982\u679c\u5df2\u77e5\u5207\u7247\u6700\u7ec8\u5927\u5c0f\uff0c\u5efa\u8bae\u4f7f\u7528 <code>make([]T, 0, cap)</code> \u9884\u5206\u914d\u8db3\u591f\u5bb9\u91cf\uff0c\u907f\u514d\u9891\u7e41\u6269\u5bb9</li> <li>\u907f\u514d\u5171\u4eab\u5e95\u5c42\u6570\u7ec4\uff1a\u6269\u5bb9\u540e\u65b0\u5207\u7247\u53ef\u80fd\u6307\u5411\u65b0\u5185\u5b58\uff0c\u800c\u65e7\u5207\u7247\u4ecd\u6307\u5411\u539f\u6570\u7ec4\uff0c\u9700\u6ce8\u610f\u6570\u636e\u4e00\u81f4\u6027</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_2","title":"5 \u5207\u7247\u76f8\u5173\u64cd\u4f5c","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#51","title":"5.1 \u57fa\u672c\u64cd\u4f5c","text":"<pre><code>val := make(int[], 4, 5)\n\nlen(val) // \u957f\u5ea6\ncap(val) // \u5bb9\u91cf\n\nval[0] // \u7d22\u5f15\u53d6\u503c\uff1b\u7d22\u5f15\u6700\u5927\u503c\uff1alen(val) - 1\n\nval[1:3]  // \u5207\u7247\u7ee7\u7eed\u5207\u7247\uff0c\u83b7\u53d6\u7b2c2\u4e2a-\u7b2c3\u4e2a\u5143\u7d20\uff08\u53d6\u524d\u4e0d\u53d6\u540e\uff09\nval[1:]\nval[:3]  // \u6ce8\u610f\uff1a\u5207\u7247\u901a\u8fc7\u518d\u5207\u7247\u540e\u5f97\u5230\u7684\u6570\u636e\u5bf9\u5e94\u5185\u5b58\u5730\u5740\u4e0e\u539f\u5207\u7247\u7684\u5bf9\u5e94\uff0c\u6240\u4ee5\u65b0\u5207\u7247\u6216\u539f\u5207\u7247\u4fee\u6539\u67d0\u4e2a\u5143\u7d20\u503c\uff0c\u90fd\u4f1a\u4e92\u76f8\u5f71\u54cd\u88ab\u4fee\u6539\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52","title":"5.2 \u8ffd\u52a0\u5143\u7d20","text":"<pre><code>v1 := []int{11, 22, 33}\nvx := []int{88, 99}\n\nv2 := append(v1, 44, 55, 66)\nv3 := append(v1, vx...)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52_1","title":"5.2 \u201c \u5220\u9664\u201d\u5143\u7d20","text":"<pre><code>// go\u8bed\u8a00\u5220\u9664\u5143\u7d20\u4f7f\u7528\u94fe\u8868\uff0c\u8fd9\u91cc\u7528\u622a\u53d6\u62fc\u63a5\u65b9\u5f0f\uff08\u4e00\u822c\u7528\u7684\u5c11\uff09\nfunc main() {\n    v1 := []int{1, 2, 3, 4, 5, 6}\n    fmt.Println(v1)\n\n    deleteIndex := 2\n    v2 := append(v1[:deleteIndex], v1[deleteIndex+1:]...)\n    fmt.Println(v2) // [1 2 4 5 6]\n    fmt.Println(v1) // [1 2 4 5 6 6]\n}\n// \u8fd9\u79cd\u65b9\u5f0f\u6ce8\u610f\uff1a\u539f\u5207\u7247v1\u4f1a\u88ab\u4fee\u6539\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#53","title":"5.3 \u63d2\u5165\u5143\u7d20","text":"<pre><code>func main() {\n    v1 := []int{11, 22, 33, 44, 55, 66}\n    insertIndex := 3 // \u5728\u7d22\u5f153\u7684\u4f4d\u7f6e\u63d2\u516599\n    result := make([]int, 0, len(v1)+1)\n    result = append(result, v1[:insertIndex]...)\n    result = append(result, 99)\n    result = append(result, v1[insertIndex:]...)\n    fmt.Println(result)\n}\n// \u6548\u7387\u4f4e\u4e0b - \u4e0d\u63a8\u8350\uff1b\u4e0d\u8981\u76f4\u63a5\u7528v1\u53d6\u5207\u7247\u53bb\u8ffd\u52a0\uff0c\u90a3\u6837\u4e5f\u4f1a\u5bfc\u81f4\u5143\u7d20\u8986\u76d6\u95ee\u9898\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#-map","title":"\ud83d\udcda \u54c8\u5e0c\u8868-map","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_7","title":"1 \u57fa\u672c\u4ecb\u7ecd","text":"<p>map \u662f\u4e00\u79cd\u65e0\u5e8f\u7684\u96c6\u5408\u7c7b\u578b\uff0c\u5b83\u5c06\u552f\u4e00\u952e(key)\u6620\u5c04\u5230\u503c(value)\uff1a</p> <ul> <li>\u952e(key)\uff1a\u5fc5\u987b\u662f\u53ef\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\u7c7b\u578b</li> <li> <p>\u53ef\u6bd4\u8f83\u7c7b\u578b\u5f52\u7c7b\u540d\u79f0\uff1abooleans\u3001numbers\u3001strings\u3001pointers\u3001\u5143\u7d20\u7c7b\u578b\u4e3a\u53ef\u6bd4\u8f83\u7684channel\u548carrays\u3001\u5168\u90e8\u5b57\u6bb5\u4e3a\u53ef\u6bd4\u8f83\u7684structs</p> </li> <li> <p>\u5177\u4f53\u7c7b\u578b\uff1a<code>int</code>, <code>string</code>\uff0c<code>bool</code>, <code>float</code>, <code>array</code>, \u6307\u9488\u7b49\uff0c\u4f46\u4e0d\u80fd\u662f <code>slice</code>, <code>map</code>, <code>function</code>\uff09</p> </li> <li> <p>\u503c(value)\uff1a\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b</p> </li> <li> <p>\u65e0\u5e8f\u6027\uff1a\u5143\u7d20\u5b58\u50a8\u548c\u904d\u5386\u987a\u5e8f\u4e0d\u56fa\u5b9a</p> </li> </ul> <pre><code>// \u58f0\u660e\nvar m map[keyType]valueType\n\n// \u521d\u59cb\u5316\nm = make(map[keyType]valueType)\n\n// \u58f0\u660e\u5e76\u521d\u59cb\u5316\u7b80\u5199\nm := make(map[string]int)\nm := map[string]int{\"a\": 1, \"b\": 2}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11","title":"1.1 \u91cd\u8981\u7279\u6027","text":"<ol> <li>\u5f15\u7528\u7c7b\u578b\uff1amap\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u4f20\u9012map\u4e0d\u4f1a\u62f7\u8d1d\u5e95\u5c42\u6570\u636e</li> <li>\u52a8\u6001\u589e\u957f\uff1amap\u4f1a\u81ea\u52a8\u6269\u5bb9\uff0c\u65e0\u9700\u624b\u52a8\u7ba1\u7406\u5bb9\u91cf</li> <li>\u975e\u7ebf\u7a0b\u5b89\u5168\uff1a\u5e76\u53d1\u8bfb\u5199\u9700\u8981\u52a0\u9501\uff08\u6216\u4f7f\u7528 <code>sync.Map</code>\uff09</li> <li>\u96f6\u503c\uff1a\u672a\u521d\u59cb\u5316\u7684map\u96f6\u503c\u662f <code>nil</code>\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12","title":"1.2 \u6027\u80fd\u7279\u70b9","text":"<ol> <li>\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</li> <li>\u63d2\u5165\uff1aO(1)</li> <li>\u67e5\u627e\uff1aO(1)</li> <li>\u5220\u9664\uff1aO(1)</li> <li>\u5185\u5b58\u5f00\u9500\u6bd4slice\u5927</li> <li>\u4e0d\u9002\u5408\u5c0f\u6570\u636e\u91cf\uff08\u5c11\u91cf\u5143\u7d20\u65f6slice+\u7ebf\u6027\u641c\u7d22\u53ef\u80fd\u66f4\u5feb\uff09</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13","title":"1.3 \u4f7f\u7528\u573a\u666f","text":"<ul> <li>\u5feb\u901f\u67e5\u627e\u8868</li> <li>\u53bb\u91cd\u64cd\u4f5c</li> <li>\u7f13\u5b58\u5b9e\u73b0</li> <li>\u5bf9\u8c61\u5c5e\u6027\u5b58\u50a8</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#14","title":"1.4 \u904d\u5386\u7279\u6027","text":"<p>Go \u8bed\u8a00\u4e2d\uff0c\u5728 <code>range</code> \u904d\u5386 map \u65f6\u76f4\u63a5\u5220\u9664\u5f53\u524d\u6b63\u5728\u904d\u5386\u7684\u5143\u7d20\u662f\u5b89\u5168\u7684</p> <p>\u7ecf\u5178\u9762\u8bd5\u9898\uff1acounter\u7684\u503c\u662f\u591a\u5c11\uff1f</p> <p>\u7b54\u6848\uff1a2\u6216\u80053 \uff08map\u662f\u65e0\u5e8f\u7684\uff0crange\u904d\u5386\u662f\u904d\u5386\u5feb\u7167\uff0c\u4fee\u6539\u539fmap\u4e0d\u5f71\u54cd\u6b63\u5728\u904d\u5386\u7684\u5feb\u7167\uff0c\u4f46\u662f\u539fmap\u4f1a\u6539\u53d8\uff09</p> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var m = map[string]int{\n        \"A\": 21,\n        \"B\": 22,\n        \"C\": 23,\n    }\n    counter := 0\n    for k, v := range m {\n        if counter == 0 {\n            delete(m, \"A\")\n        }\n        counter++\n        fmt.Println(k, v)\n    }\n    fmt.Println(\"counter is \", counter)\n}\n</code></pre> <p>Go \u7684 <code>range</code> \u904d\u5386 map \u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ol> <li>\u5185\u90e8\u4f1a\u5148\u5bf9 map \u7684\u72b6\u6001\u505a\u4e00\u4e2a\u5feb\u7167</li> <li>\u904d\u5386\u662f\u57fa\u4e8e\u8fd9\u4e2a\u5feb\u7167\u8fdb\u884c\u7684</li> <li>\u4fee\u6539\uff08\u5305\u62ec\u5220\u9664\uff09\u64cd\u4f5c\u4f1a\u5f71\u54cd\u539f\u59cb map\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u6b63\u5728\u8fdb\u884c\u7684\u904d\u5386</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_6","title":"2 \u58f0\u660e &amp; \u521d\u59cb\u5316","text":"<pre><code>userInfo := map[string]string{}\nuserInfo := map[string]string{\"name\":cenhongchang, \"age\": 18}\n\nfmt.Println(userInfo[\"name\"])  // \u6253\u5370name\u7684\u503c\nuserInfo[\"name\"] = \"chc\"  // \u4fee\u6539name\u7684\u503c\n</code></pre> <pre><code>userInfo := make(map[int]int)\nuserInfo := make(map[int]int\uff0c 10)  // \u6307\u5b9a\u957f\u5ea6\n</code></pre> <pre><code>var row map[int]int\n// row[\"name\"] = \"chc\" -&gt; \u4f1a\u62a5\u9519\uff0c\u4e00\u822c\u53ea\u7528\u4e8e\u6574\u4f53\u8d4b\u503c\u60c5\u51b5\n\npointer := new(map[int]int) // \u6307\u9488\u53d8\u91cf\uff0c\u4e5f\u662f\u7528\u4e8e\u6574\u4f53\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e\u58f0\u660e\u8fd9\u662f\u4e00\u4e2amap\u7684\u6307\u9488\u53d8\u91cf\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>func main() {\n    userInfo := map[string]string{}\n    userInfo[\"name\"] = \"chc\"\n    fmt.Println(userInfo)\n\n    pointer := new(map[string]string)\n    pointer = &amp;userInfo\n\n    newData := *pointer\n    newData[\"age\"] = \"18\"\n\n    fmt.Println(userInfo)  // \u8fd9\u65f6\u5019\u90fd\u6307\u5411\u540c\u4e00\u5730\u5740\n    fmt.Println(newData)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_3","title":"3 \u957f\u5ea6\u3001\u5bb9\u91cf\u53ca\u64cd\u4f5c","text":"<pre><code>func main() {\n    userInfo := make(map[string]string, 10) // \u5bb9\u91cf\u4e0d\u662f\u957f\u5ea6\uff0c\u4e5f\u6ca1\u6709\u50cf\u5207\u7247\u6c42\u5bb9\u91cf\u7684cap\u51fd\u6570 -- \u5207\u8bb0\n    userInfo[\"\u59d3\u540d\"] = \"cenhongchang\"\n    userInfo[\"\u5e74\u9f84\"] = \"18\"\n    userInfo[\"\u8eab\u9ad8\"] = \"172\"\n    fmt.Println(len(userInfo))\n    fmt.Println(userInfo)\n    userInfo[\"\u4f53\u91cd\"] = \"135\" // \u589e\u52a0\n    delete(userInfo, \"\u4f53\u91cd\") // \u5220\u9664\n    userInfo[\"\u8eab\u9ad8\"] = \"180\" // \u4fee\u6539\n    fmt.Println(userInfo)\n    fmt.Println(userInfo[\"\u59d3\u540d\"]) // \u67e5\u770b\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-key","title":"4 \u5d4c\u5957key","text":"<pre><code>make(map[ [5]int ]string) // \u6570\u7ec4\n// make(map[ []int ]string) // \u5207\u7247 key -&gt; \u62a5\u9519\u4e0d\u53ef\u54c8\u5e0c\n// make(map[ map[int]string ]string)  // map key -&gt; \u62a5\u9519\u4e0d\u53ef\u54c8\u5e0c\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_3","title":"5 \u5e95\u5c42\u5b58\u50a8\u539f\u7406","text":"<p>\u521b\u5efamap -&gt; hmap -&gt; \u6876 -&gt; bmap</p> <p>\u521b\u5efa -&gt; <code>make(map[string]string, 10)</code></p> <p>hmap -&gt; \u6839\u636e\u7b97\u6cd5\u89c4\u5219\u81ea\u52a8\u8ba1\u7b97\u51fa\u5408\u9002\u7684B\u503c</p> <p>\u6876\u7684\u6570\u91cf -&gt; 2\u1d2e\uff082\u7684B\u6b21\u65b9\u4e2a\uff09</p> <p>bmap -&gt; \u6bcf\u4e2a\u6876\u6b63\u5e38\u6700\u591a\u5b58\u50a88\u4e2a\u952e\u503c\u5bf9\uff1b\u5f53\u7136\u53ef\u4ee5\u4f7f\u7528\u6307\u9488\u6269\u5c55\u6ea2\u51fa\u6876</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#51_1","title":"5.1 \u521d\u59cb\u5316","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52_2","title":"5.2 \u5199\u5165\u6570\u636e","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#53_1","title":"5.3 \u8bfb\u53d6\u6570\u636e","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#54","title":"5.4 \u6269\u5bb9","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#55","title":"5.5 \u8fc1\u79fb","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#newmake","title":"\ud83d\udcda \u6307\u9488\u4e0enew\u4ee5\u53camake","text":"<p>Go \u8bed\u8a00\u4e2d\uff0c\u6307\u9488\u662f\u4e00\u79cd\u5b58\u50a8\u53d8\u91cf\u5185\u5b58\u5730\u5740\u7684\u7279\u6b8a\u53d8\u91cf\u3002\u5b83\u5141\u8bb8\u4f60\u76f4\u63a5\u8bbf\u95ee\u548c\u4fee\u6539\u5185\u5b58\u4e2d\u7684\u6570\u636e\uff0c\u800c\u4e0d\u662f\u64cd\u4f5c\u6570\u636e\u7684\u526f\u672c\u3002\u8fd9\u662f\u9ad8\u6548\u64cd\u4f5c\u5927\u578b\u6570\u636e\u7ed3\u6784\u548c\u5b9e\u73b0\u67d0\u4e9b\u9ad8\u7ea7\u7279\u6027\u7684\u5173\u952e\u673a\u5236\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_8","title":"1 \u5185\u5b58\u5730\u5740\u4e0e\u503c","text":"<ul> <li>\u6bcf\u4e2a\u53d8\u91cf\u90fd\u5b58\u50a8\u5728\u5185\u5b58\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff08\u5730\u5740\uff09\u3002</li> <li>\u6307\u9488\u4fdd\u5b58\u7684\u662f\u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u4e0d\u662f\u503c\u672c\u8eab\u3002</li> </ul> <pre><code>var a int = 42  // \u58f0\u660e\u4e00\u4e2a\u6574\u578b\u53d8\u91cf a\nvar p *int = &amp;a // p \u662f\u6307\u5411 a \u7684\u6307\u9488\uff08\u4fdd\u5b58 a \u7684\u5185\u5b58\u5730\u5740\uff09\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_7","title":"2 \u64cd\u4f5c\u7b26","text":"<ul> <li><code>&amp;</code>\uff08\u53d6\u5730\u5740\u7b26\uff09\uff1a\u83b7\u53d6\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740</li> </ul> <pre><code>fmt.Println(&amp;a) // \u8f93\u51fa\uff1a0xc00000a0c8\uff08\u793a\u4f8b\u5730\u5740\uff09\n</code></pre> <ul> <li><code>*</code>\uff08\u89e3\u5f15\u7528\u7b26\uff09\uff1a\u901a\u8fc7\u6307\u9488\u8bbf\u95ee\u6216\u4fee\u6539\u8be5\u5730\u5740\u7684\u503c</li> </ul> <pre><code>fmt.Println(*p) // \u8f93\u51fa\uff1a42\uff08\u8bfb\u53d6 p \u6307\u5411\u7684\u503c\uff09\n*p = 100       // \u901a\u8fc7 p \u4fee\u6539 a \u7684\u503c\nfmt.Println(a)  // \u8f93\u51fa\uff1a100\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_4","title":"3 \u6307\u9488\u7684\u5178\u578b\u7528\u9014","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31","title":"3.1 \u907f\u514d\u5927\u6570\u636e\u7684\u62f7\u8d1d","text":"<pre><code>type BigStruct struct { data [10000]int }\n\nfunc ModifyByValue(s BigStruct) { /* \u64cd\u4f5c\u526f\u672c\uff0c\u6548\u7387\u4f4e */ }\nfunc ModifyByPointer(s *BigStruct) { /* \u76f4\u63a5\u64cd\u4f5c\u539f\u6570\u636e */ }\n\nfunc main() {\n    big := BigStruct{}\n    ModifyByPointer(&amp;big) // \u53ea\u4f20\u9012\u6307\u9488\uff088\u5b57\u8282\uff09\uff0c\u907f\u514d\u62f7\u8d1d\u6574\u4e2a\u7ed3\u6784\u4f53\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#32","title":"3.2 \u4fee\u6539\u51fd\u6570\u5916\u90e8\u7684\u53d8\u91cf","text":"<pre><code>func ResetToZero(n *int) {\n    *n = 0 // \u4fee\u6539\u5916\u90e8\u53d8\u91cf\n}\n\nfunc main() {\n    x := 99\n    ResetToZero(&amp;x)\n    fmt.Println(x) // \u8f93\u51fa\uff1a0\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#33","title":"3.3  \u5b9e\u73b0\u5f15\u7528\u8bed\u4e49\uff08\u5982\u4fee\u6539\u7ed3\u6784\u4f53\u5b57\u6bb5\uff09","text":"<pre><code>type User struct{ Name string }\n\nfunc (u *User) Rename(newName string) {\n    u.Name = newName // \u4fee\u6539\u539f\u7ed3\u6784\u4f53\n}\n\nfunc main() {\n    user := User{\"Alice\"}\n    user.Rename(\"Bob\") // Go \u81ea\u52a8\u8f6c\u6362\u4e3a\u6307\u9488\u8c03\u7528\n    fmt.Println(user.Name) // \u8f93\u51fa\uff1a\"Bob\"\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_3","title":"4 \u6307\u9488\u7684\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41-nil-new","title":"4.1 \u7a7a\u6307\u9488\uff08<code>nil</code>\uff09\u4e0e new\u5173\u952e\u5b57","text":"<ul> <li>\u672a\u521d\u59cb\u5316\u7684\u6307\u9488\u503c\u4e3a <code>nil</code>\uff0c\u89e3\u5f15\u7528\u4f1a\u5f15\u53d1 panic\uff1a</li> </ul> <pre><code>//\u65e0\u521d\u59cb\u5316\u7684\u6307\u9488\nvar p *int\nfmt.Println(*p) // panic: runtime error: invalid memory address\n</code></pre> <ul> <li>\u6709\u521d\u59cb\u5316\u7684\u6307\u9488</li> </ul> <pre><code>//\u6709\u521d\u59cb\u5316\u7684\u6307\u9488\ntpointerb := new(int)\nfmt.Println(\"tpointerb:\", tpointerb)\n*tpointerb = 10000000\nfmt.Println(\"tpointerb:\", tpointerb)\n</code></pre> <ul> <li>\u4f7f\u7528\u524d\u52a1\u5fc5\u68c0\u67e5\uff1a</li> </ul> <pre><code>if p != nil {\n    *p = 42\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#42_1","title":"4.2 \u4e0d\u8981\u5bf9\u6808\u4e0a\u9003\u9038\u7684\u6307\u9488\u8fc7\u5ea6\u4f18\u5316","text":"<ul> <li>Go \u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u51b3\u5b9a\u53d8\u91cf\u5206\u914d\u5728\u6808\u8fd8\u662f\u5806\u4e0a\uff0c\u65e0\u9700\u624b\u52a8\u7ba1\u7406\u5185\u5b58\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#43_1","title":"4.3 \u6307\u9488\u4e0e\u5e76\u53d1\u5b89\u5168","text":"<ul> <li>\u591a\u4e2a goroutine \u540c\u65f6\u901a\u8fc7\u6307\u9488\u4fee\u6539\u540c\u4e00\u6570\u636e\u65f6\uff0c\u9700\u7528 <code>sync.Mutex</code> \u7b49\u673a\u5236\u4fdd\u62a4\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5-make","title":"5 make\u51fd\u6570","text":"<p>make\u4e5f\u662f\u7528\u4e8e\u5185\u5b58\u5206\u914d\u7684\uff0c\u533a\u522b\u4e8enew\uff0c\u5b83\u53ea\u7528\u4e8eslice\u3001map\u4ee5\u53cachan\u7684\u5185\u5b58\u521b\u5efa\uff0c\u800c\u4e14\u5b83\u8fd4\u56de\u7684\u7c7b\u578b\u5c31\u662f\u8fd9\u4e09\u4e2a\u7c7b\u578b\u672c\u8eab\uff0c\u800c\u4e0d\u662f\u4ed6\u4eec\u7684\u6307\u9488\u7c7b\u578b\uff0c\u56e0\u4e3a\u8fd9\u4e09\u79cd\u7c7b\u578b\u5c31\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u6240\u4ee5\u5c31\u6ca1\u6709\u5fc5\u8981\u8fd4\u56de\u4ed6\u4eec\u7684\u6307\u9488\u4e86\u3002make\u51fd\u6570\u7684\u51fd\u6570\u7b7e\u540d\u5982\u4e0b:</p> <pre><code>func make(t Type, size ...IntegerType) Type\n</code></pre> <p>make\u51fd\u6570\u662f\u65e0\u53ef\u66ff\u4ee3\u7684\uff0c\u6211\u4eec\u5728\u4f7f\u7528slice\u3001map\u4ee5\u53cachannel\u7684\u65f6\u5019,\u90fd\u9700\u8981\u4f7f\u7528make\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u7136\u540e\u624d\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u603b\u4e4b\uff1a\u5728 Go \u8bed\u8a00\u4e2d\uff0c<code>make</code> \u662f\u4e00\u4e2a\u5185\u7f6e\u51fd\u6570\uff0c\u4e13\u95e8\u7528\u4e8e\u521d\u59cb\u5316\u5e76\u5206\u914d\u5185\u5b58\u7ed9\u4e09\u79cd\u5f15\u7528\u7c7b\u578b\uff1a\u5207\u7247\uff08slice\uff09\u3001\u6620\u5c04\uff08map\uff09 \u548c\u901a\u9053\uff08channel\uff09\u3002</p> <p>\u5b83\u7684\u6838\u5fc3\u4f5c\u7528\u662f\u521b\u5efa\u8fd9\u4e9b\u590d\u6742\u7c7b\u578b\u7684\u5b9e\u4f8b\uff0c\u5e76\u8bbe\u7f6e\u597d\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u548c\u521d\u59cb\u5c5e\u6027\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#51_2","title":"5.1 \u6838\u5fc3\u4f5c\u7528\u603b\u7ed3\uff1a","text":"<ol> <li>\u5206\u914d\u5185\u5b58\uff1a\u4e3a\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u5206\u914d\u5185\u5b58\u7a7a\u95f4</li> <li>\u521d\u59cb\u5316\u6570\u636e\u7ed3\u6784\uff1a\u8bbe\u7f6e\u5185\u90e8\u5c5e\u6027\uff08\u5982\u957f\u5ea6\u3001\u5bb9\u91cf\u3001\u7f13\u51b2\u533a\u7b49\uff09</li> <li>\u8fd4\u56de\u53ef\u76f4\u63a5\u4f7f\u7528\u7684\u5b9e\u4f8b\uff1a\u8fd4\u56de\u521d\u59cb\u5316\u540e\u7684\u5f15\u7528\u7c7b\u578b\uff08\u975e\u6307\u9488\uff09</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52-make-new","title":"5.2 \u4e3a\u4ec0\u4e48\u9700\u8981 <code>make</code>\uff1f\uff08\u4e0e <code>new</code> \u7684\u5bf9\u6bd4\uff09","text":"\u7279\u6027 <code>make</code> <code>new</code> \u9002\u7528\u7c7b\u578b slice, map, channel \u4efb\u610f\u7c7b\u578b \u8fd4\u56de\u503c \u521d\u59cb\u5316\u540e\u7684\u5f15\u7528\u7c7b\u578b \u6307\u5411\u96f6\u503c\u5185\u5b58\u7684\u6307\u9488 (<code>*T</code>) \u521d\u59cb\u5316\u7a0b\u5ea6 \u5b8c\u5168\u521d\u59cb\u5316\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528 \u4ec5\u5206\u914d\u96f6\u503c\u5185\u5b58\uff0c\u672a\u521d\u59cb\u5316\u6570\u636e\u7ed3\u6784 \u5185\u5b58\u5206\u914d \u5206\u914d+\u521d\u59cb\u5316\u6570\u636e\u7ed3\u6784 \u4ec5\u5206\u914d\u5185\u5b58 <pre><code>// \u9519\u8bef\u793a\u4f8b\uff1a\u7528 new \u521b\u5efa\u5207\u7247\nsp := new([]int)   // \u8fd4\u56de *[]int \u6307\u9488\n*sp = append(*sp, 1) // \u9700\u8981\u989d\u5916\u64cd\u4f5c\u624d\u80fd\u4f7f\u7528\n\n// \u6b63\u786e\u793a\u4f8b\uff1a\u7528 make \u521b\u5efa\u5207\u7247\ns := make([]int, 0, 10) // \u76f4\u63a5\u53ef\u7528\u7684\u5207\u7247\ns = append(s, 1)        // \u76f4\u63a5\u64cd\u4f5c\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_1","title":"6 \u4f55\u65f6\u4f7f\u7528\u6307\u9488\uff1f","text":"\u573a\u666f \u63a8\u8350\u65b9\u5f0f \u9700\u8981\u4fee\u6539\u51fd\u6570\u5916\u90e8\u53d8\u91cf \u6307\u9488 \u64cd\u4f5c\u5927\u578b\u7ed3\u6784\u4f53/\u6570\u7ec4 \u6307\u9488\uff08\u907f\u514d\u62f7\u8d1d\uff09 \u65b9\u6cd5\u9700\u4fee\u6539\u63a5\u6536\u8005 \u6307\u9488\u63a5\u6536\u8005 \u57fa\u672c\u7c7b\u578b\uff08int\u7b49\uff09\u5c0f\u6570\u636e \u503c\u4f20\u9012 <p>Go \u4e2d\u5207\u7247\uff08slice\uff09\u3001\u6620\u5c04\uff08map\uff09\u3001\u901a\u9053\uff08channel\uff09\u672c\u8eab\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u4f20\u9012\u65f6\u65e0\u9700\u663e\u5f0f\u4f7f\u7528\u6307\u9488\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7","title":"7 \u6307\u9488\u4e24\u4e2a\u9ad8\u7ea7\u64cd\u4f5c","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#71","title":"7.1 \u6570\u7ec4\u5730\u5740","text":"<pre><code>func main() {\n    arr := [3]int{1, 2, 3}\n\n    p1 := &amp;arr\n    p2 := &amp;arr[0]\n\n    fmt.Println(p1, p2)\n    fmt.Println(reflect.TypeOf(p1), reflect.TypeOf(p2))\n}\n\n/*\n&amp;[1 2 3] 0xc000012108\n*[3]int *int\n*/\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#72","title":"7.2 \u6307\u9488\u52a0\u51cf","text":"<pre><code>func main() {\n    dataList := [3]int{11, 22, 33}\n    p1 := &amp;dataList[0]\n    p2 := &amp;dataList[1]\n    p3 := &amp;dataList[2]\n\n    fmt.Println(p1, p2, p3)\n\n    ptr := unsafe.Pointer(&amp;dataList[0])  // \u6307\u9488 -&gt; unsafe.Pointer\n    targetAddr := uintptr(ptr) + 8*1       // \u7ee7\u7eed unsafe.Pointer -&gt; uintptr + \u504f\u79fb\u91cf\uff08\u5bf9\u5e94\u7c7b\u578b\u6240\u9700\u5b57\u8282\u6570/int64\u6bcf\u4e2a\u5143\u7d20\u76f8\u5dee8\u4e2a\u5b57\u8282\uff09\n    newPtr := unsafe.Pointer(targetAddr) // uintptr -&gt; unsafe.Pointer \uff08\u9006\u56de\uff09\n    value := (*int)(newPtr)              // unsafe.Pointer -&gt; \u6307\u9488\uff08\u9006\u56de\uff09\n    fmt.Println(value, *value)           // \u6253\u5370\u6307\u9488\u5730\u5740\u3001\u5bf9\u5e94\u7684\u503c\n}\n\n/*\n0xc000012108 0xc000012110 0xc000012118\n0xc000012110 22\n*/\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_11","title":"\ud83d\udcda \u51fd\u6570","text":"<p>Go\u8bed\u8a00\u4e2d\u7684\u51fd\u6570\u662f\u57fa\u672c\u7684\u4ee3\u7801\u5757\uff0c\u7528\u4e8e\u6267\u884c\u7279\u5b9a\u4efb\u52a1\u3002\u4ee5\u4e0b\u662fGo\u51fd\u6570\u7684\u4e3b\u8981\u7279\u6027\uff1a</p> <pre><code>func \u51fd\u6570\u540d(\u53c2\u6570\u5217\u8868) (\u8fd4\u56de\u503c\u5217\u8868) {\n    // \u51fd\u6570\u4f53\n}\n</code></pre> <pre><code>// \u65e0\u53c2\u6570\u65e0\u8fd4\u56de\u503c\nfunc sayHello() {\n    fmt.Println(\"Hello!\")\n}\n\n// \u6709\u53c2\u6570\u65e0\u8fd4\u56de\u503c\nfunc greet(name string) {\n    fmt.Printf(\"Hello, %s!\\n\", name)\n}\n\n// \u6709\u53c2\u6570\u6709\u8fd4\u56de\u503c\nfunc add(a, b int) int {\n    return a + b\n}\n\n// \u591a\u8fd4\u56de\u503c\nfunc swap(x, y string) (string, string) {\n    return y, x\n}\n\n// \u547d\u540d\u8fd4\u56de\u503c\nfunc divide(a, b float64) (result float64, err error) {\n    if b == 0.0 {\n        err = errors.New(\"division by zero\")\n        return\n    }\n    result = a / b\n    return\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_9","title":"1 \u4e00\u7b49\u516c\u6c11\uff1a\u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a\u503c\u4f20\u9012\u3001\u4f5c\u4e3a\u53c2\u6570\u548c\u8fd4\u56de\u503c","text":"<pre><code>func apply(op func(int, int) int, a, b int) int {\n    return op(a, b)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_8","title":"2 \u533f\u540d\u51fd\u6570\uff08\u95ed\u5305\uff09","text":"<pre><code>add := func(a, b int) int {\n    return a + b\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_5","title":"3 \u53ef\u53d8\u53c2\u6570","text":"<pre><code>func sum(nums ...int) int {\n   total := 0\n   for _, num := range nums {\n       total += num\n   }\n   return total\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-defer","title":"4 \u5ef6\u8fdf\u6267\u884c\uff08defer\uff09","text":"<pre><code>func readFile() {\n   file, err := os.Open(\"file.txt\")\n   if err != nil {\n       return\n   }\n   defer file.Close() // \u786e\u4fdd\u51fd\u6570\u8fd4\u56de\u524d\u5173\u95ed\u6587\u4ef6\n   // \u5904\u7406\u6587\u4ef6\n   // ... ...\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_4","title":"5 \u65b9\u6cd5\uff08\u4e0e\u7c7b\u578b\u5173\u8054\u7684\u51fd\u6570\uff09","text":"<pre><code>type Circle struct {\n   Radius float64\n}\n\nfunc (c Circle) Area() float64 {\n   return math.Pi * c.Radius * c.Radius\n}\n</code></pre> <p>Go\u8bed\u8a00\u7684\u51fd\u6570\u8bbe\u8ba1\u7b80\u6d01\u800c\u5f3a\u5927\uff0c\u652f\u6301\u591a\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u662f\u6784\u5efaGo\u7a0b\u5e8f\u7684\u57fa\u7840\u6a21\u5757\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_2","title":"6 \u91cd\u70b9\u8c08\u95ed\u5305","text":"<p>\u95ed\u5305(closure)\u662f\u6307\u4e00\u4e2a\u51fd\u6570\u503c\u5f15\u7528\u4e86\u5176\u51fd\u6570\u4f53\u4e4b\u5916\u7684\u53d8\u91cf\u3002</p> <p>\u793a\u4f8b\uff1a\u8be5\u793a\u4f8b\u5728\u65e9\u671fgo\u7248\u672c\uff0c\u5207\u7247\u5143\u7d20\u6bcf\u4e2a\u51fd\u6570\u6253\u5370\u7ed3\u679c\u90fd\u4f1a\u662f5\uff08\u5faa\u73af\u5df2\u6267\u884c\u5b8c\u6bd5\uff0c\u6b64\u65f6\uff1ai=5\uff09\uff0c\u4f46\u6700\u65b0\u7248\u672c\u5df2\u4fee\u590d\uff0c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var funcList []func()\n\n    for i := 0; i &lt; 5; i++ {\n        f := func() {\n            fmt.Println(i)\n        }\n        funcList = append(funcList, f)\n    }\n\n    for _, f := range funcList {\n        f()\n    }\n}\n\n// 0\n// 1\n// 2\n// 3\n// 4\n</code></pre> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var funcList []func()\n\n    for i := 0; i &lt; 5; i++ {\n        f := func(arg int) func() {\n            return func() {\n                fmt.Println(arg)\n            }\n        }(i)\n        funcList = append(funcList, f)\n    }\n\n    for _, f := range funcList {\n        f()\n    }\n}\n\n// 0\n// 1\n// 2\n// 3\n// 4\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7_1","title":"7 \u51fd\u6570\u9012\u5f52\u5256\u6790","text":"<p>\u9012\u5f52\u51fd\u6570\u5c31\u662f\u6bcf\u6b21\u538b\u5165\u65b0\u7684\u6808\uff0c\u4ece\u6700\u91cc\u5c42\u7684\u6808\u8fd8\u662f\u7531\u5185\u5411\u5916\u8fd0\u884c\uff0c\u9010\u7ea7\u91ca\u653e\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#8","title":"8 \u547d\u540d\u8fd4\u56de\u503c","text":"<ul> <li>\u5728\u51fd\u6570\u58f0\u660e\u65f6\u76f4\u63a5\u4e3a\u8fd4\u56de\u503c\u6307\u5b9a\u540d\u79f0</li> <li>\u8fd9\u4e9b\u540d\u79f0\u5728\u51fd\u6570\u4f53\u5185\u4f5c\u4e3a\u666e\u901a\u53d8\u91cf\u4f7f\u7528</li> <li>\u51fd\u6570\u7ed3\u675f\u65f6\u53ef\u4ee5\u76f4\u63a5<code>return</code>\u800c\u4e0d\u9700\u8981\u663e\u5f0f\u6307\u5b9a\u8fd4\u56de\u503c</li> </ul> <pre><code>func myTest(a, b int) (result int, args []int) {\n    result = a / b\n    args = []int{a, b}\n    return // \u7b49\u4ef7\u4e8e return result, args\n}\n\nfunc main() {\n    result, args := myTest(10, 3)\n    fmt.Println(\"\u8ba1\u7b97\u7ed3\u679c:\", result)\n    fmt.Println(\"\u4f20\u5165\u53c2\u6570:\", args)\n}\n\n// \u8ba1\u7b97\u7ed3\u679c: 3\n// \u4f20\u5165\u53c2\u6570: [10 3]\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#9-deferrecover","title":"9 \u5f02\u5e38\u5904\u7406\uff08defer...recover...\uff09","text":"<pre><code>func myTest(a, b int) (result int, err error) {  // \u63d0\u524d\u6307\u5b9a\u8fd4\u56de\u53d8\u91cf\u7684\u521d\u59cb\u5316\uff1berror\u7c7b\u578b\u96f6\u503c\u4e3anil\n    defer func() {\n        if r := recover(); r != nil {\n            fmt.Println(\"\u6355\u83b7\u5f02\u5e38\uff1a\", r)\n            err = errors.New(\"\u9664\u6570\u4e0d\u80fd\u4e3a\u96f6\")  // \u4fee\u6539\u8fd4\u56de\u53d8\u91cf\n        }\n    }()\n\n    result = a / b\n    return result, err\n}\n\nfunc main() {\n    result, err := myTest(10, 0)\n    if err != nil {\n        fmt.Println(\"\u53d1\u751f\u9519\u8bef:\", err)\n        return\n    }\n    fmt.Println(\"\u8ba1\u7b97\u7ed3\u679c:\", result)\n}\n\n// \u6355\u83b7\u5f02\u5e38\uff1a runtime error: integer divide by zero\n// \u53d1\u751f\u9519\u8bef: \u9664\u6570\u4e0d\u80fd\u4e3a\u96f6\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_12","title":"\ud83d\udcda \u7ed3\u6784\u4f53","text":"<pre><code>type \u7ed3\u6784\u4f53\u540d\u79f0 struct {\n    \u5b57\u6bb5   \u7c7b\u578b\n    ...\n}\n</code></pre> <pre><code>package main\n\nimport \"fmt\"\n\ntype Person struct {\n    name   string\n    age    int\n    gender bool\n    height float64\n    weight float64\n}\n\nfunc main() {\n    cenhongchang := Person{name: \"cenhongchang\", age: 20, gender: true, height: 1.75, weight: 60}\n    fmt.Println(cenhongchang) // {cenhongchang 20 true 1.75 60}\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_10","title":"1 \u7ed3\u6784\u4f53\u5b9a\u4e49","text":"<pre><code>// \u5b57\u6bb5\u5355\u72ec\u5199\ntype Person struct {\n    name   string\n    age    int\n    gender bool\n    height float64\n    weight float64\n}\n\n// \u540c\u7c7b\u578b\u5b57\u6bb5\u4e00\u8d77\u5199\ntype Person struct {\n    name           string\n    age            int\n    gender         bool\n    height, weight float64\n}\n\n// \u4f5c\u4e3a\u5176\u4e2d\u4e00\u4e2a\u5b57\u6bb5\u5d4c\u5957\ntype Animal struct {\n    dog    string\n    cat    string\n    person Person\n}\n\n//  \u533f\u540d\u5b57\u6bb5 -&gt; \u7701\u7565\u5b57\u6bb5\u540d\uff0c\u9ed8\u8ba4\u5c31\u4e0e\u5d4c\u5957\u8fdb\u6765\u7684\u7ed3\u6784\u4f53\u540d\u4e00\u81f4\ntype NewPerson struct {\n    Person\n    hobby  []string\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_9","title":"2 \u7ed3\u6784\u4f53\u6307\u9488","text":"<pre><code>func main() {\n    // \u7ed3\u6784\u4f53\u6307\u9488 -&gt; \u540c\u6837\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5c5e\u6027\u503c\n    p1 := &amp;Person{name: \"cenhongchang\", age: 20, gender: true, height: 1.75, weight: 60}\n    fmt.Println(p1.name)\n\n    p2 := Person{name: \"cenhongchang\", age: 20, gender: true, height: 1.75, weight: 60}\n    fmt.Println(&amp;p2.name)   // \u5148\u8ba1\u7b97\u5c5e\u6027\u518d\u8ba1\u7b97\u6307\u9488 0xc000024750\n    fmt.Println((&amp;p2).name) // \u5148\u8ba1\u7b97\u6307\u9488\u518d\u8ba1\u7b97\u5c5e\u6027 cenhongchang\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_6","title":"3 \u7ed3\u6784\u4f53\u8d4b\u503c\uff08\u62f7\u8d1d\uff09","text":"<pre><code>func main() {\n    // \u7ed3\u6784\u4f53\u6307\u9488 -&gt; \u540c\u6837\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5c5e\u6027\u503c\n    p1 := Person{name: \"cenhongchang\", age: 20, gender: true, height: 1.75, weight: 60}\n    p2 := p1\n    p1.name = \"chc\"\n    fmt.Println(p1.name) // chc\n    fmt.Println(p2.name) // cenhongchang\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_4","title":"4 \u7ed3\u6784\u4f53\u6307\u9488\u8d4b\u503c\uff08\u5f15\u7528\uff09","text":"<pre><code>func main() {\n    // \u7ed3\u6784\u4f53\u6307\u9488 -&gt; \u540c\u6837\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5c5e\u6027\u503c\n    p1 := &amp;Person{name: \"cenhongchang\", age: 20, gender: true, height: 1.75, weight: 60}\n    p2 := p1\n    p1.name = \"chc\"\n    fmt.Println(p1.name) // chc\n    fmt.Println(p2.name) // chc\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_5","title":"5 \u7ed3\u6784\u4f53\u5d4c\u5957\u6570\u7ec4\u3001\u5207\u7247\u7b49\u8d4b\u503c\u62f7\u8d1d","text":"<pre><code>func main() {\n    type Address struct {\n        city, state string\n    }\n\n    type Person struct {\n        name    string\n        age     int\n        hobby   [2]string\n        num     []int\n        parent  map[string]string\n        address Address\n    }\n\n    p1 := Person{\n        name:   \"\u4e8c\u72d7\u5b50\",\n        age:    19,\n        hobby:  [2]string{\"\u88f8\u5954\", \"\u5927\u4fdd\u5065\"},\n        num:    []int{69, 19, 99, 38},\n        parent: map[string]string{\"father\": \"Alex\", \"mother\": \"Monika\"},\n    }\n    fmt.Println(p1)\n}\n</code></pre> <p>\u5176\u5b9e\u672c\u8d28\u4e0a\u90fd\u62f7\u8d1d\u4e86\uff0c\u53ea\u4e0d\u8fc7\u7531\u4e8e\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\u7684\u4e0d\u540c\uff0c\u5bfc\u81f4\u62f7\u8d1d\u7684\u6709\u4e9b\u662f\u6570\u636e\uff0c\u6709\u4e9b\u662f\u5185\u5b58\u5730\u5740\uff08\u6307\u9488\uff09\u3002</p> <p>\u611f\u89c9\u62f7\u8d1d\uff1a\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u3001\u6574\u578b\u7b49</p> <p>\u611f\u89c9\u4e0d\u62f7\u8d1d\uff1amap\u3001\u5207\u7247</p> <p>\u6ce8\u610f\uff1a\u5bf9\u4e8e\u90a3\u4e9b\u9ed8\u8ba4\u62f7\u8d1d\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u6539\u53d8\u4e3a\u6307\u9488\u7c7b\u578b\uff0c\u8ba9\u6570\u636e\u5b9e\u73b0\u540c\u6b65\u4fee\u6539\u3002</p> <pre><code>p1 := Person{\n    ...\n    hobby:  *[2]string{\"\u88f8\u5954\", \"\u5927\u4fdd\u5065\"},\n    ...\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_3","title":"6 \u83b7\u53d6\u7ed3\u6784\u4f53\u5b57\u6bb5\u540d\u4e0e\u6807\u7b7e","text":"<pre><code>func main() {\n    type Address struct {\n        city, state string\n    }\n\n    type Person struct {\n        name    string            \"\u59d3\u540d\"\n        age     int               \"\u5e74\u9f84\"\n        hobby   [2]string         \"\u7231\u597d\"\n        num     []int             \"\u7535\u8bdd\"\n        parent  map[string]string \"\u7236\u6bcd\"\n        address Address           \"\u5730\u5740\"\n    }\n\n    p1 := Person{\n        name:   \"\u4e8c\u72d7\u5b50\",\n        age:    19,\n        hobby:  [2]string{\"\u88f8\u5954\", \"\u5927\u4fdd\u5065\"},\n        num:    []int{69, 19, 99, 38},\n        parent: map[string]string{\"father\": \"Alex\", \"mother\": \"Monika\"},\n    }\n    fmt.Println(p1)\n\n    p1Type := reflect.TypeOf(p1)\n    for i := 0; i &lt; p1Type.NumField(); i++ {\n        fmt.Println(p1Type.Field(i).Name)\n        fmt.Println(p1Type.Field(i).Tag)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7_2","title":"7 \u7ed3\u6784\u4f53\u672c\u8eab\u4e0e\u6307\u9488\u7528\u6cd5","text":"<pre><code>type Person struct {\n    name string\n    age  int\n}\n\nvar p = Person{\"Tom\", 30}\n\n// \u4f7f\u7528\u7ed3\u6784\u4f53\u672c\u8eab\uff0c\u4f1a\u62f7\u8d1d\uff0c\u7528\u7684\u662f\u4e0d\u540c\u7684\u4e24\u4efd\u6570\u636e\nfunc doSomething() Person {\n    return p\n}\n\nfunc main() {\n    data := doSomething()\n    data.name = \"Jerry\"\n    fmt.Println(p.name)  // \u672a\u6539\u53d8 Tom\n    fmt.Println(data.name) // \u5df2\u6539\u53d8 Jerry\n}\n</code></pre> <pre><code>// \u4f7f\u7528\u6307\u9488\uff0c\u4e0d\u4f1a\u62f7\u8d1d\uff0c\u90fd\u4f7f\u7528\u4e00\u4efd\u6570\u636e\nfunc doSomething() *Person {\n    return &amp;p\n}\n\nfunc main() {\n    data := doSomething()\n    data.name = \"Jerry\"\n    fmt.Println(p.name)  // \u672a\u6539\u53d8 Tom\n    fmt.Println(data.name) // \u5df2\u6539\u53d8 Jerry\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#8_1","title":"8 \u7c7b\u578b\u65b9\u6cd5\u4e0e\u7ed3\u6784\u4f53\u65b9\u6cd5\u5b9a\u4e49","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#81-type","title":"8.1 \u9879\u76ee\u5f00\u53d1\u4e2d\u4f1a\u4e3atype\u58f0\u660e\u7c7b\u578b\u7f16\u5199\u4e00\u4e9b\u65b9\u6cd5\uff0c\u4ece\u800c\u5b9e\u73b0<code>\u5bf9\u8c61.\u65b9\u6cd5</code>\u64cd\u4f5c","text":"<pre><code>type MyInt int\n\n// Incr \u5b9a\u4e49\u7c7b\u578b\u65b9\u6cd5 -&gt; i\u76f8\u5f53\u4e8e\u5bf9\u8c61\u672c\u8eab(\u7c7b\u6bd4self)\nfunc (i MyInt) Incr(num1, num2 int) int {\n    return num1 + num2 + int(i)\n}\n\nfunc main() {\n    v1 := MyInt(10)\n    v2 := v1\n    fmt.Println(v1, v2)\n\n    v3 := v1.Incr(1, 2) // 10+1+2=13\n    fmt.Println(v3)\n}\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u5199\u4e3a\uff1a</p> <pre><code>type MyInt int\n\n// Incr \u5b9a\u4e49\u7c7b\u578b\u65b9\u6cd5 -&gt; i\u76f8\u5f53\u4e8e\u5bf9\u8c61\u672c\u8eab(\u7c7b\u6bd4self)\nfunc (i *MyInt) Incr(num1, num2 int) int {\n    return num1 + num2 + int(*i)\n}\n\nfunc main() {\n    v1 := MyInt(10)\n    v2 := v1\n    fmt.Println(v1, v2)\n\n    v3 := v1.Incr(1, 2) // 10+1+2=13\n    fmt.Println(v3)\n}\n</code></pre> <pre><code>// \u7528\u4e0d\u5230i\u7684\u5199\u6cd5\nfunc (_ *MyInt) Incr(num1, num2 int) int {\n    return num1 + num2\n}\n</code></pre> <ul> <li> <p>func (i MyInt) Incr(num1, num2 int) int</p> </li> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u503c\u63a5\u6536\u8005\u65b9\u6cd5</p> </li> <li> <p>\u64cd\u4f5c\u7684\u662f MyInt \u7684\u526f\u672c</p> </li> <li> <p>\u5bf9 i \u7684\u4fee\u6539\u4e0d\u4f1a\u5f71\u54cd\u539f\u59cb\u503c</p> </li> <li> <p>func (i *MyInt) Incr(num1, num2 int) int</p> </li> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u6307\u9488\u63a5\u6536\u8005\u65b9\u6cd5</p> </li> <li> <p>\u64cd\u4f5c\u7684\u662f MyInt \u7684\u5b9e\u9645\u5730\u5740</p> </li> <li> <p>\u53ef\u4ee5\u901a\u8fc7 *i \u4fee\u6539\u539f\u59cb\u503c</p> </li> </ul> <p>\u603b\u7ed3\uff1a\u4e0d\u9700\u8981\u4fee\u6539\u63a5\u6536\u8005\u7684\u503c\uff08\u53ea\u8bfb\u64cd\u4f5c\uff09\u5c31\u4e0d\u7528\u6307\u9488\uff1b\u4f46\u5bf9\u4e8e\u63a5\u6536\u8005\u662f\u8f83\u5927\u7684\u7ed3\u6784\u4f53\uff0c\u9700\u8981\u907f\u514d\u590d\u5236\u5f00\u9500**\uff0c\u5c31\u7528\u6307\u9488\uff1b\u5177\u4f53\u770b\u573a\u666f\u9009\u62e9\u7528\u54ea\u4e00\u79cd\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#82","title":"8.2 \u7ed3\u6784\u4f53\u65b9\u6cd5","text":"<p>\u591a\u6570\u60c5\u51b5\u90fd\u662f\u4f7f\u7528\u6307\u9488\uff08\u786e\u4fdd\u4f7f\u7528\u4e00\u4efd\u6570\u636e\uff09;</p> <p>\u4e0d\u4f7f\u7528\u6307\u9488\u7684\u60c5\u51b5--\u51fd\u6570\u5185\u4f1a\u62f7\u8d1d\u65b0\u6570\u636e\uff0c\u6709\u4ee5\u4e0b\u793a\u4f8b\uff1a</p> <pre><code>type Person struct {\n    name   string\n    age    int\n    gender bool\n}\n\n// \u5b9a\u4e49\u4e24\u4e2a\u7ed3\u6784\u4f53\u51fd\u6570\uff0c\u5206\u522b\u4f7f\u7528\u975e\u6307\u9488\u3001\u6307\u9488\u53c2\u6570\n\nfunc (p Person) getRealAge(a, b int) {\n    p.age += a + b\n}\n\nfunc (p *Person) getRealAgeWithPointer(a, b int) {\n    p.age += a + b\n}\n\nfunc main() {\n    p := new(Person)\n    p.name = \"John\"\n    p.age = 18\n    p.gender = true\n\n    fmt.Println(reflect.TypeOf(p))\n    fmt.Println(reflect.TypeOf(p.age))\n\n    fmt.Println(p.age) // 18 - \u539f\u59cb\u503c\n    p.getRealAge(1, 1)\n    fmt.Println(p.age)            // 18 - \u6ca1\u6539\u53d8--\u51fd\u6570\u5185\u503c\u62f7\u8d1d\u5904\u7406\n    p.getRealAgeWithPointer(1, 1) // 20 - \u5df2\u6539\u53d8--\u51fd\u6570\u5185\u64cd\u4f5c\u539f\u59cb\u503c\u5904\u7406\n    fmt.Println(p.age)\n}\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <pre><code>1. \u5728\u7ed3\u6784\u4f53\u4e2d\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5173\u6ce8\u8c03\u7528\u7ed3\u6784\u4f53\u65b9\u6cd5\u662f`\u6307\u9488\u7c7b\u578b.\u65b9\u6cd5`\u8fd8\u662f`\u503c\u7c7b\u578b.\u65b9\u6cd5`\uff0c\u5b83\u5185\u90e8\u4f1a\u6839\u636e\u4f60\u51fd\u6570\u5b9a\u4e49\u63a5\u6536\u8005\uff08func\u5173\u952e\u5b57\u4e4b\u540e\u62ec\u53f7\u91cc\u7684\u5185\u5bb9\uff09\u662f\u6307\u9488\u7c7b\u578b\u8fd8\u662f\u503c\u7c7b\u578b\u63a5\u6536\u8005\u51b3\u5b9a\u3002\uff08\u56e0\u4e3a\u6211\u4eec\u603b\u662f\u4f1a\u8003\u8651\uff1a`\u6307\u9488.\u65b9\u6cd5`\u4e3a\u5565\u6ca1\u6709\u5f02\u5e38\uff1f -&gt; \u7ed3\u6784\u4f53\u5185\u90e8\u4f1a\u81ea\u52a8\u5224\u65ad\u5904\u7406\uff09\uff1b\n1. \u793a\u4f8b\u6ca1\u6709\u8fd4\u56de\u503c\u7684\u65f6\u5019\uff0c\u7528\u51fd\u6570\u4f20\u5165\u6307\u9488\u5c31\u6539\u53d8\u4e86\u539f\u59cb\u503c\u3002\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#9","title":"9 \u7ed3\u6784\u4f53\u65b9\u6cd5\u7ee7\u627f","text":"<pre><code>type Father struct {\n    name string\n    age  int\n}\n\ntype Son struct {\n    name   string\n    age    int\n    Father // -&gt; \u7ee7\u627f\u7236\u65b9\u6cd5\uff0c\u9700\u8981\u533f\u540d\uff0c\u5426\u5219\u4e0d\u4f1a\u7ee7\u627f\u7236\u7ed3\u6784\u4f53\u65b9\u6cd5\n}\n\nfunc (s *Son) PlayGame(gameName string) int {\n    fmt.Println(\"son's skill play game is: \" + gameName)\n    return 666\n}\n\nfunc (f *Father) MakeMoney(workName string) int {\n    fmt.Println(\"father's skill work is: \" + workName)\n    return 999\n}\n\nfunc main() {\n    s := Son{name: \"son\", age: 18}\n    f := Father{name: \"father\", age: 40}\n    s.PlayGame(\"lol\")     // son's skill play game is: lol\n    f.MakeMoney(\"coding\") // father's skill work is: coding\n    s.MakeMoney(\"teach\")  // father's skill work is: teach -&gt; \u7ee7\u627f\u7236\u65b9\u6cd5\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#10","title":"10 \u7ed3\u6784\u4f53\u5de5\u5382\u51fd\u6570","text":"<pre><code>// \u5b9a\u4e49\u4e3a\u79c1\u6709\u7ed3\u6784\u4f53\ntype file struct {\n    fd   int\n    name string\n}\n\n// NewFile \u521b\u5efa\u7ed3\u6784\u4f53\u5de5\u5382\u51fd\u6570 -- \u5b9a\u4e49\u4e3a\u516c\u6709\u5de5\u5382\u51fd\u6570\nfunc NewFile(fd int, name string) *File {\n    // \u5176\u4ed6\u5c01\u88c5\u4ee3\u7801\n    return &amp;File{fd, name}\n}\n\nfunc main() {\n    f1 := NewFile(10, \"./test1.txt\")\n    f2 := NewFile(80, \"./test2.txt\")\n    fmt.Println(f1)\n    fmt.Println(f2)\n}\n</code></pre> <p>\u5982\u4f55\u4fdd\u8bc1\u4ee3\u7801\u4e00\u81f4\u6027\uff1f</p> <p>\u5f3a\u5236\u4f7f\u7528\u5de5\u5382\u51fd\u6570\u521b\u5efa\uff1a\u7ed3\u6784\u4f53\u672c\u8eab\u5b9a\u4e49\u662f\u79c1\u6709\uff0c\u5de5\u5382\u51fd\u6570\u5b9a\u4e49\u662f\u516c\u6709\u5373\u53ef\u89e3\u51b3\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_13","title":"\ud83d\udcda \u63a5\u53e3","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_11","title":"1 \u63a5\u53e3\u5b9a\u4e49","text":"<pre><code>// \u7ea6\u675f\u51fd\u6570\ntype \u63a5\u53e3\u540d\u79f0 interface {\n    \u65b9\u6cd5\u540d(\u53c2\u6570\u5217\u8868) (\u8fd4\u56de\u503c\u5217\u8868) {\n    }\n}\n\n// \u7ea6\u675f\u7c7b\u578b\ntype \u63a5\u53e3\u540d\u79f0 interface {\n    \u7c7b\u578b1 | \u7c7b\u578b2 | \u7c7b\u578b3\n}\n</code></pre> <pre><code>// \u793a\u4f8b\ntype Base interface {\n    f1()\n    f2() int\n    f3(a, b int) int\n    f4(a,b string) (string, error)\n}\n\n\ntype baseType interface {\n    int | string\n}\n</code></pre> <p>\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u53ea\u5199\u8f93\u5165\u8f93\u51fa\u89c4\u8303\u683c\u5f0f\uff0c\u4e0d\u5199\u5177\u4f53\u5b9e\u73b0\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_10","title":"2 \u63a5\u53e3\u4f5c\u7528","text":"<p>go\u7a0b\u5e8f\u5f00\u53d1\u4e2d\uff0c\u63a5\u53e3\u6709\u4e24\u5927\u4f5c\u7528\uff1a\u4ee3\u6307\u7c7b\u578b \u4e0e \u7ea6\u675f\u8f93\u5165\u8f93\u51fa</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21-","title":"2.1 \u7a7a\u63a5\u53e3-\u4ee3\u6307\u4efb\u610f\u7c7b\u578b","text":"<p>go\u8bed\u8a00\u6e90\u7801\u4e2d\uff0c\u7a7a\u63a5\u53e3\u5c31\u5305\u542b\u4e24\u4e2a\u4fe1\u606f\uff1a</p> <pre><code>// \u6e90\u7801\u8def\u5f84 .../runtime/runtime2.go\ntype eface struct {\n    _type *_type  // \u7c7b\u578b\u4fe1\u606f\n    data  unsafe.Pointer  // \u6570\u636e\u4fe1\u606f - \u6307\u5411\u6570\u636e\u7684\u6307\u9488\n}\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>type Base interface{}  // \u7a7a\u63a5\u53e3\uff0c\u4ec0\u4e48\u90fd\u6ee1\u8db3\n\nfunc main() {\n    slice := make([]Base, 0)\n    //slice := make([]interface{}, 0) // \u7b80\u5199\u5f62\u5f0f\n    slice = append(slice, nil)\n    slice = append(slice, [3]int{1, 2, 3})\n    slice = append(slice, []int{11, 22, 33})\n    slice = append(slice, \"\u4f60\u597d\")\n    fmt.Println(slice)\n}\n\n// [&lt;nil&gt; [1 2 3] [11 22 33] \u4f60\u597d]\n</code></pre> <p>go1.18+\u652f\u6301\u4f7f\u7528any\u4ee3\u6307\u7a7a\u63a5\u53e3: <code>type any = interface{}</code></p> <p>\u6ce8\u610f\uff1a\u6709\u4e00\u79cd\u7a7a\u96c6\u63a5\u53e3\uff08\u8fd9\u79cd\u662f\u5199\u6cd5\u9519\u8bef\uff0c\u4f46\u53c8\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\uff09</p> <pre><code>type Empty interface{ // \u5206\u884c\u5199\u5bfc\u81f4\u7a7a\u96c6\u63a5\u53e3\uff0c\u4ec0\u4e48\u90fd\u4e0d\u6ee1\u8db3\n    string\n    int \n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22","title":"2.2 \u63a5\u53e3\u8f6c\u5316\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e","text":"<pre><code>type Person struct {\n    name string\n    age  int\n}\n\nfunc doSomething(arg interface{}) Person {\n    tp, ok := arg.(Person)\n    if ok {\n        fmt.Println(\"\u8f6c\u6362\u6210\u529f\uff1a\", tp, reflect.TypeOf(tp))\n    } else {\n        fmt.Println(\"\u8f6c\u6362\u5931\u8d25!\")\n    }\n\n    return tp\n}\n\nfunc main() {\n    p := Person{name: \"\u5f20\u4e09\", age: 18}\n    doSomething(100) // \u8f6c\u6362\u5931\u8d25!\n    doSomething(p)   // \u8f6c\u6362\u6210\u529f\uff1a {\u5f20\u4e09 18} main.Person\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#23","title":"2.3 \u63a5\u53e3\u7c7b\u578b\u65ad\u8a00","text":"<pre><code>type Person struct {\n    name string\n    age  int\n}\n\nfunc doSomething(arg interface{}) {\n    switch tp := arg.(type) {  // switch \u4e0e \u7c7b\u578b\u5224\u65ad\u7684\u56fa\u5b9a\u7528\u6cd5\n    case Person:\n        fmt.Println(\"struct\", tp.name)\n    case string:\n        fmt.Println(\"string\", tp)\n    case int:\n        fmt.Println(\"int\", tp)\n    default:\n        fmt.Printf(\"%T %v\\n\", tp, tp)\n    }\n}\n\nfunc main() {\n    doSomething(100)\n    doSomething(\"cenhc\")\n    doSomething(Person{\"cenhh\", 23})\n    doSomething([]int{1, 2, 3})\n}\n\n//int 100\n//string cenhc\n//struct cenhh\n//[]int [1 2 3]\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#24","title":"2.4 \u63a5\u53e3\u7ea6\u675f\u4e0e\u89c4\u8303","text":"<p>\u4f20\u5165\u7684\u5b9e\u4f8b\u4e00\u822c\u662f\u7ed3\u6784\u4f53\u6307\u9488</p> <pre><code>// \u5b9a\u4e49\u63a5\u53e3\u7ea6\u675f\ntype IBase interface {\n    f1() int\n}\n\n// \u7ed3\u6784\u4f53 Person\ntype Person struct {\n    name string\n    age  int\n}\n// \u7ed3\u6784\u4f53 Person \u7c7b\u578b\u65b9\u6cd5\nfunc (p *Person) f1() int {\n    return p.age\n}\n\n// \u7ed3\u6784\u4f53 User\ntype User struct {\n    username string\n    password string\n}\n// \u7ed3\u6784\u4f53 User \u7c7b\u578b\u65b9\u6cd5\nfunc (u *User) f1() int {\n    return len(u.username)\n}\n\n// \u6267\u884c\u51fd\u6570 - \u81ea\u52a8\u5224\u65ad\u4f20\u5165\u5bf9\u8c61\u7c7b\u578b\u8c03\u7528\u5bf9\u5e94\u65b9\u6cd5\nfunc doSomething(ibase IBase) {\n    result := ibase.f1()  // \u57fa\u4e8e\u63a5\u53e3\u4f20\u5165\u591a\u79cd\u7c7b\u578b\uff08\u591a\u6001\uff09\u81ea\u52a8\u8c03\u7528\u5bf9\u5e94\u65b9\u6cd5\n    fmt.Println(\"\u6267\u884c\u7ed3\u679c\uff1a\", result)\n}\n\nfunc main() {\n    p := &amp;Person{name: \"John\", age: 30}\n    u := &amp;User{username: \"john_doe\", password: \"secret\"}\n    doSomething(p)\n    doSomething(u)\n}\n\n//\u6267\u884c\u7ed3\u679c\uff1a 30\n//\u6267\u884c\u7ed3\u679c\uff1a 8\n</code></pre> <p>\u5b9e\u9645\u6848\u4f8b\uff1a\u540c\u65f6\u5411\u5fae\u4fe1\u3001\u90ae\u7bb1\u53d1\u9001\u6ce8\u518c\u6210\u529f\u6d88\u606f</p> <pre><code>/*\n\u63a5\u53e3\u5b9e\u73b0\u573a\u666f\uff1a\u540c\u65f6\u5411\u5fae\u4fe1\u3001\u90ae\u7bb1\u53d1\u9001\u6ce8\u518c\u6210\u529f\u6d88\u606f\n*/\n\npackage main\n\nimport \"fmt\"\n\ntype IBase interface {\n    send() bool\n}\n\ntype Email struct {\n    email   string\n    content string\n}\n\nfunc (e *Email) send() bool {\n    fmt.Println(e.content)\n    return true\n}\n\ntype Wechat struct {\n    wid     string\n    content string\n}\n\nfunc (e *Wechat) send() bool {\n    fmt.Println(e.content)\n    return true\n}\n\n// \u4f7f\u7528\u63a5\u53e3\u5207\u7247\u5904\u7406\nfunc runSend(ibaseList []IBase) {\n    for _, obj := range ibaseList {\n        obj.send()\n    }\n}\n\nfunc main() {\n    e := &amp;Email{\n        email:   \"123@qq.com\",\n        content: \"\u90ae\u7bb1\u7aef\u901a\u77e5\uff1a\u6ce8\u518c\u6210\u529f\uff01\",\n    }\n\n    w := &amp;Wechat{\n        wid:     \"ccplayer\",\n        content: \"\u5fae\u4fe1\u7aef\u901a\u77e5\uff1a\u6ce8\u518c\u6210\u529f\uff01\",\n    }\n\n    runSend([]IBase{e, w})\n}\n\n//\u90ae\u7bb1\u7aef\u901a\u77e5\uff1a\u6ce8\u518c\u6210\u529f\uff01\n//\u5fae\u4fe1\u7aef\u901a\u77e5\uff1a\u6ce8\u518c\u6210\u529f\uff01\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#go118","title":"\ud83d\udcda \u6cdb\u578b\uff08go1.18+\uff09","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_12","title":"1 \u57fa\u672c\u8bed\u6cd5","text":"<p>\u6cdb\u578b\u9002\u5408\u89e3\u51b3\u7684\u95ee\u9898\u573a\u666f\uff1a\u51cf\u5c11\u91cd\u590d\u4ee3\u7801\uff1a\u907f\u514d\u4e3a\u4e0d\u540c\u7c7b\u578b\u7f16\u5199\u51e0\u4e4e\u76f8\u540c\u7684\u51fd\u6570</p> <ol> <li>\u8bed\u6cd5\uff1aGo\u4f7f\u7528\u65b9\u62ec\u53f7<code>[]</code>\u800c\u975e\u5c16\u62ec\u53f7<code>&lt;&gt;</code></li> <li>\u5b9e\u73b0\u65b9\u5f0f\uff1aGo\u5728\u7f16\u8bd1\u65f6\u751f\u6210\u5177\u4f53\u7c7b\u578b\u7684\u4ee3\u7801\uff0c\u800c\u975e\u8fd0\u884c\u65f6\u64e6\u9664\u7c7b\u578b</li> <li>\u9650\u5236\uff1aGo\u6cdb\u578b\u76f8\u5bf9\u4fdd\u5b88\uff0c\u4e0d\u652f\u6301\u67d0\u4e9b\u9ad8\u7ea7\u7279\u6027\u5982\u8fd0\u7b97\u7b26\u91cd\u8f7d</li> <li>\u6ce8\u610f\uff1a\u6cdb\u578b\u4e0d\u662f\u8bf4\u53ef\u4ee5\u7684\u591a\u79cd\u6570\u636e\u7c7b\u578b\u6df7\u6742\u5728\u4e00\u8d77\uff0c\u4ed6\u53ea\u662f\u5176\u4e2d\u4e00\u79cd\uff1b\u53ef\u4ee5\u6df7\u6742\u5728\u4e00\u8d77\u7684\u6570\u636e\u7c7b\u578b\u662f\u7a7a\u63a5\u53e3</li> </ol> <pre><code>// \u7279\u522b\u6ce8\u610f\uff1a\u6cdb\u578b\u7ea6\u675f\u57fa\u7840\u6570\u636e\u7c7b\u578b\u53d8\u91cf--\u4f7f\u7528\u63a5\u53e3\ntype MyVar interface {\n    int | string | float32 | float64\n}\n\n// MySlice \u6cdb\u578b\u5207\u7247\u5b9a\u4e49\ntype MySlice[T int | string] []T\n\n// MyMap \u6cdb\u578bMap\u5b9a\u4e49\ntype MyMap[K int | string, V float64 | float32] map[K]V\n\n// MyStruct \u6cdb\u578b\u7ed3\u6784\u4f53\u5b9a\u4e49\ntype MyStruct[T int | string] struct {\n    data          []T\n    length        int\n    max, min, avg T\n}\n</code></pre> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u7ea6\u675f\ntype Numeric interface {\n    int | float64\n}\n\n// \u6cdb\u578b\u51fd\u6570\uff1a\u8ba1\u7b97\u5207\u7247\u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c\nfunc Sum[T Numeric](numbers []T) T {\n    var total T\n    for _, num := range numbers {\n        total += num\n    }\n    return total\n}\n\nfunc main() {\n    // \u6cdb\u578b\u7c7b\u578b--\u5b9e\u4f8b\u5316\n    ints := []int{1, 2, 3, 4}\n    floats := []float64{1.1, 2.2, 3.3}\n\n    fmt.Println(Sum(ints))    // \u8f93\u51fa: 10\n    fmt.Println(Sum(floats))  // \u8f93\u51fa: 6.6\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_11","title":"2 \u57fa\u4e8e\u57fa\u7840\u7c7b\u578b\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\u6cdb\u578b","text":"<pre><code>// \u57fa\u4e8e\u57fa\u7840\u7c7b\u578b\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\ntype MyInt int\ntype YourInt MyInt\n\n// \u5143\u7d20\u53ef\u4ee5\u662f\u57fa\u7840\u7c7b\u578b\u4e3aint\u7684\u7c7b\u578b\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7c7b\u578b\ntype IntSlice[T ~int] []T  // ~\u7b26\u53f7\u8868\u793a\u5e95\u5c42\u7c7b\u578b\u7ea6\u675f\n\nfunc main() {\n    a := IntSlice[MyInt]{1, 2, 3}\n    b := IntSlice[YourInt]{1, 2, 3}\n    fmt.Println(a)\n    fmt.Println(b)\n\n    // \u5982\u679c\u9700\u8981\u76f8\u52a0\uff0c\u5219\u5c06b\u8f6c\u6362\u4e3aIntSlice[MyInt]\u7c7b\u578b\n    var convertedB IntSlice[MyInt]\n    for _, v := range b {\n        convertedB = append(convertedB, MyInt(v))\n    }\n    result := append(a, convertedB...)\n    fmt.Println(result) // \u8f93\u51fa: [1 2 3 1 2 3]\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_7","title":"3 \u57fa\u4e8e\u6cdb\u578b\u7ee7\u7eed\u5b9a\u4e49\u6cdb\u578b","text":"<pre><code>type MySlice[T int | string | float32 | float64] []T\n\ntype FloatSlice[T float32 | float64] MySlice[T] // \u8868\u793a\u5143\u7d20\u7c7b\u578b\u5fc5\u987b\u5c5e\u4e8eMySlice\u5b9a\u4e49\u7c7b\u578b\uff0c\u542b\u5176\u4ed6\u7c7b\u578b\u4f1a\u62a5\u9519\n\ntype MyStruct[T float32 | float64] struct {\n    FiledsA        MySlice[T]\n    FiledsB        FloatSlice[T]\n    Height, Weight T\n}\n\ntype MyMap[K int | string, V float32 | float64] map[K]MySlice[V]\n\nfunc main() {\n    var a = MyStruct[float32]{\n        FiledsA: []float32{1, 2, 3},\n        FiledsB: []float32{4, 5, 6},\n        Height:  1.75,\n        Weight:  80.0,\n    }\n    fmt.Println(a)\n\n    var b = MyMap[int, float32]{ // \u6ce8\u610f\u683c\u5f0f\u53d8\u5316\n        1: {1, 2, 3},\n        2: {4, 5, 6},\n    }\n    fmt.Println(b)\n}\n</code></pre> <p>\u57fa\u4e8e\u6cdb\u578b\u5b9a\u4e49\uff0c\u6211\u4eec\u9010\u6b65\u6e05\u6670\uff1aT\u8868\u793a\u7684\u5c31\u662f\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff0c\u6bd4\u5982\uff1aint/float32/float64/string/bool\u7b49</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_5","title":"4 \u89c4\u907f\u6307\u9488\u7c7b\u578b\u5199\u6cd5","text":"<pre><code>// type myList1[T *int] []T  -&gt; \u9519\u8bef\u5199\u6cd5\uff0c\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e58\u6cd5\u8fd0\u7b97\uff0c\u9700\u8981\u672b\u5c3e\u52a0\u201c,\u201d\uff1b\u6216\u8005\u4f7f\u7528\u63a5\u53e3\u5b9a\u4e49\ntype myList1[T *int,] []T\ntype myList2[T interface{ *int }] []T\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_6","title":"5 \u6cdb\u578b\u63a5\u6536\u5668","text":"<p>\u4e00\u822c\u5e94\u7528\u573a\u666f\uff1a\u5b9a\u4e49\u6cdb\u578b\u7ed3\u6784\u4f53 -&gt; \u5b9a\u4e49\u7ed3\u6784\u4f53\u65b9\u6cd5 -&gt; \u5b9a\u4e49\u65b9\u6cd5\u63a5\u6536\u5668\uff08\u5b9e\u4f8b\u5316\u5bf9\u8c61\u8c03\u7528\u5177\u4f53\u65b9\u6cd5\uff09</p> <p>\u6cdb\u578b\u63a5\u6536\u5668\u7684\u4f5c\u7528\uff1a  \u8ba9\u4e00\u7ec4\u5177\u6709\u5171\u540c\u5904\u7406\u65b9\u6cd5\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7edf\u4e00\u65b9\u6cd5\u8c03\u7528\uff1b\u8fd9\u91cc\u4e0d\u540c\u4e8e\u63a5\u53e3\u5bf9\u6bcf\u4e2a\u5b9e\u73b0\u518d\u53bb\u8c03\u7528\u65b9\u5f0f\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>/*\n\u5b9a\u4e49\u6cdb\u578b\u6570\u503c\u578b\u7684\u6570\u636e\uff08int/float32/float64...\uff09\uff0c\u53ef\u8c03\u7528\u5176\u65b0\u589e\u5143\u7d20Add\u65b9\u6cd5\uff0c\u5b9e\u65f6\u66f4\u65b0\u6700\u5927\u503c/\u6700\u5c0f\u503c\n*/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"sync\"\n)\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\ntype myStruct[T int | float32 | float64] struct {\n    data []T\n    max  T\n    min  T\n    sm   sync.Mutex // \u8003\u8651\u5e76\u53d1\u5199\u5165\u5143\u7d20\uff0c\u4f7f\u7528\u4e92\u65a5\u9501\n}\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\u65b9\u6cd5 - \u6307\u9488\u8868\u793a\u64cd\u4f5c\u539f\u59cb\u6570\u636e\nfunc (m *myStruct[T]) Add(ele T) *myStruct[T] {\n    m.sm.Lock()\n    defer m.sm.Unlock()\n\n    m.data = append(m.data, ele)\n\n    if len(m.data) == 1 {\n        m.max = ele\n        m.min = ele\n        return m\n    }\n\n    if m.max &lt; ele {\n        m.max = ele\n    }\n\n    if m.min &gt; ele {\n        m.min = ele\n    }\n\n    return m\n}\n\nfunc (m *myStruct[T]) GetMax() T {\n    return m.max\n}\n\n// \u6cdb\u578b\u51fd\u6570\nfunc myInitStruct[T int | float32 | float64](value T) *myStruct[T] {\n    p := new(myStruct[T])\n    p.Add(value)\n    return p\n}\n\nfunc main() {\n    // int\u7c7b\u578b\u5bf9\u8c61\n    p1 := new(myStruct[int])\n    p1.Add(1).Add(2).Add(3).Add(5).Add(-10)\n    fmt.Println(p1.data, p1.max, p1.min, p1.GetMax())\n    // float64\u7c7b\u578b\u5bf9\u8c61\u4f7f\u7528\u540c\u6837\u65b9\u6cd5\u5904\u7406\n    p2 := new(myStruct[float64])\n    p2.Add(1.1).Add(2.2).Add(3.3).Add(5.5).Add(-10.1)\n    fmt.Println(p2.data, p2.max, p2.min, p2.GetMax())\n\n    p3 := myInitStruct(1) // \u6cdb\u578b\u51fd\u6570\u521b\u5efa\u7ed3\u6784\u4f53-\u8fd4\u56de\u6307\u9488\n    fmt.Println(p3.data, p3.max, p3.min, p3.GetMax())\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_4","title":"6 \u6cdb\u578b\u51fd\u6570","text":"<pre><code>func Sum[T int | string | float32 | float64](args ...T) (result T) {\n    for _, v := range args {\n        result += v\n    }\n    return\n}\n\nfunc main() {\n    result := Sum(\"\u4f60\u597d\uff01\", \"\u4e2d\u56fd\", \"--HELLO\")\n    fmt.Println(result)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7_3","title":"7 \u6cdb\u578b\u63a5\u53e3","text":"<pre><code>// \u5b9a\u4e49\u6cdb\u578b\u63a5\u53e3\ntype Data[T int | string] interface {\n    Process(T) (T, error)\n    Save() error\n}\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\ntype JsonData struct {\n    name string\n    age  int\n}\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\u65b9\u6cd5-int\u7c7b\u578b\nfunc (j *JsonData) Process(data int) (int, error) {\n    return data + 10, nil\n}\nfunc (j *JsonData) Save() error {\n    return nil\n}\n\n// \u5b9e\u4f8b\u5177\u4f53\u4f7f\u7528\nfunc doSomething(d Data[int], v int) {\n    result, _ := d.Process(v)\n    fmt.Println(\"result:\", result)\n}\n\nfunc doSomethingNew(d Data[string], v string) {\n    result, _ := d.Process(v)\n    fmt.Println(\"result:\", result)\n}\n\nfunc main() {\n    var person = &amp;JsonData{name: \"John\", age: 30}\n    doSomething(person, 100)\n\n    // var personNew = &amp;JsonData{name: \"tom\", age: 50}\n    // doSomethingNew(personNew, 200) // \u4f1a\u62a5\u9519 -- \u7ed3\u6784\u4f53\u6ca1\u6709\u5b9e\u73b0string\u7c7b\u7684\u5177\u4f53\u65b9\u6cd5\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#8_2","title":"8 \u6cdb\u578b\u5e26\u6765\u7684\u63a5\u53e3\u8bed\u6cd5\u53d8\u5316","text":"<pre><code>/**/\n\npackage main\n\nimport \"fmt\"\n\n// \u5b9a\u4e49\u63a5\u53e3\uff08\u6df7\u5408\u7c7b\u578b\u4e0e\u51fd\u6570\u7ea6\u675f\uff09\ntype Data interface {\n    ~int | ~float64\n    Process(p int) (int, error)\n    Save() error\n}\n\n// \u5b9a\u4e49\u81ea\u5b9a\u4e49\u7c7b\u578b\uff08\u5e95\u5c42\u7c7b\u578b\u5fc5\u987b\u662f\u63a5\u53e3\u7ea6\u675f\u7684\u7c7b\u578b\u4e4b\u4e00\uff09\ntype myType int\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\u65b9\u6cd5-int\u7c7b\u578b\nfunc (j myType) Process(data int) (int, error) {\n    return data + 10, nil\n}\nfunc (j myType) Save() error {\n    return nil\n}\n\n// \u5177\u4f53\u5b9e\u73b0--\u9700\u8981\u4f7f\u7528\u6cdb\u578b\u51fd\u6570\nfunc doSomething[T Data](d T, v int) {\n    result, _ := d.Process(v)\n    fmt.Println(\"result:\", result)\n}\n\nfunc main() {\n    var i myType = 10\n    doSomething(i, 10)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#9_1","title":"9 \u9884\u5b9a\u4e49\u63a5\u53e3\u7684\u4f7f\u7528","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#91","title":"9.1 \u652f\u6301\u53ef\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\u7c7b\u578b","text":"<p>\u5b9a\u4e49\u6cdb\u578bMap\u65f6\uff0c\u952e\u5fc5\u987b\u662f\u53ef\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\uff0c\u4f7f\u7528\u7684\u5173\u952e\u5b57\uff1acomparable\uff1b\u503c\u7528\u7a7a\u63a5\u53e3\u5373\u53ef\uff08any\uff09</p> <pre><code>type myMap[K comparable, V any] map[K]V\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#92","title":"9.2 \u652f\u6301\u53ef\u6bd4\u8f83\u5927\u5c0f\u7684\u7c7b\u578b","text":"<p>\u7c7b\u578b\u96c6\u5408\u5206\u7c7b\uff08\u7ea6\u5b9a\u4fd7\u6210\u7684\u4ee3\u7801\uff09\uff1a</p> <pre><code>// \u6d6e\u70b9\u578b\ntype Float interface {\n    ~float32 | ~float64\n}\n\n// \u6709\u7b26\u53f7\u6570\ntype Singed interface {\n    ~int8 | ~int16 | ~int32 | ~int64\n}\n\n// \u65e0\u7b26\u53f7\u6570\ntype Unsigned interface {\n    ~uint8 | ~uint16 | ~uint32 | ~uint64\n}\n\n// \u6574\u578b\ntype Integer interface {\n    Singed | Unsigned\n}\n\n// \u53ef\u6bd4\u8f83\u6392\u5e8f\u578b\ntype Ordered interface {\n    Integer | Float | ~string\n}\n\n// \u6570\u503c\u578b\ntype Number interface {\n    Integer | Float\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_14","title":"\ud83d\udcda \u53cd\u5c04","text":"<p>\u53cd\u5c04\u662fGo\u8bed\u8a00\u4e2d\u4e00\u4e2a\u5f3a\u5927\u4f46\u9700\u8981\u8c28\u614e\u4f7f\u7528\u7684\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u7c7b\u578b\u4fe1\u606f\u3001\u64cd\u4f5c\u5bf9\u8c61\u548c\u8c03\u7528\u65b9\u6cd5\u3002\u4e0b\u9762\u662f\u5bf9Go\u8bed\u8a00\u53cd\u5c04\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_13","title":"1 \u57fa\u672c\u6982\u5ff5","text":"<p>\u53cd\u5c04\u4e3b\u8981\u901a\u8fc7<code>reflect</code>\u5305\u5b9e\u73b0\uff0c\u6838\u5fc3\u662f\u4e24\u4e2a\u7c7b\u578b\uff1a</p> <ol> <li><code>reflect.TypeOf</code> - \u8868\u793aGo\u8bed\u8a00\u7684\u7c7b\u578b\u4fe1\u606f</li> <li><code>reflect.ValueOf</code> - \u8868\u793a\u4e00\u4e2a\u503c\u7684\u8fd0\u884c\u65f6\u8868\u793a</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_12","title":"2 \u53cd\u5c04\u7684\u4e09\u5927\u5b9a\u5f8b","text":"<ul> <li>\u6e90\u7801\u4e2d\u7684\u5b9a\u4e49\uff1a\u53cd\u5c04\u5b9e\u9645\u4e0a\u5c31\u662finterface\u4e0eType\u3001Value\u4e4b\u95f4\u8f6c\u6362\u8fc7\u7a0b</li> </ul> <pre><code>func typeOf(i any) Type   {} // interface -&gt; Type\nfunc valueOf(i any) Value {} // interface -&gt; Value\n</code></pre> <ol> <li>\u53cd\u5c04\u53ef\u4ee5\u5c06interface\u7c7b\u578b\u53d8\u91cf\u8f6c\u6362\u4e3a\u53cd\u5c04\u5bf9\u8c61</li> </ol> <pre><code>r := reflect.ValueOf(\u53d8\u91cf)\n</code></pre> <ol> <li>\u53cd\u5c04\u53ef\u4ee5\u5c06\u53cd\u5c04\u5bf9\u8c61\u8fd8\u539f\u4e3ainterface\u7c7b\u578b\u53d8\u91cf</li> </ol> <pre><code>i := r.Interface()\n</code></pre> <ol> <li>\u8981\u4fee\u6539\u53cd\u5c04\u5bf9\u8c61\uff0c\u5176\u503c\u5fc5\u987b\u662f\u53ef\u8bbe\u7f6e\u7684\uff08addressable\uff09</li> </ol> <pre><code>r := reflect.ValueOf(&amp;\u53d8\u91cf).Elem()\n</code></pre> <ul> <li>\u4e09\u5927\u5b9a\u5f8b\u793a\u4f8b\uff1a</li> </ul> <pre><code>func main() {\n  // \u53cd\u5c04\u4e09\u5927\u5b9a\u5f8b\n\n  var x float64 = 3.14\n\n  // 1 - \u53cd\u5c04\u53ef\u4ee5\u5c06interface\u7c7b\u578b\u53d8\u91cf\u8f6c\u6362\u4e3a\u53cd\u5c04\u5bf9\u8c61\n  r := reflect.ValueOf(x)\n  fmt.Printf(\"\u7c7b\u578b\uff1a%T \u503c\uff1a%v\\n\", r, r)\n\n  // 2 - \u53cd\u5c04\u53ef\u4ee5\u5c06\u53cd\u5c04\u5bf9\u8c61\u8fd8\u539f\u4e3ainterface\u7c7b\u578b\u53d8\u91cf\n  i := r.Interface().(float64)\n  fmt.Printf(\"\u7c7b\u578b\uff1a%T \u503c\uff1a%v\\n\", i, i)\n\n  // 3 - \u8981\u4fee\u6539\u53cd\u5c04\u5bf9\u8c61\uff0c\u5176\u503c\u5fc5\u987b\u662f\u53ef\u8bbe\u7f6e\u7684\uff08addressable\uff09\n  rpe := reflect.ValueOf(&amp;x).Elem()\n  rpe.SetFloat(7.1)             // SetFloat\u65b9\u6cd5\u9488\u5bf9\u7684\u662finterface\u7c7b\u578b\u6570\u636e\n  rpe.Set(reflect.ValueOf(8.0)) // Set\u65b9\u6cd5\u9488\u5bf9\u7684\u662f\u53cd\u5c04\u5bf9\u8c61\uff08reflect.Value\uff09\u6570\u636e\n  fmt.Printf(\"\u7c7b\u578b\uff1a%T \u503c\uff1a%v\\n\", x, x)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_6","title":"4 \u5b9e\u4f8b\u8ba4\u8bc6\u53cd\u5c04","text":"<pre><code>/*\n\u4ece\u4ee3\u7801\u5b9e\u4f8b\u5b66\u4e60\u53cd\u5c04\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6cdb\u578bUser\u7ed3\u6784\u4f53\uff0c\u5b9e\u73b0\u5165\u53c2\u7c7b\u578b\u5224\u65ad\u4fee\u6539\u503c\n*/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n)\n\ntype MyInt int\n\n// \u5b9a\u4e49\u7ed3\u6784\u4f53\ntype User struct {\n    IdOrName any\n    Age      MyInt\n}\n\nfunc main() {\n    u := User{\n        IdOrName: \"chc\",\n        Age:      20,\n    }\n    fmt.Println(\"\u4fee\u6539\u524d\uff1a\", u, reflect.TypeOf(u.IdOrName))\n\n    uType := reflect.TypeOf(u.IdOrName) // \u83b7\u53d6\u5bf9\u8c61\u5b57\u6bb5\u7684\u5177\u4f53\u7c7b\u578b -- \u8fd9\u4e0d\u662f\u6211\u8981\u7684\n    fmt.Println(uType)                  // string\n\n    uValueType := reflect.ValueOf(&amp;u).Elem() // \u83b7\u53d6\u5b9a\u4e49\u7ed3\u6784\u4f53\u5b57\u6bb5\u7c7b\u578b -- \u8fd9\u662f\u6211\u60f3\u8981\u7684\n\n    rvIdOrName := uValueType.FieldByName(\"IdOrName\") // \u7c7b\u578b\uff1areflect.Value\n    rvAge := uValueType.FieldByName(\"Age\")           // \u7c7b\u578b\uff1areflect.Value\n\n    fmt.Printf(\"IdOrName\u7c7b\u578b\uff1a%T\\n\", rvIdOrName)\n    fmt.Printf(\"IdOrName: type=%s, kind=%s\\n\", rvIdOrName.Type(), rvIdOrName.Kind()) // IdOrName: type=interface {}, kind=interface\n    fmt.Printf(\"Age: type=%s, kind=%s\\n\", rvAge.Type(), rvAge.Kind())                // Age: type=main.MyInt, kind=int\n\n    // \u6839\u636e\u6253\u5370\u7ed3\u679c\uff1a.Type()\u83b7\u53d6\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\uff1b.Kind()\u83b7\u53d6\u57fa\u7840\u6570\u636e\u7c7b\u578b\n\n    // \u73b0\u5728\u6839\u636e\u4f20\u5165\u503c\u7c7b\u578b\u5224\u65ad\u4fee\u6539\u503c\n    x := []int{1, 2, 3, 4, 5}\n    y := 10\n\n    // \u7a7a\u63a5\u53e3\u7c7b\u578b\u53ef\u4ee5\u8bbe\u7f6e\u4efb\u4f55\u7c7b\u578b\u503c\n    if rvIdOrName.Kind() == reflect.Interface {\n        r := reflect.ValueOf(x) // \u8f6c\u6362\u4e3a\u53cd\u5c04\u5bf9\u8c61\n        rvIdOrName.Set(r)\n    }\n\n    if rvAge.Kind() == reflect.Int {\n        rvAge.SetInt(int64(y))\n    }\n\n    fmt.Println(\"\u4fee\u6539\u540e\uff1a\", u, reflect.TypeOf(u.IdOrName))\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_7","title":"5 \u53cd\u5c04\u83b7\u53d6\u7c7b\u578b\u4fe1\u606f","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n    \"strings\"\n)\n\ntype Person struct {\n    hobbys []string\n}\n\ntype User struct {\n    Name   string `json:\"name\"`\n    Age    int    `json:\"age\"`\n    Gender bool   `json:\"gender\"`\n    Person `json:\"person\"`\n}\n\nfunc main() {\n    ashes := strings.Repeat(\"-\", 40) // \u5b9a\u4e4920\u4e2a-\u7684\u5b57\u7b26\u4e32\n    fmt.Println(ashes)\n\n    u := User{Name: \"Tom\", Age: 18, Gender: true}\n    uType := reflect.TypeOf(u)\n    for i := 0; i &lt; uType.NumField(); i++ {\n        field := uType.Field(i)\n        if i == 0 {\n            fmt.Println(\"\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u7684\u53cd\u5c04\u4fe1\u606f\u4e2d\u7ee7\u7eed\u53cd\u5c04\uff0c\u83b7\u53d6\u5305\u542b\u6709\u54ea\u4e9b\u5b57\u6bb5\uff1a\")\n\n            // \u5bf9\u7b2c\u4e00\u4e2a\u5143\u7d20\u83b7\u53d6\u7684\u4fe1\u606f\u4e5f\u505a\u53cd\u5c04\u83b7\u53d6\u5b57\u6bb5\uff08\u83b7\u53d6\u7684\u4fe1\u606f\u672c\u8d28\u4e5f\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff09\n            fType := reflect.TypeOf(field)\n            for j := 0; j &lt; fType.NumField(); j++ {\n                fmt.Println(fType.Field(j).Name)\n            }\n            fmt.Println(ashes)\n            fmt.Println(\"\u53cd\u5c04\u4fe1\u606f\u4e2d\u5305\u542b\u6709\u54ea\u4e9b\u65b9\u6cd5\uff08\u4f20\u5165\u6307\u9488\uff09\uff1a\")\n            fpType := reflect.TypeOf(&amp;field)\n            for j := 0; j &lt; fpType.NumMethod(); j++ {\n                fmt.Println(fpType.Method(j).Name)\n            }\n            fmt.Println(ashes)\n        }\n\n        fmt.Printf(\"\u53cd\u5c04\u4e2d\u5f53\u524d\u5b57\u6bb5\u7c7b\u578b\uff1a%T\\n\", field)\n        fmt.Println(ashes)\n\n        fmt.Printf(\"\u53cd\u5c04\u83b7\u53d6\u4fe1\u606f\u5982\u4e0b\uff1a\"+\n            \"\\n\\t\u5b57\u6bb5\u540d\uff1a%v\"+\n            \"\\n\\t\u5305\u8def\u5f84\uff1a%v\"+\n            \"\\n\\t\u7c7b\u578b\uff1a%v\"+\n            \"\\n\\t\u6807\u7b7e\uff1a%v\"+\n            \"\\n\\t\u504f\u79fb\u91cf\uff1a%v\"+\n            \"\\n\\t\u7d22\u5f15\uff1a%v\"+\n            \"\\n\\t\u662f\u5426\u533f\u540d\u5b57\u6bb5\uff1a%v\"+\n            \"\\n\\t\u662f\u5426\u53ef\u89c1\uff1a%v\\n\", field.Name, field.PkgPath, field.Type, field.Tag, field.Offset, field.Index, field.Anonymous, field.IsExported())\n        fmt.Println(ashes + \"\\n\")\n    }\n\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#51_3","title":"5.1 \u83b7\u53d6\u5bf9\u53d8\u91cf\u53cd\u5c04\u540e\u7ee7\u7eed\u53cd\u5c04\u4fe1\u606f","text":"<p>\u5bf9\u53d8\u91cf\u53cd\u5c04\u4e4b\u540e\uff0c\u7ee7\u7eed\u53cd\u5c04\u53ef\u4ee5\u89c2\u5bdf\u53d8\u91cf\u53cd\u5c04\u4e4b\u540e\u6709\u54ea\u4e9b\u4fe1\u606f\u548c\u65b9\u6cd5\uff1a</p> <pre><code>uType := reflect.TypeOf(u)\nfType := reflect.TypeOf(field)\n\n// \u6709\u54ea\u4e9b\u5b57\u6bb5\uff1f\nfor j := 0; j &lt; fType.NumField(); j++ {}\n// \u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff08\u76f8\u5f53\u4e8epython\u5b9a\u4e49\u7c7b\u7684\u5c5e\u6027\uff09\uff1a\n// Name\n// PkgPath\n// Type\n// Tag\n// Offset\n// Index\n// Anonymous\n\n// \u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\nfor j := 0; j &lt; fType.NumMethod(); j++ {}\n// IsExported \u662f\u5426\u53ef\u89c1 -&gt; \u4e0d\u662f\u6307\u9488\u53c2\u6570\u65b9\u6cd5\uff08fType\u83b7\u53d6\u65f6\uff0cfield\u4e0d\u662f\u6307\u9488\uff09 -- \u6307\u9488\u53c2\u6570\u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u65b9\u6cd5\uff1b\u975e\u6307\u9488\u53c2\u6570\u53ea\u80fd\u83b7\u53d6\u975e\u6307\u9488\u53c2\u6570\u65b9\u6cd5\n\n// fpType := reflect.TypeOf(&amp;field)  // \u4f20\u5165\u7684\u662f\u6307\u9488\u53c2\u6570\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52_3","title":"5.2 \u53cd\u5c04\u83b7\u53d6\u65b9\u6cd5\u6ce8\u610f\u4e8b\u9879","text":"<pre><code>uType := reflect.TypeOf(u)\nfType := reflect.TypeOf(field)   // \u975e\u6307\u9488\u53c2\u6570  -- \u53ea\u80fd\u83b7\u53d6\u975e\u6307\u9488\u53c2\u6570\u65b9\u6cd5\nfpType := reflect.TypeOf(&amp;field) // \u6307\u9488\u53c2\u6570  -- \u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u65b9\u6cd5\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>type Person struct {\n    hobbys []string\n}\n\ntype User struct {\n    Name   string `json:\"name\"`\n    Age    int    `json:\"age\"`\n    Gender bool   `json:\"gender\"`\n    Person `json:\"person\"`\n}\n\n// \u975e\u6307\u9488\u53c2\u6570\u65b9\u6cd5\nfunc (p User) SetName(name string) User {\n    p.Name = name\n    return p\n}\n\n// \u6307\u9488\u53c2\u6570\u65b9\u6cd5\nfunc (p *User) StringInfo() string {\n    return fmt.Sprintf(\"Name:%s, Age:%d, Gender:%t\", p.Name, p.Age, p.Gender)\n}\n\n\nfunc main() {\n    ashes := strings.Repeat(\"-\", 40) // \u5b9a\u4e4920\u4e2a-\u7684\u5b57\u7b26\u4e32\n    fmt.Println(ashes)\n\n    u := User{Name: \"Tom\", Age: 18, Gender: true}\n    // uType := reflect.TypeOf(u)  // \u8fd9\u79cd\u6253\u5370\u7ed3\u679c\uff1aSetName\n    uType := reflect.TypeOf(&amp;u)  // \u8fd9\u79cd\u6253\u5370\u7ed3\u679c\uff1aSetName StringInfo\n    for i := 0; i &lt; uType.NumMethod(); i++ {\n        field := uType.Method(i)\n        fmt.Println(field.Name)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_5","title":"6 \u53cd\u5c04\u5224\u65ad\u7c7b\u578b\u662f\u5426\u5b9e\u73b0\u4e86\u63a5\u53e3","text":"<p>\u793a\u4f8b\uff1a</p> <pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n    \"strings\"\n)\n\n// \u5b9a\u4e49\u63a5\u53e3\ntype People interface {\n    StringInfo() string\n}\n\ntype Person struct {\n    hobbys []string\n}\n\ntype User struct {\n    Name   string `json:\"name\"`\n    Age    int    `json:\"age\"`\n    Gender bool   `json:\"gender\"`\n    Person `json:\"person\"`\n}\n\nfunc (p *Person) StringInfo() string {\n    return fmt.Sprintf(\"Hobbys:%v\", p.hobbys)\n}\n\n// \u91cd\u5199\u7236\u7ed3\u6784\u4f53\u65b9\u6cd5 - \u540c\u65f6\u4e5f\u662f\u63a5\u53e3\n// func (p *User) StringInfo() string {\n//  return fmt.Sprintf(\"Name:%s, Age:%d, Gender:%t\", p.Name, p.Age, p.Gender)\n// }\n\nfunc main() {\n    ashes := strings.Repeat(\"-\", 40) // \u5b9a\u4e4920\u4e2a-\u7684\u5b57\u7b26\u4e32\n    fmt.Println(ashes)\n\n    // \u5224\u65ad\u7ed3\u6784\u4f53User\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\n    ipeople := (*People)(nil) // \u7a7a\u6307\u9488\u7c7b\u578b-\u7c7b\u578b\u5143\u4fe1\u606f-\u7c7b\u6bd4\u521b\u5efa\u4e00\u4e2a\u63a5\u53e3\u5b9e\u4f8b\n    iType := reflect.TypeOf(ipeople).Elem()\n    fmt.Println(\"iType\u5e95\u5c42\u7c7b\u578b\uff08kind\uff09\u662f\u5426\u662f\u4e00\u4e2a\u63a5\u53e3\uff1f \", iType.Kind() == reflect.Interface)\n\n    // \u5224\u65adPerson\u548cUser\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\n    uType := reflect.TypeOf(User{})\n    upType := reflect.TypeOf(&amp;User{})\n\n    fmt.Println(\"user\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\", uType, uType.Implements(iType))\n    fmt.Println(\"puser\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\", upType, upType.Implements(iType))\n\n    pType := reflect.TypeOf(Person{})\n    ppType := reflect.TypeOf(&amp;Person{})\n\n    fmt.Println(\"person\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\", pType, pType.Implements(iType))\n    fmt.Println(\"pperson\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f\", ppType, ppType.Implements(iType))\n\n}\n\n\n// iType\u5e95\u5c42\u7c7b\u578b\uff08kind\uff09\u662f\u5426\u662f\u4e00\u4e2a\u63a5\u53e3\uff1f  true\n// user\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f main.User false\n// puser\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f *main.User true\n// person\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f main.Person false\n// pperson\u662f\u5426\u5b9e\u73b0\u4e86People\u63a5\u53e3\uff1f *main.Person true\n</code></pre> <p>\u7ed3\u8bba\u603b\u7ed3\uff1a</p> <ul> <li> <p>\u5224\u65ad\u662f\u5426\u5b9e\u73b0\u63a5\u53e3\uff0c\u4f7f\u7528\uff1a<code>\u53d8\u91cf\u53cd\u5c04.Implements(reflect.TypeOf((*\u63a5\u53e3\u540d\u79f0)(nil)).Elem())</code></p> </li> <li> <p>\u53d8\u91cf\u53cd\u5c04\u65f6\uff0c\u4f9d\u7136\u9075\u5faa\u6307\u9488\u7c7b\u578b\u4f1a\u5224\u65ad\u662f\u5426\u5b9e\u73b0\u5bf9\u5e94\u7684\u6307\u9488\u7c7b\u578b\u63a5\u53e3\u6216\u503c\u7c7b\u578b\u63a5\u53e3\uff08\u5176\u4e00\u5373\u53ef\uff09\uff1b\u503c\u7c7b\u578b\u53ea\u4f1a\u5224\u65ad\u503c\u7c7b\u578b\u63a5\u53e3\u662f\u5426\u5b9e\u73b0</p> </li> <li>\u63a5\u53e3\u5224\u65ad\u662f\u5426\u5b9e\u73b0\u9075\u5faa\u7ee7\u627f\uff0c\u7236\u7c7b\u578b\u5b9e\u73b0\u4e86\u63a5\u53e3\uff1b\u5b50\u7c7b\u578b\u5224\u65ad\u4e5f\u662f\u5df2\u5b9e\u73b0</li> <li>\u63a5\u53e3\u5224\u65ad\u82e5\u6709\u591a\u4e2a\u65b9\u6cd5\uff0c\u5219\u4f1a\u5224\u65ad\u662f\u5426\u5168\u90e8\u5b9e\u73b0\uff1b\u624d\u4f1a\u8fd4\u56detrue\uff1b\u5426\u5219false</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7-valueof","title":"7 \u5173\u4e8eValueOf\u5e38\u7528\u64cd\u4f5c","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#71-typeofelemvalueofelem","title":"7.1 \u660e\u786eTypeOf().Elem()\u4e0eValueOf().Elem()\u4e4b\u95f4\u7684\u533a\u522b","text":"<pre><code>u := User{}\nt1 := reflect.TypeOf(u)          // User \u7684\u7c7b\u578b\nt2 := reflect.TypeOf(&amp;u).Elem()  // \u89e3\u5f15\u7528\u540e\u4ecd\u7136\u662f User \u7684\u7c7b\u578b\nfmt.Println(t1 == t2)            // true\uff08\u7c7b\u578b\u76f8\u540c\uff09\n\nv1 := reflect.ValueOf(u)          // User \u7684\u503c\uff08\u526f\u672c\uff09; v1 \u662f u \u7684\u4e00\u4e2a\u526f\u672c\u7684\u53cd\u5c04\u503c\uff08\u65b0\u5185\u5b58\u5730\u5740\uff09\uff08\u526f\u672c\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u4ec5\u9650\u4e8e\u5f53\u524d\u4f5c\u7528\u57df\uff09\nv2 := reflect.ValueOf(&amp;u).Elem()  // \u89e3\u5f15\u7528\u540e\u6307\u5411\u539f\u59cb u \u7684\u53cd\u5c04\u503c ; v2 \u662f &amp;u \u89e3\u5f15\u7528\u540e\u5f97\u5230\u7684\u539f\u59cb u \u7684\u53cd\u5c04\u503c\uff08\u539f\u59cb\u5185\u5b58\u5730\u5740\uff09\nfmt.Println(v1 == v2)             // false ; \u4e24\u8005\u7684\u5e95\u5c42\u5b58\u50a8\u4e0d\u540c\uff08\u4e00\u4e2a\u662f\u526f\u672c\uff0c\u4e00\u4e2a\u662f\u539f\u59cb\u503c\uff09\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#72_1","title":"7.2 \u53cd\u5c04\u83b7\u53d6\u4e0e\u4fee\u6539\u503c","text":"<p>\u6ce8\u610f\uff1a\u4fee\u6539\u7ed3\u6784\u4f53\u5bf9\u8c61\u91cc\u9762\u7684\u503c\uff0c\u5fc5\u987b\u4e3a\u516c\u6709\u7684\uff08\u9996\u5b57\u6bcd\u5927\u5199\uff09\uff1b\u79c1\u6709\u7684\u4e0d\u5141\u8bb8\u4fee\u6539\uff1b\u4e00\u822c\u4e00\u5b9a\u8981\u4fee\u6539\u79c1\u6709\u53d8\u91cf\uff1b\u5c31\u9700\u8981\u5199\u5bf9\u5e94\u7684\u51fd\u6570\u53bb\u4fee\u6539\uff1b</p> <pre><code>type User struct {\n    Name   string `json:\"name\"`\n}\n\nfunc main() {\n    u := User{Name: \"chc\"}\n    fmt.Println(u)\n\n    // \u53cd\u5c04\u83b7\u53d6Name\u7684\u503c\n    uValueElem := reflect.ValueOf(&amp;u).Elem()\n    uFieldByName := uValueElem.FieldByName(\"Name\")\n    fmt.Println(uFieldByName)\n    // \u53cd\u5c04\u4fee\u6539Name\u7684\u503c -- \u6ce8\u610f\u4f7f\u7528\u6307\u9488\u53c2\u6570\u83b7\u53d6\u53cd\u5c04\n    uFieldByName.SetString(\"xxx\")\n\n    fmt.Println(u)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#74-type","title":"7.4 \u8f6cType","text":"<pre><code>// \u8f6cType\nuTypeElem := reflect.ValueOf(&amp;u).Elem()\nuType := uTypeElem.Type() // \u7b49\u4ef7\u4e8e\uff1areflect.TypeOf(u)\nfmt.Println(uType)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#75-value","title":"7.5 \u6307\u9488/Value(\u5177\u4f53\u503c\u7c7b\u578b)\u4e92\u8f6c","text":"<pre><code>func main() {\n    u := User{Name: \"chc\"}\n    // \u53cd\u5c04\u83b7\u53d6Name\u7684\u503c\n    uValue := reflect.ValueOf(&amp;u)\n    uValueElem := uValue.Elem()                           // \u6307\u9488\u8f6cValue\n    fmt.Println(uValueElem.Type(), uValueElem.Kind())     // main.User struct\n    uPointerAddr := uValueElem.Addr()                     // Value\u8f6c\u6307\u9488\n    fmt.Println(uPointerAddr.Type(), uPointerAddr.Kind()) // *main.User ptr\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#76-reflectvalue","title":"7.6 reflect.Value\u4e0e\u5177\u4f53\u7c7b\u578b\u4e92\u8f6c","text":"<pre><code>func main() {\n    u := User{Name: \"chc\"}\n\n    // \u60c5\u51b5\u4e00\uff1a\u5bf9\u503c\u64cd\u4f5c\n    // User \u8f6c\u4e3a reflect.Value\n    uValue := reflect.ValueOf(u) // reflect.TypeOf(uValue) = reflect.Value -&gt; \u53cd\u5c04\u5305\u88c5\u5668\u672c\u8eab\u7c7b\u578b\n    // reflect.Value \u8f6c\u4e3a User\n    uNew := uValue.Interface().(User)\n    // \u6bd4\u8f83\n    fmt.Println(reflect.DeepEqual(u, uNew)) // true\uff08\u5185\u5bb9\u76f8\u540c\uff09\n    fmt.Println(&amp;u == &amp;uNew)                // false\uff08\u5185\u5b58\u5730\u5740\u4e0d\u540c\uff09\n\n    // \u60c5\u51b52\uff1a\u5bf9\u6307\u9488\u64cd\u4f5c\n    // *User \u8f6c\u4e3a reflect.Value\n    ptrValue := reflect.ValueOf(&amp;u) // reflect.TypeOf(uValue) = reflect.Value -&gt; \u53cd\u5c04\u5305\u88c5\u5668\u672c\u8eab\u7c7b\u578b\n    // reflect.Value \u8f6c\u4e3a *User\n    ptrNew := ptrValue.Interface().(*User)\n    fmt.Println(reflect.DeepEqual(u, *ptrNew)) // true\uff08\u5185\u5bb9\u76f8\u540c\uff09\n    fmt.Println(&amp;u == ptrNew)                  // true\uff08\u6307\u9488\u5730\u5740\u76f8\u540c\uff09\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#77","title":"7.7 \u7a7a\u7c7b\u578b\u7a7a\u6307\u9488\u4e0e\u6709\u7c7b\u578b\u7a7a\u6307\u9488","text":"<pre><code>func main() {\n    var i interface{} // \u7a7a\u63a5\u53e3\u6ca1\u6709\u6307\u5411\u5177\u4f53\u7684\u7c7b\u578b -- \u53ef\u4ee5\u8ba4\u4e3a\uff1a\u7a7a\u7c7b\u578b\u7a7a\u6307\u9488\n    iType := reflect.ValueOf(i)\n    fmt.Println(iType)                         // &lt;invalid reflect.Value&gt;\n    fmt.Println(iType.IsValid(), iType.Kind()) // \u662f\u5426\u6709\u6548\u7684\uff1afase\uff1b\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff1ainvalid\n    fmt.Println(strings.Repeat(\"-\", 40))\n\n    var u *User = nil                 // \u6709\u7c7b\u578b\u7684\u7a7a\u6307\u9488\n    fmt.Println(u, reflect.TypeOf(u)) // &lt;nil&gt; *main.User\n    uValue := reflect.ValueOf(u)\n    fmt.Println(uValue)                                          // &lt;nil&gt;\n    fmt.Println(uValue.IsValid(), uValue.Kind(), uValue.IsNil()) // \u662f\u5426\u6709\u6548\u7684\uff1atrue\uff1b\u57fa\u7840\u6570\u636e\u7c7b\u578b\uff1aptr\uff1b\u503c\u662f\u4e0d\u662fnil\uff1atrue\n    // \u4e3anil\uff1b\u6bd4\u5982\u505a\u64cd\u4f5c\u4f1a\u62a5\u9519\uff08nil.Call\uff09 -&gt; \u7a7a\u6307\u9488\u5f02\u5e38\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#78","title":"7.8 \u5224\u65ad\u662f\u5426\u96f6\u503c\u5bf9\u8c61","text":"<p>\u5224\u65ad\u662f\u5426\u96f6\u503c\u5bf9\u8c61\u4e4b\u524d\uff0c\u5c3d\u91cf\u5148\u5224\u65ad\u662f\u5426\u6709\u6548\uff08IsValid\uff09\uff1b\u907f\u514d\u5f02\u5e38</p> <pre><code>func main() {\n    var i interface{}\n    vi := reflect.ValueOf(i)\n    if vi.IsValid() {\n        fmt.Println(vi.IsZero())\n    } else {\n        fmt.Println(\"vi\u53d8\u91cf\u662f\u65e0\u6548\u7684\uff01\u65e0\u6cd5\u5224\u65ad\u662f\u5426\u96f6\u503c\u5bf9\u8c61~\")\n    }\n\n    var u = User{}\n    vu := reflect.ValueOf(u)\n    if vu.IsValid() {\n        fmt.Println(vu.IsZero())\n    } else {\n        fmt.Println(\"vi\u53d8\u91cf\u662f\u65e0\u6548\u7684\uff01\u65e0\u6cd5\u5224\u65ad\u662f\u5426\u96f6\u503c\u5bf9\u8c61~\")\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#79","title":"7.9 \u501f\u52a9\u53cd\u5c04\u6279\u91cf\u6216\u5355\u4e2a\u8c03\u7528\u51fd\u6570","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n)\n\ntype Person struct {\n    hobbys []string\n}\n\ntype User struct {\n    Name   string `json:\"name\"`\n    Age    int    `json:\"age\"`\n    Gender bool   `json:\"gender\"`\n    Person `json:\"person\"`\n}\n\nfunc (p *Person) StringInfo(end string) string {\n    return fmt.Sprintf(\"Hobbys:%v%v\", p.hobbys, end)\n}\n\nfunc (p *User) ShowInfo(x string) string {\n    return fmt.Sprintf(\"ShowInfo:%v\", x)\n}\n\nfunc main() {\n    var u User\n    // \u4f7f\u7528\u53cd\u5c04\u83b7\u53d6\u4e14\u8c03\u7528User\u91cc\u9762\u5168\u90e8\u65b9\u6cd5\n    uValue := reflect.ValueOf(&amp;u)\n    for i := 0; i &lt; uValue.NumMethod(); i++ {\n        method := uValue.Method(i)\n        prams := []reflect.Value{reflect.ValueOf(\"_XXX\")}\n        fmt.Println(method.Call(prams)) // [ShowInfo:_XXX] \\n [Hobbys:[]_XXX]  -- \u5faa\u73af\u8c03\u7528\u5168\u90e8\u51fd\u6570\n    }\n\n    // \u53ea\u83b7\u53d6\u4e14\u8c03\u7528\u67d0\u4e2a\u65b9\u6cd5\n    results := uValue.MethodByName(\"StringInfo\").Call([]reflect.Value{reflect.ValueOf(\"_ZZZZZZZ\")})\n    // \u8fd4\u56de\u7ed3\u679cresults\u91cc\u9762\u7684\u5143\u7d20\u6bcf\u4e2a\u90fd\u662freflect.Value\u7c7b\u578b\uff1b\u9700\u8981\u8f6c\u56de\u539f\u6765\u7ed3\u6784\u4f53\u5177\u4f53\u9700\u8981\u7684\u7c7b\u578b\n    srcValue := results[0].Interface().(string)\n    fmt.Println(results, reflect.TypeOf(results[0]), reflect.TypeOf(srcValue)) // [Hobbys:[]_ZZZZZZZ] reflect.Value string\n}\n</code></pre> <p>\u6ce8\u610f\uff1a\u8fd0\u884c\u65f6\u83b7\u53d6\u51fd\u6570\u540d\uff0c\u4f7f\u7528\u7684\u662fType()/TypeOf()</p> <pre><code>func main() {\n    var u User\n    // \u4f7f\u7528\u53cd\u5c04\u83b7\u53d6\u4e14\u8c03\u7528User\u91cc\u9762\u5168\u90e8\u65b9\u6cd5\n    uValue := reflect.ValueOf(&amp;u)\n    uType := uValue.Type()\n    for i := 0; i &lt; uValue.NumMethod(); i++ {\n        method := uValue.Method(i)\n        methodName := uType.Method(i).Name\n        fmt.Printf(\"\u51fd\u6570\u5bf9\u8c61: %s\\n\", method)\n        fmt.Printf(\"\u65b9\u6cd5\u540d: %s\\n\", methodName)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_15","title":"\ud83d\udcda \u6d4b\u8bd5\u76f8\u5173","text":"<p>Go\u8bed\u8a00\u5185\u7f6e\u4e86\u5f3a\u5927\u7684\u6d4b\u8bd5\u6846\u67b6\uff0c\u4f7f\u5f97\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\u53d8\u5f97\u7b80\u5355\u9ad8\u6548\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_14","title":"1 \u57fa\u672c\u7ed3\u6784","text":"<ul> <li> <p>\u6d4b\u8bd5\u6587\u4ef6\u5fc5\u987b\u4ee5<code>_test.go</code>\u7ed3\u5c3e</p> </li> <li> <p>\u6d4b\u8bd5\u6587\u4ef6\u4f1a\u88ab<code>go text</code>\u8bc6\u522b\uff0c\u4e0d\u4f1a\u88ab<code>go build</code>\u8bc6\u522b</p> </li> <li> <p>\u6d4b\u8bd5\u6587\u4ef6\u4e0e\u88ab\u6d4b\u8bd5\u6587\u4ef6\u5fc5\u987b\u5728\u4e00\u4e2a\u5305\u5f53\u4e2d</p> </li> <li> <p>\u6d4b\u8bd5\u51fd\u6570\u7b7e\u540d</p> </li> <li> <p>\u5355\u5143\u6d4b\u8bd5\uff1at *testing.T</p> </li> <li>\u57fa\u51c6\u6d4b\u8bd5\uff1ab *testing.B</li> <li>\u6a21\u7cca\u6d4b\u8bd5\uff1af *testing.F</li> </ul> <pre><code>func TestXxx(t *testing.T)\n\n// \u51fd\u6570\u540d\u4ee5`Test`\u5f00\u5934\n// `Xxx`\u90e8\u5206\u9996\u5b57\u6bcd\u5fc5\u987b\u5927\u5199\n// \u63a5\u6536`*testing.T`\u53c2\u6570\n</code></pre> <ul> <li>\u8fd0\u884c\u6d4b\u8bd5\u547d\u4ee4</li> </ul> <pre><code># \u8fd0\u884c\u5f53\u524d\u5305\u7684\u6240\u6709\u6d4b\u8bd5\ngo test\n\n# \u663e\u793a\u8be6\u7ec6\u6d4b\u8bd5\u4fe1\u606f\ngo test -v\n\n# \u8bbe\u7f6e\u8d85\u65f6\ngo test -v -timeout 5s\n\n# \u8bbe\u7f6e\u7528\u4f8b\u6d4b\u8bd5\u6b21\u6570\ngo test -v -count 3\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\u51fd\u6570\ngo test -v -run TestAdd\n\n# \u8fd0\u884c\u5305\u542b\"Add\"\u7684\u6d4b\u8bd5\u51fd\u6570\ngo test -v -run Add\n\n# \u663e\u793a\u6d4b\u8bd5\u8986\u76d6\u7387\ngo test -cover\n\n# \u751f\u6210\u8986\u76d6\u7387\u62a5\u544a\ngo test -coverprofile=coverage.out\ngo tool cover -html=coverage.out\n\n# \u57fa\u51c6\u6d4b\u8bd5\ngo test -bench\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_13","title":"2 \u5355\u5143\u6d4b\u8bd5","text":"<p>\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>project/\n\u251c\u2500\u2500 testcases/\n\u2502   \u2514\u2500\u2500 generics_test.go # \u6d4b\u8bd5\u4ee3\u7801\n\u251c\u2500\u2500 generics/\n\u2502   \u251c\u2500\u2500 generics.go      # \u6cdb\u578b\u5b9e\u73b0\u4ee3\u7801\n\u2514\u2500\u2500 go.mod               # \u6a21\u5757\u6587\u4ef6\n</code></pre> <p>\u7528\u4f8b\u7f16\u5199\u793a\u4f8b\uff08\u8868\u9a71\u52a8\u6cd5\uff09\uff1a</p> <pre><code>package main\n\nimport \"testing\"\n\nfunc TestRun(t *testing.T) {\n    tests := []struct {\n        name string\n    }{\n        // TODO: Add test cases.\n        {\n            \"\u6cdb\u578b\u76f8\u5173\u529f\u80fd\u51fd\u6570\u6d4b\u8bd5\",\n        },\n    }\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            Run()\n        })\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-table-driven","title":"3 \u8868\u9a71\u52a8\u6cd5\uff08Table Driven\uff09","text":"<p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u5df2\u7ecf\u7528\u5230\u4e86\u8868\u9a71\u52a8\u6cd5\u521b\u5efa\u7528\u4f8b\uff0c\u4e00\u822c\u70b9\u51fb\u51fd\u6570\uff0c\u53f3\u952e\u9009\u62e9\u751f\u6210\u5373\u53ef\u6709\u6b64\u683c\u5f0f\u4ee3\u7801\u6587\u4ef6\u751f\u6210\uff1b</p> <p>Table Driven\u4e3b\u8981\u5305\u542b\u4e09\u4e2a\u90e8\u5206\u5185\u5bb9\uff1a</p> <ul> <li>\u6d4b\u8bd5\u7528\u4f8b\u5b9a\u4e49\uff1a\u5373\u6bcf\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u9700\u8981\u6709\u4ec0\u4e48</li> <li>\u5177\u4f53\u7684\u6d4b\u8bd5\u7528\u4f8b\uff1a\u8bbe\u8ba1\u7684\u6bcf\u4e00\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u90fd\u5728\u8fd9\u91cc</li> <li>\u6267\u884c\u6d4b\u8bd5\u7528\u4f8b\uff1a\u5305\u62ec\u6d4b\u8bd5\u7528\u4f8b\u7684\u65ad\u8a00</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_7","title":"4 \u6d4b\u8bd5\u8f85\u52a9\u51fd\u6570","text":"<p>\u4f7f\u7528<code>t.Helper()</code>\u6807\u8bb0\u8f85\u52a9\u51fd\u6570\uff0c\u8fd9\u6837\u5728\u9519\u8bef\u62a5\u544a\u4e2d\u4f1a\u8df3\u8fc7\u8fd9\u4e9b\u51fd\u6570\uff1b</p> <pre><code>func assertEqual(t *testing.T, result, expected int) {\n    t.Helper()\n    if result != expected {\n        t.Errorf(\"expected %d, got %d\", expected, result)\n    }\n}\n\nfunc TestWithHelper(t *testing.T) {\n    assertEqual(t, Add(2, 2), 4)\n    assertEqual(t, Multiply(3, 3), 9)\n}\n</code></pre> <p>\u5982\u4e0a\u9762\u7684\u6d4b\u8bd5\u7528\u4f8b\uff1a\u6d4b\u8bd5\u53d1\u751f\u9519\u8bef\u540e\uff0c\u5e76\u4e0d\u4f1a\u8f93\u51fa assertEqualha \u51fd\u6570\u7684\u8c03\u7528\u4fe1\u606f\uff0c\u800c\u662f\u663e\u793a\u9519\u8bef\u4f4d\u7f6e\u5728 TestWithHelper \u4e2d\uff0c\u8fd9\u4e5f\u6709\u4e2a\u597d\u5904\uff0c\u5f53\u6709\u591a\u4e2a\u6d4b\u8bd5\u51fd\u6570\u8c03\u7528helper\u51fd\u6570\u65f6\uff0c\u53ef\u4ee5\u51c6\u786e\u7684\u77e5\u9053\u53d1\u751f\u9519\u8bef\u7684\u662f\u54ea\u4e2a\u6d4b\u8bd5\u51fd\u6570\uff1b\u4f46\u4e5f\u8981\u6ce8\u610f\uff0c\u5f53\u5728\u8f85\u52a9\u51fd\u6570\u5185\u90e8\u53d1\u751f\u9519\u8bef\uff0c\u53ef\u4ee5\u5c06t.Helper()\u53bb\u6389\uff0c\u518d\u53bb\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5-benchmark","title":"5 \u57fa\u51c6\u6d4b\u8bd5 (Benchmark)","text":"<p>\u4ee5Benchmark \u5f00\u5934\u7684\u6d4b\u8bd5\u51fd\u6570\u4e3a\u57fa\u51c6\u6d4b\u8bd5\u51fd\u6570\uff0c\u7528\u4e8e\u6d4b\u8bd5\u4e00\u6bb5\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u6027\u80fd\u3002</p> <p>\u53c2\u6570\uff1a(b *testing.B)</p> <p>\u9ed8\u8ba4\u4e0d\u4f1a\u5f00\u542f\u57fa\u51c6\u6d4b\u8bd5\uff0c\u9700\u8981\u5f00\u542f\u57fa\u51c6\u6d4b\u8bd5\uff0c\u5404\u4e2a\u573a\u666f\u8fd0\u884c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code># \u53c2\u6570\u9700\u8981\u8ddf\u4e00\u4e2a\u76ee\u5f55\ngo test -v -bench=.\n\n# ---\u5176\u4ed6\u53c2\u6570----\n-cpu=10  # \u6307\u5b9a\u4f7f\u7528cup\u6838\u5fc3\u6570\n-benchtime=1000x  # \u6307\u5b9a\u6267\u884c\u6b21\u65701000\u6b21\n-benchmem  # \u663e\u793a\u5185\u5b58\u5360\u7528\u4fe1\u606f B/op\uff1a\u6bcf\u6b21\u64cd\u4f5c\u5206\u914d\u5185\u5b58\u5b57\u8282\u6570\uff1ballocs/op\uff1a\u6bcf\u6b21\u64cd\u4f5c\u5206\u914d\u5185\u5b58\u7684\u6b21\u6570\n</code></pre> <p>\u793a\u4f8b\uff1a\u6d4b\u8bd5Sprintf\u51fd\u6570\u4e0estrconv.Formatint\u51fd\u6570\u5c06int\u6570\u5b57\u8f6c\u4e3a\u5b57\u7b26\u4e32\u6027\u80fd\u5bf9\u6bd4</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n    \"testing\"\n)\n\nfunc BenchmarkSprintf(b *testing.B) {\n    num := 10\n    b.ResetTimer() // \u91cd\u7f6e\u8ba1\u65f6\u5668\uff0c\u4fdd\u8bc1\u53ea\u8bb0\u5f55\u5230\u4e3b\u8981\u6d4b\u8bd5\u90e8\u5206\u7684\u6027\u80fd\u6570\u636e\n\n    for i := 0; i &lt; b.N; i++ {\n        _ = fmt.Sprintf(\"%d\", num)\n    }\n}\n\nfunc BenchmarkItoa(b *testing.B) {\n    num := 10\n    b.ResetTimer() // \u91cd\u7f6e\u8ba1\u65f6\u5668\uff0c\u4fdd\u8bc1\u53ea\u8bb0\u5f55\u5230\u4e3b\u8981\u6d4b\u8bd5\u90e8\u5206\u7684\u6027\u80fd\u6570\u636e\n\n    for i := 0; i &lt; b.N; i++ {\n        _ = strconv.Itoa(num)\n    }\n}\n\nfunc BenchmarkFormatInt(b *testing.B) {\n    num := 10\n    b.ResetTimer() // \u91cd\u7f6e\u8ba1\u65f6\u5668\uff0c\u4fdd\u8bc1\u53ea\u8bb0\u5f55\u5230\u4e3b\u8981\u6d4b\u8bd5\u90e8\u5206\u7684\u6027\u80fd\u6570\u636e\n\n    // b.StopTimer() // \u505c\u6b62\u8ba1\u65f6\u5668\n    // time.Sleep(5 * time.Second)  // \u8fd9\u91cc\u8017\u65f6\u4e0d\u4f1a\u52a0\u5165\u8ba1\u65f6\n    // b.StartTimer() // \u91cd\u65b0\u5f00\u542f\u8ba1\u65f6\u5668\n\n    for i := 0; i &lt; b.N; i++ {\n        _ = strconv.FormatInt(int64(num), 10)\n    }\n}\n\n\n/*\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\n\n...\\goteststdy&gt;go test -v -bench .\ngoos: windows\ngoarch: amd64\npkg: goteststdy\ncpu: 12th Gen Intel(R) Core(TM) i5-12500\nBenchmarkSprintf\nBenchmarkSprintf-12             29605725                38.11 ns/op\nBenchmarkItoa\nBenchmarkItoa-12                942932173                1.273 ns/op\nBenchmarkFormatInt\nBenchmarkFormatInt-12           952647087                1.278 ns/op\nPASS\nok      goteststdy      4.439s\n*/\n</code></pre> <p>\u5173\u4e8e\u57fa\u51c6\u6d4b\u8bd5\u7684\u8ba1\u65f6\u5668\u6709\u4e09\u79cd\u64cd\u4f5c\uff08\u6ce8\u610f\u505c\u6b62/\u91cd\u65b0\u5f00\u542f\u4e00\u822c\u5728\u5faa\u73af\u4e2d\u4f7f\u7528\uff0c\u4e14\u4e0eb.N\u5faa\u73af\u4f7f\u7528\uff09\uff1a</p> <ul> <li>b.ResetTimer() - \u91cd\u7f6e\u8ba1\u65f6</li> <li>b.StopTimer() - \u505c\u6b62\u8ba1\u65f6\uff08\u53ef\u4ee5\u91cd\u65b0\u5f00\u542f\uff09</li> <li>b.StartTimer() - \u91cd\u65b0\u5f00\u59cb\u8ba1\u65f6</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6-go118","title":"6 \u6a21\u7cca\u6d4b\u8bd5\uff08Go1.18+\uff09","text":"<p>\u6a21\u7cca\u6d4b\u8bd5\uff1a\u5c31\u662f\u5c06\u4e00\u4e9b\u975e\u9884\u671f\u7684\u8f93\u5165\u5e76\u76d1\u6d4b\u5f02\u5e38\u7ed3\u679c\u6765\u53d1\u73b0\u95ee\u9898\uff0cGo1.18+\u7248\u672c\u5df2\u7ecf\u5c06\u6a21\u7cca\u6d4b\u8bd5\u52a0\u5165\u4e86\u6807\u51c6\u5e93\u3002</p> <p>\u53c2\u6570\uff1a(f *testing.F)</p> <p>\u9ed8\u8ba4\u4e0d\u4f1a\u5f00\u542f\u6a21\u7cca\u6d4b\u8bd5\uff0c\u9700\u8981\u5f00\u542f\u6a21\u7cca\u6d4b\u8bd5\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code># \u53c2\u6570\u9700\u8981\u8ddf\u4e00\u4e2a\u76ee\u5f55\ngo test -v -fuzz=.\n</code></pre> <p>\u793a\u4f8b\uff1a\u9664\u6570\u4e0d\u80fd\u4e3a0</p> <pre><code>// \u529f\u80fd\u51fd\u6570\nfunc Div(a, b int) int {\n    return a / b\n}\n</code></pre> <pre><code>package main\n\nimport \"testing\"\n\n// \u6a21\u7cca\u6d4b\u8bd5\nfunc FuzzRun(f *testing.F) {\n    targetFunc := func(t *testing.T, a, b int) {\n        Div(a, b)\n    }\n    f.Fuzz(targetFunc) // \u6a21\u7cca\u6d4b\u8bd5\u5d4c\u5165\u5355\u5143\u6d4b\u8bd5 - \u81ea\u52a8\u751f\u6210\u591a\u7ec4\u6d4b\u8bd5\u6570\u636e\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#fmtstrconvstringsjsonbytes","title":"\ud83d\udcda \u5185\u7f6e\u5305\uff1afmt/strconv/strings/json/bytes","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-fmt-io","title":"1 fmt \u5305 - \u683c\u5f0f\u5316I/O","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11_1","title":"1.1 \u683c\u5f0f\u5316\u8f93\u51fa","text":"<pre><code>fmt.Print(a ...interface{})                 // \u6807\u51c6\u8f93\u51fa\uff0c\u4e0d\u6362\u884c\nfmt.Println(a ...interface{})               // \u6807\u51c6\u8f93\u51fa\uff0c\u81ea\u52a8\u6362\u884c\nfmt.Printf(format string, a ...interface{})  // \u683c\u5f0f\u5316\u8f93\u51fa\nfmt.Sprintf(format string, a ...interface{}) // \u8fd4\u56de\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12_1","title":"1.2 \u683c\u5f0f\u5316\u8f93\u5165","text":"<pre><code>fmt.Scan(a ...interface{})                  // \u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\nfmt.Scanf(format string, a ...interface{})  // \u683c\u5f0f\u5316\u8bfb\u53d6\nfmt.Scanln(a ...interface{})                // \u8bfb\u53d6\u4e00\u884c\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13_1","title":"1.3 \u5176\u4ed6","text":"<pre><code>fmt.Errorf(format string, a ...interface{})  // \u8fd4\u56deerror\u7c7b\u578b\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-strconv-","title":"2 strconv \u5305 - \u5b57\u7b26\u4e32\u8f6c\u6362","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21","title":"2.1 \u5b57\u7b26\u4e32\u4e0e\u57fa\u672c\u7c7b\u578b\u8f6c\u6362","text":"<pre><code>strconv.Atoi(s string) (int, error)         // \u5b57\u7b26\u4e32\u8f6cint\nstrconv.Itoa(i int) string                  // int\u8f6c\u5b57\u7b26\u4e32\n\nstrconv.ParseBool(str string) (bool, error) // \u5b57\u7b26\u4e32\u8f6cbool\nstrconv.FormatBool(b bool) string           // bool\u8f6c\u5b57\u7b26\u4e32\n\nstrconv.ParseFloat(s string, bitSize int) (float64, error) // \u5b57\u7b26\u4e32\u8f6cfloat\nstrconv.FormatFloat(f float64, fmt byte, prec, bitSize int) string // float\u8f6c\u5b57\u7b26\u4e32\n\nstrconv.ParseInt(s string, base int, bitSize int) (i int64, err error) // \u5b57\u7b26\u4e32\u8f6cint\nstrconv.FormatInt(i int64, base int) string // int\u8f6c\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22_1","title":"2.2 \u5176\u4ed6\u8f6c\u6362","text":"<pre><code>strconv.Quote(s string) string              // \u6dfb\u52a0\u53cc\u5f15\u53f7\nstrconv.Unquote(s string) (string, error)   // \u53bb\u9664\u5f15\u53f7\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-strings-","title":"3 strings \u5305 - \u5b57\u7b26\u4e32\u64cd\u4f5c","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31_1","title":"3.1 \u5b57\u7b26\u4e32\u67e5\u8be2","text":"<pre><code>strings.Contains(s, substr string) bool     // \u662f\u5426\u5305\u542b\u5b50\u4e32\nstrings.HasPrefix(s, prefix string) bool     // \u662f\u5426\u6709\u524d\u7f00\nstrings.HasSuffix(s, suffix string) bool     // \u662f\u5426\u6709\u540e\u7f00\nstrings.Index(s, substr string) int         // \u5b50\u4e32\u9996\u6b21\u51fa\u73b0\u4f4d\u7f6e\nstrings.LastIndex(s, substr string) int     // \u5b50\u4e32\u6700\u540e\u51fa\u73b0\u4f4d\u7f6e\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#32_1","title":"3.2 \u5b57\u7b26\u4e32\u64cd\u4f5c","text":"<pre><code>strings.ToLower(s string) string            // \u8f6c\u5c0f\u5199\nstrings.ToUpper(s string) string            // \u8f6c\u5927\u5199\nstrings.Trim(s, cutset string) string       // \u53bb\u9664\u4e24\u7aef\u5b57\u7b26\nstrings.TrimSpace(s string) string          // \u53bb\u9664\u4e24\u7aef\u7a7a\u767d\nstrings.Replace(s, old, new string, n int) string // \u66ff\u6362\nstrings.Split(s, sep string) []string       // \u5206\u5272\u5b57\u7b26\u4e32\nstrings.Join(elems []string, sep string) string // \u8fde\u63a5\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#33_1","title":"3.3 \u5176\u4ed6","text":"<pre><code>strings.Repeat(s string, count int) string  // \u91cd\u590d\u5b57\u7b26\u4e32\nstrings.Count(s, substr string) int         // \u5b50\u4e32\u51fa\u73b0\u6b21\u6570\nstrings.EqualFold(s, t string) bool         // \u4e0d\u533a\u5206\u5927\u5c0f\u5199\u6bd4\u8f83\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-encodingjson-json","title":"4 encoding/json \u5305 - JSON\u5904\u7406","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41_1","title":"4.1 \u7f16\u7801(\u5e8f\u5217\u5316)","text":"<pre><code>json.Marshal(v interface{}) ([]byte, error) // \u7ed3\u6784\u4f53\u8f6cJSON\njson.MarshalIndent(v interface{}, prefix, indent string) ([]byte, error) // \u5e26\u7f29\u8fdb\u7684JSON\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#42_2","title":"4.2 \u89e3\u7801(\u53cd\u5e8f\u5217\u5316)","text":"<pre><code>json.Unmarshal(data []byte, v interface{}) error // JSON\u8f6c\u7ed3\u6784\u4f53\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#43_2","title":"4.3 \u6d41\u5f0f\u5904\u7406","text":"<pre><code>json.NewEncoder(w io.Writer) *json.Encoder  // \u521b\u5efa\u7f16\u7801\u5668\njson.NewDecoder(r io.Reader) *json.Decoder  // \u521b\u5efa\u89e3\u7801\u5668\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#44","title":"4.4 \u5176\u4ed6","text":"<pre><code>json.Valid(data []byte) bool                // \u68c0\u67e5JSON\u662f\u5426\u6709\u6548\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#45","title":"4.5 \u5b9e\u9645\u5e94\u7528\u6d4b\u8bd5","text":"<pre><code>/*\nencoding/json \u5305\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\n*/\n\npackage main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype Person struct {\n    Name   string `json:\"name\"` // \u9996\u5b57\u6bcd\u5fc5\u987b\u5927\u5199\uff0c\u5e8f\u5217\u5316\u624d\u4f1a\u8bfb\u53d6\u5230\uff0c\u82e5\u9700\u8981\u5e8f\u5217\u5316\u540e\u6539\u4e3a\u5c0f\u5199\u6216\u5176\u4ed6\uff0c\u5c31\u6309\u683c\u5f0f\u5199\u6807\u7b7e\n    Age    int    `json:\"age\"`\n    Gender bool   `json:\"gender\"`\n}\n\nfunc (p *Person) show() {\n    fmt.Println(\"\u6211\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u6b63\u5728\u6267\u884c\u5185\u90e8\u65b9\u6cd5...\")\n}\n\nfunc main() {\n    slice := []interface{}{\n        \"\u538b\u529b\u5c71\u5927\",\n        5,\n        true,\n        3.14,\n        []string{\"a\", \"b\"},\n        map[int]string{1: \"a\", 2: \"b\"},\n        Person{Name: \"chc\", Age: 18, Gender: true},\n    }\n    // \u5e8f\u5217\u5316\uff1a\u5b57\u8282\u5207\u7247\u7c7b\u578b-&gt;\u5b57\u7b26\u4e32\u7c7b\u578b\n    marshal, _ := json.Marshal(slice)\n    marshalStr := string(marshal)\n    fmt.Println(marshalStr) // `[\"\u538b\u529b\u5c71\u5927\",5,true,3.14,[\"a\",\"b\"],{\"1\":\"a\",\"2\":\"b\"},{\"name\":\"chc\",\"age\":18,\"gender\":true}]`\n\n    // \u53cd\u5e8f\u5217\u5316 -&gt; \u5207\u7247\n    newSlice := make([]interface{}, 0)\n    _ = json.Unmarshal([]byte(marshalStr), &amp;newSlice)\n    // \u6ce8\u610f\uff1a\u8f6c\u6362\u9ed8\u8ba4\u952e\u503c\u5bf9\u7c7b\u578b\u5bf9\u5e94\u662fmap\uff0c\u4e0d\u662f\u7ed3\u6784\u4f53\uff0c\u5982\u9700\u8981\uff0c\u5219\u8fdb\u4e00\u6b65\u5904\u7406\n    fmt.Println(newSlice) // [\u538b\u529b\u5c71\u5927 5 true 3.14 [a b] map[1:a 2:b] map[age:18 gender:true name:chc]]\n\n    // \u83b7\u53d6\u53cd\u5e8f\u5217\u5316\u7684\u6700\u6709\u4e00\u4e2amap\u5143\u7d20\n    dataMap := newSlice[6].(map[string]interface{}) // .() -&gt; \u8868\u793a\u7c7b\u578b\u65ad\u8a00\uff0c\u8fd9\u91cc\u8fd8\u662fmap\u7c7b\u578b\n    dm, _ := json.Marshal(dataMap)                  // \u5b57\u8282\u5207\u7247\n\n    // map \u8f6c \u7ed3\u6784\u4f53\uff0c \u9700\u8981\u501f\u52a9json\u5e8f\u5217\u5316\u4e3a\u5b57\u8282\u5207\u7247\u518d\u8f85\u52a9\u8f6c\u4e3a\u5bf9\u5e94\u7ed3\u6784\u4f53\u5bf9\u8c61\n    var person Person\n    _ = json.Unmarshal(dm, &amp;person)\n    fmt.Printf(\"%+v\\n\", person)\n    person.show()\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5-bytes","title":"5 bytes \u5305","text":"<p>Go \u8bed\u8a00\u4e2d\u7684 <code>bytes</code> \u5305\u3002\u8fd9\u662f\u4e00\u4e2a\u6781\u5176\u91cd\u8981\u4e14\u5e38\u7528\u7684\u5305\uff0c\u4e3b\u8981\u7528\u4e8e\u64cd\u4f5c\u5b57\u8282\u5207\u7247\uff08<code>[]byte</code>\uff09\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#51-strings","title":"5.1 \u5e38\u7528\u51fd\u6570\uff08\u5bf9\u6807 strings \u5305\uff09","text":"<p>\u8fd9\u4e9b\u51fd\u6570\u5927\u591a\u76f4\u63a5\u5bf9 <code>[]byte</code> \u8fdb\u884c\u64cd\u4f5c\uff0c\u5e76\u8fd4\u56de\u5904\u7406\u540e\u7684\u65b0 <code>[]byte</code>\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#511","title":"5.1.1 \u6bd4\u8f83\u4e0e\u5224\u65ad","text":"<ul> <li><code>func Compare(a, b []byte) int</code>\uff1a \u6bd4\u8f83\u4e24\u4e2a\u5b57\u8282\u5207\u7247\uff0c\u8fd4\u56de <code>0</code>(a==b), <code>-1</code>(a &lt; b), <code>1</code>(a &gt; b)\u3002</li> <li><code>func Equal(a, b []byte) bool</code>\uff1a \u66f4\u7b80\u5355\u5730\u5224\u65ad\u4e24\u4e2a\u5b57\u8282\u5207\u7247\u662f\u5426\u76f8\u7b49\u3002</li> <li><code>func HasPrefix(s, prefix []byte) bool</code>\uff1a \u5224\u65ad\u5b57\u8282\u5207\u7247 <code>s</code> \u662f\u5426\u4ee5 <code>prefix</code> \u5f00\u5934\u3002</li> <li><code>func Contains(b, subslice []byte) bool</code>\uff1a \u5224\u65ad <code>b</code> \u4e2d\u662f\u5426\u5305\u542b\u5b50\u5207\u7247 <code>subslice</code>\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#512","title":"5.1.2 \u67e5\u627e\u4e0e\u5b9a\u4f4d","text":"<ul> <li><code>func Index(b, sep []byte) int</code>\uff1a \u8fd4\u56de <code>sep</code> \u5728 <code>b</code> \u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\uff0c\u672a\u627e\u5230\u8fd4\u56de <code>-1</code>\u3002</li> <li><code>func LastIndex(b, sep []byte) int</code>\uff1a \u8fd4\u56de\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u3002</li> <li><code>func IndexAny(b []byte, chars string) int</code>\uff1a \u8fd4\u56de <code>chars</code> \u4e2d\u4efb\u4f55\u4e00\u4e2a\u5b57\u7b26\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#513","title":"5.1.3 \u64cd\u4f5c\u4e0e\u8f6c\u6362","text":"<ul> <li><code>func Split(s, sep []byte) [][]byte</code>\uff1a \u7528 <code>sep</code> \u5206\u5272 <code>s</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5207\u7247\u7ec4\u6210\u7684\u5207\u7247\u3002</li> <li><code>func Join(s [][]byte, sep []byte) []byte</code>\uff1a \u7528 <code>sep</code> \u8fde\u63a5 <code>s</code> \u4e2d\u7684\u591a\u4e2a <code>[]byte</code>\u3002</li> <li><code>func Repeat(b []byte, count int) []byte</code>\uff1a \u5c06 <code>b</code> \u91cd\u590d <code>count</code> \u6b21\u540e\u8fd4\u56de\u3002</li> <li><code>func Replace(s, old, new []byte, n int) []byte</code>\uff1a \u5c06 <code>s</code> \u4e2d\u7684\u524d <code>n</code> \u4e2a <code>old</code> \u66ff\u6362\u4e3a <code>new</code>\u3002<code>n</code> \u4e3a <code>-1</code> \u65f6\u66ff\u6362\u6240\u6709\u3002</li> <li><code>func ToUpper(s []byte) []byte</code>\uff1a \u5c06\u6240\u6709\u5b57\u8282\u8f6c\u6362\u4e3a\u5927\u5199\uff08\u4ec5\u5bf9 ASCII \u6709\u6548\uff09\u3002</li> <li><code>func ToLower(s []byte) []byte</code>\uff1a \u5c06\u6240\u6709\u5b57\u8282\u8f6c\u6362\u4e3a\u5c0f\u5199\u3002</li> <li><code>func Trim(s []byte, cutset string) []byte</code>\uff1a \u53bb\u9664 <code>s</code> \u9996\u5c3e\u5305\u542b\u5728 <code>cutset</code> \u5b57\u7b26\u96c6\u4e2d\u7684\u6240\u6709\u5b57\u7b26\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#52-bytesbuffer","title":"5.2 bytes.Buffer","text":"<p><code>bytes.Buffer</code> \u662f <code>bytes</code> \u5305\u7684\u7075\u9b42\uff0c\u5b83\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u96f6\u503c (<code>var b bytes.Buffer</code>) \u5c31\u662f\u4e00\u4e2a\u7acb\u5373\u53ef\u7528\u7684\u7a7a\u7f13\u51b2\u533a\u3002</p> <pre><code>type Buffer struct {\n    buf      []byte // contents are the bytes buf[off : len(buf)]\n    off      int    // read at &amp;buf[off], write at &amp;buf[len(buf)]\n    lastRead readOp // last read operation, so that Unread* can work correctly.\n}\n</code></pre> <ul> <li><code>[]byte</code> (\u5b57\u8282\u5207\u7247)\uff1a \u672c\u8d28\u662f\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\uff0c\u662f Go \u8bed\u8a00\u4e2d\u8868\u793a\u4e8c\u8fdb\u5236\u6570\u636e\u3001\u6587\u672c\u6570\u636e\uff08\u4e0e <code>string</code> \u53ef\u76f8\u4e92\u8f6c\u6362\uff09\u7684\u5e38\u7528\u5f62\u5f0f\u3002</li> <li><code>bytes.Buffer</code>\uff1a \u4e00\u4e2a\u53ef\u53d8\u5927\u5c0f\u7684\u5b57\u8282\u7f13\u51b2\u533a\u3002\u5b83\u96c6\u8bfb\u3001\u5199\u529f\u80fd\u4e8e\u4e00\u8eab\uff0c\u5185\u90e8\u5c01\u88c5\u4e86\u4e00\u4e2a <code>[]byte</code>\uff0c\u5e76\u63d0\u4f9b\u4e86\u975e\u5e38\u9ad8\u6548\u7684\u65b9\u6cd5\u6765\u64cd\u4f5c\u5b83\u3002\u5b83\u662f\u5904\u7406\u5b57\u8282\u62fc\u63a5\u3001\u7f13\u5b58\u7b49\u4efb\u52a1\u7684\u5229\u5668\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#521-buffer","title":"5.2.1 \u521b\u5efa Buffer","text":"<ul> <li><code>var b bytes.Buffer</code>\uff1a \u76f4\u63a5\u58f0\u660e\uff0c\u521d\u59cb\u4e3a\u7a7a\u3002</li> <li><code>b := bytes.NewBufferString(\"Hello\")</code>\uff1a \u6839\u636e\u5b57\u7b26\u4e32\u521b\u5efa\u3002</li> <li><code>b := bytes.NewBuffer([]byte{0x01, 0x02})</code>\uff1a \u6839\u636e\u5df2\u6709\u7684 <code>[]byte</code> \u521b\u5efa\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#522-write","title":"5.2.2 \u5199\u5165\u6570\u636e (Write)","text":"<p><code>Buffer</code> \u5b9e\u73b0\u4e86\u591a\u4e2a <code>Write</code> \u5f00\u5934\u7684\u63a5\u53e3\uff0c\u975e\u5e38\u65b9\u4fbf\u3002</p> <ul> <li><code>func (b *Buffer) Write(p []byte) (n int, err error)</code>\uff1a \u5b9e\u73b0\u4e86 <code>io.Writer</code> \u63a5\u53e3\uff0c\u5199\u5165\u5b57\u8282\u5207\u7247\u3002</li> <li><code>func (b *Buffer) WriteString(s string) (n int, err error)</code>\uff1a \u76f4\u63a5\u5199\u5165\u5b57\u7b26\u4e32\uff0c\u907f\u514d <code>[]byte</code> \u8f6c\u6362\uff0c\u6548\u7387\u66f4\u9ad8\u3002</li> <li><code>func (b *Buffer) WriteByte(c byte) error</code>\uff1a \u5199\u5165\u5355\u4e2a\u5b57\u8282\u3002</li> <li><code>func (b *Buffer) WriteRune(r rune) (n int, err error)</code>\uff1a \u5199\u5165\u4e00\u4e2a Unicode \u5b57\u7b26\uff08\u5982\u4e2d\u6587\uff09\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#523-read","title":"5.2.3 \u8bfb\u53d6\u6570\u636e (Read)","text":"<p><code>Buffer</code> \u4e5f\u5b9e\u73b0\u4e86\u591a\u4e2a <code>Read</code> \u5f00\u5934\u7684\u63a5\u53e3\u3002</p> <ul> <li><code>func (b *Buffer) Read(p []byte) (n int, err error)</code>\uff1a \u5b9e\u73b0\u4e86 <code>io.Reader</code> \u63a5\u53e3\uff0c\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u8bfb\u5165 <code>p</code>\uff0c\u8bfb\u51fa\u7684\u6570\u636e\u4f1a\u4ece\u7f13\u51b2\u533a\u79fb\u9664\u3002</li> <li><code>func (b *Buffer) ReadByte() (byte, error)</code>\uff1a \u8bfb\u51fa\u4e00\u4e2a\u5b57\u8282\u3002</li> <li><code>func (b *Buffer) ReadBytes(delim byte) (line []byte, err error)</code>\uff1a \u4e00\u76f4\u8bfb\u53d6\u76f4\u5230\u9047\u5230\u5206\u9694\u7b26 <code>delim</code>\uff08\u5e38\u7528 <code>\\n</code> \u6765\u8bfb\u4e00\u884c\uff09\u3002</li> <li><code>func (b *Buffer) ReadString(delim byte) (line string, err error)</code>\uff1a \u540c\u4e0a\uff0c\u4f46\u76f4\u63a5\u8fd4\u56de\u5b57\u7b26\u4e32\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#524","title":"5.2.4 \u5176\u5b83\u91cd\u8981\u65b9\u6cd5","text":"<ul> <li><code>func (b *Buffer) String() string</code>\uff1a \u5c06\u7f13\u51b2\u533a\u7684\u5185\u5bb9\u4ee5 <code>string</code> \u5f62\u5f0f\u8fd4\u56de\uff0c\u975e\u5e38\u5e38\u7528\u3002</li> <li><code>func (b *Buffer) Bytes() []byte</code>\uff1a \u8fd4\u56de\u7f13\u51b2\u533a\u672a\u8bfb\u90e8\u5206\u7684\u5b57\u8282\u5207\u7247\u3002</li> <li><code>func (b *Buffer) Len() int</code>\uff1a \u8fd4\u56de\u672a\u8bfb\u7684\u5b57\u8282\u6570\u3002</li> <li><code>func (b *Buffer) Reset()</code>\uff1a \u6e05\u7a7a\u7f13\u51b2\u533a\uff0c\u91cd\u7f6e\u4e3a\u7a7a\uff0c\u4fbf\u4e8e\u590d\u7528\u3002</li> <li><code>func (b *Buffer) Grow(n int)</code>\uff1a \u9884\u5148\u5206\u914d <code>n</code> \u5b57\u8282\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u907f\u514d\u591a\u6b21\u5199\u5165\u65f6\u91cd\u590d\u5206\u914d\uff0c\u6027\u80fd\u4f18\u5316\u5173\u952e\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#timeflagregexp","title":"\ud83d\udcda \u5185\u7f6e\u5305\uff1atime/flag/regexp","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-time","title":"1 time \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11_2","title":"1.1 \u65f6\u95f4\u83b7\u53d6\u4e0e\u663e\u793a","text":"<pre><code>now := time.Now()           // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\nyear := now.Year()         // \u5e74\nmonth := now.Month()       // \u6708\nday := now.Day()           // \u65e5\nhour := now.Hour()         // \u5c0f\u65f6\nminute := now.Minute()     // \u5206\u949f\nsecond := now.Second()     // \u79d2\nnanosecond := now.Nanosecond() // \u7eb3\u79d2\nweekday := now.Weekday()   // \u661f\u671f\u51e0\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12_2","title":"1.2 \u65f6\u95f4\u4e0e\u5b57\u7b26\u4e32\u4e4b\u95f4\u8f6c\u6362","text":"<pre><code>// \u683c\u5f0f\u5316\u65f6\u95f4\nnow.Format(\"2006-01-02 15:04:05\") // ```go\u7684\u683c\u5f0f\u5316\u65f6\u95f4\u5fc5\u987b\u4f7f\u75282006-01-02 15:04:05\u8fd9\u4e2a\u65f6\u95f4\u70b9 / \u8fd9\u4e2a\u5e38\u91cf\u4e5f\u53ef\u4ee5\uff1atime.DateTime\n\n// \u5b57\u7b26\u4e32\u8f6c\u65f6\u95f4\ntargetTIme, _ := time.Parse(time.DateTime, \"2023-07-18 19:00:00\")\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13_2","title":"1.3 \u65f6\u95f4\u8ba1\u7b97\u4e0e\u6bd4\u8f83","text":"<pre><code>// \u65f6\u95f4\u52a0\u51cf\nlater := now.Add(time.Hour * 2)      // 2\u5c0f\u65f6\u540e\nearlier := now.Add(-time.Minute * 30) // 30\u5206\u949f\u524d\n\n// \u65f6\u95f4\u5dee\nduration := later.Sub(now)  // \u8fd4\u56deDuration\u7c7b\u578b\nhours := duration.Hours()   // \u76f8\u5dee\u5c0f\u65f6\u6570\nminutes := duration.Minutes() // \u76f8\u5dee\u5206\u949f\u6570\n\n// \u65f6\u95f4\u6bd4\u8f83\nisAfter := now.After(earlier)  // true\nisBefore := now.Before(later)  // true\nisEqual := now.Equal(now)      // true\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#14_1","title":"1.4 \u5b9a\u65f6\u5668\u4e0e\u4f11\u7720","text":"<pre><code>// \u4f11\u7720\ntime.Sleep(time.Second * 2) // \u4f11\u77202\u79d2\n\n// \u5b9a\u65f6\u5668\ntimer := time.NewTimer(time.Second * 3)\n&lt;-timer.C // 3\u79d2\u540e\u89e6\u53d1\n\n// Ticker\nticker := time.NewTicker(time.Second)\nfor t := range ticker.C {\n    fmt.Println(\"Tick at\", t)\n    // \u9700\u8981\u624b\u52a8\u505c\u6b62\uff0c\u5426\u5219\u4f1a\u4e00\u76f4\u6267\u884c\n    ticker.Stop()\n    break\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#15","title":"1.5 \u83b7\u53d6\u65f6\u95f4\u6233","text":"<pre><code>// \u83b7\u53d6\u5404\u79cd\u7cbe\u5ea6\u7684\u65f6\u95f4\u6233\nsec := now.Unix()        // \u79d2\nmilli := now.UnixMilli() // \u6beb\u79d2\nmicro := now.UnixMicro() // \u5fae\u79d2\nnano := now.UnixNano()   // \u7eb3\u79d2\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-flag","title":"2 flag \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21_1","title":"2.1 \u57fa\u672c\u4f7f\u7528","text":"<pre><code>// \u5b9a\u4e49flag\nvar (\n    port = flag.Int(\"port\", 8080, \"server port\")\n    name = flag.String(\"name\", \"guest\", \"user name\")\n    debug = flag.Bool(\"debug\", false, \"enable debug mode\")\n)\n\nfunc main() {\n    // \u89e3\u6790flag\n    flag.Parse()\n\n    fmt.Println(\"Port:\", *port)\n    fmt.Println(\"Name:\", *name)\n    fmt.Println(\"Debug:\", *debug)\n\n    // \u83b7\u53d6\u975eflag\u53c2\u6570\n    args := flag.Args()\n    fmt.Println(\"Other args:\", args)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22-flag","title":"2.2 \u81ea\u5b9a\u4e49flag\u7c7b\u578b","text":"<pre><code>// \u81ea\u5b9a\u4e49flag\u7c7b\u578b\nvar interval time.Duration\n\nfunc init() {\n    flag.DurationVar(&amp;interval, \"interval\", time.Second, \"interval duration\")\n}\n\nfunc main() {\n    flag.Parse()\n    fmt.Println(\"Interval:\", interval)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#23_1","title":"2.3 \u5176\u4ed6\u65b9\u6cd5","text":"<pre><code>flag.Usage() // \u663e\u793a\u7528\u6cd5\u4fe1\u606f\nflag.NFlag() // \u8fd4\u56de\u5df2\u8bbe\u7f6e\u7684flag\u6570\u91cf\nflag.NArg()  // \u8fd4\u56de\u975eflag\u53c2\u6570\u7684\u6570\u91cf\nflag.Arg(i)  // \u83b7\u53d6\u7b2ci\u4e2a\u975eflag\u53c2\u6570```\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-regexp-","title":"3 regexp \u5305 - \u6b63\u5219\u8868\u8fbe\u5f0f","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31_2","title":"3.1 \u57fa\u672c\u5339\u914d","text":"<pre><code>// \u7f16\u8bd1\u6b63\u5219\u8868\u8fbe\u5f0f\nre := regexp.MustCompile(`\\d+`) // \u5339\u914d\u6570\u5b57\n\n// \u68c0\u67e5\u662f\u5426\u5339\u914d\nmatched := re.MatchString(\"123abc\") // true\nmatched = re.Match([]byte(\"abc\"))   // false\n\n// \u67e5\u627e\u7b2c\u4e00\u4e2a\u5339\u914d\nfirst := re.FindString(\"abc123def456\") // \"123\"\n\n// \u67e5\u627e\u6240\u6709\u5339\u914d\nall := re.FindAllString(\"abc123def456\", -1) // [\"123\", \"456\"]\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#32_2","title":"3.2 \u5206\u7ec4\u6355\u83b7","text":"<pre><code>re := regexp.MustCompile(`(\\d+)-(\\d+)`)\nstr := \"123-456\"\n\n// \u63d0\u53d6\u5206\u7ec4\nmatches := re.FindStringSubmatch(str)\n// matches[0] = \"123-456\" (\u5b8c\u6574\u5339\u914d)\n// matches[1] = \"123\" (\u7b2c\u4e00\u4e2a\u5206\u7ec4)\n// matches[2] = \"456\" (\u7b2c\u4e8c\u4e2a\u5206\u7ec4)\n\n// \u547d\u540d\u5206\u7ec4\nre = regexp.MustCompile(`(?P&lt;year&gt;\\d{4})-(?P&lt;month&gt;\\d{2})`)\nmatch := re.FindStringSubmatch(\"2023-08\")\nfor i, name := range re.SubexpNames() {\n    if i != 0 &amp;&amp; name != \"\" {\n        fmt.Printf(\"%s: %s\\n\", name, match[i])\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#33_2","title":"3.3 \u66ff\u6362\u4e0e\u5206\u5272","text":"<pre><code>re := regexp.MustCompile(`\\d+`)\n\n// \u66ff\u6362\nresult := re.ReplaceAllString(\"abc123def456\", \"X\") // \"abcXdefX\"\n\n// \u4f7f\u7528\u51fd\u6570\u66ff\u6362\nresult = re.ReplaceAllStringFunc(\"abc123def456\", func(s string) string {\n    return \"[\" + s + \"]\"\n}) // \"abc[123]def[456]\"\n\n// \u5206\u5272\nparts := re.Split(\"abc123def456ghi789\", -1) // [\"abc\", \"def\", \"ghi\", \"\"]\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#34","title":"3.4 \u5176\u4ed6\u65b9\u6cd5","text":"<pre><code>re.QuoteMeta(`.+?`) // \u8fd4\u56de\u8f6c\u4e49\u540e\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5b57\u7b26\u4e32 `\\.\\+\\?`\nre.NumSubexp()      // \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684\u5206\u7ec4\u6570\u91cf\nre.String()         // \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32\u8868\u793a\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#osiofilepath","title":"\ud83d\udcda \u5185\u7f6e\u5305\uff1a\u6587\u4ef6\u76f8\u5173\uff08os/io/filepath...\uff09","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-os","title":"1 os \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11_3","title":"1.1 \u6587\u4ef6\u64cd\u4f5c","text":"<pre><code>// \u6253\u5f00\u6587\u4ef6\nfunc Open(name string) (*File, error)\nfunc OpenFile(name string, flag int, perm FileMode) (*File, error)\n\n// \u521b\u5efa\u6587\u4ef6\nfunc Create(name string) (*File, error)\n\n// \u6587\u4ef6\u4fe1\u606f\nfunc Stat(name string) (FileInfo, error)\nfunc Lstat(name string) (FileInfo, error) // \u4e0d\u8ddf\u968f\u7b26\u53f7\u94fe\u63a5\n\n// \u5220\u9664/\u91cd\u547d\u540d\nfunc Remove(name string) error  // \u5220\u9664\u6587\u4ef6\u5939\u65f6\uff0c\u5982\u679c\u6587\u4ef6\u5939\u4e0b\u4e0d\u4e3a\u7a7a\uff0c\u4f1a\u62a5\u9519\nfunc RemoveAll(path string) error  // \u5f3a\u5236\u5220\u9664\uff0c\u5220\u9664\u6587\u4ef6\u5939\u65f6\uff0c\u76f4\u63a5\u5220\u9664\u8be5\u6587\u4ef6\u5939\u53ca\u5168\u90e8\u5b50\u6587\u4ef6\nfunc Rename(oldpath, newpath string) error\n\n// \u6743\u9650\nfunc Chmod(name string, mode FileMode) error\nfunc Chown(name string, uid, gid int) error\nfunc Chtimes(name string, atime time.Time, mtime time.Time) error\n\n// \u5224\u65ad\u662f\u5426\u662f\u6587\u4ef6\u5939\nfile, _ := os.stat(\"/temp/test\")\ntf := file.IsDir() // \u8fd4\u56debool\u7c7b\u578b\n\n// \u5176\u4ed6\nfunc Truncate(name string, size int64) error\nfunc Readlink(name string) (string, error) // \u8bfb\u53d6\u7b26\u53f7\u94fe\u63a5\nfunc Symlink(oldname, newname string) error\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12_3","title":"1.2 \u76ee\u5f55\u64cd\u4f5c","text":"<pre><code>func Mkdir(name string, perm FileMode) error  // \u5355\u7ea7\u76ee\u5f55\u521b\u5efa,\u5df2\u5b58\u5728\u4f1a\u62a5\u9519\nfunc MkdirAll(path string, perm FileMode) error // \u591a\u7ea7\u76ee\u5f55\u521b\u5efa\uff0c\u5df2\u5b58\u5728\u4e0d\u4f1a\u62a5\u9519\nfunc ReadDir(name string) ([]DirEntry, error) // \u66ff\u4ee3ioutil.ReadDir\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13_3","title":"1.3 \u6587\u4ef6\u5bf9\u8c61\u65b9\u6cd5","text":"<pre><code>type File struct {\n    // \u672a\u5bfc\u51fa\u5b57\u6bb5\n}\n\nfunc (f *File) Close() error\nfunc (f *File) Read(b []byte) (n int, err error)\nfunc (f *File) ReadAt(b []byte, off int64) (n int, err error)\nfunc (f *File) Write(b []byte) (n int, err error)\nfunc (f *File) WriteAt(b []byte, off int64) (n int, err error)\nfunc (f *File) Seek(offset int64, whence int) (ret int64, err error)\nfunc (f *File) Sync() error\nfunc (f *File) Stat() (FileInfo, error)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-pathfilepath","title":"2 path/filepath \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21_2","title":"2.1 \u5904\u7406\u8de8\u5e73\u53f0\u7684\u6587\u4ef6\u8def\u5f84","text":"<pre><code>// \u8def\u5f84\u62fc\u63a5\nfunc Join(elem ...string) string\n\n// \u8def\u5f84\u5206\u5272\nfunc Split(path string) (dir, file string)\nfunc Dir(path string) string\nfunc Base(path string) string\nfunc Ext(path string) string\n\n// \u8def\u5f84\u6e05\u7406\nfunc Clean(path string) string\nfunc ToSlash(path string) string\nfunc FromSlash(path string) string\n\n// \u7edd\u5bf9\u8def\u5f84\nfunc Abs(path string) (string, error)\nfunc Rel(basepath, targpath string) (string, error)\n////\u7edd\u5bf9\u8def\u5f84\u793a\u4f8b\nabsPath, _ := filepath.Abs(\"test/src\")  // \u8fd4\u56de\u9879\u76ee\u76ee\u5f55+\u5165\u53c2\u5b57\u7b26\n\n// \u8def\u5f84\u5339\u914d\nfunc Match(pattern, name string) (matched bool, err error)\nfunc Glob(pattern string) (matches []string, err error)\n\n// \u904d\u5386\u76ee\u5f55\nfunc Walk(root string, fn WalkFunc) error\nfunc WalkDir(root string, fn fs.WalkDirFunc) error // \u66f4\u9ad8\u6548\n////\u904d\u5386\u76ee\u5f55\u793a\u4f8b\n_ = filepath.Walk(projectPath, func(path string, info os.FileInfo, err error) error {\n        if !info.IsDir() {\n            fmt.Println(path)\n        }\n        return nil\n    })\n\n_ = filepath.WalkDir(projectPath, func(path string, de fs.DirEntry, err error) error {\n    if !de.IsDir() {\n        fmt.Println(path)\n    }\n    return nil\n})\n\n\n// \u83b7\u53d6\u4e0a\u4e00\u7ea7\u76ee\u5f55\nfilepath.Dir(\"/temp/test/src\") // \u8fd4\u56de:/temp/test\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-io","title":"3 io \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31-io","title":"3.1 \u57fa\u7840IO\u63a5\u53e3\u548c\u5de5\u5177\u51fd\u6570","text":"<pre><code>// \u57fa\u7840\u63a5\u53e3\ntype Reader interface {\n    Read(p []byte) (n int, err error)\n}\ntype Writer interface {\n    Write(p []byte) (n int, err error)\n}\ntype Closer interface {\n    Close() error\n}\ntype Seeker interface {\n    Seek(offset int64, whence int) (int64, error)\n}\n\n// \u7ec4\u5408\u63a5\u53e3\ntype ReadWriter interface { Reader; Writer }\ntype ReadCloser interface { Reader; Closer }\ntype WriteCloser interface { Writer; Closer }\ntype ReadWriteCloser interface { Reader; Writer; Closer }\ntype ReadSeeker interface { Reader; Seeker }\ntype ReadSeekCloser interface { Reader; Seeker; Closer }\n\n// \u5de5\u5177\u51fd\u6570\nfunc Copy(dst Writer, src Reader) (written int64, err error)\nfunc CopyN(dst Writer, src Reader, n int64) (written int64, err error)\nfunc ReadAll(r Reader) ([]byte, error)\nfunc ReadAtLeast(r Reader, buf []byte, min int) (n int, err error)\nfunc ReadFull(r Reader, buf []byte) (n int, err error)\nfunc WriteString(w Writer, s string) (n int, err error)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-iofs","title":"4 io/fs \u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41-go-116","title":"4.1 \u6587\u4ef6\u7cfb\u7edf\u62bd\u8c61\u63a5\u53e3(go 1.16+)","text":"<pre><code>type FS interface {\n    Open(name string) (File, error)\n}\n\ntype File interface {\n    Stat() (FileInfo, error)\n    Read([]byte) (int, error)\n    Close() error\n}\n\ntype FileInfo interface {\n    Name() string       // \u6587\u4ef6\u540d\n    Size() int64        // \u6587\u4ef6\u5927\u5c0f\n    Mode() FileMode     // \u6587\u4ef6\u6a21\u5f0f\n    ModTime() time.Time // \u4fee\u6539\u65f6\u95f4\n    IsDir() bool        // \u662f\u5426\u662f\u76ee\u5f55\n    Sys() interface{}   // \u5e95\u5c42\u6570\u636e\u6e90\n}\n\ntype DirEntry interface {\n    Name() string\n    IsDir() bool\n    Type() FileMode\n    Info() (FileInfo, error)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_16","title":"\ud83d\udcda \u6587\u4ef6\u8bfb\u5199","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_15","title":"1 \u666e\u901a\u8bfb\u5199\u65b9\u5f0f","text":"<pre><code>func main() {\n    words := \"ZHE\u662f\u4e00\u6bb5bei\u4f24\u7684\u6545\u4e8b~~\u554a\uff01\"\n    reader := strings.NewReader(words)\n    totalBytes := make([]byte, 0)\n    for {\n        buf := make([]byte, 4)     // \u7f13\u51b2\u533a\u6bcf\u6b21\u8bfb\u53d64\u4e2a\u5b57\u8282\n        n, err := reader.Read(buf) // \u4f7f\u7528\u7f13\u51b2\u533a\u8bfb\u53d6\u5185\u5bb9\uff1bn\u4e3a\u6bcf\u6b21\u8bfb\u53d6\u5b57\u8282\u6570\n        if err != nil {\n            if err == io.EOF {\n                fmt.Printf(\"reader\u5bf9\u8c61\u5168\u90e8\u5185\u5bb9\u8bfb\u53d6\u5b8c\u6bd5\uff0cn=%v\uff1b\u8bfb\u53d6\u5185\u5bb9\uff1a%s\\n\", n, buf)\n                break\n            }\n            panic(err)\n        }\n\n        fmt.Printf(\"\u672c\u6b21\u8bfb\u53d6\uff1an=%v\uff1b\u5185\u5bb9\uff1a%s\\n\", n, buf)\n        totalBytes = append(totalBytes, buf...)\n    }\n    fmt.Printf(\"\u5168\u90e8\u5185\u5bb9\uff1a%s\", totalBytes)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12-read","title":"1.2 \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff08Read\uff09","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"os\"\n)\n\nfunc CusReadFile(filename string) []byte {\n    file, err := os.Open(filename)\n    if err != nil {\n        log.Fatal(\"\u8bfb\u53d6\u6587\u4ef6\u9519\u8bef\")\n        return nil\n    }\n\n    defer file.Close()\n\n    totalBytes := make([]byte, 0)\n\n    for {\n        buf := make([]byte, 1024)  // \u6bcf\u6b21\u8bfb\u53d6\u7f13\u51b2\u5927\u5c0f\n        _, err = file.Read(buf)\n        if err != nil {\n            if err == io.EOF {\n                fmt.Println(\"file\u5bf9\u8c61\u8bfb\u53d6\u5b8c\u6bd5\")\n                break\n            }\n            log.Fatal(\"\u8bfb\u53d6\u6587\u4ef6\u5931\u8d25\")\n        }\n\n        totalBytes = append(totalBytes, buf...)\n    }\n\n    return totalBytes\n}\n\nfunc main() {\n    contentByte := CusReadFile(\"test.txt\")\n    fmt.Printf(\"%s\", contentByte)\n}\n</code></pre> <p>\u5f53\u7136\uff0c\u4e00\u822c\u6211\u4eec\u771f\u6b63\u8bfb\u53d6\u6587\u4ef6\u4e0d\u9700\u8981\u81ea\u5df1\u91cd\u65b0\u5199\u5e26\u7f13\u51b2\u533a\u7684\u51fd\u6570\uff0c\u4f7f\u7528\u73b0\u6709\u7684bufio\u5305\u7684\u65b9\u6cd5\u5373\u53ef\uff1a</p> <p>\u5206\u884c\u8bfb\u53d6\uff1a</p> <pre><code>/**/\n\npackage main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"log\"\n    \"os\"\n)\n\nfunc CusReadFile(filename string) {\n    file, err := os.Open(filename)\n    if err != nil {\n        log.Fatal(\"\u8bfb\u53d6\u6587\u4ef6\u9519\u8bef\")\n    }\n\n    defer file.Close()\n\n    reader := bufio.NewReader(file)\n    for {\n        line, _, err := reader.ReadLine()\n        if err != nil {\n            break\n        }\n        fmt.Println(string(line))\n    }\n}\n\nfunc main() {\n    CusReadFile(\"djangoServer.log\")\n}\n</code></pre> <p>\u4e00\u6b21\u6027\u8bfb\u53d6\uff08\u4e0d\u9002\u5408\u5927\u6587\u4ef6\uff09\uff1a</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n)\n\nfunc CusReadFile(filename string) {\n    file, err := os.Open(filename)\n    if err != nil {\n        fmt.Println(\"\u6253\u5f00\u6587\u4ef6\u5931\u8d25:\", err)\n        return\n    }\n    defer file.Close()\n\n    stat, err := file.Stat()\n    if err != nil {\n        fmt.Println(\"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u5931\u8d25:\", err)\n        return\n    }\n\n    buf := make([]byte, stat.Size())\n    _, err = file.Read(buf) // \u8bb0\u5f55\u5b9e\u9645\u8bfb\u53d6\u7684\u5b57\u8282\u6570\n    if err != nil {\n        fmt.Println(\"\u8bfb\u53d6\u6587\u4ef6\u5931\u8d25:\", err)\n        return\n    }\n\n    fmt.Println(string(buf))\n}\n\nfunc main() {\n    CusReadFile(\"djangoServer.log\")\n}\n</code></pre> <pre><code>func ReadFile(name string) ([]byte, error) {}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13-write","title":"1.3 \u5199\u5165\u6587\u4ef6\u5185\u5bb9\uff08Write\uff09","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"log\"\n    \"os\"\n)\n\nfunc CusWriteFile(content string, filename string) {\n    file, err := os.Create(filename)\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer file.Close()  // \u5173\u95ed\u6587\u4ef6\n\n    _, err = file.Write([]byte(content))\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n\nfunc main() {\n    CusWriteFile(\"\u4eca\u665a\u6211\u8981\u7761\u4f60\u5bb6~\", \"test.txt\")\n}\n</code></pre> <p>\u76f4\u63a5\u5199\u5165\u5185\u5bb9\u4fbf\u6377\u51fd\u6570\uff1aos.WriteFile()</p> <pre><code>func WriteFile(name string, data []byte, perm FileMode) error {}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#14-seeker","title":"1.4 \u5199\u5165\u6587\u4ef6\u4f4d\u7f6e\uff08Seeker\uff09","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#141","title":"1.4.1 \u6587\u4ef6\u6253\u5f00\u6a21\u5f0f","text":"<pre><code>const (\n    O_RDONLY int = syscall.O_RDONLY // \u53ea\u8bfb\u6a21\u5f0f\n    O_WRONLY int = syscall.O_WRONLY // \u53ea\u5199\u6a21\u5f0f\n    O_RDWR   int = syscall.O_RDWR   // \u8bfb\u5199\u6a21\u5f0f\n    O_APPEND int = syscall.O_APPEND // \u8ffd\u52a0\u6a21\u5f0f\n    O_CREATE int = syscall.O_CREAT  // \u5982\u679c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\n    O_EXCL   int = syscall.O_EXCL   // \u4e0eO_CREATE\u4e00\u8d77\u4f7f\u7528\uff0c\u6587\u4ef6\u5fc5\u987b\u4e0d\u5b58\u5728\n    O_SYNC   int = syscall.O_SYNC   // \u540c\u6b65IO\n    O_TRUNC  int = syscall.O_TRUNC  // \u6253\u5f00\u65f6\u6e05\u7a7a\u6587\u4ef6\n)\n</code></pre> \u6a21\u5f0f\u7ec4\u5408 \u63cf\u8ff0 \u7b49\u6548\u4e8e\u5176\u4ed6\u8bed\u8a00 <code>os.O_RDONLY</code> \u53ea\u8bfb\u6253\u5f00 \"r\" <code>os.O_WRONLY\uff5cos.O_CREATE\uff5cos.O_TRUNC</code> \u53ea\u5199\uff0c\u521b\u5efa\uff0c\u6e05\u7a7a \"w\" <code>os.O_WRONLY\uff5cos.O_CREATE\uff5cos.O_APPEND</code> \u53ea\u5199\uff0c\u521b\u5efa\uff0c\u8ffd\u52a0 \"a\" <code>os.O_RDWR\uff5cos.O_CREATE</code> \u8bfb\u5199\uff0c\u521b\u5efa \"r+\" <code>os.O_RDWR\uff5cos.O_CREATE\uff5cos.O_TRUNC</code> \u8bfb\u5199\uff0c\u521b\u5efa\uff0c\u6e05\u7a7a \"w+\" <code>os.O_RDWR\uff5cos.O_CREATE\uff5cos.O_APPEND</code> \u8bfb\u5199\uff0c\u521b\u5efa\uff0c\u8ffd\u52a0 \"a+\""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#142","title":"1.4.2 \u6587\u4ef6\u6743\u9650\u6a21\u5f0f","text":"<p>Go\u4f7f\u7528Unix\u98ce\u683c\u7684\u6743\u9650\u4f4d\uff1a</p> <pre><code>const (\n    // \u57fa\u672c\u6743\u9650\u4f4d\n    ModeDir        = fs.ModeDir        // \u76ee\u5f55\n    ModeAppend     = fs.ModeAppend     // \u53ea\u80fd\u8ffd\u52a0\n    ModeExclusive  = fs.ModeExclusive  // \u72ec\u5360\u4f7f\u7528\n    ModeTemporary  = fs.ModeTemporary  // \u4e34\u65f6\u6587\u4ef6\n    ModeSymlink    = fs.ModeSymlink    // \u7b26\u53f7\u94fe\u63a5\n    ModeDevice     = fs.ModeDevice     // \u8bbe\u5907\u6587\u4ef6\n    ModeNamedPipe  = fs.ModeNamedPipe  // \u547d\u540d\u7ba1\u9053\n    ModeSocket     = fs.ModeSocket     // Unix\u57dfsocket\n    ModeSetuid     = fs.ModeSetuid     // set uid\n    ModeSetgid     = fs.ModeSetgid     // set gid\n    ModeCharDevice = fs.ModeCharDevice // \u5b57\u7b26\u8bbe\u5907\n    ModeSticky     = fs.ModeSticky     // sticky bit\n    ModeIrregular  = fs.ModeIrregular  // \u975e\u5e38\u89c4\u6587\u4ef6\n\n    // \u6743\u9650\u4f4d\u63a9\u7801\n    ModeType = fs.ModeType        // \u6587\u4ef6\u7c7b\u578b\u4f4d\n    ModePerm = fs.ModePerm        // \u6743\u9650\u4f4d (rwxrwxrwx)\n)\n</code></pre> <p>\u5e38\u7528\u6743\u9650\u503c\uff1a</p> <ul> <li><code>0644</code>\uff1a\u7528\u6237\u8bfb\u5199\uff0c\u7ec4\u548c\u5176\u4ed6\u53ea\u8bfb</li> <li><code>0755</code>\uff1a\u7528\u6237\u8bfb\u5199\u6267\u884c\uff0c\u7ec4\u548c\u5176\u4ed6\u8bfb\u6267\u884c</li> <li><code>0600</code>\uff1a\u4ec5\u7528\u6237\u8bfb\u5199</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#143-seeker","title":"1.4.3 Seeker","text":"<p>\u6e90\u7801\u4e2d\u7684\u5b9a\u4e49\uff1a</p> <pre><code>type Seeker interface {\n    Seek(offset int64, whence int) (int64, error)\n}\n\n// whence\uff1a\u65b0\u504f\u79fb\u91cf\u8d77\u59cb\u503c\n// offset\uff1a\u57fa\u4e8e\u8d77\u59cb\u503c\u504f\u79fb\u91cf\n\n// Seek whence values.\nconst (\n    SeekStart   = 0 // \u57fa\u4e8e\u6587\u4ef6\u5f00\u59cb\u4f4d\u7f6e\n    SeekCurrent = 1 // \u57fa\u4e8e\u5f53\u524d\u504f\u79fb\u91cf\n    SeekEnd     = 2 // \u57fa\u4e8e\u6587\u4ef6\u7ed3\u675f\u4f4d\u7f6e\n)\n</code></pre> <pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"os\"\n)\n\nfunc CusSeekFile(content string, filename string) {\n    file, err := os.OpenFile(filename, os.O_RDWR|os.O_CREATE, 655)\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer file.Close()\n\n    seek, err := file.Seek(2, io.SeekStart) // \u8bbe\u7f6e\u6587\u4ef6\u5199\u5165\u4f4d\u7f6e\u76f8\u5bf9\u5f00\u59cb\u4f4d\u7f6e\u504f\u79fb\u91cf\uff1a2\u4e2a\u5b57\u8282\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(\"\u5f53\u524d\u504f\u79fb\u91cfseek:\", seek)\n\n    file.Write([]byte(content))\n\n    seek, _ = file.Seek(0, io.SeekCurrent) // \u8fd4\u56de\u5f53\u524d\u504f\u79fb\u91cf\uff1a18=2+15+1\uff082+len(byte[]('\u4eca\u665a\u6253\u8001\u864e~'))\uff09\n    fmt.Println(\"\u5f53\u524d\u504f\u79fb\u91cfseek:\", seek)\n\n    seek, _ = file.Seek(-16, io.SeekCurrent) // \u8fd4\u56de\u5f53\u524d\u504f\u79fb\u91cf-16=2 -&gt;\u6c49\u5b57\u53603\u4e2a\u5b57\u8282\uff0c\u5982\u4e0d\u5339\u914d\u4f1a\u4e71\u7801\n    fmt.Println(\"\u5f53\u524d\u504f\u79fb\u91cfseek:\", seek)\n\n    file.Write([]byte(\"\u4f60\u597d\u554a\u554a\")) // \u6b64\u65f6\u5199\u5165\u4f1a\u8986\u76d6\u5df2\u6709\u76f8\u540c\u957f\u5ea6\u7684\u5b57\u7b26\u5185\u5bb9\uff0c\u591a\u4f59\u90e8\u5206\u4ecd\u7136\u4e0d\u53d8\n\n}\n\nfunc main() {\n    CusSeekFile(\"\u4eca\u665a\u6253\u8001\u864e~\",\"test.txt\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-bufio","title":"2 \u9ad8\u6548\u7f13\u51b2\u8bfb\u5199\u5305-bufio","text":"<p>bufio \u7684\u4e3b\u8981\u4f18\u52bf\uff1a</p> <ol> <li>\u6027\u80fd\u63d0\u5347\uff1a\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\u6b21\u6570\uff0c\u5927\u5e45\u63d0\u9ad8 I/O \u6027\u80fd</li> <li>\u4fbf\u6377\u7684API\uff1a\u63d0\u4f9b <code>Scanner</code> \u7b49\u9ad8\u7ea7\u63a5\u53e3\uff0c\u7b80\u5316\u5e38\u89c1\u64cd\u4f5c</li> <li>\u5185\u5b58\u6548\u7387\uff1a\u901a\u8fc7\u7f13\u51b2\u51cf\u5c11\u5185\u5b58\u5206\u914d\u548c\u62f7\u8d1d</li> <li>\u7075\u6d3b\u6027\uff1a\u652f\u6301\u81ea\u5b9a\u4e49\u5206\u5272\u51fd\u6570\u548c\u8bfb\u5199\u64cd\u4f5c</li> </ol> <p>\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ol> <li>\u8bb0\u5f97\u8c03\u7528 Flush()\uff1a\u5bf9\u4e8e\u5199\u5165\u64cd\u4f5c\uff0c\u786e\u4fdd\u5728\u7ed3\u675f\u65f6\u8c03\u7528 <code>Flush()</code></li> <li>\u9519\u8bef\u5904\u7406\uff1a\u603b\u662f\u68c0\u67e5 <code>Scanner.Err()</code> \u548c <code>Writer</code> \u7684\u9519\u8bef</li> <li>\u7f13\u51b2\u533a\u5927\u5c0f\uff1a\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u7f13\u51b2\u533a\u5927\u5c0f</li> <li>\u8d44\u6e90\u91ca\u653e\uff1a\u53ca\u65f6\u5173\u95ed\u5e95\u5c42\u8d44\u6e90</li> </ol> <p><code>bufio</code> \u5305\u662f Go \u8bed\u8a00\u4e2d\u5904\u7406 I/O \u64cd\u4f5c\u7684\u91cd\u8981\u5de5\u5177\uff0c\u5728\u9700\u8981\u9ad8\u6548\u8bfb\u5199\u6570\u636e\u7684\u573a\u666f\u4e2d\u975e\u5e38\u6709\u7528\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21_3","title":"2.1 \u9ad8\u6548\u8bfb\u53d6\u6587\u4ef6\uff08\u9010\u884c\u8bfb\u53d6\uff09","text":"<p>\u8fd9\u662f <code>bufio</code> \u6700\u5e38\u89c1\u7684\u5e94\u7528\u573a\u666f\uff0c\u7279\u522b\u662f\u5904\u7406\u6587\u672c\u6587\u4ef6\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"os\"\n    \"log\"\n)\n\nfunc readFileByLine(filename string) error {\n    file, err := os.Open(filename)\n    if err != nil {\n        return err\n    }\n    defer file.Close()\n\n    scanner := bufio.NewScanner(file)\n    lineNumber := 1\n\n    for scanner.Scan() {\n        line := scanner.Text()\n        fmt.Printf(\"%d: %s\\n\", lineNumber, line)\n        lineNumber++\n    }\n\n    return scanner.Err()\n}\n\nfunc main() {\n    err := readFileByLine(\"data.txt\")\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22_2","title":"2.2 \u5904\u7406\u6807\u51c6\u8f93\u5165","text":"<p>\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u4f7f\u7528\u7f13\u51b2\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"os\"\n    \"strings\"\n)\n\nfunc readStdin() {\n    scanner := bufio.NewScanner(os.Stdin)\n    fmt.Println(\"\u8bf7\u8f93\u5165\u5185\u5bb9\uff08\u8f93\u5165 'exit' \u9000\u51fa\uff09:\")\n\n    for scanner.Scan() {\n        input := scanner.Text()\n        if strings.ToLower(input) == \"exit\" {\n            break\n        }\n        fmt.Println(\"\u60a8\u8f93\u5165\u7684\u662f:\", input)\n    }\n}\n\nfunc main() {\n    readStdin()\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#23_2","title":"2.3 \u7f51\u7edc\u7f16\u7a0b\u4e2d\u7684\u7f13\u51b2\u8bfb\u5199","text":"<p>\u5728\u5904\u7406\u7f51\u7edc\u8fde\u63a5\u65f6\uff0c\u7f13\u51b2\u8bfb\u5199\u975e\u5e38\u91cd\u8981\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"net\"\n    \"strings\"\n)\n\nfunc handleConnection(conn net.Conn) {\n    defer conn.Close()\n\n    reader := bufio.NewReader(conn)\n    writer := bufio.NewWriter(conn)\n\n    for {\n        // \u8bfb\u53d6\u76f4\u5230\u6362\u884c\u7b26\n        message, err := reader.ReadString('\\n')\n        if err != nil {\n            break\n        }\n\n        message = strings.TrimSpace(message)\n        fmt.Printf(\"\u6536\u5230\u6d88\u606f: %s\\n\", message)\n\n        // \u7f13\u51b2\u5199\u5165\n        response := fmt.Sprintf(\"\u670d\u52a1\u5668\u56de\u590d: %s\\n\", strings.ToUpper(message))\n        writer.WriteString(response)\n        writer.Flush() // \u91cd\u8981\uff1a\u786e\u4fdd\u6570\u636e\u88ab\u53d1\u9001\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#24_1","title":"2.4 \u9ad8\u6027\u80fd\u6587\u4ef6\u5199\u5165","text":"<p>\u5f53\u9700\u8981\u9891\u7e41\u5199\u5165\u5c0f\u91cf\u6570\u636e\u65f6\uff0c\u4f7f\u7528\u7f13\u51b2\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6027\u80fd\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"os\"\n)\n\nfunc writeWithBuffer(filename string, lines []string) error {\n    file, err := os.Create(filename)\n    if err != nil {\n        return err\n    }\n    defer file.Close()\n\n    writer := bufio.NewWriter(file)\n    defer writer.Flush() // \u786e\u4fdd\u6240\u6709\u6570\u636e\u88ab\u5199\u5165\n\n    for _, line := range lines {\n        _, err := writer.WriteString(line + \"\\n\")\n        if err != nil {\n            return err\n        }\n    }\n\n    return nil\n}\n\nfunc main() {\n    lines := []string{\"\u7b2c\u4e00\u884c\", \"\u7b2c\u4e8c\u884c\", \"\u7b2c\u4e09\u884c\"}\n    err := writeWithBuffer(\"output.txt\", lines)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#25","title":"2.5 \u8bfb\u53d6\u7279\u5b9a\u5206\u9694\u7b26\u7684\u6570\u636e","text":"<p><code>bufio.Scanner</code> \u53ef\u4ee5\u81ea\u5b9a\u4e49\u5206\u5272\u51fd\u6570\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"bytes\"\n    \"fmt\"\n    \"strings\"\n)\n\nfunc readCSVData(csvData string) {\n    scanner := bufio.NewScanner(strings.NewReader(csvData))\n\n    // \u81ea\u5b9a\u4e49\u5206\u5272\u51fd\u6570\uff0c\u6309\u9017\u53f7\u5206\u5272\n    split := func(data []byte, atEOF bool) (advance int, token []byte, err error) {\n        if atEOF &amp;&amp; len(data) == 0 {\n            return 0, nil, nil\n        }\n\n        if i := bytes.IndexByte(data, ','); i &gt;= 0 {\n            return i + 1, data[0:i], nil\n        }\n\n        if atEOF {\n            return len(data), data, nil\n        }\n\n        return 0, nil, nil\n    }\n\n    scanner.Split(split)\n\n    for scanner.Scan() {\n        fmt.Printf(\"\u5b57\u6bb5: %s\\n\", scanner.Text())\n    }\n}\n\nfunc main() {\n    csvData := \"\u5f20\u4e09,25,\u7a0b\u5e8f\u5458,\u5317\u4eac\\n\u674e\u56db,30,\u8bbe\u8ba1\u5e08,\u4e0a\u6d77\"\n    readCSVData(csvData)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#26","title":"2.6 \u8bfb\u53d6\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u636e\u5757","text":"<p>\u4f7f\u7528 <code>bufio.Reader</code> \u8bfb\u53d6\u7279\u5b9a\u5927\u5c0f\u7684\u6570\u636e\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"os\"\n)\n\nfunc readInChunks(filename string, chunkSize int) error {\n    file, err := os.Open(filename)\n    if err != nil {\n        return err\n    }\n    defer file.Close()\n\n    reader := bufio.NewReader(file)\n    chunk := make([]byte, chunkSize)\n    chunkCount := 0\n\n    for {\n        n, err := reader.Read(chunk)\n        if err != nil {\n            break\n        }\n        chunkCount++\n        fmt.Printf(\"\u5757 %d: %d \u5b57\u8282\\n\", chunkCount, n)\n        // \u5904\u7406 chunk[0:n] \u7684\u6570\u636e\n    }\n\n    return nil\n}\n\nfunc main() {\n    err := readInChunks(\"largefile.bin\", 4096)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#27","title":"2.7 \u6027\u80fd\u654f\u611f\u7684\u65e5\u5fd7\u5904\u7406","text":"<p>\u5728\u9ad8\u6027\u80fd\u65e5\u5fd7\u5904\u7406\u4e2d\u4f7f\u7528\u7f13\u51b2\uff1a</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"os\"\n    \"time\"\n)\n\ntype Logger struct {\n    writer *bufio.Writer\n}\n\nfunc NewLogger(filename string) (*Logger, error) {\n    file, err := os.OpenFile(filename, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        return nil, err\n    }\n\n    writer := bufio.NewWriter(file)\n\n    return &amp;Logger{writer: writer}, nil\n}\n\nfunc (l *Logger) Log(message string) error {\n    timestamp := time.Now().Format(\"2006-01-02 15:04:05\")\n    logEntry := fmt.Sprintf(\"[%s] %s\\n\", timestamp, message)\n\n    _, err := l.writer.WriteString(logEntry)\n    return err\n}\n\nfunc (l *Logger) Flush() error {\n    return l.writer.Flush()\n}\n\nfunc (l *Logger) Close() error {\n    l.Flush()\n    // \u5b9e\u9645\u9879\u76ee\u4e2d\u5e94\u8be5\u5173\u95ed\u5e95\u5c42\u6587\u4ef6\n    return nil\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#_17","title":"\ud83d\udcda \u65e5\u5fd7\u76f8\u5173\u5185\u5bb9","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-log","title":"1 \u81ea\u5b9a\u4e49Log\u8bb0\u5f55\u5668","text":"<pre><code>/**/\n\npackage utils\n\nimport (\n    \"fmt\"\n    \"gopkg.in/natefinch/lumberjack.v2\"\n    \"io\"\n    \"log\"\n    \"os\"\n    \"path/filepath\"\n    \"runtime\"\n    \"time\"\n)\n\n// LogLevel \u5b9a\u4e49\u65e5\u5fd7\u7ea7\u522b\u7c7b\u578b\ntype LogLevel int\n\nconst (\n    DEBUG LogLevel = iota\n    INFO\n    WARN\n    ERROR\n    FATAL\n)\n\nvar levelStrings = [...]string{\n    \"DEBUG\",\n    \"INFO\",\n    \"WARN\",\n    \"ERROR\",\n    \"FATAL\",\n}\n\ntype CustomLogger struct {\n    *log.Logger\n    fileWriter io.Writer\n}\n\n// NewCustomLogger \u521b\u5efa\u65e5\u5fd7\u5b9e\u4f8b\n// console: \u662f\u5426\u8f93\u51fa\u5230\u63a7\u5236\u53f0\n// filePath: \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u4e0d\u5199\u5165\u6587\u4ef6\nfunc NewCustomLogger(console bool, filePath string) *CustomLogger {\n    var writers []io.Writer\n\n    // 1. \u6587\u4ef6\u8f93\u51fa\u914d\u7f6e\n    if filePath != \"\" {\n        fileWriter := &amp;lumberjack.Logger{\n            Filename:   filePath,\n            MaxSize:    20,    // \u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u6700\u5927\u5c3a\u5bf8(MB)\n            MaxBackups: 7,     // \u4fdd\u7559\u65e7\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\n            MaxAge:     7,     // \u4fdd\u7559\u65e7\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5929\u6570\n            Compress:   false, // \u662f\u5426\u538b\u7f29\u65e7\u65e5\u5fd7\u6587\u4ef6\n            LocalTime:  true,  // \u4f7f\u7528\u672c\u5730\u65f6\u95f4\n        }\n        writers = append(writers, fileWriter)\n    }\n\n    // 2. \u63a7\u5236\u53f0\u8f93\u51fa\u914d\u7f6e\n    if console {\n        writers = append(writers, os.Stdout)\n    }\n\n    // 3. \u521b\u5efa\u591a\u8f93\u51fawriter\n    var output io.Writer\n    if len(writers) == 0 {\n        output = io.Discard // \u65e0\u8f93\u51fa\n    } else if len(writers) == 1 {\n        output = writers[0]\n    } else {\n        output = io.MultiWriter(writers...)\n    }\n\n    return &amp;CustomLogger{\n        Logger:     log.New(output, \"\", 0),\n        fileWriter: writers[0], // \u4fdd\u5b58\u6587\u4ef6writer\u5f15\u7528\n    }\n}\n\n// \u57fa\u7840\u65e5\u5fd7\u65b9\u6cd5\nfunc (l *CustomLogger) log(level LogLevel, format string, v ...interface{}) {\n    _, file, line, ok := runtime.Caller(3) // \u8c03\u6574\u8c03\u7528\u6808\u5c42\u7ea7\n    if !ok {\n        file = \"???\"\n        line = 0\n    } else {\n        file = filepath.Base(file)\n    }\n\n    timestamp := time.Now().Format(\"2006-01-02 15:04:05.000\")\n    prefix := fmt.Sprintf(\"%s %s:%d %s |\", timestamp, file, line, levelStrings[level])\n\n    var msg string\n    if format == \"\" {\n        msg = fmt.Sprint(v...)\n    } else {\n        msg = fmt.Sprintf(format, v...)\n    }\n\n    l.Logger.Printf(\"%s %s\", prefix, msg)\n}\n\n// \u666e\u901a\u65e5\u5fd7\u65b9\u6cd5\nfunc (l *CustomLogger) Debug(v ...interface{}) { l.log(DEBUG, \"\", v...) }\nfunc (l *CustomLogger) Info(v ...interface{})  { l.log(INFO, \"\", v...) }\nfunc (l *CustomLogger) Warn(v ...interface{})  { l.log(WARN, \"\", v...) }\nfunc (l *CustomLogger) Error(v ...interface{}) { l.log(ERROR, \"\", v...) }\nfunc (l *CustomLogger) Fatal(v ...interface{}) { l.log(FATAL, \"\", v...); os.Exit(1) }\n\n// \u683c\u5f0f\u5316\u65e5\u5fd7\u65b9\u6cd5\nfunc (l *CustomLogger) Debugf(format string, v ...interface{}) { l.log(DEBUG, format, v...) }\nfunc (l *CustomLogger) Infof(format string, v ...interface{})  { l.log(INFO, format, v...) }\nfunc (l *CustomLogger) Warnf(format string, v ...interface{})  { l.log(WARN, format, v...) }\nfunc (l *CustomLogger) Errorf(format string, v ...interface{}) { l.log(ERROR, format, v...) }\nfunc (l *CustomLogger) Fatalf(format string, v ...interface{}) {\n    l.log(FATAL, format, v...)\n    os.Exit(1)\n}\n\n// \u5173\u95ed\u6587\u4ef6\u5199\u5165\u5668\uff08\u5982\u679c\u9700\u8981\uff09\nfunc (l *CustomLogger) Close() error {\n    if closer, ok := l.fileWriter.(io.Closer); ok {\n        return closer.Close()\n    }\n    return nil\n}\n\nvar (\n    Log = NewCustomLogger(true, fmt.Sprintf(\n        \"./logs/atsexec_%d_%s.log\",\n        os.Getpid(),\n        time.Now().Format(\"20060102150405\"),\n    ))\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-go-zap2025","title":"2 go\u6027\u80fd\u6700\u5feb\u7684\u65e5\u5fd7\u5e93-zap\uff082025\uff09","text":"<p>\u5b66\u4e60\u94fe\u63a5\uff1azap\u7b2c\u4e09\u65b9\u65e5\u5fd7\u5e93</p> <p>\u8fd9\u662f\u7b2c\u4e09\u65b9\u65e5\u5fd7\u5e93(lumberjack.v2\u652f\u6301\u5206\u7247)\uff1a</p> <pre><code># \u4e0b\u8f7d\u547d\u4ee4\ngo get -u go.uber.org/zap\ngo get -u gopkg.in/natefinch/lumberjack.v2\n</code></pre> <p>\u793a\u4f8b\uff1autils/logger.go</p> <pre><code>package utils\n\nimport \"go.uber.org/zap\"\n\nfunc Dev() {\n    logger, _ := zap.NewDevelopment()\n    prefixStr := \"Dev this is \"\n    logger.Info(prefixStr + \"info\")\n    logger.Warn(prefixStr + \"warn\")\n    logger.Error(prefixStr + \"error\")\n}\n\nfunc Test() {\n    logger := zap.NewExample()\n    prefixStr := \"Test this is \"\n    logger.Info(prefixStr + \"info\")\n    logger.Warn(prefixStr + \"warn\")\n    logger.Error(prefixStr + \"error\")\n}\n\nfunc Prod() {\n    logger, _ := zap.NewProduction()\n    prefixStr := \"Prod this is \"\n    logger.Info(prefixStr + \"info\")\n    logger.Warn(prefixStr + \"warn\")\n    logger.Error(prefixStr + \"error\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21_4","title":"2.1 \u57fa\u672c\u914d\u7f6e","text":"<p>utils/logger.go</p> <p>1.\u652f\u6301\u76f4\u63a5\u8f93\u5165\u4e24\u4e2a\u53c2\u6570\uff1alogger.info(\"%s \u4f60\u597d\", \"cenhongchang\")</p> <pre><code>// GetSLogger \u76f4\u63a5\u83b7\u53d6\u65e5\u5fd7\u6253\u5370\u5668-\u652f\u6301\u683c\u5f0f\u5316\u5165\u53c2\nfunc GetSLogger() *zap.SugaredLogger {\n    logger, _ := zap.NewDevelopment()\n    slogger := logger.Sugar()\n    return slogger\n</code></pre> <p>2.\u66f4\u591a\u914d\u7f6e\u4f7f\u7528\u65b9\u5f0f</p> <pre><code>/**/\n\npackage utils\n\nimport (\n    \"go.uber.org/zap\"\n    \"go.uber.org/zap/zapcore\"\n)\n\n// \u5b9a\u4e49\u989c\u8272\nconst (\n    colorRed    = \"\\033[31m\"\n    colorGreen  = \"\\033[32m\"\n    colorYellow = \"\\033[33m\"\n    colorBlue   = \"\\033[34m\"\n    colorReset  = \"\\033[0m\"\n)\n\n// \u81ea\u5b9a\u4e49 EncodeLevel-\u7f8e\u5316\u989c\u8272\nfunc coloredLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    switch level {\n    case zapcore.DebugLevel:\n        enc.AppendString(colorBlue + \"DEBUG\" + colorReset)\n    case zapcore.InfoLevel:\n        enc.AppendString(colorGreen + \"INFO\" + colorReset)\n    case zapcore.WarnLevel:\n        enc.AppendString(colorYellow + \"WARN\" + colorReset)\n    case zapcore.ErrorLevel, zapcore.DPanicLevel, zapcore.PanicLevel, zapcore.FatalLevel:\n        enc.AppendString(colorRed + \"ERROR\" + colorReset)\n    default:\n        enc.AppendString(level.String()) // \u9ed8\u8ba4\u884c\u4e3a\n    }\n}\n\n// GetLogger \u901a\u8fc7\u914d\u7f6e\u83b7\u53d6\u65e5\u5fd7\u6253\u5370\u5668\nfunc GetLogger() *zap.Logger {\n    cfg := zap.NewDevelopmentConfig()\n    cfg.Level = zap.NewAtomicLevelAt(zap.DebugLevel)                                  // \u8bbe\u7f6e\u65e5\u5fd7\u6253\u5370\u6700\u5c0f\u7ea7\u522b\u4e3ainfo\n    cfg.EncoderConfig.EncodeTime = zapcore.TimeEncoderOfLayout(\"2006-01-02 15:04:05\") // \u65f6\u95f4\u683c\u5f0f\u5316\n    cfg.EncoderConfig.EncodeLevel = coloredLevelEncoder                               // \u81ea\u5b9a\u4e49\u989c\u8272\u663e\u793a\u51fd\u6570\n    logger, _ := cfg.Build()\n    return logger\n}\n\n/* \n\n// \u6d4b\u8bd5\u4ee3\u7801\nfunc main() {\n    logger := utils.GetLogger() // \u9ed8\u8ba4\u4e0d\u652f\u6301\u683c\u5f0f\u5316\u5165\u53c2\n    prefixStr := \"\u8fd9\u662f\u4e00\u6761\u65e5\u5fd7\uff0c\u6253\u5370\u673a\u522b\uff1a\"\n    logger.Info(prefixStr + \"info\")\n    logger.Warn(prefixStr + \"warn\")\n    logger.Error(prefixStr + \"error\")\n}\n\n*/\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22_3","title":"2.2 \u81ea\u5b9a\u4e49\u5185\u5bb9\uff08\u5b8c\u6574\uff09","text":"<p>zap\u652f\u6301\u81ea\u5b9a\u4e49\u65e5\u5fd7\u524d\u7f00\uff0c\u6bd4\u5982\u60f3\u5b9a\u4e49\u4e3a\uff1a\u67d0\u4e2a\u9879\u76ee\u540d\u6216\u5e94\u7528\u540d\u7b49...</p> <pre><code>go get -u gopkg.in/natefinch/lumberjack.v2\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#221","title":"2.2.1 \u6309\u6587\u4ef6\u5927\u5c0f\u5206\u7247","text":"<pre><code>package utils\n\nimport (\n    \"go.uber.org/zap\"\n    \"go.uber.org/zap/buffer\"\n    \"go.uber.org/zap/zapcore\"\n    \"gopkg.in/natefinch/lumberjack.v2\"\n    \"os\"\n    \"time\"\n)\n\nconst (\n    colorRed    = \"\\033[31m\"\n    colorGreen  = \"\\033[32m\"\n    colorYellow = \"\\033[33m\"\n    colorBlue   = \"\\033[34m\"\n    colorReset  = \"\\033[0m\"\n)\n\nvar enableColor = isTerminal(os.Stdout)\n\nvar levelColors = map[zapcore.Level]string{\n    zapcore.DebugLevel:  colorBlue + \"DEBUG\" + colorReset,\n    zapcore.InfoLevel:   colorGreen + \"INFO\" + colorReset,\n    zapcore.WarnLevel:   colorYellow + \"WARN\" + colorReset,\n    zapcore.ErrorLevel:  colorRed + \"ERROR\" + colorReset,\n    zapcore.DPanicLevel: colorRed + \"DPANIC\" + colorReset,\n    zapcore.PanicLevel:  colorRed + \"PANIC\" + colorReset,\n    zapcore.FatalLevel:  colorRed + \"FATAL\" + colorReset,\n}\n\n// \u63a7\u5236\u53f0\u989c\u8272\u7f16\u7801\nfunc coloredLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    if enableColor {\n        if c, ok := levelColors[level]; ok {\n            enc.AppendString(c)\n            return\n        }\n    }\n    enc.AppendString(level.String())\n}\n\n// \u6587\u4ef6\u7528\u7684\u7eaf\u6587\u672c\u7f16\u7801\nfunc plainLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    enc.AppendString(level.String())\n}\n\n// \u81ea\u5b9a\u4e49 Encoder\uff0c\u52a0\u524d\u7f00\ntype myEncoder struct {\n    zapcore.Encoder\n    Prefix string\n}\n\nfunc (m myEncoder) EncodeEntry(entry zapcore.Entry, fields []zapcore.Field) (*buffer.Buffer, error) {\n    buf, err := m.Encoder.EncodeEntry(entry, fields)\n    if err != nil {\n        return nil, err\n    }\n    logLine := buf.String()\n    buf.Reset()\n    buf.AppendString(m.Prefix + logLine)\n    return buf, nil\n}\n\nfunc isTerminal(f *os.File) bool {\n    fi, err := f.Stat()\n    if err != nil {\n        return false\n    }\n    return (fi.Mode() &amp; os.ModeCharDevice) != 0\n}\n\n// InitLogger \u521d\u59cb\u5316\u5168\u5c40 Logger\nfunc InitLogger(prefix string, logFile string) *zap.Logger {\n    // \u63a7\u5236\u53f0\u7f16\u7801\uff08\u5f69\u8272\uff09\n    consoleCfg := zap.NewDevelopmentEncoderConfig()\n    consoleCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    consoleCfg.EncodeLevel = coloredLevelEncoder\n\n    consoleEncoder := zapcore.NewConsoleEncoder(consoleCfg)\n\n    consoleCore := zapcore.NewCore(\n        myEncoder{Encoder: consoleEncoder, Prefix: prefix},\n        zapcore.AddSync(os.Stdout),\n        zapcore.DebugLevel,\n    )\n\n    // \u6587\u4ef6\u7f16\u7801\uff08\u65e0\u989c\u8272\uff09\n    fileCfg := zap.NewProductionEncoderConfig()\n    fileCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    fileCfg.EncodeLevel = plainLevelEncoder // \u4e0d\u52a0\u989c\u8272\n\n    fileEncoder := zapcore.NewConsoleEncoder(fileCfg)\n\n    fileWriter := zapcore.AddSync(&amp;lumberjack.Logger{\n        Filename:   logFile,\n        MaxSize:    20, // MB\n        MaxBackups: 5,\n        MaxAge:     30, // days\n        Compress:   true,\n    })\n\n    fileCore := zapcore.NewCore(\n        myEncoder{Encoder: fileEncoder, Prefix: prefix},\n        fileWriter,\n        zapcore.InfoLevel,\n    )\n\n    // \u5408\u5e76 -- \u7c7b\u4f3cpython\u6dfb\u52a0\u591a\u4e2ahandler\n    core := zapcore.NewTee(consoleCore, fileCore)\n\n    logger := zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))\n    zap.ReplaceGlobals(logger)\n    return logger\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#222","title":"2.2.2 \u6309\u6bcf\u5929\u6587\u4ef6\u5206\u7247","text":"<pre><code>package utils\n\nimport (\n    \"fmt\"\n    \"go.uber.org/zap\"\n    \"go.uber.org/zap/buffer\"\n    \"go.uber.org/zap/zapcore\"\n    \"os\"\n    \"path/filepath\"\n    \"time\"\n)\n\nconst (\n    colorRed    = \"\\033[31m\"\n    colorGreen  = \"\\033[32m\"\n    colorYellow = \"\\033[33m\"\n    colorBlue   = \"\\033[34m\"\n    colorReset  = \"\\033[0m\"\n)\n\nvar enableColor = isTerminal(os.Stdout)\n\nvar levelColors = map[zapcore.Level]string{\n    zapcore.DebugLevel:  colorBlue + \"DEBUG\" + colorReset,\n    zapcore.InfoLevel:   colorGreen + \"INFO\" + colorReset,\n    zapcore.WarnLevel:   colorYellow + \"WARN\" + colorReset,\n    zapcore.ErrorLevel:  colorRed + \"ERROR\" + colorReset,\n    zapcore.DPanicLevel: colorRed + \"DPANIC\" + colorReset,\n    zapcore.PanicLevel:  colorRed + \"PANIC\" + colorReset,\n    zapcore.FatalLevel:  colorRed + \"FATAL\" + colorReset,\n}\n\n// \u63a7\u5236\u53f0\u989c\u8272\u7f16\u7801\nfunc coloredLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    if enableColor {\n        if c, ok := levelColors[level]; ok {\n            enc.AppendString(c)\n            return\n        }\n    }\n    enc.AppendString(level.String())\n}\n\n// \u6587\u4ef6\u7eaf\u6587\u672c\u7f16\u7801\nfunc plainLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    enc.AppendString(level.String())\n}\n\n// \u81ea\u5b9a\u4e49 Encoder\uff0c\u52a0\u524d\u7f00\ntype myEncoder struct {\n    zapcore.Encoder\n    Prefix string\n}\n\nfunc (m myEncoder) EncodeEntry(entry zapcore.Entry, fields []zapcore.Field) (*buffer.Buffer, error) {\n    buf, err := m.Encoder.EncodeEntry(entry, fields)\n    if err != nil {\n        return nil, err\n    }\n    logLine := buf.String()\n    buf.Reset()\n    buf.AppendString(m.Prefix + logLine)\n    return buf, nil\n}\n\n// \u5224\u65ad\u8f93\u51fa\u662f\u5426\u662f\u7ec8\u7aef\nfunc isTerminal(f *os.File) bool {\n    fi, err := f.Stat()\n    if err != nil {\n        return false\n    }\n    return (fi.Mode() &amp; os.ModeCharDevice) != 0\n}\n\n// \u83b7\u53d6\u5f53\u5929\u7684\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\nfunc getDailyLogFile(baseDir, baseName string) string {\n    date := time.Now().Format(time.DateOnly)\n    return filepath.Join(baseDir, fmt.Sprintf(\"%s_%s.log\", baseName, date))\n}\n\n// InitLogger \u6309\u5929\u5206\u5272\u65e5\u5fd7\nfunc InitLogger(prefix, baseDir, baseName string) *zap.Logger {\n    // \u786e\u4fdd\u65e5\u5fd7\u76ee\u5f55\u5b58\u5728\n    _ = os.MkdirAll(baseDir, 0755)\n\n    // \u63a7\u5236\u53f0\u7f16\u7801\uff08\u5f69\u8272\uff09\n    consoleCfg := zap.NewDevelopmentEncoderConfig()\n    consoleCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    consoleCfg.EncodeLevel = coloredLevelEncoder\n    consoleEncoder := zapcore.NewConsoleEncoder(consoleCfg)\n\n    consoleCore := zapcore.NewCore(\n        myEncoder{Encoder: consoleEncoder, Prefix: prefix},\n        zapcore.AddSync(os.Stdout),\n        zapcore.DebugLevel,\n    )\n\n    // \u6587\u4ef6\u7f16\u7801\uff08\u65e0\u989c\u8272\uff09\n    fileCfg := zap.NewProductionEncoderConfig()\n    fileCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    fileCfg.EncodeLevel = plainLevelEncoder\n    fileEncoder := zapcore.NewConsoleEncoder(fileCfg)\n\n    logFile := getDailyLogFile(baseDir, baseName)\n    fileWriter, err := os.OpenFile(logFile, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        panic(fmt.Sprintf(\"\u65e0\u6cd5\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6: %v\", err))\n    }\n\n    fileCore := zapcore.NewCore(\n        myEncoder{Encoder: fileEncoder, Prefix: prefix},\n        zapcore.AddSync(fileWriter),\n        zapcore.InfoLevel,\n    )\n\n    core := zapcore.NewTee(consoleCore, fileCore)\n\n    logger := zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))\n    zap.ReplaceGlobals(logger)\n    return logger\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#223","title":"2.2.3 \u6309\u6bcf\u5929\u6587\u4ef6+\u9519\u8bef\u5355\u72ec\u6587\u4ef6\u5206\u7247","text":"<pre><code>package utils\n\nimport (\n    \"fmt\"\n    \"go.uber.org/zap\"\n    \"go.uber.org/zap/buffer\"\n    \"go.uber.org/zap/zapcore\"\n    \"os\"\n    \"path/filepath\"\n    \"time\"\n)\n\nconst (\n    colorRed    = \"\\033[31m\"\n    colorGreen  = \"\\033[32m\"\n    colorYellow = \"\\033[33m\"\n    colorBlue   = \"\\033[34m\"\n    colorReset  = \"\\033[0m\"\n)\n\nvar enableColor = isTerminal(os.Stdout)\n\nvar levelColors = map[zapcore.Level]string{\n    zapcore.DebugLevel:  colorBlue + \"DEBUG\" + colorReset,\n    zapcore.InfoLevel:   colorGreen + \"INFO\" + colorReset,\n    zapcore.WarnLevel:   colorYellow + \"WARN\" + colorReset,\n    zapcore.ErrorLevel:  colorRed + \"ERROR\" + colorReset,\n    zapcore.DPanicLevel: colorRed + \"DPANIC\" + colorReset,\n    zapcore.PanicLevel:  colorRed + \"PANIC\" + colorReset,\n    zapcore.FatalLevel:  colorRed + \"FATAL\" + colorReset,\n}\n\n// \u63a7\u5236\u53f0\u989c\u8272\u7f16\u7801\nfunc coloredLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    if enableColor {\n        if c, ok := levelColors[level]; ok {\n            enc.AppendString(c)\n            return\n        }\n    }\n    enc.AppendString(level.String())\n}\n\n// \u6587\u4ef6\u65e0\u989c\u8272\u7f16\u7801\nfunc plainLevelEncoder(level zapcore.Level, enc zapcore.PrimitiveArrayEncoder) {\n    enc.AppendString(level.String())\n}\n\n// \u81ea\u5b9a\u4e49 Encoder\uff0c\u52a0\u524d\u7f00\ntype myEncoder struct {\n    zapcore.Encoder\n    Prefix string\n}\n\nfunc (m myEncoder) EncodeEntry(entry zapcore.Entry, fields []zapcore.Field) (*buffer.Buffer, error) {\n    buf, err := m.Encoder.EncodeEntry(entry, fields)\n    if err != nil {\n        return nil, err\n    }\n    logLine := buf.String()\n    buf.Reset()\n    buf.AppendString(m.Prefix + logLine)\n    return buf, nil\n}\n\n// \u5224\u65ad\u8f93\u51fa\u662f\u5426\u662f\u7ec8\u7aef\nfunc isTerminal(f *os.File) bool {\n    fi, err := f.Stat()\n    if err != nil {\n        return false\n    }\n    return (fi.Mode() &amp; os.ModeCharDevice) != 0\n}\n\n// \u83b7\u53d6\u5f53\u5929\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\nfunc getDailyLogFile(baseDir, baseName string) string {\n    date := time.Now().Format(\"2006-01-02\")\n    return filepath.Join(baseDir, fmt.Sprintf(\"%s_%s.log\", baseName, date))\n}\n\n// InitLogger \u6309\u5929\u5206\u5272\u5e76\u5c06 error \u5355\u72ec\u8f93\u51fa\nfunc InitLogger(prefix, baseDir string) *zap.Logger {\n    _ = os.MkdirAll(baseDir, 0755)\n\n    // \u63a7\u5236\u53f0\uff08\u5f69\u8272\uff09\n    consoleCfg := zap.NewDevelopmentEncoderConfig()\n    consoleCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    consoleCfg.EncodeLevel = coloredLevelEncoder\n    consoleEncoder := zapcore.NewConsoleEncoder(consoleCfg)\n\n    consoleCore := zapcore.NewCore(\n        myEncoder{Encoder: consoleEncoder, Prefix: prefix},\n        zapcore.AddSync(os.Stdout),\n        zapcore.DebugLevel,\n    )\n\n    // \u6587\u4ef6\uff08Info \u53ca\u4ee5\u4e0a\uff0c\u4e0d\u542b Error\uff09\n    infoCfg := zap.NewProductionEncoderConfig()\n    infoCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    infoCfg.EncodeLevel = plainLevelEncoder\n    infoEncoder := zapcore.NewConsoleEncoder(infoCfg)\n\n    infoFile := getDailyLogFile(baseDir, \"info\")\n    infoWriter, err := os.OpenFile(infoFile, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        panic(fmt.Sprintf(\"\u65e0\u6cd5\u521b\u5efa info \u65e5\u5fd7\u6587\u4ef6: %v\", err))\n    }\n    infoCore := zapcore.NewCore(\n        myEncoder{Encoder: infoEncoder, Prefix: prefix},\n        zapcore.AddSync(infoWriter),\n        zap.LevelEnablerFunc(func(lvl zapcore.Level) bool {\n            return lvl &lt; zapcore.ErrorLevel // \u53ea\u8bb0\u5f55 Debug, Info, Warn\n        }),\n    )\n\n    // \u6587\u4ef6\uff08Error \u53ca\u4ee5\u4e0a\uff09\n    errCfg := zap.NewProductionEncoderConfig()\n    errCfg.EncodeTime = zapcore.TimeEncoderOfLayout(time.DateTime)\n    errCfg.EncodeLevel = plainLevelEncoder\n    errEncoder := zapcore.NewConsoleEncoder(errCfg)\n\n    errorFile := getDailyLogFile(baseDir, \"error\")\n    errorWriter, err := os.OpenFile(errorFile, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        panic(fmt.Sprintf(\"\u65e0\u6cd5\u521b\u5efa error \u65e5\u5fd7\u6587\u4ef6: %v\", err))\n    }\n    errorCore := zapcore.NewCore(\n        myEncoder{Encoder: errEncoder, Prefix: prefix},\n        zapcore.AddSync(errorWriter),\n        zap.LevelEnablerFunc(func(lvl zapcore.Level) bool {\n            return lvl &gt;= zapcore.ErrorLevel // \u53ea\u8bb0\u5f55 Error \u53ca\u4ee5\u4e0a\n        }),\n    )\n\n    // \u5408\u5e76\u4e09\u4e2a\u8f93\u51fa\n    core := zapcore.NewTee(consoleCore, infoCore, errorCore)\n\n    logger := zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))\n    zap.ReplaceGlobals(logger)\n    return logger\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#224","title":"2.2.4 \u5355\u72ec/\u5168\u5c40\u65e5\u5fd7\u5bf9\u8c61\u4f7f\u7528","text":"<pre><code>// \u5355\u72ec\u65b0logger\u5bf9\u8c61\nfunc main() {\n    logger := utils.InitLogger(\"\", \"logs/app.log\")\n    logger1 := utils.InitLogger(\"\", \"logs/app1.log\")\n\n    defer logger.Sync()\n    defer logger1.Sync()\n\n    prefixStr := \"\u8fd9\u662f\u4e00\u6761\u65e5\u5fd7\uff0c\u6253\u5370\u7ea7\u522b\uff1a\"\n    logger.Debug(prefixStr + \"debug\")\n    logger.Info(prefixStr + \"info\")\n    logger.Warn(prefixStr + \"warn\")\n    logger.Error(prefixStr + \"error\")\n\n    logger1.Info(prefixStr + \"info\")\n    logger1.Warn(prefixStr + \"warn\")\n    logger1.Error(prefixStr + \"error\")\n}\n</code></pre> <pre><code>// \u5168\u5c40\u65e5\u5fd7\u5bf9\u8c61\nfunc main() {\n    utils.InitLogger(\"\", \"logs/global.log\")\n    zap.L().Info(\"hello world\")\n    zap.S().Infof(\"hello %s\", \"world\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#gogoroutine","title":"\ud83d\udcda Go\u5e76\u53d1\u7f16\u7a0b\uff08Goroutine\uff09","text":"<p>\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u7ec6\u5316\u5e76\u884c\u4e0e\u5e76\u53d1\uff0c\u90a3\u4e48\u89e3\u91ca\u5982\u4e0b\uff1a</p> <p>\u5e76\u884c\uff1a\u591a\u4e2acpu\u4e2d\uff0c\u505a\u5230\u771f\u6b63\u7684\u540c\u4e00\u65f6\u523b\uff0c\u540c\u65f6\u8fd0\u884c\uff1b</p> <p>\u5e76\u53d1\uff1a\u5355\u4e2acpu\u4e2d\uff0c\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u901a\u8fc7\u4e0d\u505c\u7684\u5207\u6362\u65f6\u95f4\u7247\u8fbe\u5230\u5feb\u901f\u6267\u884c\u4efb\u52a1\uff1b</p> <p>\u4e00\u822c\u7684\u8bdd\uff0c\u4e24\u8005\u6211\u4eec\u90fd\u7edf\u79f0\u5e76\u53d1\u3002</p> <p>go\u8bed\u8a00\u6709\u81ea\u5df1\u5b9e\u73b0\u534f\u7a0b\u7684\u7ebf\u7a0b\u6a21\u578b-GMP\uff08\u6df7\u5408\u578b\u7ebf\u7a0b\u6a21\u578b\uff09</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_16","title":"1 \u534f\u7a0b\u521b\u5efa","text":"<pre><code>func showMessage(i int) {\n    fmt.Println(\"Hello Goroutine; i=\" + strconv.Itoa(i))\n}\n\nfunc main() {\n    for i := 0; i &lt; 10; i++ {\n        go showMessage(i)\n    }\n    // \u534f\u7a0b\u4e2d\uff0c\u5982\u679c\u4e0d\u52a0\u7b49\u5f85\u65f6\u95f4\uff0c\u4e3b\u534f\u7a0b\u4e0d\u4f1a\u7b49\u5f85\u521b\u5efa\u7684\u5176\u4ed6\u5b50\u534f\u7a0b\u7ed3\u675f\u800c\u76f4\u63a5\u7ed3\u675f\uff0c\u53ef\u80fd\u4ec0\u4e48\u90fd\u4e0d\u6253\u5370\uff1b\u4e5f\u53ef\u80fd\u6253\u5370\u5c11\u91cf\u4fe1\u606f\n    // \u52a0\u4e86\u65f6\u95f4\u540e\uff0c\u534f\u7a0b\u65f6\u5e76\u53d1\u6267\u884c\uff0c\u6240\u4ee5\u6253\u5370\u987a\u5e8f\u662f\u4e0d\u786e\u5b9a\u7684\n    time.Sleep(time.Second * 2)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-channel","title":"2 Channel\u7c7b\u578b\uff08\u901a\u9053\uff09","text":"<p>go\u8bed\u8a00Channel\u662f\u4e3aGoroutine\u505a\u6570\u636e\u901a\u4fe1\u7684\u7c7b\u578b\uff0c\u662f\u4e00\u79cd\u961f\u5217\uff0c\u9075\u5faa\u5148\u5165\u5148\u51fa\uff1b</p> <p>\u521b\u5efachannel\u6570\u636e\u8bed\u6cd5\uff1a<code>make(chan \u7c7b\u578b, &lt;\u7f13\u51b2\u5927\u5c0f&gt;)</code></p> <p>channel\u6709\u4e09\u79cd\u64cd\u4f5c\uff1a\u53d1\u9001(send)\u3001\u63a5\u6536(receive)\u4e0e\u5173\u95ed(close)\uff1b\u53d1\u9001\u63a5\u6536\u90fd\u4f7f\u7528 &lt;- \u7b26\u53f7</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21-channel","title":"2.1 Channel\u6b7b\u9501","text":"<pre><code>func main() {\n    ch := make(chan int)  // \u6ca1\u6709\u7f13\u51b2\uff0c\u961f\u5217\u957f\u5ea6=0\uff1b\u76f8\u5f53\u4e8e\u53d1\u9001\u503c\u6ca1\u6709\u5b58\u7684\u5730\u65b9\uff0c\u9020\u6210\u6b7b\u9501\n    ch &lt;- 10\n    receiver := &lt;-ch\n    fmt.Println(receiver)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22-channel","title":"2.2 Channel\u5173\u95ed\u7279\u6027","text":"<pre><code>func main() {\n    ch := make(chan int, 2)\n    ch &lt;- 10\n    ch &lt;- 20\n\n    receiver1 := &lt;-ch\n    fmt.Println(receiver1) // 10\n    close(ch)              // \u5173\u95ed\u901a\u9053\uff0c\u961f\u5217\u53d8\u91cf\u53ef\u4ee5\u7ee7\u7eed\u53d6\u503c\uff1b\u53d1\u9001\u7684\u503c\u53d6\u5b8c\u4e4b\u540e\u9ed8\u8ba4\u4f1a\u53d6\u96f6\u503c\n\n    receiver2 := &lt;-ch\n    fmt.Println(receiver2) // 0\n\n    receiver3 := &lt;-ch\n    fmt.Println(receiver3) // 0\n}\n\n\n// 10\n// 20\n// 0\n</code></pre> <p>Channel\u5173\u95ed\u4e4b\u540e\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u5bf9\u5173\u95ed\u901a\u9053\u518d\u53d1\u9001\u503c\u4f1a\u5bfc\u81f4panic</li> <li>\u5bf9\u5173\u95ed\u901a\u9053\u53ef\u4ee5\u7ee7\u7eed\u53d6\u503c\uff0c\u53d6\u5b8c\u53d1\u9001\u503c\u4e4b\u540e\uff0c\u4f1a\u9ed8\u8ba4\u7ee7\u7eed\u53ef\u4ee5\u53d6\u5bf9\u5e94\u7c7b\u578b\u96f6\u503c</li> <li>\u5bf9\u5173\u95ed\u901a\u9053\u518d\u5173\u95ed\u4f1a\u5bfc\u81f4panic</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#23-channel","title":"2.3 Channel\u6709\u7f13\u51b2/\u65e0\u7f13\u51b2\u521b\u5efa\u573a\u666f","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#231","title":"2.3.1 \u6709\u7f13\u51b2\u521b\u5efa\u573a\u666f","text":"<p>\u6709\u7f13\u51b2\u521b\u5efa\u5c31\u76f8\u5f53\u4e8e\u5148\u5b58\u5728\u91cc\u9762\uff0c\u518d\u53d6\u51fa</p> <pre><code>func main() {\n    ch := make(chan int, 1)\n    ch &lt;- 10\n    receiver, ok := &lt;-ch  // ok\u662f\u5224\u65ad\u662f\u5426\u901a\u9053\u5df2\u5173\u95ed\uff08\u53d1\u9001\u503c\u53d6\u5b8c\u540e\u4f1a\u81ea\u52a8\u5173\u95ed\uff09\uff0c\u5f53\u53d6\u5b8c\u4e4b\u540e\uff0cok\u503c\u4e3afalse\n    fmt.Println(receiver, ok)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#232","title":"2.3.2 \u65e0\u7f13\u51b2\u521b\u5efa\u573a\u666f","text":"<p>\u4e00\u822c\u4f7f\u7528\u5728\u521b\u5efaGoroutine\uff0c\u4f8b\u5982\uff1a</p> <pre><code>func main() {\n    ch := make(chan int)\n    go recv(ch) // \u5fc5\u987b\u5148\u521b\u5efa\u534f\u7a0b\uff0c\u518d\u53d1\u9001\u503c\uff1b\u4e0d\u7136\u76f8\u5f53\u4e8e\u6ca1\u6709\u63a5\u6536\u8005\uff0c\u540c\u6837\u4f1a\u6b7b\u9501\n    ch &lt;- 10\n}\n\nfunc recv(ch chan int) {\n    fmt.Println(\"\u63a5\u6536\u503c\uff1a\", &lt;-ch)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#24-channel","title":"2.4 Channel\u4e09\u79cd\u53d6\u503c\u5199\u6cd5","text":"<p>\u7b2c\u4e00\u79cd\uff1a\u5224\u65ad\u662f\u5426\u5df2\u7ecf\u53d6\u5b8c</p> <pre><code>func main() {\n    ch := make(chan int, 100)\n    fmt.Println(\"\u957f\u5ea6\uff1a\", len(ch), \"\u5bb9\u91cf\uff1a\", cap(ch))\n\n    // \u533f\u540d\u51fd\u6570\u5faa\u73af\u9001\u5165\u503c\n    func() {\n        for i := 0; i &lt; 50; i++ {\n            ch &lt;- i\n        }\n        close(ch) // \u5173\u95ed\u901a\u9053\n    }()\n\n    // \u5faa\u73af\u53d6\u503c\u6253\u5370 -- \u5982\u679c\u53d1\u9001\u503c\u65f6\u6ca1\u6709\u5bf9\u5e94\u5173\u95ed\uff0c\u53d6\u503c\u8d85\u8fc7\u901a\u9053\u7684\u957f\u5ea6\u5c31\u4f1a\u62a5\u9519\uff08\u5373\u4f7f\u6ca1\u6709\u8fbe\u5230\u5bb9\u91cf\uff09\n    for {\n        i, ok := &lt;-ch\n        if !ok {\n            break\n        }\n        fmt.Println(\"i=\", i, \"ok=\", ok)\n    }\n}\n</code></pre> <p>\u7b2c\u4e8c\u79cd\uff1afor...range...\u76f4\u63a5\u53d6\u503c\uff08\u4f9d\u7136\u9700\u8981\u5173\u95ed\u901a\u9053\uff0c\u5426\u5219\u4f1a\u53d1\u751fpanic\uff09\uff08\u63a8\u8350\uff09</p> <p>for...range...\u4f7f\u7528\u5728\u8fd9\u91cc\u53ea\u80fd\u83b7\u53d6\u503c\uff0c\u6ca1\u6709\u7d22\u5f15\u3002</p> <pre><code>func main() {\n    ch := make(chan int, 100)\n    fmt.Println(\"\u957f\u5ea6\uff1a\", len(ch), \"\u5bb9\u91cf\uff1a\", cap(ch))\n\n    // \u533f\u540d\u51fd\u6570\u5faa\u73af\u9001\u5165\u503c\n    func() {\n        for i := 0; i &lt; 50; i++ {\n            ch &lt;- i\n        }\n        close(ch) // \u5173\u95ed\u901a\u9053\n    }()\n\n    // \u5faa\u73af\u53d6\u503c\u6253\u5370 -- \u76f4\u63a5\u53d6\u51fa\u5bf9\u5e94\u503c\n    for v := range ch {\n        fmt.Println(\"v=\", v)\n    }\n}\n</code></pre> <p>\u7b2c\u4e09\u79cd\uff1aselect\u8bed\u53e5\uff0c\u4e00\u79cd\u9ad8\u6548\u7684\u591a\u8def\u590d\u7528\u901a\u9053\u673a\u5236\u8bed\u6cd5\uff0c\u5141\u8bb8\u518d\u591a\u4e2a\u901a\u9053\u7b49\u5f85\u5e76\u5904\u7406\u6d88\u606f</p> <p>select\u8bed\u53e5\u662f Go \u8bed\u8a00\u5e76\u53d1\u7f16\u7a0b\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u63a7\u5236\u7ed3\u6784\uff0c\u4e13\u95e8\u4e3a\u901a\u9053\u8bbe\u8ba1\uff0c\u4f7f\u7528\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\u3002</p> <p>\u8bed\u6cd5\u4f2a\u4ee3\u7801\uff1a</p> <pre><code>select {\n    case &lt;-channel1:\n        // channel1\u51c6\u5907\u5b8c\u6bd5\n    case data := &lt;-channel2:\n        // channel2\u51c6\u5907\u5b8c\u6bd5,\u4e14\u53ef\u4ee5\u8bfb\u53d6\u5230\u6570\u636edata\n    case channel3 &lt;- data:\n        // channel2\u51c6\u5907\u5b8c\u6bd5,\u4e14\u53ef\u4ee5\u5199\u5165\u6570\u636edata\n    default:\n        // \u6ca1\u6709\u901a\u9053\u51c6\u5907\u5b8c\u6bd5...\n}\n</code></pre> <p>\u793a\u4f8b\uff1a\u4efb\u52a1\u8d85\u65f6\u5224\u65ad</p> <pre><code>func main() {\n    ch := make(chan int)\n\n    // \u534f\u7a0b\u4e2d\u505c\u75593\u79d2\u4e4b\u540e\uff0c\u53d1\u9001\u4e00\u4e2a\u503c\uff1a10\n    go func() {\n        time.Sleep(time.Second * 3)\n        ch &lt;- 10\n    }()\n\n    select {\n    case data, ok := &lt;-ch:\n        if ok {\n            fmt.Println(\"\u63a5\u6536\u503c\uff1a\", data)\n        } else {\n            fmt.Println(\"\u901a\u9053\u5df2\u5173\u95ed\")\n        }\n    case &lt;-time.After(time.Second * 2):  // time.After\u8fd4\u56de\u4e00\u4e2a\u53ea\u8bfb\u7684 Time \u7c7b\u578b\u901a\u9053\uff1b\u5982\u679c\u65f6\u95f4\u65e9\u4e8e\u5176\u4ed6\u901a\u9053\uff1b\u90a3\u5c31\u4f1a\u8d70\u8d85\u65f6~\n        fmt.Println(\"\u4efb\u52a1\u6267\u884c\u5df2\u8d85\u65f6\uff01\")\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_8","title":"3 \u5e76\u53d1\u4e2d\u9501\u5e94\u7528","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31-mutex","title":"3.1 \u4e92\u65a5\u9501\uff08Mutex\uff09","text":"<p>\u4e92\u65a5\u9501\uff08<code>sync.Mutex</code>\uff09\u662f\u6700\u57fa\u672c\u7684\u9501\u7c7b\u578b\uff0c\u5b83\u4fdd\u8bc1\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a goroutine \u53ef\u4ee5\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u3002</p> <p>\u7279\u70b9\uff1a</p> <ol> <li>\u6392\u4ed6\u6027\uff1a\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a goroutine \u80fd\u6301\u6709\u9501</li> <li>\u963b\u585e\u6027\uff1a\u5176\u4ed6 goroutine \u5fc5\u987b\u7b49\u5f85\u9501\u91ca\u653e</li> <li>\u4e0d\u53ef\u91cd\u5165\uff1a\u540c\u4e00\u4e2a goroutine \u4e0d\u80fd\u91cd\u590d\u9501\u5b9a\u5df2\u6301\u6709\u7684\u9501\uff08\u4f1a\u5bfc\u81f4\u6b7b\u9501\uff09</li> </ol> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u5bf9\u5171\u4eab\u6570\u636e\u7684\u7b80\u5355\u8bfb\u5199\u64cd\u4f5c</li> <li>\u4e34\u754c\u533a\u4ee3\u7801\u6267\u884c\u65f6\u95f4\u8f83\u77ed\u7684\u60c5\u51b5</li> </ul> <pre><code>var shareInt = 0    // \u5171\u4eab\u5168\u5c40\u53d8\u91cf\nvar lock sync.Mutex // \u4e92\u65a5\u9501\nvar wg sync.WaitGroup\n\n// \u5b9a\u4e49\u529f\u80fd\u51fd\u6570\nfunc AutoAdd() {\n    defer wg.Done()  // \u4efb\u52a1\u5b8c\u6210\uff0c\u8ba1\u6570\u5668\u51cf1\n\n    for i := 0; i &lt; 5000; i++ {\n        lock.Lock()  // \u52a0\u9501\n        shareInt = shareInt + 1\n        lock.Unlock()  // \u89e3\u9501\n    }\n}\n\nfunc main() {\n    wg.Add(2)  // Goroutine\u4efb\u52a1\u4e2a\u6570\n    go AutoAdd()\n    go AutoAdd()\n    wg.Wait()\n    fmt.Println(\"shareInt:\", shareInt)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#32-rwmutex","title":"3.2 \u8bfb\u5199\u9501\uff08RWMutex\uff09","text":"<p>\u8bfb\u5199\u9501\uff08<code>sync.RWMutex</code>\uff09\u63d0\u4f9b\u4e86\u66f4\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\uff1a</p> <ul> <li>\u591a\u4e2a goroutine \u53ef\u4ee5\u540c\u65f6\u6301\u6709\u8bfb\u9501</li> <li>\u5199\u9501\u662f\u6392\u4ed6\u7684\uff08\u4e0e\u4e92\u65a5\u9501\u76f8\u540c\uff09</li> </ul> <p>\u7279\u70b9\uff1a</p> <ol> <li>\u8bfb\u5171\u4eab\uff1a\u591a\u4e2a\u8bfb\u64cd\u4f5c\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c</li> <li>\u5199\u4e92\u65a5\uff1a\u5199\u64cd\u4f5c\u662f\u6392\u4ed6\u7684</li> <li>\u8bfb\u5199\u4e92\u65a5\uff1a\u6709\u5199\u64cd\u4f5c\u65f6\u4e0d\u80fd\u6709\u8bfb\u64cd\u4f5c\uff0c\u53cd\u4e4b\u4ea6\u7136</li> </ol> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f</li> <li>\u5171\u4eab\u6570\u636e\u88ab\u9891\u7e41\u8bfb\u53d6\u4f46\u5f88\u5c11\u4fee\u6539\u7684\u60c5\u51b5</li> </ul> <pre><code>/**/\n\npackage main\n\nimport (\n    \"fmt\"\n    \"sync\"\n    \"time\"\n)\n\nvar (\n    shareInt int            // \u5171\u4eab\u5168\u5c40\u53d8\u91cf\n    wg       sync.WaitGroup // \u540c\u6b65\u7b49\u5f85\u7ec4\n    lock     sync.Mutex     // \u4e92\u65a5\u9501 -- \u6d4b\u8bd5\u8017\u65f6\uff1a2153ms\n    rwLock   sync.RWMutex   // \u8bfb\u5199\u9501-\u8bfb\u591a\u5199\u5c11\u573a\u666f\u5e94\u7528 -- \u6d4b\u8bd5\u8017\u65f6\uff1a1008ms\n)\n\n// \u5b9a\u4e49\u529f\u80fd\u51fd\u6570\nfunc Read() {\n    // defer wg.Done()\n    // defer lock.Unlock()\n    // lock.Lock()\n\n    defer wg.Done()\n    defer rwLock.RUnlock() // \u89e3\u8bfb\u9501\n    rwLock.RLock()         // \u52a0\u8bfb\u9501\n\n    time.Sleep(time.Millisecond * 1) // \u8bbe\u8bfb\u64cd\u4f5c\u9700\u89811\u6beb\u79d2\n}\n\nfunc Write() {\n    // defer wg.Done()\n    // defer lock.Unlock()\n    // lock.Lock()\n\n    defer wg.Done()\n    defer rwLock.Unlock() // \u89e3\u5199\u9501\n    rwLock.Lock()         // \u52a0\u5199\u9501\n\n    shareInt++\n    time.Sleep(time.Millisecond * 100) // \u8bbe\u5199\u64cd\u4f5c\u9700\u898110\u6beb\u79d2\n}\n\nfunc Run() {\n    defer wg.Wait()\n\n    // \u8bfb\u64cd\u4f5c-10000\u6b21\n    for i := 0; i &lt; 1000; i++ {\n        wg.Add(1)\n        go Read()\n    }\n\n    // \u5199\u64cd\u4f5c-100\u6b21\n    for i := 0; i &lt; 10; i++ {\n        wg.Add(1)\n        go Write()\n    }\n}\n\nfunc main() {\n    start := time.Now()\n    Run()\n    usedTime := time.Since(start).Milliseconds()\n    fmt.Printf(\"usedTime: %dms\\n\", usedTime)\n    fmt.Println(\"shareInt:\", shareInt)\n}\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <pre><code>sync.RWMutex.Lock() \u4e0e sync.Mutex.Lock() \u662f\u6709\u533a\u522b\u7684\uff0c**\u4e92\u65a5\u9501**\uff1a\u53ea\u6709\u4e00\u4e2a\u72b6\u6001\u2014\u2014\u52a0\u9501/\u89e3\u9501\uff1b**\u8bfb\u5199\u9501**\uff1a\u5206\u4e3a\u8bfb\u9501\uff08RLock\uff09\u548c\u5199\u9501\uff08Lock\uff09\uff1b\n\n\u8bfb\u5199\u9501\u4e4b\u4e2d\u7684`Lock()`\uff1a\u5199\u9501\uff0c\u72ec\u5360\uff1b\u5f53\u5199\u9501\u88ab\u6301\u6709\u65f6\uff0c\u8bfb\u5199\u90fd\u88ab\u963b\u585e\u3002\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#go","title":"\ud83d\udcda Go\u8bed\u8a00\u7684\u5305","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_17","title":"1 \u5305\u58f0\u660e","text":"<ul> <li>\u6bcf\u4e2aGo\u6587\u4ef6\u5fc5\u987b\u4ee5<code>package</code>\u58f0\u660e\u5f00\u5934</li> <li>\u4e3b\u7a0b\u5e8f\u5fc5\u987b\u58f0\u660e\u4e3a<code>package main</code></li> <li>\u540c\u4e00\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5fc5\u987b\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5305</li> </ul> <pre><code>package main  // \u4e3b\u7a0b\u5e8f\u5305\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello, World!\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_14","title":"2 \u5bfc\u5165\u8def\u5f84","text":"<ul> <li>\u6807\u51c6\u5e93\u5305\u76f4\u63a5\u4f7f\u7528\u77ed\u540d\u79f0(\u5982\"fmt\", \"net/http\")</li> <li>\u7b2c\u4e09\u65b9\u5305\u4f7f\u7528\u5b8c\u6574\u8def\u5f84(\u5982\"github.com/gin-gonic/gin\")</li> <li>\u672c\u5730\u5305\u4f7f\u7528\u76f8\u5bf9\u4e8e<code>GOPATH</code>\u6216\u6a21\u5757\u6839\u76ee\u5f55\u7684\u8def\u5f84</li> </ul> <pre><code>import (\n    \"fmt\"                // \u6807\u51c6\u5e93\n    \"math/rand\"          // \u6807\u51c6\u5e93\u5b50\u5305\n\n    \"github.com/foo/bar\" // \u7b2c\u4e09\u65b9\u5305\n    \"mymodule/mypkg\"     // \u672c\u5730\u6a21\u5757\u5305\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_9","title":"3 \u5bfc\u5165\u522b\u540d","text":"<p>\u53ef\u4ee5\u4e3a\u5bfc\u5165\u7684\u5305\u6307\u5b9a\u522b\u540d\uff0c\u89e3\u51b3\u547d\u540d\u51b2\u7a81\u6216\u7b80\u5316\u957f\u5305\u540d\uff1a</p> <pre><code>import (\n    \"crypto/rand\"\n    mrand \"math/rand\"  // \u522b\u540d\n    f \"fmt\"            // \u7b80\u77ed\u522b\u540d\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4_8","title":"4 \u70b9\u5bfc\u5165","text":"<p>\u4f7f\u7528\u70b9(.)\u5bfc\u5165\u5305\u65f6\uff0c\u53ef\u4ee5\u7701\u7565\u5305\u540d\u524d\u7f00(\u4e0d\u63a8\u8350\u5e38\u7528)\uff1a</p> <pre><code>import . \"fmt\"\n\nfunc main() {\n    Println(\"\u76f4\u63a5\u4f7f\u7528Println\u800c\u4e0d\u9700\u8981fmt\u524d\u7f00\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5_8","title":"5 \u7a7a\u767d\u5bfc\u5165\uff08\u533f\u540d\u5bfc\u5165\uff09","text":"<p>\u4f7f\u7528\u4e0b\u5212\u7ebf\u5bfc\u5165\u5305\u4ec5\u6267\u884c\u5305\u7684init\u51fd\u6570\u800c\u4e0d\u76f4\u63a5\u4f7f\u7528\u5176\u529f\u80fd\uff1a</p> <pre><code>import _ \"image/png\"  // \u6ce8\u518cPNG\u89e3\u7801\u5668\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6_6","title":"6 \u53ef\u89c1\u6027\u89c4\u5219","text":"<ul> <li>\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u6807\u8bc6\u7b26(\u53d8\u91cf\u3001\u51fd\u6570\u3001\u7c7b\u578b\u7b49)\u662f\u516c\u5f00\u7684(exported)</li> <li>\u5c0f\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u6807\u8bc6\u7b26\u662f\u5305\u79c1\u6709\u7684</li> </ul> <pre><code>package mypkg\n\nvar PublicVar int    // \u53ef\u88ab\u5176\u4ed6\u5305\u8bbf\u95ee\nvar privateVar int   // \u4ec5\u672c\u5305\u5185\u53ef\u8bbf\u95ee\n\nfunc PublicFunc() {}  // \u53ef\u88ab\u5176\u4ed6\u5305\u8c03\u7528\nfunc privateFunc() {} // \u4ec5\u672c\u5305\u5185\u53ef\u8c03\u7528\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7-init","title":"7 init\u51fd\u6570","text":"<ul> <li>\u6bcf\u4e2a\u5305\u53ef\u4ee5\u5305\u542b\u591a\u4e2ainit\u51fd\u6570</li> <li>init\u51fd\u6570\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\u81ea\u52a8\u8c03\u7528</li> <li>\u6267\u884c\u987a\u5e8f\uff1a\u5bfc\u5165\u7684\u5305\u5148\u521d\u59cb\u5316\uff0c\u540c\u4e00\u5305\u5185\u6309\u6587\u4ef6\u540d\u5b57\u6bcd\u987a\u5e8f</li> </ul> <pre><code>package mypkg\n\nfunc init() {\n    // \u521d\u59cb\u5316\u4ee3\u7801\n}\n\nfunc init() {\n    // \u53ef\u4ee5\u6709\u591a\u4e2ainit\u51fd\u6570\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#8_3","title":"8 \u5305\u6587\u6863","text":"<ul> <li>\u5305\u6ce8\u91ca\u5e94\u7d27\u63a5\u5728package\u58f0\u660e\u4e4b\u524d</li> <li>\u4f7f\u7528\u5b8c\u6574\u7684\u53e5\u5b50\uff0c\u4ee5\u5305\u540d\u5f00\u5934</li> <li>\u53ef\u4ee5\u4f7f\u7528godoc\u5de5\u5177\u751f\u6210\u6587\u6863</li> </ul> <pre><code>// Package mypkg provides some useful utilities.\n// This is a sample package documentation.\npackage mypkg\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#9-internal","title":"9 \u5185\u90e8\u5305(internal)","text":"<ul> <li>\u653e\u7f6e\u5728<code>internal</code>\u76ee\u5f55\u4e0b\u7684\u5305\u53ea\u80fd\u88ab\u5176\u7236\u76ee\u5f55\u53ca\u5176\u5b50\u76ee\u5f55\u4e2d\u7684\u4ee3\u7801\u5bfc\u5165</li> <li>Go 1.4\u5f15\u5165\u7684\u673a\u5236\uff0c\u7528\u4e8e\u9650\u5236\u5305\u7684\u4f7f\u7528\u8303\u56f4</li> </ul> <pre><code>mymodule/\n\u251c\u2500\u2500 internal/\n\u2502   \u2514\u2500\u2500 myinternal/  // \u53ea\u80fd\u88abmymodule\u53ca\u5176\u5b50\u76ee\u5f55\u5bfc\u5165\n\u2514\u2500\u2500 mypkg/\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#10_1","title":"10. \u6d4b\u8bd5\u5305","text":"<ul> <li>\u6d4b\u8bd5\u6587\u4ef6\u4ee5<code>_test.go</code>\u7ed3\u5c3e</li> <li>\u6d4b\u8bd5\u51fd\u6570\u4ee5<code>Test</code>\u5f00\u5934</li> <li>\u6d4b\u8bd5\u5305\u53ef\u4ee5\u4e0e\u4e3b\u5305\u540c\u540d\u6216\u52a0<code>_test</code>\u540e\u7f00</li> </ul> <pre><code>package mypkg_test  // \u5916\u90e8\u6d4b\u8bd5\u5305\n\nimport (\n    \"testing\"\n    \"mymodule/mypkg\"\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11-go-111","title":"11. \u6a21\u5757\u652f\u6301(Go 1.11+)","text":"<ul> <li>\u4f7f\u7528go.mod\u6587\u4ef6\u5b9a\u4e49\u6a21\u5757</li> <li>\u6a21\u5757\u8def\u5f84\u6210\u4e3a\u5305\u7684\u5bfc\u5165\u8def\u5f84</li> <li>\u7248\u672c\u63a7\u5236\u66f4\u52a0\u660e\u786e</li> </ul> <pre><code>module github.com/username/mymodule\n\ngo 1.21\n\nrequire (\n    github.com/some/dependency v1.2.3\n)\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12_4","title":"12. \u5305\u547d\u540d\u60ef\u4f8b","text":"<ul> <li>\u5305\u540d\u5e94\u7b80\u77ed\u3001\u5c0f\u5199\u3001\u6709\u610f\u4e49</li> <li>\u907f\u514d\u4f7f\u7528\u4e0b\u5212\u7ebf\u6216\u6df7\u5408\u5927\u5c0f\u5199</li> <li>\u5355\u6570\u5f62\u5f0f\u547d\u540d(\u5982<code>url</code>\u800c\u975e<code>urls</code>)</li> <li>\u907f\u514d\u4e0e\u6807\u51c6\u5e93\u91cd\u540d</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13-go118","title":"13 \u5de5\u4f5c\u7a7a\u95f4\uff08Go1.18+\uff09","text":"<p>\u591a\u4e2a\u6a21\u5757\u65b9\u6cd5\u5f15\u7528\uff1a\u4f7f\u7528workspace\u5904\u7406</p> <pre><code>WORKDEMO\n\u251c\u2500app\n\u2502      go.mod\n\u2502      main.go\n\u2502\n\u2514\u2500common\n        go.mod\n        utils.go\n</code></pre> <p>main.go\u9700\u8981\u4f7f\u7528common\u6a21\u5757\u91cc\u9762\u7684utils\u5305\u4e2d\u7684\u65b9\u6cd5\uff0c\u5982\u4f55\u505a\uff1fGo1.18\u4e4b\u524d\u9700\u8981\u4f7f\u7528replace\u5904\u7406\uff0c\u8fd9\u91cc\u4e0d\u505a\u793a\u4f8b\uff1b\u63a8\u8350\u4f7f\u7528Go1.18+\u7684\u65b9\u5f0f\uff0c\u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4\u5efa\u7acb\u8054\u7cfb.</p> <pre><code># \u521d\u59cb\u5316\u5de5\u4f5c\u7a7a\u95f4-\u521b\u5efawork\u6587\u4ef6\ngo work init\n\n# \u6dfb\u52a0\u9700\u8981\u4f7f\u7528\u7684\u6a21\u5757\uff08go.work\u6587\u4ef6\u4f1a\u81ea\u52a8\u5199\u5165\u5185\u5bb9\uff09\ngo work use app common\n</code></pre> <p>\u6267\u884c\u547d\u4ee4\u4e4b\u540e\uff0cgo.work\u6587\u4ef6\u5185\u5bb9\u53d8\u66f4\u4e3a\uff1a</p> <pre><code>go 1.24.5\n\nuse (\n    ./app\n    ./common\n)\n</code></pre> <p>\u8fd9\u6837\u518d\u53bbmain.go\u4e2d\u5bfc\u5165\u5305\u4f7f\u7528\u5b8c\u5168\u6ca1\u95ee\u9898\u4e86~</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#goerror","title":"\ud83d\udcda Go\u9519\u8bef\u5904\u7406\uff08error\uff09","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1_18","title":"1 \u6807\u51c6\u9519\u8bef","text":"<p>Go\u8bed\u8a00\u9519\u8bef\u63a5\u53e3\u5b9a\u4e49\uff1a\u4efb\u4f55\u5b9e\u73b0\u6b64\u63a5\u53e3\u7684\u7c7b\u578b\uff0c\u90fd\u88ab\u5f53\u6210\u662f\u9519\u8bef\u3002</p> <pre><code>type error interface {\n    Error() string\n}\n</code></pre> <p>go\u8bed\u8a00\u662f\u4e00\u79cd\u9762\u5411\u5931\u8d25\u7684\u7f16\u7a0b\uff0c\u7406\u8bba\u4e0a\u6bcf\u4e00\u4e2a\u51fd\u6570\u90fd\u5e94\u8be5\u8fd4\u56deerror\uff1b\u4ee5\u4fdd\u8bc1\u5bf9\u9519\u8bef\u7684\u5904\u7406\u3002</p> <pre><code>/**/\n\npackage main\n\nimport (\n    \"errors\"\n    \"fmt\"\n    \"reflect\"\n)\n\ntype User struct {\n    Name string\n}\n\n// \u5224\u65ad\u662f\u5426\u5b58\u5728\u5b57\u6bb5\nfunc HasField(obj interface{}, fieldName string) bool {\n    // \u83b7\u53d6\u7ed3\u6784\u4f53\u7684\u53cd\u5c04\u503c\n    val := reflect.ValueOf(obj)\n\n    // \u5982\u679c\u662f\u6307\u9488\uff0c\u9700\u8981\u89e3\u5f15\u7528\n    if val.Kind() == reflect.Ptr {\n        val = val.Elem()\n    }\n\n    // \u68c0\u67e5\u662f\u5426\u662f\u7ed3\u6784\u4f53\n    if val.Kind() != reflect.Struct {\n        return false\n    }\n\n    // \u83b7\u53d6\u5b57\u6bb5\n    field := val.FieldByName(fieldName)\n    return field.IsValid() // \u5982\u679c\u5b57\u6bb5\u5b58\u5728\uff0c\u8fd4\u56de true\n}\n\n// \u83b7\u53d6\u5b57\u6bb5\u503c-\u6ce8\u610f\u8fd4\u56de\u63a5\u53e3\u7c7b\u578b-\u9700\u8981\u8f6c\u6362\nfunc GetFieldValue(obj interface{}, fieldName string) (interface{}, error) {\n    val := reflect.ValueOf(obj)\n    if val.Kind() == reflect.Ptr {\n        val = val.Elem()\n    }\n\n    if val.Kind() != reflect.Struct {\n        return nil, errors.New(\"not a struct\")\n    }\n\n    field := val.FieldByName(fieldName)\n    if !field.IsValid() {\n        return nil, errors.New(\"field does not exist\")\n    }\n\n    return field.Interface(), nil\n}\n\n// \u8bbe\u7f6e\u5b57\u6bb5\u503c-\u81ea\u52a8\u5224\u65ad\u7c7b\u578b\u662f\u5426\u4e0e\u539f\u6765\u5339\u914d\nfunc SetFieldValue(obj interface{}, fieldName string, newValue interface{}) error {\n    val := reflect.ValueOf(obj)\n    if val.Kind() != reflect.Ptr || val.Elem().Kind() != reflect.Struct {\n        return errors.New(\"must be a pointer to struct\")\n    }\n\n    field := val.Elem().FieldByName(fieldName)\n    if !field.IsValid() {\n        return errors.New(\"field does not exist\")\n    }\n\n    if !field.CanSet() {\n        return errors.New(\"field cannot be set (unexported?)\")\n    }\n\n    newVal := reflect.ValueOf(newValue)\n    if field.Type() != newVal.Type() {\n        return errors.New(\"type mismatch\")\n    }\n\n    field.Set(newVal)\n    return nil\n}\n\nfunc (u *User) GetFieldValue(field string) (value string, err error) {\n    if !HasField(u, field) {\n        return \"\", fmt.Errorf(\"field '%s' not found\", field)\n    }\n\n    setErr := SetFieldValue(u, field, 123) // \u8bbe\u7f6e\u5b57\u6bb5\u503c\n    if setErr != nil {\n        fmt.Println(\"Error setting value:\", setErr)\n    }\n\n    val, _ := GetFieldValue(u, field) // \u83b7\u53d6\u5b57\u6bb5\u503c\n    return val.(string), nil\n}\n\nfunc main() {\n    user := &amp;User{Name: \"cenhongchang\"}\n    name, err := user.GetFieldValue(\"Name\")\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    fmt.Println(name, err)\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2_15","title":"2 \u5229\u7528\u63a5\u53e3\u81ea\u5b9a\u4e49\u9519\u8bef","text":"<p>\u793a\u4f8b\uff1a\u5b9e\u73b0\u9519\u8bef\u63a5\u53e3 / \u81ea\u5b9a\u4e49\u9519\u8bef / \u5224\u65ad\u8fd4\u56de\u7684\u662f\u81ea\u5b9a\u4e49\u54ea\u79cd\u9519\u8bef / \u5c06error\u63a5\u53e3\u5bf9\u8c61\u8f6c\u4e3astruct\u5bf9\u8c61\u83b7\u53d6\u5176\u4e2d\u9519\u8bef\u4fe1\u606f</p> <pre><code>/**/\n\npackage main\n\nimport (\n    \"errors\"\n    \"fmt\"\n)\n\n// \u5b9a\u4e49\u9519\u8bef\u7ed3\u6784\u4f53\ntype MyError struct {\n    Message string\n}\n\n// \u81ea\u5b9a\u4e49\u9519\u8befmyError\u7ed3\u6784\u4f53\u5b9e\u73b0\u9519\u8bef\u63a5\u53e3-Error()\nfunc (e *MyError) Error() string {\n    return e.Message\n}\n\n// \u5229\u7528\u7ed3\u6784\u4f53\u5b9e\u4f8b\u5316\u81ea\u5b9a\u4e49\u9519\u8bef\nvar (\n    MoneyNotEnough = &amp;MyError{Message: \"not enough money\"}\n    MoneyTooMuch   = &amp;MyError{Message: \"pay too much\"}\n)\n\ntype User struct {\n    Name string\n}\n\nfunc (u *User) Pay(money int) error {\n    if money &lt; 100 {\n        return MoneyNotEnough // \u8fd4\u56de\u5177\u4f53\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\n    } else if money &gt; 200 {\n        return MoneyTooMuch\n    }\n    return nil\n}\n\nfunc main() {\n    user := new(User)\n    err := user.Pay(20) // \u5b9a\u4e49\u51fd\u6570\u65f6\u8fd4\u56de\u7684\u662ferror\u63a5\u53e3/\u4e0d\u662f\u7ed3\u6784\u4f53\u7c7b\u578b-\u9700\u8981\u6ce8\u610f\uff1b\u5f53\u7136\u4e5f\u53ef\u4ee5\u6539\u4e3a\u5bf9\u5e94\u7ed3\u6784\u4f53\u6307\u9488\n    if err != nil {\n        if errors.Is(err, MoneyNotEnough) {\n            fmt.Println(\"\u9519\u8bef\u539f\u56e0\u662fMoneyNotEnough:\", err)\n            // \u628a\u63a5\u53e3\u8f6c\u4e3a\u5177\u4f53\u7684\u7ed3\u6784\u4f53\u7c7b\u578b\n            var myError *MyError\n            if ok := errors.As(err, &amp;myError); ok {\n                fmt.Println(\"\u5df2\u5c06\u8fd4\u56de\u7684\u63a5\u53e3err\u5bf9\u8c61\u8f6c\u4e3a\u5177\u4f53\u7ed3\u6784\u4f53\u5bf9\u8c61\u6307\u9488\uff0c\u9519\u8bef\u4fe1\u606f\uff1a\", myError.Message)\n            }\n        } else if errors.Is(err, MoneyTooMuch) {\n            fmt.Println(\"\u9519\u8bef\u539f\u56e0\u662fMoneyTooMuch:\", err)\n        } else {\n            fmt.Println(\"\u9519\u8bef\u539f\u56e0\u975e\u81ea\u5b9a\u4e49\u9519\u8bef:\", err)\n        }\n        return\n    }\n\n    fmt.Println(\"\u652f\u4ed8\u6210\u529f\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3_10","title":"3 \u9519\u8bef\u5c01\u88c5","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31-fmterrorf","title":"3.1 fmt.Errorf()","text":"<p>\u4f7f\u7528fmt.Errorf()\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u9519\u8bef\u8fdb\u884c\u5c01\u88c5\uff0c\u5c01\u88c5\u540e\u7684\u9519\u8bef\u548c\u4e4b\u524d\u7684\u76f8\u7b49</p> <ul> <li>\u4f7f\u7528%w \u5d4c\u5957\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u9519\u8bef</li> <li>errors.Unwrap\u7528\u4e8e\u5c06\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u5c55\u5f00\uff0c\u5f97\u5230\u4e0b\u4e00\u5c42\u9519\u8bef\u5bf9\u8c61\uff08\u672a\u5c01\u88c5\u524d\u7684\uff09</li> </ul> <pre><code>func main() {\n    originalErr := errors.New(\"\u539f\u59cb\u9519\u8bef\")\n\n    // %w \u5d4c\u5957\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u9519\u8bef\n    newError := fmt.Errorf(\"error: %w\", originalErr)\n    fmt.Println(\"newError:\", newError)\n\n    if errors.Is(newError, originalErr) {\n        fmt.Println(\"\u8fd9\u4e24\u4e2a\u9519\u8bef\u76f8\u7b49\")\n    }\n\n    // errors.Unwrap\u7528\u4e8e\u5c06\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u5c55\u5f00\uff0c\u5f97\u5230\u4e0b\u4e00\u5c42\u9519\u8bef\u5bf9\u8c61\n    originalErr1 := errors.Unwrap(newError)\n    fmt.Println(\"originalErr1:\", originalErr1)\n\n    if errors.Is(originalErr, originalErr1) {\n        fmt.Println(\"\u8fd9\u4e24\u4e2a\u9519\u8bef\u76f8\u7b49\")\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31-errorsjoingo120","title":"3.1 errors.Join()\uff08Go1.20+\uff09","text":"<p><code>errors.Join()</code> \u662f Go 1.20 \u7248\u672c\u5f15\u5165\u7684\u4e00\u4e2a\u5b9e\u7528\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u591a\u4e2a\u9519\u8bef\u5408\u5e76\u4e3a\u4e00\u4e2a\u590d\u5408\u9519\u8bef\u3002</p> <pre><code>package main\n\nimport (\n    \"errors\"\n    \"fmt\"\n)\n\nfunc main() {\n    err1 := errors.New(\"error 1\")\n    err2 := errors.New(\"error 2\")\n    err3 := errors.New(\"error 3\")\n\n    combinedErr := errors.Join(err1, err2, err3)\n    fmt.Println(combinedErr)\n    // \u8f93\u51fa: error 1\n    //       error 2\n    //       error 3\n}\n</code></pre> <p>\u4e3b\u8981\u7279\u6027:</p> <ol> <li>\u81ea\u52a8\u8fc7\u6ee4nil\u9519\u8bef\uff1a</li> </ol> <pre><code>err := errors.Join(nil, errors.New(\"real error\"), nil)\n// \u53ea\u5305\u542b\"real error\"\n</code></pre> <ol> <li> <p>\u5355\u9519\u8bef\u4f18\u5316\uff1a</p> </li> <li> <p>\u5982\u679c\u53ea\u4f20\u5165\u4e00\u4e2a\u975enil\u9519\u8bef\uff0c\u76f4\u63a5\u8fd4\u56de\u8be5\u9519\u8bef</p> </li> <li> <p>\u5982\u679c\u6240\u6709\u9519\u8bef\u90fd\u662fnil\uff0c\u8fd4\u56denil</p> </li> <li> <p>\u591a\u884c\u9519\u8bef\u4fe1\u606f\uff1a</p> </li> <li> <p>\u590d\u5408\u9519\u8bef\u7684<code>Error()</code>\u65b9\u6cd5\u8fd4\u56de\u591a\u884c\u5b57\u7b26\u4e32</p> </li> <li>\u6bcf\u884c\u5bf9\u5e94\u4e00\u4e2a\u5b50\u9519\u8bef</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-panic-","title":"4 panic - \u8fd0\u884c\u65f6\u9519\u8bef","text":"<p>\u76f4\u63a5\u5904\u7406\uff1a</p> <pre><code>func main() {\n    defer func() {\n        if r := recover(); r != nil {\n            fmt.Println(\"\u6355\u83b7\u5230\u5f02\u5e38\uff1a\", r)\n        }\n    }()\n\n    panic(\"\u7a0b\u5e8f\u5f02\u5e38\uff0c\u5c06\u81ea\u52a8\u9000\u51fa...\")\n}\n</code></pre> <p>\u8d4b\u503c\u7ed9\u51fd\u6570\u9519\u8bef\u5bf9\u8c61\u8fd4\u56de\u503c\uff1a</p> <pre><code>func myTest(a, b int) (result int, err error) {  // \u63d0\u524d\u6307\u5b9a\u8fd4\u56de\u53d8\u91cf\u7684\u521d\u59cb\u5316\uff1berror\u7c7b\u578b\u96f6\u503c\u4e3anil\n    defer func() {\n        if r := recover(); r != nil {\n            fmt.Println(\"\u6355\u83b7\u5f02\u5e38\uff1a\", r)\n            err = errors.New(\"\u9664\u6570\u4e0d\u80fd\u4e3a\u96f6\")  // \u4fee\u6539\u8fd4\u56de\u53d8\u91cf\n        }\n    }()\n\n    result = a / b\n    return result, err\n}\n\nfunc main() {\n    result, err := myTest(10, 0)\n    if err != nil {\n        fmt.Println(\"\u53d1\u751f\u9519\u8bef:\", err)\n        return\n    }\n    fmt.Println(\"\u8ba1\u7b97\u7ed3\u679c:\", result)\n}\n\n// \u6355\u83b7\u5f02\u5e38\uff1a runtime error: integer divide by zero\n// \u53d1\u751f\u9519\u8bef: \u9664\u6570\u4e0d\u80fd\u4e3a\u96f6\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#gonet","title":"\ud83d\udcda Go\u7f51\u7edc\u7f16\u7a0b\uff08net\u5305\uff09","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-tcp","title":"1 TCP\u7f51\u7edc\u7f16\u7a0b","text":"<p>TCP\u534f\u8bae\uff1aTCP\uff08Transmission Control Protocol\uff0c\u4f20\u8f93\u63a7\u5236\u534f\u8bae\uff09 \u662f\u4e00\u79cd\u9762\u5411\u8fde\u63a5\u7684\u3001\u53ef\u9760\u7684\u3001\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\u4f20\u8f93\u5c42\u901a\u4fe1\u534f\u8bae\u3002</p> <ol> <li>\u4f20\u8f93\u5c42\u534f\u8bae\uff1a\u5b83\u5de5\u4f5c\u5728 OSI \u6a21\u578b\u7684\u7b2c\u56db\u5c42\uff08\u6216 TCP/IP \u6a21\u578b\u7684\u7b2c\u4e09\u5c42\uff09\uff0c\u8d1f\u8d23\u4e3a\u4e0a\u5c42\u5e94\u7528\uff08\u5982 HTTP\u3001FTP\u3001\u7535\u5b50\u90ae\u4ef6\uff09\u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u901a\u4fe1\u670d\u52a1\u3002</li> <li>\u9762\u5411\u8fde\u63a5\uff1a\u5728\u6570\u636e\u4f20\u8f93\u5f00\u59cb\u4e4b\u524d\uff0c\u901a\u4fe1\u53cc\u65b9\u5fc5\u987b\u9996\u5148\u5efa\u7acb\u4e00\u4e2a\u53ef\u9760\u7684\u8fde\u63a5\uff08\u901a\u8fc7\u201c\u4e09\u6b21\u63e1\u624b\u201d\uff09\uff0c\u4f20\u8f93\u7ed3\u675f\u540e\u518d\u65ad\u5f00\u8fde\u63a5\uff08\u901a\u8fc7\u201c\u56db\u6b21\u6325\u624b\u201d\uff09\u3002\u8fd9\u5c31\u50cf\u6253\u7535\u8bdd\uff0c\u9700\u8981\u5148\u62e8\u901a\uff0c\u901a\u8bdd\uff0c\u518d\u6302\u65ad\u3002</li> <li>\u53ef\u9760\u7684\uff1aTCP \u4f7f\u7528\u5404\u79cd\u673a\u5236\uff08\u5982\u786e\u8ba4\u5e94\u7b54\u3001\u8d85\u65f6\u91cd\u4f20\u3001\u5e8f\u5217\u53f7\u7b49\uff09\u6765\u786e\u4fdd\u6570\u636e\u80fd\u591f\u51c6\u786e\u3001\u4e0d\u91cd\u590d\u3001\u4e0d\u5931\u5e8f\u5730\u5230\u8fbe\u5bf9\u65b9\u3002</li> <li>\u57fa\u4e8e\u5b57\u8282\u6d41\uff1aTCP \u5c06\u5e94\u7528\u5c42\u4ea4\u4e0b\u6765\u7684\u6570\u636e\u4ec5\u4ec5\u89c6\u4e3a\u4e00\u8fde\u4e32\u65e0\u7ed3\u6784\u7684\u5b57\u8282\u6d41\u3002\u5b83\u4e0d\u5173\u5fc3\u8fd9\u4e9b\u5b57\u8282\u6d41\u4ee3\u8868\u4ec0\u4e48\u542b\u4e49\uff08\u5982\u56fe\u7247\u3001\u6587\u5b57\uff09\uff0c\u5b83\u53ea\u8d1f\u8d23\u5c06\u8fd9\u4e9b\u5b57\u8282\u6d41\u53ef\u9760\u5730\u4f20\u8f93\u5230\u5bf9\u7aef\u3002\u63a5\u6536\u65b9\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u81ea\u5df1\u89e3\u6790\u8fd9\u4e9b\u5b57\u8282\u6d41\u3002</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11-tcpserver-","title":"1.1 tcpserver-\u670d\u52a1\u7aef","text":"<ul> <li>\u963b\u585e\u76d1\u542cIP+\u7aef\u53e3</li> <li>\u5ba2\u6237\u7aef\u8bf7\u6c42\u63a5\u6536\uff0c\u5efa\u7acb\u8fde\u63a5</li> <li>\u521b\u5efagoroutine\u5904\u7406\u8bf7\u6c42</li> <li>\u5173\u95ed\u8fde\u63a5</li> <li>\u5173\u95ed\u76d1\u542c\u670d\u52a1</li> </ul> <pre><code>/**/\n\npackage main\n\nimport (\n    \"bufio\"\n    \"log\"\n    \"net\"\n)\n\nfunc main() {\n    // \u76d1\u542cIP+\u7aef\u53e3 -&gt; \u6807\u8bc6\u67d0\u4e00\u4e2a\u7a0b\u5e8f\n    listen, err := net.Listen(\"tcp\", \"127.0.0.1:8080\")\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer listen.Close()\n\n    for {\n        // \u961f\u5217\u6d88\u606f\u63a5\u6536 / \u5efa\u7acb\u8fde\u63a5\n        conn, err := listen.Accept()\n        if err != nil {\n            continue\n        }\n        // \u534f\u7a0b\u5904\u7406\n        go process(conn)\n\n    }\n}\n\nfunc process(conn net.Conn) {\n    defer conn.Close()\n\n    for {\n        buf := make([]byte, 1024)\n        reader := bufio.NewReader(conn)\n        n, err := reader.Read(buf) // \u8bfb\u53d6\u6570\u636e - \u63a5\u6536\n        if err != nil {\n            log.Println(err)\n            break\n        }\n        log.Printf(\"[client] %s\", string(buf[:n]))\n\n        _, err = conn.Write(buf[:n]) // \u5199\u5165\u6570\u636e - \u8fd4\u56de\n        if err != nil {\n            log.Fatalln(err)\n        }\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12-tcpclient-","title":"1.2 tcpclient-\u5ba2\u6237\u7aef","text":"<ul> <li>\u5efa\u7acb\u4e8e\u670d\u52a1\u7aef\u7684\u8fde\u63a5</li> <li>\u8fdb\u884c\u6570\u636e\u6536\u53d1</li> <li>\u5173\u95ed\u8fde\u63a5</li> </ul> <pre><code>/**/\n\npackage main\n\nimport (\n    \"bufio\"\n    \"log\"\n    \"net\"\n    \"os\"\n    \"strings\"\n    \"unicode/utf8\"\n)\n\nfunc main() {\n    dial, err := net.Dial(\"tcp\", \"127.0.0.1:8080\")\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer dial.Close()\n\n    reader := bufio.NewReader(os.Stdin) // \u63a5\u6536\u7528\u6237\u8f93\u5165\n\n    for {\n        text, _ := reader.ReadString('\\n') // \u8bfb\u53d6\u7528\u6237\u8f93\u5165\n        trim := strings.Trim(text, \"\\r\\n\")\n        count := utf8.RuneCountInString(trim)\n        if count &gt; 50 {\n            log.Println(\"\u8f93\u5165\u7684\u5b57\u7b26\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\")\n            continue\n        }\n        if strings.ToUpper(trim) == \"Q\" {\n            break // \u5982\u679c\u8bfb\u53d6\u8f93\u5165\u7684\u662fq/Q\uff0c\u5219\u9000\u51fa\u8f93\u5165\n        }\n\n        // \u8f93\u5165\u4e00\u6b21\u5199\u5165\u4e00\u6b21\u6570\u636e / \u6570\u636e\u4ea4\u6362 - \u53d1\u8d77\u8bf7\u6c42\n        _, err = dial.Write([]byte(trim))\n        if err != nil {\n            log.Println(err)\n        }\n\n        // \u6570\u636e\u8bfb\u53d6 - \u8fd4\u56de\u63a5\u6536\n        buf := make([]byte, len(trim))\n        _, err = dial.Read(buf)\n        if err != nil {\n            log.Fatalln(err)\n        }\n        log.Printf(\"[server] %s\", string(buf))\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-udp","title":"2 UDP\u7f51\u7edc\u7f16\u7a0b","text":"<p>UDP\u534f\u8bae\uff1aUDP \u662f\u4e00\u79cd\u65e0\u8fde\u63a5\u7684\u3001\u4e0d\u53ef\u9760\u7684\u4f20\u8f93\u5c42\u534f\u8bae\uff1b\u5b9e\u65f6\u6027\u597d\uff0c\u901a\u5e38\u7528\u4e8e\u5f00\u53d1\u7f51\u7edc\u76f4\u64ad\u5e94\u7528\u573a\u666f\u3002</p> <ol> <li>\u4f20\u8f93\u5c42\u534f\u8bae\uff1a\u548c TCP \u4e00\u6837\uff0c\u5de5\u4f5c\u5728 OSI \u6a21\u578b\u7684\u7b2c\u56db\u5c42\uff0c\u4e3a\u5e94\u7528\u5c42\u63d0\u4f9b\u670d\u52a1\u3002</li> <li>\u65e0\u8fde\u63a5\uff1a\u5728\u901a\u4fe1\u4e4b\u524d\u4e0d\u9700\u8981\u5148\u5efa\u7acb\u8fde\u63a5\u3002\u60f3\u53d1\u9001\u6570\u636e\u65f6\u76f4\u63a5\u53d1\u9001\u5373\u53ef\u3002\u8fd9\u5c31\u50cf\u5bc4\u660e\u4fe1\u7247\uff0c\u5199\u4e0a\u5730\u5740\u5185\u5bb9\u5c31\u76f4\u63a5\u6295\u9012\uff0c\u4e0d\u5173\u5fc3\u5bf9\u65b9\u662f\u5426\u6536\u5230\u3002</li> <li>\u4e0d\u53ef\u9760\uff1a\u5b83\u4e0d\u63d0\u4f9b\u6570\u636e\u5305\u7684\u5206\u7ec4\u3001\u7ec4\u88c5\u3001\u6392\u5e8f\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u6570\u636e\u5305\u4e00\u5b9a\u4f1a\u5230\u8fbe\u76ee\u7684\u5730\u3002\u5982\u679c\u62a5\u6587\u5728\u4e2d\u9014\u4e22\u5931\uff0cUDP \u4e0d\u4f1a\u91cd\u4f20\u3002\u5b83\u7684\u6838\u5fc3\u4efb\u52a1\u5c31\u662f\u201c\u53d1\u9001\u201d\uff0c\u81f3\u4e8e\u7ed3\u679c\u5982\u4f55\uff0c\u5b83\u4e0d\u7ba1\u3002</li> <li>\u57fa\u4e8e\u6570\u636e\u62a5\uff1a\u4e0e TCP \u7684\u201c\u5b57\u8282\u6d41\u201d\u4e0d\u540c\uff0cUDP \u4f20\u8f93\u7684\u662f\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7684\u62a5\u6587\uff08\u79f0\u4e3a\u6570\u636e\u62a5\uff09\u3002\u6bcf\u4e2a\u62a5\u6587\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u5355\u5143\uff0c\u53d1\u9001\u548c\u63a5\u6536\u90fd\u6709\u660e\u786e\u7684\u8fb9\u754c\u3002\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u591a\u5c11\u6b21\uff0c\u63a5\u6536\u65b9\u5c31\u4f1a\u6536\u5230\u591a\u5c11\u6b21\uff0c\u4e0d\u4f1a\u51fa\u73b0\u7c98\u5305\u95ee\u9898\u3002</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21-udpserver-","title":"2.1 udpserver-\u670d\u52a1\u7aef","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"log\"\n    \"net\"\n)\n\nfunc main() {\n    listenUDP, err := net.ListenUDP(\n        \"udp\",\n        &amp;net.UDPAddr{\n            IP:   net.IPv4(0, 0, 0, 0),\n            Port: 30030,\n        })\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer listenUDP.Close()\n\n    // /////////UDP\u534f\u8bae\u4e0d\u9700\u8981\u8fde\u63a5/////////\n    for {\n        buf := make([]byte, 1024)\n        n, addr, err := listenUDP.ReadFromUDP(buf) // \u8bfb\u53d6\u6570\u636e\u4f1a\u83b7\u53d6\u5230\u53d1\u9001\u7684IP\u5730\u5740\n        if err != nil {\n            log.Fatalln(\"error reading UDP msg buf:\", err)\n        }\n        log.Printf(\"[server] [%s] %s\\n\", addr, buf[:n])\n        _, err = listenUDP.WriteToUDP(buf[:n], addr) // \u5411\u53d1\u9001\u7684IP\u5730\u5740\u8fd4\u56de\u6570\u636e\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22-udpclient-","title":"2.2 udpclient-\u5ba2\u6237\u7aef","text":"<pre><code>/**/\n\npackage main\n\nimport (\n    \"bufio\"\n    \"log\"\n    \"net\"\n    \"os\"\n    \"strings\"\n    \"unicode/utf8\"\n)\n\nfunc main() {\n    dialUDP, err := net.DialUDP(\"udp\", nil, &amp;net.UDPAddr{\n        IP:   net.IPv4(127, 0, 0, 1),\n        Port: 30030,\n    })\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer dialUDP.Close()\n\n    reader := bufio.NewReader(os.Stdin) // \u63a5\u6536\u7528\u6237\u8f93\u5165\n\n    for {\n        text, _ := reader.ReadString('\\n') // \u8bfb\u53d6\u7528\u6237\u8f93\u5165\n        trim := strings.Trim(text, \"\\r\\n\")\n        count := utf8.RuneCountInString(trim)\n        if count &gt; 50 {\n            log.Println(\"\u8f93\u5165\u7684\u5b57\u7b26\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\")\n            continue\n        }\n        if strings.ToUpper(trim) == \"Q\" {\n            break // \u5982\u679c\u8bfb\u53d6\u8f93\u5165\u7684\u662fq/Q\uff0c\u5219\u9000\u51fa\u8f93\u5165\n        }\n\n        // \u8f93\u5165\u4e00\u6b21\u5199\u5165\u4e00\u6b21\u6570\u636e / \u6570\u636e\u4ea4\u6362 - \u53d1\u8d77\u8bf7\u6c42\n        _, err = dialUDP.Write([]byte(trim))\n        if err != nil {\n            log.Println(err)\n        }\n\n        // \u6570\u636e\u8bfb\u53d6 - \u8fd4\u56de\u63a5\u6536\n        buf := make([]byte, len(trim))\n        _, err = dialUDP.Read(buf)\n        if err != nil {\n            log.Fatalln(err)\n        }\n        log.Printf(\"[client] %s\", string(buf))\n    }\n\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-http","title":"3 HTTP\u7f51\u7edc\u7f16\u7a0b","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#31-httpserver","title":"3.1 httpserver","text":"<p>\u8fd9\u90e8\u5206\u5c5e\u4e8eweb\u540e\u7aef\u5f00\u53d1\u5185\u5bb9</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n)\n\nfunc main() {\n    http.HandleFunc(\"/login\", login)         // \u5355\u72ec\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\n    err := http.ListenAndServe(\":8000\", nil) // IP:PORT\u3001\u56de\u8c03\u51fd\u6570\n    if err != nil {\n        log.Fatalln(err)\n    }\n}\nfunc login(w http.ResponseWriter, r *http.Request) {\n    // \u8bf7\u6c42\u4fe1\u606f\n    fmt.Println(\"\u8bf7\u6c42IP:\", r.RemoteAddr)\n    fmt.Println(\"\u8bf7\u6c42\u65b9\u5f0f\uff1a\", r.Method)\n    fmt.Println(\"\u8bf7\u6c42\u8def\u5f84\uff1a\", r.URL.Path)\n    fmt.Println(\"Header\uff1a\", r.Header)\n    fmt.Println(\"Body\uff1a\", r.Body)\n\n    // \u83b7\u53d6GET\u8bf7\u6c42\u6570\u636e\n    username := r.URL.Query().Get(\"username\")\n    password := r.URL.Query().Get(\"password\")\n    log.Printf(\"[client] username:%s\", username)\n    log.Printf(\"[client] password:%s\", password)\n\n    if username == \"admin\" &amp;&amp; password == \"123456\" {\n        w.Write([]byte(\"\u767b\u5f55\u6210\u529f\"))\n    } else {\n        w.Write([]byte(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\"))\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#32-httpclient","title":"3.2 httpclient","text":"<p>\u4e00\u822c\u6d4f\u89c8\u5668\u5c31\u662f\u4e00\u79cdhttp\u5ba2\u6237\u7aef\uff0c\u5305\u62ec\u50cfpostman\u7b49\u7f51\u7edc\u63a5\u53e3\u6d4b\u8bd5\u8f6f\u4ef6</p> <pre><code>package main\n\nimport (\n    \"io\"\n    \"log\"\n    \"net/http\"\n)\n\nfunc main() {\n    // \u53d1\u9001GET\u8bf7\u6c42\n    resp, err := http.Get(\"http://localhost:8000/login?username=admin&amp;password=123456\")\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer resp.Body.Close()\n\n    // body, err := io.ReadAll(resp.Body) // \u4e00\u6b21\u6027\u8bfb\u53d6\u5168\u90e8\u5185\u5bb9\n    // log.Printf(\"[client] %s\", string(body))\n\n    var totalBytes []byte\n    for {\n        // \u8bfb\u53d6\u54cd\u5e94\u4fe1\u606f\n        buf := make([]byte, 1024)\n        n, err := resp.Body.Read(buf)\n        if err != nil {\n            if err == io.EOF {\n                break\n            }\n            log.Fatalln(err)\n        }\n        totalBytes = append(totalBytes, buf[:n]...)\n    }\n\n    log.Printf(\"[client] %s\", string(totalBytes))\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#gocontext","title":"\ud83d\udcda Go\u8bed\u8a00Context","text":"<p>\u5e76\u53d1\u7f16\u7a0b\u662fGo\u8bed\u8a00\u7684\u7279\u8272\uff1b\u6709\u6548\u7ba1\u7406\u5e76\u53d1\u5bf9\u5c31\u89c1\u7a33\u5b9a\u5065\u58ee\u7684\u7a0b\u5e8f\u81f3\u5173\u91cd\u8981\uff01</p> <p><code>context</code> \u662f\u7f16\u5199\u5065\u58ee\u3001\u53ef\u63a7\u5236\u7684\u5e76\u53d1 Go \u7a0b\u5e8f\u7684\u57fa\u77f3\uff0c\u5c24\u5176\u662f\u5728\u7f51\u7edc\u670d\u52a1\u4e2d\uff0c\u51e0\u4e4e\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u5de5\u5177\u3002</p> <p>\u5b83\u7684\u4e3b\u8981\u8bbe\u8ba1\u76ee\u7684\u662f\u5728\u591a\u4e2a Goroutine \u4e4b\u95f4\u4f20\u9012\u8bf7\u6c42\u57df\u7684\u622a\u6b62\u65f6\u95f4\u3001\u53d6\u6d88\u4fe1\u53f7\u4ee5\u53ca\u5176\u4ed6\u952e\u503c\u5bf9\u4fe1\u606f\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#1-context","title":"1 \u6839context","text":"<p>context\u7684\u8bbe\u8ba1\u5c31\u50cf\u662f\u4e00\u68f5\u6811\uff0c\u5c42\u5c42\u6d3e\u751f\u7ed3\u6784\u3002</p> <p>Go \u7684 <code>context</code> \u5305\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570\u6765\u521b\u5efa\u6839 Context\uff1a</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#11-contextbackground","title":"1.1 context.Background()","text":"<ul> <li>\u8fd9\u662f\u6700\u5e38\u7528\u7684\u3001\u6807\u51c6\u7684\u6839 Context\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>\u7528\u5728 <code>main</code> \u51fd\u6570\u7684\u5f00\u5934\u3002</li> <li>\u7528\u5728\u521d\u59cb\u5316\u51fd\u6570\uff08<code>init</code>\uff09\u4e2d\u3002</li> <li>\u7528\u4f5c\u6d4b\u8bd5\u7684\u8d77\u70b9\u3002</li> <li>\u7b80\u5355\u8bf4\uff1a\u5f53\u4f60\u662f\u6574\u4e2a\u8c03\u7528\u94fe\u7684\u53d1\u8d77\u8005\u65f6\uff0c\u5c31\u7528\u5b83\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#12-contexttodo","title":"1.2 context.TODO()","text":"<ul> <li>\u5b83\u548c <code>Background()</code> \u5728\u529f\u80fd\u4e0a\u5b8c\u5168\u4e00\u6837\uff0c\u4e5f\u662f\u4e00\u4e2a\u7a7a\u7684\u3001\u6c38\u4e0d\u53d6\u6d88\u7684\u6839 Context\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a</li> <li>\u5360\u4f4d\u7b26\uff1a\u5f53\u4f60\u4e0d\u786e\u5b9a\u8be5\u4f7f\u7528\u54ea\u4e2a Context \u65f6\uff0c\u5148\u7528 <code>TODO()</code> \u5360\u4f4d\u3002</li> <li>\u91cd\u6784\u671f\uff1a\u5728\u91cd\u6784\u4ee3\u7801\uff0c\u51c6\u5907\u6dfb\u52a0 Context \u53c2\u6570\u4f46\u8fd8\u6ca1\u60f3\u597d\u5982\u4f55\u96c6\u6210\u65f6\u4f7f\u7528\u3002</li> <li>\u9759\u6001\u5206\u6790\uff1a\u5b83\u7684\u540d\u5b57 <code>TODO</code> \u5c31\u50cf\u4e00\u4e2a\u7ed9\u5f00\u53d1\u8005\u548c\u4ee3\u7801\u5206\u6790\u5de5\u5177\u7684\u663e\u5f0f\u63d0\u9192\u2014\u2014\u201c\u8fd9\u91cc\u5c06\u6765\u53ef\u80fd\u9700\u8981\u4e00\u4e2a\u771f\u6b63\u7684 Context\uff0c\u4f46\u76ee\u524d\u6682\u65f6\u8fd9\u6837\u201d\u3002\u4f60\u5e94\u8be5\u5728\u6700\u7ec8\u4ee3\u7801\u4e2d\u5c06\u5b83\u66ff\u6362\u4e3a\u5408\u9002\u7684 Context\u3002</li> <li>\u8bb0\u5fc6\u6280\u5de7\uff1a\u5c31\u50cf\u4f60\u5728\u4ee3\u7801\u91cc\u5199 <code>// TODO: Implement this later</code> \u4e00\u6837\uff0c<code>context.TODO()</code> \u662f\u4e00\u4e2a\u5f85\u529e\u4e8b\u9879\u3002</li> </ul>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#13-context","title":"1.3 \u6839context\u6d3e\u751f","text":"<p><code>context</code> \u5305\u63d0\u4f9b\u4e86\u51fd\u6570\u6765\u57fa\u4e8e\u7236 Context \u521b\u5efa\u5b50 Context\uff0c\u4ece\u800c\u6dfb\u52a0\u4e0a\u4e0b\u6587\u4fe1\u606f\uff1a</p> \u51fd\u6570 \u5f15\u5165\u7248\u672c \u6838\u5fc3\u529f\u80fd \u5e38\u7528\u573a\u666f <code>WithCancel</code> Go 1.7 \u521b\u5efa\u53ef\u624b\u52a8\u53d6\u6d88\u7684 Context\u3002 \u624b\u52a8\u63a7\u5236\u53d6\u6d88\uff0c\u5982\u7528\u6237\u4e2d\u65ad\u3002 <code>WithTimeout</code> Go 1.7 \u521b\u5efa\u76f8\u5bf9\u8d85\u65f6\u540e\u81ea\u52a8\u53d6\u6d88\u7684 Context\u3002 \u6700\u5e38\u7528\uff0c\u4e3a\u64cd\u4f5c\u8bbe\u7f6e\u6700\u5927\u6267\u884c\u65f6\u95f4\u3002 <code>WithDeadline</code> Go 1.7 \u521b\u5efa\u7edd\u5bf9\u622a\u6b62\u65f6\u95f4\u540e\u81ea\u52a8\u53d6\u6d88\u7684 Context\u3002 \u64cd\u4f5c\u5fc5\u987b\u5728\u67d0\u4e2a\u5177\u4f53\u65f6\u95f4\u70b9\u524d\u5b8c\u6210\u3002 <code>WithValue</code> Go 1.7 \u521b\u5efa\u643a\u5e26\u8bf7\u6c42\u57df\u952e\u503c\u5bf9\u7684 Context\u3002 \u4f20\u9012\u8bf7\u6c42ID\u3001\u7528\u6237\u4ee4\u724c\u7b49\uff08\u8c28\u614e\u4f7f\u7528\uff09\u3002 <code>WithCancelCause</code> Go 1.20/1.21 \u521b\u5efa\u53ef\u9644\u5e26\u5177\u4f53\u539f\u56e0\u7684\u53d6\u6d88 Context\u3002 \u9700\u8981\u660e\u786e\u533a\u5206\u548c\u4f20\u9012\u53d6\u6d88\u539f\u56e0\u7684\u9ad8\u7ea7\u573a\u666f\u3002 <code>WithoutCancel</code> Go 1.21 \u521b\u5efa\u8131\u79bb\u7236Context\u53d6\u6d88\u94fe\u7684 Context\u3002 \u6267\u884c\u4e0d\u53d7\u4e3b\u8bf7\u6c42\u5f71\u54cd\u7684\u72ec\u7acb\u540e\u53f0\u4efb\u52a1\u3002 <p>\u6839 Context \u672c\u8eab\u6ca1\u4ec0\u4e48\u7528\uff0c\u5b83\u7684\u5f3a\u5927\u4e4b\u5904\u5728\u4e8e\u4f5c\u4e3a\u6d3e\u751f\u7684\u8d77\u70b9\u3002</p> <p>\u6574\u4e2a Context \u7684\u4f7f\u7528\u6d41\u7a0b\u5c31\u50cf\u4e00\u68f5\u6811\u7684\u751f\u957f\uff1a\u6839 Context -&gt; \u6d3e\u751f\u5177\u6709\u529f\u80fd\u7684\u5b50 Context -&gt; \u7ee7\u7eed\u6d3e\u751f -&gt; ... -&gt; \u5728 Goroutine \u4e2d\u4f7f\u7528</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    // \u7b2c1\u6b65\uff1a\u521b\u5efa\u6839Context\n    // \u8fd9\u91cc\u662f\u6574\u4e2a\u7a0b\u5e8f\u7684\u8d77\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u7528 Background()\n    rootCtx := context.Background()\n\n    // \u7b2c2\u6b65\uff1a\u4ece\u6839Context\u6d3e\u751f\u4e00\u4e2a\u5b50Context\n    // \u8fd9\u4e2a\u5b50Context\u5177\u5907\u4e86\u8d85\u65f6\u53d6\u6d88\u7684\u529f\u80fd\uff081\u79d2\u540e\u81ea\u52a8\u53d6\u6d88\uff09\n    // ctx \u662f\u65b0\u7684\u5b50Context\n    // cancelFunc \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8c03\u7528\u5b83\u53ef\u4ee5\u624b\u52a8\u63d0\u524d\u53d6\u6d88\u8fd9\u4e2actx\n    ctx, cancelFunc := context.WithTimeout(rootCtx, 3*time.Second)\n    // \u975e\u5e38\u91cd\u8981\uff1a\u786e\u4fddcancel\u51fd\u6570\u88ab\u8c03\u7528\uff0c\u4ee5\u91ca\u653e\u76f8\u5173\u8d44\u6e90\uff0c\u9632\u6b62\u6cc4\u9732\n    // \u5373\u4f7f\u8d85\u65f6\u81ea\u52a8\u53d1\u751f\uff0c\u8c03\u7528cancel\u4e5f\u662f\u5b89\u5168\u7684\uff08\u5e42\u7b49\u64cd\u4f5c\uff09\n    defer cancelFunc()\n\n    // \u7b2c3\u6b65\uff1a\u5c06\u6d3e\u751f\u51fa\u7684\u3001\u6709\u529f\u80fd\u7684ctx\u4f20\u9012\u7ed9\u9700\u8981\u5b83\u7684\u51fd\u6570\n    // \u8fd9\u4e2a\u51fd\u6570\u4f1a\u76d1\u542cctx\u7684\u53d6\u6d88\u4fe1\u53f7\n    doSomething(ctx)\n}\n\nfunc doSomething(ctx context.Context) {\n    // \u521b\u5efa\u4e00\u4e2a\u901a\u9053\uff0c\u6a21\u62df\u4e00\u4e2a\u9700\u8981\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\uff085\u79d2\uff09\n    done := make(chan struct{})\n\n    go func() {\n        time.Sleep(5 * time.Second) // \u6a21\u62df\u8017\u65f6\u5de5\u4f5c\n        close(done)                 // \u5de5\u4f5c\u5b8c\u6210\uff0c\u5173\u95ed\u901a\u9053\n    }()\n\n    // \u4f7f\u7528select\u540c\u65f6\u7b49\u5f85\u4e24\u4e2a\u4e8b\u4ef6\uff1a\u8981\u4e48\u5de5\u4f5c\u5b8c\u6210\uff0c\u8981\u4e48ctx\u88ab\u53d6\u6d88\n    select {\n    case &lt;-done:\n        fmt.Println(\"\u5de5\u4f5c\u5b8c\u6210\u4e86\uff01\")\n    case &lt;-ctx.Done(): // \u76d1\u542cctx\u7684\u53d6\u6d88\u4fe1\u53f7\u3002\u5982\u679c\u7236context\u8d85\u65f6\u6216\u8c03\u7528\u4e86cancel\uff0c\u8fd9\u91cc\u4f1a\u7acb\u5373\u89e6\u53d1\n        // ctx.Err() \u4f1a\u544a\u8bc9\u6211\u4eec\u53d6\u6d88\u7684\u539f\u56e0\n        err := ctx.Err()\n        fmt.Printf(\"\u5de5\u4f5c\u88ab\u53d6\u6d88\u4e86\uff0c\u539f\u56e0: %s\\n\", err)\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#2-context","title":"2 \u8d85\u65f6\u63a7\u5236context","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#21-withtimeout","title":"2.1 \u57fa\u672c\u793a\u4f8b-WithTimeout()","text":"<p>WithTimeout: \u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u8d85\u65f6\u65f6\u95f4\u7684 Context\u3002\u4f7f\u7528\u9891\u7387\u5f88\u9ad8\uff0c\u4f8b\u5982\u4e3a\u6570\u636e\u5e93\u67e5\u8be2\u8bbe\u7f6e\u8d85\u65f6</p> <p>\u5047\u8bbe\u6211\u4eec\u9700\u8981\u4ece\u591a\u4e2aAPI\u5e76\u53d1\u83b7\u53d6\u6570\u636e\uff0c\u67d0\u4e2a\u63a5\u53e3\u8d85\u65f6\u4e86\uff0c\u5c31\u5c06\u5176\u8bf7\u6c42\u53d6\u6d88\u6389\uff1b\u4e00\u822c\u8fd9\u79cd\u60c5\u666f\u90fd\u662f\u5411\u5916\u90e8API\u83b7\u53d6\u6570\u636e\uff0c\u8fd9\u91cc\u7528\u672c\u5730\u63a5\u53e3\u505a\u5b9e\u9a8c\u3002</p> <p>\u5916\u90e8\u7684\u670d\u52a1\uff1a\u5b9e\u9645\u573a\u666f\u672c\u5730\u670d\u52a1\u9700\u8981\u8c03\u7528\u5916\u90e8\u670d\u52a1\u63a5\u53e3\uff08\u5b9e\u9a8c\u7528\u7684\u672c\u5730\u63a5\u53e3\uff09</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"net/http\"\n    \"sync\"\n    \"time\"\n)\n\ntype Result struct {\n    Url     string         `json:\"url\"`             // \u8bf7\u6c42\u7684 URL \u5730\u5740\n    Message string         `json:\"message\"`         // \u8bbe\u7f6e\u4fe1\u606f\n    Error   error          `json:\"error,omitempty\"` // \u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u9519\u8bef\n    Latency time.Duration  `json:\"latency\"`         // \u8bf7\u6c42\u8017\u65f6\uff08\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u65f6\u95f4\u95f4\u9694\uff09\n    Size    int64          `json:\"size\"`            // \u54cd\u5e94\u4f53\uff08Response Body\uff09\u7684\u5927\u5c0f\uff08\u5b57\u8282\u6570\uff09\n    Status  int            `json:\"status\"`          // HTTP \u72b6\u6001\u7801\uff08\u5982 200, 404, 500\u7b49\uff09\n    Resp    *http.Response `json:\"-\"`               // \u4f7f\u7528 - \u5ffd\u7565\u8be5\u5b57\u6bb5\n}\n\nfunc main() {\n    // ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    callTime, _ := time.Parse(time.DateTime, \"2025-08-23 00:00:00\")\n    // callTime := time.Now().Add(5 * time.Second)\n    fmt.Println(callTime)\n    ctx, cancel := context.WithDeadline(context.Background(), callTime)\n    defer cancel() // \u4fdd\u8bc1\u6700\u7ec8\u4efb\u52a1\u90fd\u8981\u7ed3\u675f\n\n    urls := []string{\n        \"http://localhost:8000/test1\",\n        \"http://localhost:8000/test2\",\n        \"http://localhost:8000/test3\",\n    }\n\n    // \u6267\u884c\u7ed3\u679c\u901a\u9053\u6570\u636e\n    results := make(chan Result, len(urls))\n\n    // \u4f7f\u7528WaitGroup\u7b49\u5f85\u6240\u6709goroutine\u5b8c\u6210\n    var wg sync.WaitGroup\n\n    for _, url := range urls {\n        wg.Add(1)\n        // \u533f\u540d\u51fd\u6570\u65b9\u4fbf\u83b7\u53d6\u6267\u884c\u662f\u5426\u7ed3\u675f\n        go func(u string) {\n            defer wg.Done()\n            fetchAPI(ctx, u, results)\n        }(url)\n    }\n\n    wg.Wait()\n    close(results)\n\n    for result := range results {\n        marshal, err := json.Marshal(result)\n        if err != nil {\n            panic(err)\n        }\n        log.Println(string(marshal))\n    }\n\n}\n\nfunc fetchAPI(ctx context.Context, url string, results chan&lt;- Result) {\n    startTime := time.Now()\n    result := Result{Url: url}\n\n    req, err := http.NewRequestWithContext(ctx, \"GET\", url, nil)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Failed to create request object based on context, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        // result.Error = err\n        results &lt;- result\n        return\n    }\n\n    resp, err := http.DefaultClient.Do(req)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Fetch API exception, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        // result.Error = err\n        results &lt;- result\n        return\n    }\n    defer resp.Body.Close() // \u7ed3\u675f\u65f6\u5173\u95ed\u8bf7\u6c42\u6570\u636e\u6d41\n\n    respBody, err := io.ReadAll(resp.Body)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Read body exception, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        // result.Error = err\n        result.Status = resp.StatusCode\n        result.Resp = resp\n        results &lt;- result\n        return\n    }\n    log.Println(\"resp.Body:\", string(respBody))\n\n    result.Message = fmt.Sprintf(\"Fetch API Success, Url: %s, Status: %v, Content: %s\", url, resp.StatusCode, respBody)\n    result.Latency = time.Since(startTime)\n    // result.Error = err\n    result.Size = int64(len(respBody))\n    result.Status = resp.StatusCode\n    result.Resp = resp\n    results &lt;- result\n}\n</code></pre> <p>\u6211\u4eec\u7684\u670d\u52a1\uff1a\u9700\u8981\u8c03\u7528\u5916\u90e8\u670d\u52a1\u63a5\u53e3\uff08\u5b9e\u9a8c\u7528\u7684\u672c\u5730\u63a5\u53e3\uff09</p> <ol> <li>\u521b\u5efa\u7ed3\u679c\u5b58\u50a8\u7684\u7ed3\u6784\u4f53\uff1b</li> <li>\u521b\u5efa\u534f\u7a0b\u901a\u9053\u5b58\u50a8\u7ed3\u679c\u7ed3\u6784\u4f53\uff1b</li> <li>\u521b\u5efa\u534f\u7a0b\u4e0a\u4e0b\u6587\u8d85\u65f6\u7ba1\u7406\u5668\uff08context.WithTimeout\uff09\uff1b</li> <li>\u534f\u7a0b\u6267\u884c\u51fd\u6570\u4e2d\uff0c\u4f7f\u7528\u534f\u7a0b\u4e0a\u4e0b\u6587\u8d85\u65f6\u7ba1\u7406\u5668\u53bb\u521b\u5efa\u8bf7\u6c42\uff08req,_  := http.NewRequestWithContext(ctx, \"GET\", url, nil)\uff09\uff1b</li> <li>\u4f7f\u7528sync.WaitGroup\u7b49\u5f85\u6240\u6709goroutine\u6267\u884c\u5b8c\u6210\uff1b</li> <li>\u4f7f\u7528http\u9ed8\u8ba4\u5ba2\u6237\u7aef\u51fd\u6570\u53d1\u9001\u8bf7\u6c42\uff08http.DefaultClient.Do(req)\uff09</li> <li>\u5bf9\u8bf7\u6c42\u5904\u7406\uff0c\u5c06\u9884\u671f\u7ed3\u679c\u8d4b\u503c\u5230\u7ed3\u679c\u7ed3\u6784\u4f53</li> </ol> <pre><code>package main\n\nimport (\n    \"context\"\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"net/http\"\n    \"sync\"\n    \"time\"\n)\n\ntype Result struct {\n    Url     string         `json:\"url\"`             // \u8bf7\u6c42\u7684 URL \u5730\u5740\n    Message string         `json:\"message\"`         // \u8bbe\u7f6e\u4fe1\u606f\n    Error   error          `json:\"error,omitempty\"` // \u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u9519\u8bef\n    Latency time.Duration  `json:\"latency\"`         // \u8bf7\u6c42\u8017\u65f6\uff08\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u65f6\u95f4\u95f4\u9694\uff09\n    Size    int64          `json:\"size\"`            // \u54cd\u5e94\u4f53\uff08Response Body\uff09\u7684\u5927\u5c0f\uff08\u5b57\u8282\u6570\uff09\n    Status  int            `json:\"status\"`          // HTTP \u72b6\u6001\u7801\uff08\u5982 200, 404, 500\u7b49\uff09\n    Resp    *http.Response `json:\"-\"`               // \u4f7f\u7528 - \u5ffd\u7565\u8be5\u5b57\u6bb5\n}\n\nfunc main() {\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n    defer cancel() // \u4fdd\u8bc1\u6700\u7ec8\u4efb\u52a1\u90fd\u8981\u7ed3\u675f\n\n    urls := []string{\n        \"http://localhost:8000/test1\",\n        \"http://localhost:8000/test2\",\n        \"http://localhost:8000/test3\",\n    }\n\n    // \u6267\u884c\u7ed3\u679c\u901a\u9053\u6570\u636e\n    results := make(chan Result, len(urls))\n\n    // \u4f7f\u7528WaitGroup\u7b49\u5f85\u6240\u6709goroutine\u5b8c\u6210\n    var wg sync.WaitGroup\n\n    for _, url := range urls {\n        wg.Add(1)\n        // \u533f\u540d\u51fd\u6570\u65b9\u4fbf\u83b7\u53d6\u6267\u884c\u662f\u5426\u7ed3\u675f\n        go func(u string) {\n            defer wg.Done()\n            fetchAPI(ctx, u, results)\n        }(url)\n    }\n\n    wg.Wait()  // \u7b49\u5168\u90e8\u6267\u884c\u5b8c\u6210\n\n    for result := range results {\n        marshal, err := json.Marshal(result)\n        if err != nil {\n            panic(err)\n        }\n        log.Println(string(marshal))\n    }\n\n}\n\nfunc fetchAPI(ctx context.Context, url string, results chan&lt;- Result) {\n    startTime := time.Now()\n    result := Result{Url: url}\n\n    req, err := http.NewRequestWithContext(ctx, \"GET\", url, nil)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Failed to create request object based on context, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        result.Error = err\n        results &lt;- result\n        return\n    }\n\n    resp, err := http.DefaultClient.Do(req)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Fetch API exception, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        result.Error = err\n        results &lt;- result\n        return\n    }\n    defer resp.Body.Close() // \u7ed3\u675f\u65f6\u5173\u95ed\u8bf7\u6c42\u6570\u636e\u6d41\n\n    respBody, err := io.ReadAll(resp.Body)\n    if err != nil {\n        result.Message = fmt.Sprintf(\"Read body exception, err: %v\", err)\n        result.Latency = time.Since(startTime)\n        result.Error = err\n        result.Status = resp.StatusCode\n        result.Resp = resp\n        results &lt;- result\n        return\n    }\n    log.Println(\"resp.Body:\", string(respBody))\n\n    result.Message = fmt.Sprintf(\"Fetch API Success, Url: %s, Status: %v, Content: %s\", url, resp.StatusCode, respBody)\n    result.Latency = time.Since(startTime)\n    result.Error = err\n    result.Size = int64(len(respBody))\n    result.Status = resp.StatusCode\n    result.Resp = resp\n    results &lt;- result\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#22-context","title":"2.2 \u8d85\u65f6context\u76f8\u5173\u5185\u7f6e\u65b9\u6cd5","text":"<p>\u8d85\u65f6context\u6709\u56db\u4e2a\u65b9\u6cd5\uff1a</p> <ul> <li>Deadline()\uff1a\u8fd4\u56de\u8d85\u65f6\u622a\u6b62\u65f6\u95f4\uff08\u5f53\u7236\u5b50\u6d3e\u751f\u65f6\uff0c\u4e14\u7236\u5b50\u90fd\u6709\u4e00\u4e2a\u622a\u6b62\u65f6\u95f4\uff1b\u5219\u6b64\u65f6\u8fd4\u56de\u5176\u4e2d\u8f83\u5c0f\u7684\u90a3\u4e2a\u622a\u6b62\u65f6\u95f4\uff09</li> <li>Done()\uff1acontext\u53d6\u6d88\u540e\u4f1a\u8c03\u7528</li> <li>Err()\uff1aDone\u8fd4\u56de\u540e\uff0c\u4f7f\u7528Err()\u53ef\u4ee5\u83b7\u53d6\u7ed3\u675f\u539f\u56e0</li> <li>Value()\uff1a\u83b7\u53d6\u952e\u503c</li> </ul> <pre><code>package main\n\nimport (\n    \"context\"\n    \"log\"\n    \"time\"\n)\n\nconst timeOutNumber = 5 // \u8bbe\u7f6e\u8d85\u65f6\n\nfunc main() {\n    rootCtx := context.Background()\n    ctx, cancel := context.WithTimeout(rootCtx, time.Duration(timeOutNumber)*time.Second)\n    defer cancel()\n\n    go process(ctx) // \u5faa\u73af\u6267\u884c\u4efb\u52a1\u65f6\u6bcf\u6b21\u68c0\u67e5\u662f\u5426\u8d85\u65f6\n    // processNew(ctx) // \u76d1\u542c\u591a\u4e2a\u901a\u9053\u65b9\u5f0f\n\n    time.Sleep(10 * time.Second)\n    log.Println(\"Main Goroutine is Done\")\n}\n\nfunc process(ctx context.Context) {\n    // \u5b9e\u9645\u5de5\u4f5c\u653e\u5728\u8fd9\u91cc\n    for i := 0; i &lt; 10; i++ {\n        select {\n        case &lt;-ctx.Done():\n            log.Println(\"Process: Canceled during work\")\n            return\n        default:\n            // \u6267\u884c\u5de5\u4f5c\u5355\u5143\n            time.Sleep(500 * time.Millisecond)\n            log.Println(\"Process: Doing work\", i)\n        }\n    }\n    log.Println(\"Process: All work completed\")\n}\n\nfunc processNew(ctx context.Context) {\n    // 1. \u521b\u5efa\u4e00\u4e2a\u65e0\u7f13\u51b2channel\u7528\u4e8e\u901a\u77e5\u5de5\u4f5c\u5b8c\u6210\n    done := make(chan struct{})\n\n    // 2. \u542f\u52a8goroutine\u6267\u884c\u5b9e\u9645\u5de5\u4f5c\n    go func() {\n        time.Sleep(6 * time.Second) // \u6a21\u62df\u8017\u65f6\u64cd\u4f5c\n        close(done)                 // \u5de5\u4f5c\u5b8c\u6210\u540e\u5173\u95edchannel\uff0c\u89e6\u53d1done\u901a\u9053\u521d\u59cb\u5316\u5b8c\u6210\u6709\u96f6\u503c\n    }()\n\n    // 3. \u540c\u65f6\u76d1\u542c\u4e24\u4e2achannel\n    select {\n    case &lt;-ctx.Done(): // \u4e0a\u4e0b\u6587\u88ab\u53d6\u6d88/\u8d85\u65f6\n        log.Println(\"Process: Timeout or canceled\")\n        return\n    case &lt;-done: // \u5de5\u4f5c\u6b63\u5e38\u5b8c\u6210\n        log.Println(\"Process: Work completed successfully\")\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#23-withtimeoutcause","title":"2.3 WithTimeoutCause()","text":"<p>WithTimeoutCause()\u662fGo 1.21\u65b0\u589e\u7279\u6027\uff1b\u4e0eWithTimeout()\u4e0d\u540c\u7684\u662f\uff0cWithTimeoutCause()\u521b\u5efa\u7684context\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9519\u8bef\uff0c\u589e\u5f3a\u67e5\u770b\u65e5\u5fd7\u65f6\u7684\u5b9e\u7528\u6027\uff1b</p> <p>\u4f7f\u7528\uff1acontext.Cause(ctx) \u83b7\u53d6\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f</p> <pre><code>rootCtx := context.Background()\n// ctx, cancel := context.WithTimeout(rootCtx, time.Duration(timeOutNumber)*time.Second)\nctx, cancel := context.WithTimeoutCause(rootCtx, time.Duration(timeOutNumber)*time.Second, errors.New(\"\u534f\u7a0b\u4efb\u52a1\u5df2\u8d85\u65f6\uff01\"))\ndefer cancel()\n\n// ...\ncase &lt;-ctx.Done():\n    log.Printf(\"Process: Canceled during work; Error: %s; Cause: %s\\n\", ctx.Err(), context.Cause(ctx))\n    return\n// ...\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#3-context","title":"3 \u503c\u4f20\u9012context","text":"<p>WithValue: \u7528\u4e8e\u5728 Context \u4e2d\u5b58\u50a8\u952e\u503c\u5bf9\u3002\u5e94\u8c28\u614e\u4f7f\u7528\u4e0d\u8981\u6ee5\u7528\uff0c\u4ec5\u7528\u4e8e\u4f20\u9012\u8bf7\u6c42\u57df\u7684\u6570\u636e\uff08\u5982\u8bf7\u6c42ID\u3001\u7528\u6237\u8ba4\u8bc1\u4ee4\u724c\uff09\uff0c\u800c\u4e0d\u5e94\u4f20\u9012\u51fd\u6570\u53ef\u9009\u53c2\u6570\u6216\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u53d8\u91cf</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"github.com/google/uuid\"\n    \"sync\"\n)\n\nfunc main() {\n    var wg sync.WaitGroup\n\n    requestID, _ := uuid.NewRandom()\n\n    rootCtx := context.Background()\n    ctx1 := context.WithValue(rootCtx, \"requestID\", requestID) // \u6839\u6d3e\u751f\n    ctx2 := context.WithValue(ctx1, \"userID\", 5)               // ctx1\u6d3e\u751f\n\n    func(ctx context.Context) {\n       defer wg.Done()\n       wg.Add(1)\n       go process(ctx)\n    }(ctx1)\n\n    func(ctx context.Context) {\n       defer wg.Done()\n       wg.Add(1)\n       go process(ctx)\n    }(ctx2)\n\n    wg.Wait()\n}\n\nfunc process(ctx context.Context) {\n    fmt.Printf(\"Processing request ID: %s\\n\", ctx.Value(\"requestID\"))\n    fmt.Printf(\"Processing user ID: %d\\n\", ctx.Value(\"userID\"))\n}\n\n// Processing request ID: 9648a146-4020-4add-b9f0-c37f3b006a4c\n// Processing user ID: %!d(&lt;nil&gt;)\n// Processing request ID: 9648a146-4020-4add-b9f0-c37f3b006a4c\n// Processing user ID: 5\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#4-context","title":"4 \u53ef\u53d6\u6d88context","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41-withcancelwithcancelcause","title":"4.1 WithCancel()/WithCancelCause()","text":"<p>WithCancel: \u8fd4\u56de\u4e00\u4e2a\u53ef\u53d6\u6d88\u7684 Context \u548c\u4e00\u4e2a\u53d6\u6d88\u51fd\u6570 (<code>cancelFunc</code>)</p> <p>\u901a\u8fc7WithCancel\u521b\u5efa\u7684context\u53ef\u4ee5\u53d1\u51fa\u53d6\u6d88\u4fe1\u53f7\uff0c\u8fbe\u5230\u7ec8\u6b62\u76f8\u5173\u7684Goroutine\uff0c\u4ece\u800c\u907f\u514d\u8d44\u6e90\u6cc4\u9732</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"errors\"\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    rootCtx := context.Background()\n    // parentCtx, cancel := context.WithCancel(rootCtx)\n    parentCtx, cancel := context.WithCancelCause(rootCtx)\n    defer cancel(errors.New(\"\u6b63\u5e38\u53d6\u6d88\"))\n    childCtx := context.WithoutCancel(parentCtx) // \u4e0d\u53d7\u7236context\u53d6\u6d88\u5f71\u54cd\uff0c\u4f1a\u4e00\u76f4\u6267\u884c\u76f4\u5230\u4e3b\u534f\u7a0b\u9000\u51fa\n    // childCtx, childCancel := context.WithCancel(parentCtx) // \u7236context\u53d6\u6d88\u4f1a\u4e00\u8d77\u53d6\u6d88\n    // defer childCancel()\n\n    go process(parentCtx, \"parent\")\n    go process(childCtx, \"child\")\n    time.Sleep(2 * time.Second)\n    cancel(errors.New(\"\u5f3a\u5236\u53d6\u6d88\"))\n    time.Sleep(5 * time.Second)\n}\n\nfunc process(ctx context.Context, role string) {\n    for {\n        select {\n        case &lt;-ctx.Done(): // \u63a5\u6536\u5230\u53d6\u6d88\u4fe1\u53f7\u89e6\u53d1\n            // \u8fd9\u91cc\u4e3b\u8981\u7f16\u5199\uff1a\u4efb\u52a1\u5173\u95ed\u8d44\u6e90\u91ca\u653e\u903b\u8f91\n            fmt.Printf(\"[%s] process canceled during work; Cause: %s\\n\", role, context.Cause(ctx))\n            return\n        default:\n            // \u8fd9\u91cc\u4e3b\u8981\u7f16\u5199\uff1a\u4efb\u52a1\u6b63\u5e38\u9700\u8981\u5904\u7406\u903b\u8f91\n            fmt.Printf(\"[%s] processing...\\n\", role)\n            time.Sleep(500 * time.Millisecond)\n        }\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#41-withoutcancel","title":"4.1 WithoutCancel()","text":"<p>WithoutCancel()\u662fGo 1.21\u65b0\u589e\u7279\u6027\uff1b\u4e0eWithCancel()\u4e0d\u540c\u7684\u662f\uff0cWithoutCancel()\u521b\u5efa\u7684context\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u7236context\u53d6\u6d88\u800c\u53d6\u6d88\uff1b</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    rootCtx := context.Background()\n    parentCtx, cancel := context.WithCancel(rootCtx)\n    defer cancel()\n    childCtx := context.WithoutCancel(parentCtx) // \u4e0d\u53d7\u7236context\u53d6\u6d88\u5f71\u54cd\uff0c\u4f1a\u4e00\u76f4\u6267\u884c\u76f4\u5230\u4e3b\u534f\u7a0b\u9000\u51fa\n    // childCtx, childCancel := context.WithCancel(parentCtx) // \u7236context\u53d6\u6d88\u4f1a\u4e00\u8d77\u53d6\u6d88\n    // defer childCancel()\n\n    go process(parentCtx, \"parent\")\n    go process(childCtx, \"child\")\n    time.Sleep(2 * time.Second)\n    cancel()\n    time.Sleep(5 * time.Second)\n}\n\nfunc process(ctx context.Context, role string) {\n    for {\n        select {\n        case &lt;-ctx.Done(): // \u63a5\u6536\u5230\u53d6\u6d88\u4fe1\u53f7\u89e6\u53d1\n            // \u8fd9\u91cc\u4e3b\u8981\u7f16\u5199\uff1a\u4efb\u52a1\u5173\u95ed\u8d44\u6e90\u91ca\u653e\u903b\u8f91\n            fmt.Printf(\"[%s] process done\\n\", role)\n            return\n        default:\n            // \u8fd9\u91cc\u4e3b\u8981\u7f16\u5199\uff1a\u4efb\u52a1\u6b63\u5e38\u9700\u8981\u5904\u7406\u903b\u8f91\n            fmt.Printf(\"[%s] processing...\\n\", role)\n            time.Sleep(500 * time.Millisecond)\n        }\n    }\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#5-context","title":"5 \u6307\u5b9a\u65f6\u95f4\u53d6\u6d88context","text":"<p>WithDeadline()\u7528\u6cd5\u4e0e\u8d85\u65f6\u63a7\u5236context\u57fa\u672c\u4e00\u81f4\uff1b\u53ea\u662f\u5165\u53c2\u6539\u4e3a\u65f6\u95f4\u70b9\u683c\u5f0f\uff1a</p> <p>\u5176\u5b9e\u8d85\u65f6\u63a7\u5236\u5c31\u662f\u8c03\u7528\uff1aWithDeadline() \u5b9e\u73b0\u7684\uff1b\u5f53\u6211\u4eec\u6709\u4e00\u4e2a\u65f6\u95f4\u70b9\u9700\u8981\u53d6\u6d88\u4efb\u52a1\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528WithDeadline \u521b\u5efacontext\u66f4\u5408\u9002</p> <pre><code>func WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) {\n    return WithDeadline(parent, time.Now().Add(timeout))\n}\n</code></pre> <pre><code>callTime, _ := time.Parse(time.DateTime, \"2025-08-23 00:00:00\")\nfmt.Println(callTime)\nctx, cancel := context.WithDeadline(context.Background(), callTime)\ndefer cancel() // \u4fdd\u8bc1\u6700\u7ec8\u4efb\u52a1\u90fd\u8981\u7ed3\u675f\n\ngo process(ctx)\n// ...\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#6-contextafterfunc","title":"6 \u58f0\u660e\u5f0f\u54cd\u5e94\u53d6\u6d88\u4e8b\u4ef6context.AfterFunc()","text":"<p>\u57fa\u672c\u6982\u5ff5\uff1a<code>context.AfterFunc</code> \u5141\u8bb8\u4f60\u6ce8\u518c\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5728 Context \u88ab\u53d6\u6d88\u540e\u81ea\u52a8\u5728\u4e00\u4e2a\u65b0\u7684 Goroutine \u4e2d\u8fd0\u884c\u3002</p> <p>\u901a\u4fd7\u4ecb\u7ecd\uff1acontext.AfterFunc() \u662f\u5728parent contenxt\u5b8c\u6210\u6216\u8005\u53d6\u6d88\u540e\uff0c\u6267\u884c\u4e00\u4e2a\u51fd\u6570\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2astop\u51fd\u6570\uff0c\u7528\u4e8e\u505c\u6b62parent contenxt\u548cfunc\u7684\u5173\u8054\uff1b\u8fd4\u56detrue\u4ee3\u8868\u6210\u529f\u53d6\u6d88\uff0cfalse\u4ee3\u8868context\u5df2\u7ecf\u5b8c\u6210\u6216\u8005\u53d6\u6d88\u3002</p>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#61-contextafterfunc","title":"6.1 \u9002\u5408\u4f7f\u7528 context.AfterFunc \u7684\u573a\u666f","text":"<ol> <li>\u8d44\u6e90\u6e05\u7406\uff1a\u8fd9\u662f\u6700\u5178\u578b\u7684\u7528\u6cd5\u3002\u5f53 Context \u53d6\u6d88\u65f6\uff0c\u81ea\u52a8\u5173\u95ed\u6587\u4ef6\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u7f51\u7edc\u8fde\u63a5\u7b49\u8d44\u6e90\u3002</li> <li>\u72b6\u6001\u91cd\u7f6e\uff1a\u53d6\u6d88\u65f6\u91cd\u7f6e\u67d0\u4e9b\u72b6\u6001\u6216\u6807\u5fd7\u3002</li> <li>\u65e5\u5fd7\u8bb0\u5f55\uff1a\u8bb0\u5f55\u64cd\u4f5c\u88ab\u53d6\u6d88\u7684\u4e8b\u5b9e\u548c\u76f8\u5173\u4fe1\u606f\u3002</li> <li>\u76d1\u63a7\u548c\u6307\u6807\uff1a\u53d1\u9001\u53d6\u6d88\u4e8b\u4ef6\u7684\u76d1\u63a7\u6307\u6807\u3002</li> <li>\u5f02\u6b65\u901a\u77e5\uff1a\u901a\u77e5\u5176\u4ed6\u7cfb\u7edf\u7ec4\u4ef6\u8be5\u64cd\u4f5c\u5df2\u88ab\u53d6\u6d88\u3002</li> </ol>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#62","title":"6.2 \u5bf9\u6bd4\u4f20\u7edf\u7684\u6e05\u7406\u8d44\u6e90\u505a\u6cd5","text":"<ul> <li>\u4f20\u7edf\u65b9\u5f0f\uff08\u4f7f\u7528 select\uff09\uff1a</li> </ul> <pre><code>func doWork(ctx context.Context) {\n    // \u542f\u52a8\u5de5\u4f5cgoroutine\n    go func() {\n        // \u6a21\u62df\u5de5\u4f5c\n        time.Sleep(time.Second)\n\n        select {\n        case &lt;-ctx.Done():\n            // Context\u88ab\u53d6\u6d88\u4e86\uff0c\u6267\u884c\u6e05\u7406\n            cleanup()\n            return\n        default:\n            // \u6b63\u5e38\u5de5\u4f5c\n            fmt.Println(\"\u5de5\u4f5c\u5b8c\u6210\")\n        }\n    }()\n}\n</code></pre> <ul> <li>\u4f7f\u7528 AfterFunc \u7684\u65b9\u5f0f\uff1a</li> </ul> <pre><code>func doWork(ctx context.Context) {\n    // \u6ce8\u518c\u6e05\u7406\u51fd\u6570\uff0c\u4f1a\u5728ctx\u53d6\u6d88\u540e\u81ea\u52a8\u6267\u884c\n    context.AfterFunc(ctx, cleanup)\n\n    // \u542f\u52a8\u5de5\u4f5cgoroutine\uff08\u4e0d\u9700\u8981\u5728\u5185\u90e8\u5904\u7406\u53d6\u6d88\u4e86\uff09\n    go func() {\n        time.Sleep(time.Second)\n        fmt.Println(\"\u5de5\u4f5c\u5b8c\u6210\")\n    }()\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#63","title":"6.3 \u5b9e\u9645\u573a\u666f","text":""},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#631","title":"6.3.1 \u57fa\u672c\u7684\u8d44\u6e90\u6e05\u7406","text":"<pre><code>func main() {\n    ctx, cancel := context.WithTimeoutCause(context.Background(), 2*time.Second, errors.New(\"\u4efb\u52a1\u8d85\u65f6\uff01\"))\n    defer cancel()\n\n    // \u6a21\u62df\u6253\u5f00\u4e00\u4e2a\u8d44\u6e90\n    resource := \"\u6570\u636e\u5e93\u8fde\u63a5\"\n    fmt.Printf(\"\u6253\u5f00\u8d44\u6e90: %s\\n\", resource)\n\n    // \u6ce8\u518c\u6e05\u7406\u51fd\u6570\uff1a\u5f53ctx\u53d6\u6d88\u65f6\u81ea\u52a8\u6e05\u7406\u8d44\u6e90\n    stop := context.AfterFunc(ctx, func() {\n        fmt.Printf(\"\u4efb\u52a1\u53d1\u751f\u5f02\u5e38 Cause: %s\\n\", context.Cause(ctx))\n        fmt.Printf(\"\u6b63\u5728\u81ea\u52a8\u6e05\u7406\u8d44\u6e90: %s\\n\", resource)\n        // \u8fd9\u91cc\u53ef\u4ee5\u6267\u884c\u771f\u6b63\u6e05\u7406\u903b\u8f91\uff0c\u5982\u5173\u95ed\u6587\u4ef6\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\n    })\n    // \u901a\u5e38\u4e0d\u9700\u8981\u8c03\u7528stop\uff0c\u9664\u975e\u6709\u7279\u6b8a\u9700\u6c42\n    defer stop() // \u4e3a\u4e86\u5b8c\u6574\u6027\uff0c\u8fd9\u91cc\u4e5fdefer stop\n\n    // \u6a21\u62df\u4e00\u4e9b\u5de5\u4f5c\n    time.Sleep(3 * time.Second) // \u8fd9\u4f1a\u8d85\u8fc72\u79d2\u8d85\u65f6\u65f6\u95f4\n    fmt.Println(\"\u4e3b\u51fd\u6570\u7ed3\u675f\")\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#632-stop","title":"6.3.2 \u4f7f\u7528 stop \u51fd\u6570\u53d6\u6d88\u6ce8\u518c","text":"<pre><code>func main() {\n    ctx, cancel := context.WithCancel(context.Background())\n\n    // \u6ce8\u518c\u4e00\u4e2a\u51fd\u6570\n    stop := context.AfterFunc(ctx, func() {\n        fmt.Println(\"\u8fd9\u4e2a\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\uff0c\u56e0\u4e3a\u4f1a\u88abstop\u53d6\u6d88\")\n    })\n\n    // \u7acb\u5373\u53d6\u6d88\u6ce8\u518c\n    if stopped := stop(); stopped {\n        fmt.Println(\"\u6210\u529f\u53d6\u6d88\u4e86AfterFunc\u7684\u6267\u884c\")\n    }\n\n    cancel() // \u53d6\u6d88Context\uff0c\u4f46\u6ce8\u518c\u7684\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#633-contextafterfunc","title":"6.3.3 \u591a\u4e2a context.AfterFunc","text":"<pre><code>func main() {\n    ctx, cancel := context.WithCancel(context.Background())\n\n    // \u6ce8\u518c\u591a\u4e2a\u6e05\u7406\u51fd\u6570\n    context.AfterFunc(ctx, func() {\n        fmt.Println(\"\u6e05\u7406\u51fd\u65701: \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\")\n    })\n\n    context.AfterFunc(ctx, func() {\n        fmt.Println(\"\u6e05\u7406\u51fd\u65702: \u91ca\u653e\u5185\u5b58\u7f13\u5b58\")\n    })\n\n    context.AfterFunc(ctx, func() {\n        fmt.Println(\"\u6e05\u7406\u51fd\u65703: \u53d1\u9001\u76d1\u63a7\u6307\u6807\")\n    })\n\n    time.Sleep(100 * time.Millisecond)\n    cancel() // \u89e6\u53d1\u6240\u6709\u6ce8\u518c\u7684\u51fd\u6570\u6267\u884c\n    time.Sleep(100 * time.Millisecond) // \u7ed9goroutine\u65f6\u95f4\u6267\u884c\n}\n</code></pre>"},{"location":"mds/GoLang-Note/GoLang-%E5%85%A5%E9%97%A8/#7-context","title":"7 context\u5b66\u4e60\u603b\u7ed3","text":"<p>\u6700\u4f73\u5b9e\u8df5\u63d0\u9192\uff1a</p> <ul> <li>\u5bf9\u4e8e <code>WithCancel</code>, <code>WithTimeout</code>, <code>WithDeadline</code>, <code>WithCancelCause</code>\uff0c\u4e00\u5b9a\u8981\u7acb\u5373\u4f7f\u7528 <code>defer cancel()</code> \u6765\u786e\u4fdd\u8d44\u6e90\u88ab\u6b63\u786e\u91ca\u653e\u3002</li> <li>\u5c06 Context \u4f5c\u4e3a\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u3002</li> <li>\u4f7f\u7528 <code>WithValue</code> \u65f6\uff0c\u4e3a\u952e\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u907f\u514d\u5305\u95f4\u51b2\u7a81\u3002</li> </ul> <p>\u6ce8\u610f\u5f00\u53d1\u4e2d\u7684\u4e00\u4e9b\u95ee\u9898\uff1a</p> <ul> <li>\u4e0d\u4f20\u9012\u4e0a\u4e0b\u6587\uff1a\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u521b\u5efa\u4e86\u4e0a\u4e0b\u6587\uff0c\u4f46\u5e76\u6ca1\u6709\u4f20\u9012\u7ed9\u5176\u4ed6\u51fd\u6570\u6216\u534f\u7a0b\uff0c\u8fd9\u4e9b\u51fd\u6570\u548c\u534f\u7a0b\u65e0\u6cd5\u54cd\u5e94\u4e0a\u4e0b\u6587\u76f8\u5173\u7684\u5904\u7406\u64cd\u4f5c\u3002</li> <li>\u5fd8\u8bb0\u8c03\u7528\u53d6\u6d88\u51fd\u6570\uff1a\u4f7f\u7528\u6709\u53d6\u6d88\u51fd\u6570\u7684\u4e0a\u4e0b\u6587\u65f6\uff0c\u8bb0\u5f97\u53d6\u6d88</li> <li>\u534f\u7a0b\u6cc4\u9732\uff1a\u6709\u4e0a\u4e0b\u6587\u7684\u534f\u7a0b\u9700\u8981\u68c0\u67e5Done channel\uff0c\u5f53\u63a5\u6536\u5230\u5230\u4fe1\u53f7\u65f6\u53ca\u65f6\u6e05\u7406\u8d44\u6e90\u548c\u9000\u51fa</li> <li>\u8fc7\u5ea6\u4f7f\u7528context.Background\uff1a\u6ca1\u6709\u53d6\u6d88\u548c\u8d85\u65f6\u529f\u80fd\uff0c\u5f88\u53ef\u80fd\u5f15\u8d77\u95ee\u9898</li> <li>\u4f20\u9012nil\u7684\u4e0a\u4e0b\u6587\uff1a\u4e0d\u8981\u4f20\u9012nil\u7684\u4e0a\u4e0b\u6587\uff0c\u4f1a\u5bfc\u81f4panic</li> <li>\u963b\u585e\u8c03\u7528\uff1a\u5e94\u8be5\u5c06\u963b\u585e\u64cd\u4f5c\uff08\u6bd4\u5982IO\uff09\u5305\u88c5\u6210\u4f7f\u7528\u4e0a\u4e0b\u6587\u68c0\u67e5\u7684\u8c03\u7528\uff0c\u53ef\u4ee5\u907f\u514d\u88ab\u6302\u8d77</li> <li>\u8fc7\u5ea6\u4f7f\u7528\u4e0a\u4e0b\u6587\uff1a\u4e0a\u4e0b\u6587\u4e5f\u5e76\u4e0d\u662f\u6240\u6709\u573a\u666f\u90fd\u4f7f\u7528\uff0c\u6bd4\u5982\u5904\u7406\u5168\u5c40\u8d44\u6e90\u6216\u8005\u5171\u4eab\u72b6\u6001\u7b49\uff0c\u53ef\u80fd\u66f4\u4f7f\u7528\u4f7f\u7528\u9501\u6216\u8005channel</li> <li>\u4e0a\u4e0b\u6587\u5b58\u50a8\u5728\u7ed3\u6784\u4f53\u4e2d\uff1a\u5e94\u8be5\u5c06context\u663e\u5f0f\u7684\u4f20\u9012\u7ed9\u9700\u8981\u7684\u51fd\u6570\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77\u6570\u636e\u7ade\u6001\uff0c\u751f\u547d\u5468\u671f\u7ba1\u7406\u7b49\u95ee\u9898</li> </ul>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/","title":"Nginx\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#1-nginx","title":"1. Nginx\u57fa\u672c\u4ecb\u7ecd","text":"<p>Nginx\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684HTTP\u548c\u53cd\u5411\u4ee3\u7406web\u670d\u52a1\u5668\uff0c\u540c\u65f6\u4e5f\u63d0\u4f9b\u4e86IMAP/POP3/SMTP\u670d\u52a1\u3002</p> <p>Nginx\u662f\u7531\u4f0a\u6208\u5c14\u00b7\u8d5b\u7d22\u8036\u592b\u4e3a\u4fc4\u7f57\u65af\u8bbf\u95ee\u91cf\u7b2c\u4e8c\u7684http://Rambler.ru\u7ad9\u70b9\uff08\u4fc4\u6587\uff1a\u0420\u0430\u043c\u0431\u043b\u0435\u0440\uff09\u5f00\u53d1\u7684\uff0c\u7b2c\u4e00\u4e2a\u516c\u5f00\u7248\u672c0.1.0\u53d1\u5e03\u4e8e2004\u5e7410\u67084\u65e5\u3002 \u5176\u5c06\u6e90\u4ee3\u7801\u4ee5\u7c7bBSD\u8bb8\u53ef\u8bc1\u7684\u5f62\u5f0f\u53d1\u5e03\uff0c\u56e0\u5b83\u7684\u7a33\u5b9a\u6027\u3001\u4e30\u5bcc\u7684\u529f\u80fd\u96c6\u3001\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u548c\u4f4e\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\u800c\u95fb\u540d\u3002</p> <p>2011\u5e746\u67081\u65e5\uff0cnginx 1.0.4\u53d1\u5e03\u3002 Nginx\u662f\u4e00\u6b3e\u8f7b\u91cf\u7ea7\u7684Web \u670d\u52a1\u5668/\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u53ca\u7535\u5b50\u90ae\u4ef6\uff08IMAP/POP3\uff09\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u5728BSD-like \u534f\u8bae\u4e0b\u53d1\u884c\u3002\u5176\u7279\u70b9\u662f\u5360\u6709\u5185\u5b58\u5c11\uff0c\u5e76\u53d1\u80fd\u529b\u5f3a\uff0c\u4e8b\u5b9e\u4e0anginx\u7684\u5e76\u53d1\u80fd\u529b\u5728\u540c\u7c7b\u578b\u7684\u7f51\u9875\u670d\u52a1\u5668\u4e2d\u8868\u73b0\u8f83\u597d\uff0c\u4e2d\u56fd\u5927\u9646\u4f7f\u7528nginx\u7f51\u7ad9\u7528\u6237\u6709\uff1a\u767e\u5ea6\u3001\u4eac\u4e1c\u3001\u65b0\u6d6a\u3001\u7f51\u6613\u3001\u817e\u8baf\u3001\u6dd8\u5b9d\u7b49\u3002</p>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#2-nginx","title":"2. \u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528Nginx","text":"<p>\u968f\u7740\u5f53\u4eca\u4e92\u8054\u7f51\u7684\u8fc5\u901f\u53d1\u5c55\uff0c\u5355\u70b9\u670d\u52a1\u5668\u65e9\u5df2\u65e0\u6cd5\u627f\u8f7d\u4e0a\u4e07\u4e2a\u4e43\u81f3\u6570\u5341\u4e07\u4e2a\u7528\u6237\u7684\u6301\u7eed\u8bbf\u95ee\u3002</p> <p>\u6bd4\u5982\u4e00\u53f0Tomcat\u670d\u52a1\u5668\u5728\u7406\u60f3\u72b6\u6001\u4e0b\u53ea\u80fd\u591f\u53ef\u4ee5\u627f\u53d7\u4f4f2000\u4e2a\u5de6\u53f3\u7684\u5e76\u53d1\u91cf\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u9700\u8981\u591a\u53f0Tomcat\u670d\u52a1\u5668\u6765\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u3002</p> <p>\u90a3\u4e48\uff0c\u5e94\u8be5\u5982\u4f55\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\uff1fNginx\u5c31\u662f\u5176\u4e2d\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u5f53\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u65f6\uff0cNginx\u62e6\u622a\u5230\u8fd9\u4e2a\u8bbf\u95ee\u8bf7\u6c42\uff0c\u5e76\u5c06\u5176\u901a\u8fc7\u8f6e\u8be2\u7684\u65b9\u5f0f\u5747\u5300\u5730\u5206\u914d\u5230\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u3002</p> <p></p> <p>\u5e76\u4e14\uff0c\u5728Nginx\u4e2d\u6709\u4e00\u79cdip_hash\u7b56\u7565\uff0c\u5b83\u53ef\u4ee5\u83b7\u53d6\u5230\u7528\u6237\u7684\u771f\u5b9eIP\uff0c\u8ba1\u7b97\u51fahash\u503c\u6765\u9009\u62e9\u670d\u52a1\u5668\uff0c\u8fd9\u4e5f\u662f\u4e00\u79cd\u4f18\u79c0\u7684\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u3002 \u6240\u4ee5\uff0c\u638c\u63e1Nginx\u6210\u4e3a\u4e86Web\u5f00\u53d1\u5b66\u4e60\u9053\u8def\u4e0a\u4e0d\u53ef\u7f3a\u5c11\u7684\u4e00\u90e8\u5206\u3002</p>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#3","title":"3. \u4ec0\u4e48\u662f\u6b63\u5411\u4ee3\u7406\uff1f","text":"<p>\u6b63\u5411\u4ee3\u7406\uff0c\u5c31\u662f\u5ba2\u6237\u7aef\u5c06\u81ea\u5df1\u7684\u8bf7\u6c42\u7387\u5148\u53d1\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u901a\u8fc7\u4ee3\u7406\u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u670d\u52a1\u5668\u3002\u6211\u4eec\u5e38\u7528\u7684VPN\u5c31\u662f\u4e00\u79cd\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u4e3a\u4e86\u53ef\u4ee5\u8fde\u4e0a\u56fd\u5916\u7684\u7f51\u7ad9\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u53ef\u4ee5\u8fde\u63a5\u5916\u7f51\u7684\u670d\u52a1\u5668\u4f5c\u4e3a\u4ee3\u7406\uff0c\u5e76\u4e14\u5ba2\u6237\u7aef\u80fd\u591f\u8fde\u63a5\u4e0a\u8be5\u4ee3\u7406\u670d\u52a1\u5668\u3002</p> <p></p>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#4","title":"4.\u4ec0\u4e48\u662f\u53cd\u5411\u4ee3\u7406\uff1f","text":"<p>\u53cd\u5411\u4ee3\u7406\u4e0e\u6b63\u5411\u4ee3\u7406\u4e0d\u540c\uff0c\u6b63\u5411\u4ee3\u7406\u662f\u4ee3\u7406\u4e86\u5ba2\u6237\u7aef\uff0c\u800c\u53cd\u5411\u4ee3\u7406\u5219\u662f\u4ee3\u7406\u670d\u52a1\u5668\u7aef\u3002\u5728\u6709\u591a\u53f0\u670d\u52a1\u5668\u5206\u5e03\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u4e86\u80fd\u8ba9\u5ba2\u6237\u7aef\u8bbf\u95ee\u5230\u7684IP\u5730\u5740\u90fd\u4e3a\u540c\u4e00\u4e2a\u7f51\u7ad9\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u53cd\u5411\u4ee3\u7406\u3002</p> <p></p>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#5linuxnginx","title":"5.linux\u7f16\u8bd1\u5b89\u88c5Nginx","text":"<p>\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u538b\u7f29\u6587\u4ef6\uff1ahttp://nginx.org/en/download.html</p> <pre><code># \u4e0a\u4f20\u81f3/usr/local\ncd /usr/local\ntar -zxvf nginx-1.24.0.tar.gz\ncd nginx-1.24.0\n./configure --prefix=/usr/local/nginx\nmake &amp;&amp; make install\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#6nginx","title":"6.Nginx\u5e38\u7528\u547d\u4ee4","text":"<pre><code># \u8fdb\u7a0b\u67e5\u770b\nps -ef | grep nginx\n# \u542b\u6709nginx\u5b57\u7b26\u4e32\u7684\u5168\u90e8\u8fdb\u7a0b\u5f3a\u5236\u5173\u95ed\npgrep -f nginx | xargs kill -9\n# \u76f4\u63a5\u505c\u6b62nginx\n/usr/local/nginx/sbin/nginx -s stop\n# \u5904\u7406\u5b8c\u5168\u90e8\u5b58\u5728\u7684\u8bf7\u6c42\uff0c\u518d\u5173\u95ed\n/usr/local/nginx/sbin/nginx -s quit\n# \u914d\u7f6e\u6587\u4ef6\u68c0\u67e5\n/usr/local/nginx/sbin/nginx -t\n# \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u4e14\u542f\u52a8\n/usr/local/nginx/sbin/nginx -s reload\n# \u9ed8\u8ba4\u6587\u4ef6\u542f\u52a8\n/usr/local/nginx/sbin/nginx\n# \u6307\u5b9a\u6587\u4ef6\u542f\u52a8\n/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#7","title":"7.\u652f\u6301\u914d\u7f6e\u591a\u8def\u5f84\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>include       /usr/local/nginx/myconf/*.conf;\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#8","title":"8. \u53cd\u5411\u4ee3\u7406\u591a\u53f0\u670d\u52a1\u5668","text":"<p>\u200b   \u914d\u7f6e\u7b2c7\u70b9\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8fd9\u6837\u5199\u5373\u53ef\uff1a</p> <pre><code>upstream myservers{\n    server 127.0.0.1:8080;\n    server 127.0.0.1:8081;\n    server 127.0.0.1:8082;\n}\n\n\nlocation / {\n    root html;\n    index index.html index.htm;\n    proxy_pass http://myservers;\n}\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#9-nginx","title":"9. Nginx\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e","text":"<p>\u7531\u4e8e\u4e0d\u540c\u670d\u52a1\u5668\u7684\u914d\u7f6e\u4e0d\u540c\uff0c\u4e3a\u4e86\u8ba9\u6027\u80fd\u9ad8\u7684\u670d\u52a1\u5668\u5206\u914d\u5230\u66f4\u591a\u7684\u8bf7\u6c42\uff0c\u4fbf\u5f15\u5165\u4e86\u8d1f\u8f7d\u5747\u8861\u7684\u6982\u5ff5\u3002</p> <p>\u524d\u9762\u63d0\u5230\u8fc7\uff0cNginx\u7684\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u53ef\u4ee5\u6709\u5f88\u591a\u79cd\uff0c\u5982\u52a0\u6743\u8f6e\u8be2(\u9ed8\u8ba4)\u3001IP\u54c8\u5e0c\u3001url\u54c8\u5e0c\u7b49\u7b49\uff0c\u8fd9\u91cc\u5c31\u4ee5\u52a0\u6743\u8f6e\u8be2\u4f5c\u4e3a\u4ecb\u7ecd\u3002</p> <p>\u52a0\u6743\u8f6e\u8be2\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u7ed9\u670d\u52a1\u5668\u6dfb\u52a0\u5404\u81ea\u7684\u6743\u91cd\u503c\uff0cNginx\u901a\u8fc7\u6743\u91cd\u6765\u8fdb\u884c\u8bf7\u6c42\u7684\u5206\u914d\uff0c\u6743\u91cd\u8d8a\u9ad8\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u6570\u91cf\u8d8a\u591a\uff0c\u53cd\u4e4b\u8d8a\u5c11\uff1a</p> <p></p> <p>\u4e0a\u56fe\u914d\u7f6e\u4e86\u4e09\u53f0\u670d\u52a1\u5668\uff0c\u5728\u52a0\u6743\u8f6e\u8be2\u7684\u6a21\u5f0f\u4e0b\uff0c6\u6b21\u4e0d\u540c\u7684\u8bf7\u6c42\u4e2d\uff0c\u6743\u91cd\u4e3a3\u7684\u670d\u52a1\u5668\u5c06\u4f1a\u5206\u914d\u52303\u6b21\u8bf7\u6c42\uff0c\u6743\u91cd\u4e3a2\u7684\u670d\u52a1\u5668\u4f1a\u5206\u914d\u52302\u4e2a\u8bf7\u6c42\uff0c\u6743\u91cd\u4e3a1\u7684\u670d\u52a1\u5668\u5219\u4f1a\u5206\u914d\u52301\u4e2a\u8bf7\u6c42\u3002\u8d1f\u8f7d\u5747\u8861\u5927\u5927\u51cf\u5c11\u4e86\u5728\u9ad8\u5e76\u53d1\u7684\u73af\u5883\u4e0b\u670d\u52a1\u5668\u5b95\u673a\u7684\u98ce\u9669\uff01</p> <pre><code>upstream myservers{\n    server 127.0.0.1:8080 weight=3;\n    server 127.0.0.1:8081 weight=1;\n    server 127.0.0.1:8082 weight=1;\n}\n\n\nlocation / {\n    root html;\n    index index.html index.htm;\n    proxy_pass http://myservers;\n}\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#10-linuxubuntunginx","title":"10. Linux\uff08ubuntu\uff09\u7f16\u8bd1\u5b89\u88c5nginx","text":"<pre><code># \u5b89\u88c5\u7f16\u8bd1\u4f9d\u8d56\napt-get install build-essential\napt-get install libpcre3 libpcre3-dev zlib1g zlib1g-dev openssl openssl libssl-dev\n# \u521b\u5efa\u4e13\u7528\u4e8enginx\u8fd0\u884c\u7684\u7528\u6237\uff0c\u4e14\u505a\u76f8\u5173\u914d\u7f6e\uff08-r \u5efa\u7acb\u7cfb\u7edf\u8d26\u53f7\uff1b-s \u767b\u5f55\u7cfb\u7edf\u540e\u9ed8\u8ba4\u4f7f\u7528\u7684shell\uff09\nuseradd -r -s /sbin/nologin nginx\n# \u7f16\u8bd1\u5b89\u88c5\u8bbe\u7f6e\u7528\u6237/\u7528\u6237\u7ec4/\u4f9d\u8d56\u72b6\u6001\u7edf\u8ba1\u6a21\u5757/\u914d\u7f6ehttps\u4f9d\u8d56ssl\u6a21\u5757\n./configure --prefix==/usr/local/nginx --user=nginx --group=nginx --with-http_stub_status_module --with-http_ssl_module\n</code></pre> <p>ubuntu\u7f16\u8bd1\u5b89\u88c5\u62a5\u9519\uff0captitude\u5de5\u5177\u89e3\u51b3\u53c2\u8003\uff1ahttp://www.cnblogs.com/aaron-agu/p/8862624.html</p> <p> </p> <pre><code>aptitude install libpcre3-dev\n</code></pre> <p>\u7ecf\u8fc7\u89e3\u51b3\uff0c\u6700\u597d\u53d1\u73b0\u662f\u6e90\u7684\u95ee\u9898\uff0c\u4e00\u5b9a\u8981\u641c\u7d22\u5bf9\u5e94ubuntu\u53d1\u884c\u7248\u672c\u53f7\u7684\u6e05\u534e\u6e90\u3002</p> <p>\u4e00\u6b21\u6027\u5b89\u88c5\u57fa\u7840\u4f9d\u8d56\u5e93\uff1a</p> <pre><code>apt-get install build-essential\n</code></pre> <p>nginx\u914d\u7f6e\u76ee\u5f55\u5f00\u542f\u6d4f\u89c8\uff1a</p> <pre><code>location / {\n    root   /data;\n    autoindex on; # \u5f00\u542f\u76ee\u5f55\u6d4f\u89c8\u529f\u80fd\uff1b\n    autoindex_exact_size off; # \u5173\u95ed\u8be6\u7ec6\u6587\u4ef6\u5927\u5c0f\u7edf\u8ba1\uff0c\u8ba9\u6587\u4ef6\u5927\u5c0f\u663e\u793aMB\uff0cGB\u5355\u4f4d\uff0c\u9ed8\u8ba4\u4e3ab\uff1b\n    autoindex_localtime on; # \u5f00\u542f\u4ee5\u670d\u52a1\u5668\u672c\u5730\u65f6\u533a\u663e\u793a\u6587\u4ef6\u4fee\u6539\u65e5\u671f\uff01\n}\n</code></pre>"},{"location":"mds/LinuxEnv-Note/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#11","title":"11. \u540c\u6b65/\u5f02\u6b65/\u963b\u585e/\u975e\u963b\u585e\u6982\u5ff5","text":"<p>\u540c\u6b65\u963b\u585e\uff08apache\uff09\uff1a\u5c0f\u660e\u4e00\u76f4\u76ef\u7740\u4e0b\u8f7d\u8fdb\u5ea6\u6761\uff0c\u5230 100% \u7684\u65f6\u5019\u5c31\u5b8c\u6210\u3002 - \u540c\u6b65\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u901a\u77e5\u3002 - \u963b\u585e\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u901a\u77e5\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u80fd\u505a\u5176\u4ed6\u4efb\u52a1\u5904\u7406\u3002</p> <p>\u540c\u6b65\u975e\u963b\u585e\uff1a\u5c0f\u660e\u63d0\u4ea4\u4e0b\u8f7d\u4efb\u52a1\u540e\u5c31\u53bb\u5e72\u522b\u7684\uff0c\u6bcf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u5c31\u53bb\u7784\u4e00\u773c\u8fdb\u5ea6\u6761\uff0c\u770b\u5230 100% \u5c31\u5b8c\u6210\u3002 - \u540c\u6b65\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u901a\u77e5\u3002 - \u975e\u963b\u585e\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u901a\u77e5\u8fc7\u7a0b\u4e2d\uff0c\u53bb\u5e72\u522b\u7684\u4efb\u52a1\u4e86\uff0c\u53ea\u662f\u65f6\u4e0d\u65f6\u4f1a\u7784\u4e00\u773c\u8fdb\u5ea6\u6761\u3002\u3010\u5c0f\u660e\u5fc5\u987b\u8981\u5728\u4e24\u4e2a\u4efb\u52a1\u95f4\u5207\u6362\uff0c\u5173\u6ce8\u4e0b\u8f7d\u8fdb\u5ea6\u3011</p> <p>\u5f02\u6b65\u963b\u585e\uff1a\u5c0f\u660e\u6362\u4e86\u4e2a\u6709\u4e0b\u8f7d\u5b8c\u6210\u901a\u77e5\u529f\u80fd\u7684\u8f6f\u4ef6\uff0c\u4e0b\u8f7d\u5b8c\u6210\u5c31\u201c\u53ee\u201d\u4e00\u58f0\u3002\u4e0d\u8fc7\u5c0f\u660e\u4e0d\u505a\u522b\u7684\u4e8b\uff0c\u4ecd\u7136\u4e00\u76f4\u7b49\u5f85\u201c\u53ee\u201d\u7684\u58f0\u97f3\u3002 - \u5f02\u6b65\u4f53\u73b0\u5728\uff1a\u4e0b\u8f7d\u5b8c\u6210\u201c\u53ee\u201d\u4e00\u58f0\u901a\u77e5\u3002 - \u963b\u585e\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u201c\u53ee\u201d\u4e00\u58f0\u901a\u77e5\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u80fd\u505a\u5176\u4ed6\u4efb\u52a1\u5904\u7406\u3002</p> <p>\u5f02\u6b65\u975e\u963b\u585e\uff08nginx\uff09\uff1a\u4ecd\u7136\u662f\u90a3\u4e2a\u4f1a\u201c\u53ee\u201d\u4e00\u58f0\u7684\u4e0b\u8f7d\u8f6f\u4ef6\uff0c\u5c0f\u660e\u63d0\u4ea4\u4e0b\u8f7d\u4efb\u52a1\u540e\u5c31\u53bb\u5e72\u522b\u7684\uff0c\u542c\u5230\u201c\u53ee\u201d\u7684\u4e00\u58f0\u5c31\u77e5\u9053\u5b8c\u6210\u4e86\u3002 - \u5f02\u6b65\u4f53\u73b0\u5728\uff1a\u4e0b\u8f7d\u5b8c\u6210\u201c\u53ee\u201d\u4e00\u58f0\u901a\u77e5\u3002 - \u975e\u963b\u585e\u4f53\u73b0\u5728\uff1a\u7b49\u5f85\u4e0b\u8f7d\u5b8c\u6210\u201c\u53ee\u201d\u4e00\u58f0\u901a\u77e5\u8fc7\u7a0b\u4e2d\uff0c\u53bb\u5e72\u522b\u7684\u4efb\u52a1\u4e86\uff0c\u53ea\u9700\u8981\u63a5\u6536\u201c\u53ee\u201d\u58f0\u901a\u77e5\u5373\u53ef\u3002\u3010\u8f6f\u4ef6\u5904\u7406\u4e0b\u8f7d\u4efb\u52a1\uff0c\u5c0f\u660e\u5904\u7406\u5176\u4ed6\u4efb\u52a1\uff0c\u4e0d\u9700\u5173\u6ce8\u8fdb\u5ea6\uff0c\u53ea\u9700\u63a5\u6536\u8f6f\u4ef6\u201c\u53ee\u201d\u58f0\u901a\u77e5\uff0c\u5373\u53ef\u3011</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u540c\u6b65/\u5f02\u6b65\u662f\u201c\u4e0b\u8f7d\u5b8c\u6210\u6d88\u606f\u201d\u901a\u77e5\u7684\u65b9\u5f0f\uff08\u673a\u5236\uff09\uff0c\u800c\u963b\u585e/\u975e\u963b\u585e\u5219\u662f\u5728\u7b49\u5f85\u201c\u4e0b\u8f7d\u5b8c\u6210\u6d88\u606f\u201d\u901a\u77e5\u8fc7\u7a0b\u4e2d\u7684\u72b6\u6001\uff08\u80fd\u4e0d\u80fd\u5e72\u5176\u4ed6\u4efb\u52a1\uff09\uff0c\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\uff0c\u540c\u6b65/\u5f02\u6b65\u3001\u963b\u585e/\u975e\u963b\u585e\u7684\u56db\u79cd\u7ec4\u5408\u90fd\u6709\u5e94\u7528\u3002</p> <p>\u6240\u4ee5\uff0c\u7efc\u4e0a\u6240\u8ff0\uff0c\u540c\u6b65\u548c\u5f02\u6b65\u4ec5\u4ec5\u662f\u5173\u6ce8\u7684\u6d88\u606f\u5982\u4f55\u901a\u77e5\u7684\u673a\u5236\uff0c\u800c\u963b\u585e\u4e0e\u975e\u963b\u585e\u5173\u6ce8\u7684\u662f\u7b49\u5f85\u6d88\u606f\u901a\u77e5\u65f6\u7684\u72b6\u6001\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u540c\u6b65\u7684\u60c5\u51b5\u4e0b\uff0c\u662f\u7531\u5904\u7406\u6d88\u606f\u8005\u81ea\u5df1\u53bb\u7b49\u5f85\u6d88\u606f\u662f\u5426\u88ab\u89e6\u53d1\uff0c\u800c\u5f02\u6b65\u7684\u60c5\u51b5\u4e0b\u662f\u7531\u89e6\u53d1\u673a\u5236\u6765\u901a\u77e5\u5904\u7406\u6d88\u606f\u8005\uff0c\u6240\u4ee5\u5728\u5f02\u6b65\u673a\u5236\u4e2d\uff0c\u5904\u7406\u6d88\u606f\u8005\u548c\u89e6\u53d1\u673a\u5236\u4e4b\u95f4\u5c31\u9700\u8981\u4e00\u4e2a\u8fde\u63a5\u7684\u6865\u6881\u3002\u5728\u5c0f\u660e\u7684\u4f8b\u5b50\u4e2d\uff0c\u8fd9\u4e2a\u6865\u6881\u5c31\u662f\u8f6f\u4ef6\u201c\u53ee\u201d\u7684\u58f0\u97f3\u3002</p> <p>\u4f20\u7edf\u7684\u670d\u52a1\u5668\uff08apache\uff09\u91c7\u7528\u7684\u90fd\u662f\u540c\u6b65\u963b\u585e\u6a21\u578b\u5b9e\u73b0\uff0c\u4e00\u4e2aprocess\u8d1f\u8d23\u4e00\u4e2arequest\uff0c\u76f4\u81f3\u4f1a\u8bdd\u7ed3\u675f\uff1b\u800c\u8ba1\u7b97\u673a\u652f\u6301\u7684process\u662f\u6709\u9650\u7684\uff0c\u8fdb\u7a0b\u6570\u8d8a\u591a\uff0c\u7cfb\u7edf\u8c03\u5ea6\u5f00\u9500\u5c31\u4f1a\u8d8a\u5927\uff0c\u56e0\u6b64\u65e0\u6cd5\u652f\u6301\u9ad8\u5e76\u53d1\uff01</p> <p>\u800cnginx\u91c7\u7528\u5f02\u6b65\u975e\u963b\u585e\u6a21\u578b\u5b9e\u73b0\uff0c\u652f\u6301\u9ad8\u5e76\u53d1\uff0c\u5176\u4e2d\u591a\u8def\u590d\u7528epoll\u6a21\u578b\uff0c\u5373\u5f53\u6709\u4e8b\u4ef6\u4ea7\u751f\u7684\u65f6\u5019\uff0cepoll\u4f1a\u544a\u8bc9\u8fdb\u7a0b\u54ea\u4e2a\u8fde\u63a5\u6709I/O\u4e8b\u4ef6\u4ea7\u751f\uff0c\u7136\u540e\u8fdb\u7a0b\u5c31\u4f1a\u53bb\u5904\u7406\u8fd9\u4e2a\u4e8b\u4ef6\u3002</p> <p>\u5f02\u6b65\u975e\u963b\u585e\u65b9\u5f0f\u8fd0\u884c\uff0c\u8f7b\u677e\u5904\u7406\u767e\u4e07\u7ea7\u7684\u5e76\u53d1\u8fde\u63a5\uff0cnginx\u914d\u7f6eepoll\uff1a</p> <pre><code>#\u5b9a\u4e49nginx\u8fd0\u884c\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\n#user  nobody; \n\n\n#\u67e5\u770bcpu\u903b\u8f91\u6838\u5fc3\u6570\uff1acat /proc/cpuinfo |grep \"processor\"|wc -l\n#\u53cc\u6838CPU\uff08\u51b3\u5b9a\u51e0\u4f4d\u6570\uff09/4\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\nworker_processes    2;\nworker_cpu_affinity 01 10;\n\n#\u56db\u6838CPU/4\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\n#worker_processes   4;\n#worker_cpu_affinity 0001 0010 0100 1000;\n\n#\u5de5\u4f5c\u6a21\u5f0f\u4e0e\u8fde\u63a5\u6570\u4e0a\u9650\nevents {\n        # \u5f02\u6b65\u975e\u963b\u585e\u65b9\u5f0f\u8fd0\u884c\uff0c\u8f7b\u677e\u5904\u7406\u767e\u4e07\u7ea7\u7684\u5e76\u53d1\u8fde\u63a5\n        use epoll;\n        #\u5355\u4e2a\u8fdb\u7a0b\u6700\u5927\u8fde\u63a5\u6570\uff08\u6700\u5927\u8fde\u63a5\u6570=\u8fde\u63a5\u6570*\u8fdb\u7a0b\u6570\uff09\n        worker_connections  2048;\n}\n\n#\u8bbe\u5b9ahttp\u670d\u52a1\u5668\nhttp {\n    ... ...\n}\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/","title":"DjangoRestFramework-\u5b66\u4e60\u6587\u6863","text":"<p>Django\u89c6\u56fe\u5f00\u53d1\u6a21\u5f0f\uff1a</p> <p>FBV\uff08function base views\uff09: \u57fa\u4e8e\u51fd\u6570\u7684\u89c6\u56fe\uff0c\u5c31\u662f\u5728\u89c6\u56fe\u91cc\u4f7f\u7528\u51fd\u6570\u5904\u7406\u8bf7\u6c42\u3002</p> <p>\u200b   urls.py</p> <pre><code>from django.contrib import admin\nfrom django.urls import path\n\nfrom appweb.views import login\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('login/', login),\n]\n</code></pre> <p>\u200b   views.py</p> <pre><code>from django.shortcuts import render, HttpResponse\n\n\ndef login(request):\n    return HttpResponse(\"Login\")\n</code></pre> <p>CBV\uff08class base views\uff09: \u57fa\u4e8e\u7c7b\u7684\u89c6\u56fe\uff0c\u5c31\u662f\u5728\u89c6\u56fe\u91cc\u4f7f\u7528\u7c7b\u5904\u7406\u8bf7\u6c42\u3002</p> <p>\u200b   url.py</p> <pre><code>from django.contrib import admin\nfrom django.urls import path\n\nfrom appweb.views import LoginView\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('login/', LoginView.as_view()),\n]\n</code></pre> <p>\u200b   views.py</p> <pre><code>from django.shortcuts import HttpResponse\nfrom django.views import View\n\n\nclass LoginView(View):\n    \"\"\"\u767b\u5f55\u89c6\u56fe\"\"\"\n\n    def get(self, request):\n        \"\"\"get\u8bf7\u6c42\u5904\u7406\"\"\"\n        return HttpResponse(\"GET\")\n\n    def post(self, request):\n        \"\"\"post\u8bf7\u6c42\u5904\u7406\"\"\"\n        return HttpResponse(\"POST\")\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#web","title":"\u4e00\u3001 Web\u5e94\u7528\u6a21\u5f0f","text":"<p>\u5f00\u53d1Web\u5e94\u7528\u6a21\u5f0f\uff1a</p> <p>\u200b   \u524d\u540e\u7aef\u5206\u79bb\u6a21\u5f0f</p> <p>\u200b   \u524d\u540e\u7aef\u4e0d\u5206\u79bb\u6a21\u5f0f\u6a21\u5f0f</p>"},{"location":"mds/Python-Note/DRF-Note/#1","title":"1. \u524d\u540e\u7aef\u4e0d\u5206\u79bb","text":"<p>\u5ba2\u6237\u7aef\u770b\u5230\u7684\u5185\u5bb9\u548c\u6240\u6709\u754c\u9762\u6548\u679c\u90fd\u662f\u7531\u670d\u52a1\u7aef\u63d0\u4f9b\u51fa\u6765\u7684</p> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#2","title":"2. \u524d\u540e\u7aef\u5206\u79bb","text":"<p>\u628a\u524d\u7aef\u7684\u754c\u9762\u6548\u679c(html\uff0ccss\uff0cjs\u5206\u79bb\u5230\u53e6\u4e00\u4e2a\u670d\u52a1\u7aef\uff0cpython\u670d\u52a1\u7aef\u53ea\u9700\u8981\u8fd4\u56de\u6570\u636e\u5373\u53ef)</p> <p>\u524d\u7aef\u5f62\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u7f51\u7ad9\uff0c\u670d\u52a1\u7aef\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u7f51\u7ad9</p> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#api","title":"\u4e8c\u3001api\u63a5\u53e3","text":"<p>\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3\uff08Application Programming Interface\uff0cAPI\u63a5\u53e3\uff09\uff0c\u5c31\u662f\u5e94\u7528\u7a0b\u5e8f\u5bf9\u5916\u63d0\u4f9b\u4e86\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u7684\u5165\u53e3\uff0c\u8fd9\u4e2a\u5165\u53e3\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u7c7b\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2aurl\u5730\u5740\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u5730\u5740\u3002\u5f53\u5ba2\u6237\u7aef\u8c03\u7528\u8fd9\u4e2a\u5165\u53e3\uff0c\u5e94\u7528\u7a0b\u5e8f\u5219\u4f1a\u6267\u884c\u5bf9\u5e94\u4ee3\u7801\u64cd\u4f5c\uff0c\u7ed9\u5ba2\u6237\u7aef\u5b8c\u6210\u76f8\u5bf9\u5e94\u7684\u529f\u80fd\u3002</p> <p>\u5f53\u7136\uff0capi\u63a5\u53e3\u5728\u5de5\u4f5c\u4e2d\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u5f00\u53d1\u5185\u5bb9\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u8c03\u7528\u5176\u4ed6\u4eba\u7f16\u5199\u7684api\u63a5\u53e3\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u63d0\u4f9bapi\u63a5\u53e3\u7ed9\u5176\u4ed6\u4eba\u64cd\u4f5c\u3002\u7531\u6b64\u5c31\u4f1a\u5e26\u6765\u4e00\u4e2a\u95ee\u9898\uff0capi\u63a5\u53e3\u5f80\u5f80\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\u3001\u7c7b\u65b9\u6cd5\u3001\u6216\u8005url\u6216\u5176\u4ed6\u7f51\u7edc\u5730\u5740\uff0c\u4e0d\u65ad\u662f\u54ea\u4e00\u79cd\uff0c\u5f53api\u63a5\u53e3\u7f16\u5199\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u90fd\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u8fd9\u4e2a\u63a5\u53e3\u5e94\u8be5\u600e\u4e48\u7f16\u5199\uff1f\u63a5\u53e3\u600e\u4e48\u5199\u7684\u66f4\u52a0\u5bb9\u6613\u7ef4\u62a4\u548c\u6e05\u6670\uff0c\u8fd9\u5c31\u9700\u8981\u5927\u5bb6\u5728\u8c03\u7528\u6216\u8005\u7f16\u5199api\u63a5\u53e3\u7684\u65f6\u5019\u8981\u6709\u4e00\u4e2a\u660e\u786e\u7684\u7f16\u5199\u89c4\u8303\uff01\uff01\uff01</p> <p>\u4e3a\u4e86\u5728\u56e2\u961f\u5185\u90e8\u5f62\u6210\u5171\u8bc6\u3001\u9632\u6b62\u4e2a\u4eba\u4e60\u60ef\u5dee\u5f02\u5f15\u8d77\u7684\u6df7\u4e71\uff0c\u6211\u4eec\u90fd\u9700\u8981\u627e\u5230\u4e00\u79cd\u5927\u5bb6\u90fd\u89c9\u5f97\u5f88\u597d\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\uff0c\u800c\u4e14\u8fd9\u79cd\u89c4\u8303\u80fd\u591f\u8ba9\u540e\u7aef\u5199\u7684\u63a5\u53e3\uff0c\u7528\u9014\u4e00\u76ee\u4e86\u7136\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u53cc\u65b9\u4e4b\u95f4\u7684\u5408\u4f5c\u6210\u672c\u3002</p> <p>\u76ee\u524d\u5e02\u9762\u4e0a\u5927\u90e8\u5206\u516c\u53f8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\u4e3b\u8981\u6709\uff1aRPC\u3001restful\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#1-rpc-remote-procedure-call","title":"1. RPC\uff08 Remote Procedure Call \uff09","text":"<p>\u200b   \u7ffb\u8bd1\u6210\u4e2d\u6587\uff1a\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528[\u8fdc\u7a0b\u670d\u52a1\u8c03\u7528\u3002\u4ece\u5b57\u9762\u4e0a\u7406\u89e3\u5c31\u662f\u8bbf\u95ee/\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u7aef\u63d0\u4f9b\u7684api\u63a5\u53e3\u3002\u8fd9\u79cd\u63a5\u53e3\u4e00\u822c\u4ee5\u670d\u52a1\u6216\u8005\u8fc7\u7a0b\u5f0f\u4ee3\u7801\u63d0\u4f9b\u3002</p> <ul> <li> <p>\u670d\u52a1\u7aef\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u8bbf\u95ee\u5165\u53e3\u5730\u5740\uff1ahttp://api.xxx.com/ \u6216 http://www.xx.com/api \u6216\u8005\u57fa\u4e8e\u5176\u4ed6\u534f\u8bae\u7684\u5730\u5740</p> </li> <li> <p>\u5ba2\u6237\u7aef\u8bf7\u6c42\u670d\u52a1\u7aef\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u7406\u89e3\u4e3a\u52a8\u4f5c(action)\uff0c\u4e00\u822cweb\u5f00\u53d1\u65f6\uff0c\u5bf9\u5e94\u7684\u5c31\u662fHTTP\u8bf7\u6c42\u7684post\u8bf7\u6c42</p> </li> <li> <p>\u901a\u8fc7\u8bf7\u6c42\u4f53\u53c2\u6570\uff0c\u6307\u5b9a\u8981\u8c03\u7528\u7684\u63a5\u53e3\u540d\u79f0\u548c\u63a5\u53e3\u6240\u9700\u7684\u53c2\u6570</p> </li> </ul> <p>action=get_all_student&amp;class=301&amp;sex=1</p> <p>m=get_all_student&amp;sex=1&amp;age=22</p> <p>command=100&amp;sex=1&amp;age=22</p> <p>RPC\u63a5\u53e3\u591a\u4e86,\u5bf9\u5e94\u51fd\u6570\u540d\u548c\u53c2\u6570\u5c31\u591a\u4e86,\u524d\u7aef\u5728\u8bf7\u6c42api\u63a5\u53e3\u65f6\u96be\u627e\uff0c\u5bf9\u4e8e\u5e74\u4ee3\u4e45\u8fdc\u7684rpc\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u4e5f\u5bb9\u6613\u51fa\u73b0\u91cd\u590d\u7684\u63a5\u53e3</p>"},{"location":"mds/Python-Note/DRF-Note/#2-restful","title":"2. Restful","text":"<p>\u200b   \u7ffb\u8bd1\u6210\u4e2d\u6587\uff1a\u8d44\u6e90\u72b6\u6001\u8f6c\u6362.(\u8868\u5f81\u6027\u72b6\u6001\u8f6c\u79fb)</p> <ul> <li>\u628a\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u6240\u6709\u7684\u6570\u636e/\u6587\u4ef6\u90fd\u770b\u6210\u8d44\u6e90\uff0c \u90a3\u4e48\u901a\u8fc7api\u63a5\u53e3\u8bf7\u6c42\u6570\u636e\u7684\u64cd\u4f5c\uff0c\u672c\u8d28\u4e0a\u6765\u8bf4\u5c31\u662f\u5bf9\u8d44\u6e90\u7684\u64cd\u4f5c\u4e86.</li> </ul> <p>\u56e0\u6b64\uff0crestful\u4e2d\u8981\u6c42\uff0c\u6211\u4eec\u628a\u5f53\u524d\u63a5\u53e3\u5bf9\u5916\u63d0\u4f9b\u54ea\u79cd\u8d44\u6e90\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c31\u628a\u8d44\u6e90\u7684\u540d\u79f0\u5199\u5728url\u5730\u5740\u3002</p> <ul> <li>web\u5f00\u53d1\u4e2d\u64cd\u4f5c\u8d44\u6e90\uff0c\u6700\u5e38\u89c1\u7684\u6700\u901a\u7528\u7684\u65e0\u975e\u5c31\u662f\u589e\u5220\u67e5\u6539\uff0c\u6240\u4ee5restful\u8981\u6c42\u5728\u5730\u5740\u680f\u4e2d\u58f0\u660e\u8981\u64cd\u4f5c\u7684\u8d44\u6e90\u662f\u4ec0\u4e48\u3002\u7136\u540e\u901a\u8fc7http\u8bf7\u6c42\u52a8\u8bcd\u6765\u8bf4\u660e\u5bf9\u8be5\u8d44\u6e90\u8fdb\u884c\u54ea\u4e00\u79cd\u64cd\u4f5c</li> </ul> <p>POST http://www.xxx.com/api/students/   \u2014&gt;  \u6dfb\u52a0\u5b66\u751f\u6570\u636e</p> <p>GET http://www.xxx.com/api/students/   \u2014&gt;  \u83b7\u53d6\u6240\u6709\u5b66\u751f</p> <p>GET http://www.xxx.com/api/students//   \u2014&gt;  \u83b7\u53d6id=pk\u7684\u5b66\u751f <p>DELETE http://www.xxx.com/api/students//   \u2014&gt;  \u5220\u9664id=pk\u7684\u4e00\u4e2a\u5b66\u751f <p>PUT http://www.xxx.com/api/students//   \u2014&gt;  \u4fee\u6539\u4e00\u4e2a\u5b66\u751f\u7684\u5168\u90e8\u4fe1\u606f [id,name,sex,age,] <p>PATCH http://www.xxx.com/api/students//   \u2014&gt;  \u4fee\u6539\u4e00\u4e2a\u5b66\u751f\u7684\u90e8\u5206\u4fe1\u606f[age] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u4ec5\u9700\u8981\u901a\u8fc7url\u5730\u5740\u4e0a\u7684\u8d44\u6e90\u540d\u79f0\u7ed3\u5408HTTP\u8bf7\u6c42\u52a8\u4f5c\uff0c\u5c31\u53ef\u4ee5\u8bf4\u660e\u5f53\u524dapi\u63a5\u53e3\u7684\u529f\u80fd\u662f\u4ec0\u4e48\u4e86\u3002</p> <p>RPC\u52a8\u4f5c\u4e3a\u4e3b\u7684api\u63a5\u53e3\u89c4\u8303\uff0c\u4f53\u73b0\u5728\u63a5\u53e3\u540d\u79f0\u4e0a\u5f80\u5f80\u9644\u5e26\u64cd\u4f5c\u6570\u636e\u7684\u52a8\u4f5c\u3002</p> <p>Restful\u662f\u4ee5\u8d44\u6e90\u4e3a\u4e3b\u7684api\u63a5\u53e3\u89c4\u8303\uff0c\u4f53\u73b0\u5728\u5730\u5740\u4e0a\u5c31\u662f\u8d44\u6e90\u5c31\u662f\u4ee5\u540d\u8bcd\u8868\u8fbe\u3002</p> <p>\u603b\u7ed3\u6982\u62ec\uff1a\u589e\u5220\u6539\u67e5\u67e5</p>"},{"location":"mds/Python-Note/DRF-Note/#restful-api","title":"\u4e09\u3001RESTful API\u89c4\u8303","text":"<p>REST\u5168\u79f0\u662fRepresentational State Transfer\uff0c\u4e2d\u6587\u610f\u601d\u662f\u8868\u8ff0\uff08\u7f16\u8005\u6ce8\uff1a\u901a\u5e38\u8bd1\u4e3a\u8868\u5f81\uff09\u6027\u72b6\u6001\u8f6c\u79fb\u3002 \u5b83\u9996\u6b21\u51fa\u73b0\u57282000\u5e74Roy Fielding\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u3002</p> <p>RESTful\u662f\u4e00\u79cd\u4e13\u95e8\u4e3aWeb \u5f00\u53d1\u800c\u5b9a\u4e49API\u63a5\u53e3\u7684\u8bbe\u8ba1\u98ce\u683c\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u524d\u540e\u7aef\u5206\u79bb\u7684\u5e94\u7528\u6a21\u5f0f\u4e2d\u3002</p> <p>\u8fd9\u79cd\u98ce\u683c\u7684\u7406\u5ff5\u8ba4\u4e3a\u540e\u7aef\u5f00\u53d1\u4efb\u52a1\u5c31\u662f\u63d0\u4f9b\u6570\u636e\u7684\uff0c\u5bf9\u5916\u63d0\u4f9b\u7684\u662f\u6570\u636e\u8d44\u6e90\u7684\u8bbf\u95ee\u63a5\u53e3\uff0c\u6240\u4ee5\u5728\u5b9a\u4e49\u63a5\u53e3\u65f6\uff0c\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684URL\u8def\u5f84\u5c31\u8868\u793a\u8fd9\u79cd\u8981\u64cd\u4f5c\u7684\u6570\u636e\u8d44\u6e90\u3002</p> <p>\u800c\u5bf9\u4e8e\u6570\u636e\u8d44\u6e90\u5206\u522b\u4f7f\u7528POST\u3001DELETE\u3001GET\u3001UPDATE\u7b49\u8bf7\u6c42\u52a8\u4f5c\u6765\u8868\u8fbe\u5bf9\u6570\u636e\u7684\u589e\u5220\u67e5\u6539\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#1-restful","title":"1. restful\u89c4\u8303","text":"GET /students \u83b7\u53d6\u6240\u6709\u5b66\u751f \u8bf7\u6c42\u65b9\u6cd5 \u8bf7\u6c42\u5730\u5740 \u540e\u7aef\u64cd\u4f5c POST /students \u589e\u52a0\u5b66\u751f GET /students/ \u83b7\u53d6\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f PUT /students/ \u4fee\u6539\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f DELETE /students/ \u5220\u9664\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f <p>restful\u89c4\u8303\u662f\u4e00\u79cd\u901a\u7528\u7684\u89c4\u8303\uff0c\u4e0d\u9650\u5236\u8bed\u8a00\u548c\u5f00\u53d1\u6846\u67b6\u7684\u4f7f\u7528\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u4e00\u95e8\u8bed\u8a00\uff0c\u4efb\u4f55\u4e00\u4e2a\u6846\u67b6\u90fd\u53ef\u4ee5\u5b9e\u73b0\u7b26\u5408restful\u89c4\u8303\u7684API\u63a5\u53e3\u3002</p> <p>\u53c2\u8003\u6587\u6863\uff1ahttp://www.runoob.com/w3cnote/restful-architecture.html</p>"},{"location":"mds/Python-Note/DRF-Note/#2_1","title":"2. \u5e42\u7b49\u6027","text":"<p>\u63a5\u53e3\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5b58\u5728\u5e42\u7b49\u6027\u3002\u6240\u8c13\u5e42\u7b49\u6027\u662f\u6307\u4ee3\u5ba2\u6237\u7aef\u53d1\u8d77\u591a\u6b21\u540c\u6837\u8bf7\u6c42\u65f6\uff0c\u662f\u5426\u5bf9\u4e8e\u670d\u52a1\u7aef\u91cc\u9762\u7684\u8d44\u6e90\u4ea7\u751f\u4e0d\u540c\u7ed3\u679c\u3002\u5982\u679c\u591a\u6b21\u8bf7\u6c42\uff0c\u670d\u52a1\u7aef\u7ed3\u679c\u8fd8\u662f\u4e00\u6837\uff0c\u5219\u5c5e\u4e8e\u5e42\u7b49\u63a5\u53e3\uff0c\u5982\u679c\u591a\u6b21\u8bf7\u6c42\uff0c\u670d\u52a1\u7aef\u4ea7\u751f\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5219\u5c5e\u4e8e\u975e\u5e42\u7b49\u63a5\u53e3\u3002</p> \u8bf7\u6c42\u65b9\u5f0f \u662f\u5426\u5e42\u7b49 \u662f\u5426\u5b89\u5168 GET \u5e42\u7b49 \u5b89\u5168 POST \u4e0d\u5e42\u7b49 \u4e0d\u5b89\u5168 PUT/PATCH \u5e42\u7b49 \u4e0d\u5b89\u5168 DELETE \u5e42\u7b49 \u4e0d\u5b89\u5168"},{"location":"mds/Python-Note/DRF-Note/#_1","title":"\u56db\u3001\u5e8f\u5217\u5316","text":"<p>api\u63a5\u53e3\u5f00\u53d1\uff0c\u6700\u6838\u5fc3\u6700\u5e38\u89c1\u7684\u4e00\u4e2a\u4ee3\u7801\u7f16\u5199\u8fc7\u7a0b\u5c31\u662f\u5e8f\u5217\u5316\uff0c\u6240\u8c13\u5e8f\u5217\u5316\u5c31\u662f\u628a\u6570\u636e\u8f6c\u6362\u683c\u5f0f\u3002</p> <p>\u5e38\u89c1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\uff1ajson\uff0cpickle\uff0cbase64\uff0c\u2026.</p> <p>\u5e8f\u5217\u5316\u53ef\u4ee5\u5206\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <p>\u200b   \u5e8f\u5217\u5316\uff1a \u628a\u6211\u4eec\u8bc6\u522b\u7684\u6570\u636e\u8f6c\u6362\u6210\u6307\u5b9a\u7684\u683c\u5f0f\u63d0\u4f9b\u7ed9\u522b\u4eba\u3002\u4f8b\u5982\uff1a\u6211\u4eec\u5728django\u4e2d\u83b7\u53d6\u5230\u7684\u6570\u636e\u9ed8\u8ba4\u662f\u6a21\u578b\u5bf9\u8c61\uff0c\u4f46\u662f\u6a21\u578b\u5bf9\u8c61\u6570\u636e\u65e0\u6cd5\u76f4\u63a5\u63d0\u4f9b\u7ed9\u524d\u7aef\u6216\u522b\u7684\u5e73\u53f0\u4f7f\u7528\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u628a\u6570\u636e\u8fdb\u884c\u5e8f\u5217\u5316\uff0c\u53d8\u6210\u5b57\u7b26\u4e32\u6216\u8005json\u6570\u636e\uff0c\u63d0\u4f9b\u7ed9\u522b\u4eba\u3002</p> <p>\u200b   \u53cd\u5e8f\u5217\u5316\uff1a\u628a\u522b\u4eba\u63d0\u4f9b\u7684\u6570\u636e\u8f6c\u6362/\u8fd8\u539f\u6210\u6211\u4eec\u9700\u8981\u7684\u683c\u5f0f\u3002\u4f8b\u5982\uff1a\u524d\u7aefjs\u63d0\u4f9b\u8fc7\u6765\u7684json\u6570\u636e\uff0c\u5bf9\u4e8epython\u800c\u8a00json\u5c31\u662f\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u6362\u6210\u5b57\u5178\uff0c\u7136\u540e\u63a5\u7740\u5b57\u5178\u518d\u8fdb\u884c\u8f6c\u6362\u6210\u6a21\u578b\u5bf9\u8c61\uff0c\u8fd9\u6837\u6211\u4eec\u624d\u80fd\u628a\u6570\u636e\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u4e2d\u3002</p> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#django-rest_framework","title":"\u4e94\u3001Django Rest_Framework","text":"<p>\u6838\u5fc3\u601d\u60f3: \u5927\u91cf\u7f29\u51cf\u7f16\u5199api\u63a5\u53e3\u7684\u4ee3\u7801</p> <p>Django REST framework\u662f\u4e00\u4e2a\u5efa\u7acb\u5728Django\u57fa\u7840\u4e4b\u4e0a\u7684Web \u5e94\u7528\u5f00\u53d1\u6846\u67b6\uff0c\u53ef\u4ee5\u5feb\u901f\u7684\u5f00\u53d1REST API\u63a5\u53e3\u5e94\u7528\u3002\u5728REST framework\u4e2d\uff0c\u63d0\u4f9b\u4e86\u5e8f\u5217\u5316\u5668Serialzier\u7684\u5b9a\u4e49\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u7b80\u5316\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\u7684\u8fc7\u7a0b\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd8\u63d0\u4f9b\u4e30\u5bcc\u7684\u7c7b\u89c6\u56fe\u3001\u6269\u5c55\u7c7b\u3001\u89c6\u56fe\u96c6\u6765\u7b80\u5316\u89c6\u56fe\u7684\u7f16\u5199\u5de5\u4f5c\u3002REST framework\u8fd8\u63d0\u4f9b\u4e86\u8ba4\u8bc1\u3001\u6743\u9650\u3001\u9650\u6d41\u3001\u8fc7\u6ee4\u3001\u5206\u9875\u3001\u63a5\u53e3\u6587\u6863\u7b49\u529f\u80fd\u652f\u6301\u3002REST framework\u63d0\u4f9b\u4e86\u4e00\u4e2aAPI \u7684Web\u53ef\u89c6\u5316\u754c\u9762\u6765\u65b9\u4fbf\u67e5\u770b\u6d4b\u8bd5\u63a5\u53e3\u3002</p> <p> </p> <p>\u4e2d\u6587\u6587\u6863\uff1ahttps://q1mi.github.io/Django-REST-framework-documentation/#django-rest-framework</p> <p>github:\uff1ahttps://github.com/encode/django-rest-framework/tree/master</p> <p>\u7279\u70b9</p> <ul> <li>\u63d0\u4f9b\u4e86\u5b9a\u4e49\u5e8f\u5217\u5316\u5668Serializer\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5feb\u901f\u6839\u636e Django ORM \u6216\u8005\u5176\u5b83\u5e93\u81ea\u52a8\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\uff1b</li> <li>\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u7c7b\u89c6\u56fe\u3001Mixin\u6269\u5c55\u7c7b\uff0c\u7b80\u5316\u89c6\u56fe\u7684\u7f16\u5199\uff1b</li> <li>\u4e30\u5bcc\u7684\u5b9a\u5236\u5c42\u7ea7\uff1a\u51fd\u6570\u89c6\u56fe\u3001\u7c7b\u89c6\u56fe\u3001\u89c6\u56fe\u96c6\u5408\u5230\u81ea\u52a8\u751f\u6210 API\uff0c\u6ee1\u8db3\u5404\u79cd\u9700\u8981\uff1b</li> <li>\u591a\u79cd\u8eab\u4efd\u8ba4\u8bc1\u548c\u6743\u9650\u8ba4\u8bc1\u65b9\u5f0f\u7684\u652f\u6301\uff1b[jwt]</li> <li>\u5185\u7f6e\u4e86\u9650\u6d41\u7cfb\u7edf\uff1b</li> <li>\u76f4\u89c2\u7684 API web \u754c\u9762\uff1b\u3010\u65b9\u4fbf\u6211\u4eec\u8c03\u8bd5\u5f00\u53d1api\u63a5\u53e3\u3011</li> <li>\u53ef\u6269\u5c55\u6027\uff0c\u63d2\u4ef6\u4e30\u5bcc</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#_2","title":"\u516d\u3001\u73af\u5883\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"<p>DRF\u9700\u8981\u4ee5\u4e0b\u4f9d\u8d56\uff1a</p> <ul> <li>Python (3.5 \u4ee5\u4e0a)</li> <li>Django (2.2 \u4ee5\u4e0a)</li> </ul> <p>DRF\u662f\u4ee5Django\u5b50\u5e94\u7528\u7684\u65b9\u5f0f\u63d0\u4f9b\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5229\u7528\u5df2\u6709\u7684Django\u73af\u5883\u800c\u65e0\u9700\u4ece\u65b0\u521b\u5efa\u3002\uff08\u82e5\u6ca1\u6709Django\u73af\u5883\uff0c\u9700\u8981\u5148\u521b\u5efa\u73af\u5883\u5b89\u88c5Django\uff09</p>"},{"location":"mds/Python-Note/DRF-Note/#1-drf","title":"1. \u5b89\u88c5DRF","text":"<p>\u524d\u63d0\u662f\u5df2\u7ecf\u5b89\u88c5\u4e86django\uff0c\u5efa\u8bae\u5b89\u88c5\u5728\u865a\u62df\u73af\u5883</p> <pre><code># conda create -n drfdemo python=3.8\n# pip install django==3.2.4  -i https://pypi.douban.com/simple\n\npip install djangorestframework -i https://pypi.douban.com/simple\n\n# \u56e0\u4e3a\u6211\u4eec\u9700\u8981\u63a5\u4e0b\u6765\uff0c\u9700\u8981\u5f00\u53d1api\u63a5\u53e3\u80af\u5b9a\u8981\u64cd\u4f5c\u6570\u636e\uff0c\u6240\u4ee5\u5b89\u88c5pymysql\npip install pymysql -i https://pypi.douban.com/simple\n</code></pre> <p>\u521b\u5efadjango\u9879\u76ee</p> <pre><code>cd ~/Desktop\ndjango-admin startproject drfdemo\n</code></pre> <p> </p> <p>\u4f7f\u7528pycharm\u6253\u5f00\u9879\u76ee\uff0c\u8bbe\u7f6e\u865a\u62df\u73af\u5883\u7684\u89e3\u6790\u5668\uff0c\u5e76\u4fee\u6539manage.py\u4e2d\u7684\u540e\u7f00\u53c2\u6570\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#2-rest_framework","title":"2. \u6dfb\u52a0rest_framework\u5e94\u7528","text":"<p>\u5728settings.py\u7684INSTALLED_APPS\u4e2d\u6dfb\u52a0\u2019rest_framework\u2019\u3002</p> <pre><code>INSTALLED_APPS = [\n    ...\n    'rest_framework',\n]\n</code></pre> <p>\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u4f7f\u7528DRF\u63d0\u4f9b\u7684\u529f\u80fd\u8fdb\u884capi\u63a5\u53e3\u5f00\u53d1\u4e86\u3002\u5728\u9879\u76ee\u4e2d\u5982\u679c\u4f7f\u7528rest_framework\u6846\u67b6\u5b9e\u73b0API\u63a5\u53e3\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u5c06\u8bf7\u6c42\u7684\u6570\u636e\uff08\u5982JSON\u683c\u5f0f\uff09\u8f6c\u6362\u4e3a\u6a21\u578b\u7c7b\u5bf9\u8c61</li> <li>\u64cd\u4f5c\u6570\u636e\u5e93</li> <li>\u5c06\u6a21\u578b\u7c7b\u5bf9\u8c61\u8f6c\u6362\u4e3a\u54cd\u5e94\u7684\u6570\u636e\uff08\u5982JSON\u683c\u5f0f\uff09</li> </ul> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5feb\u901f\u4f53\u9a8c\u4e0b\u56db\u5929\u540e\u6211\u4eec\u5b66\u4e60\u5b8c\u6210drf\u4ee5\u540e\u7684\u5f00\u53d1\u4ee3\u7801\u3002\u63a5\u4e0b\u6765\u4ee3\u7801\u4e0d\u9700\u8981\u7406\u89e3\uff0c\u770b\u6b65\u9aa4\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#3","title":"3. \u5feb\u901f\u4f53\u9a8c","text":""},{"location":"mds/Python-Note/DRF-Note/#31","title":"3.1 \u521b\u5efa\u6a21\u578b\u64cd\u4f5c\u7c7b","text":"<pre><code>class Student(models.Model):\n    # \u6a21\u578b\u5b57\u6bb5\n    name = models.CharField(max_length=100,verbose_name=\"\u59d3\u540d\")\n    sex = models.BooleanField(default=1,verbose_name=\"\u6027\u522b\")\n    age = models.IntegerField(verbose_name=\"\u5e74\u9f84\")\n    class_null = models.CharField(max_length=5,verbose_name=\"\u73ed\u7ea7\u7f16\u53f7\")\n    description = models.TextField(max_length=1000,verbose_name=\"\u4e2a\u6027\u7b7e\u540d\")\n\n    class Meta:\n        db_table=\"tb_student\"\n        verbose_name = \"\u5b66\u751f\"\n        verbose_name_plural = verbose_name\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u6d4b\u8bd5\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u3002</p> <pre><code>create database students charset=utf8;\n</code></pre> <p> </p> <p>\u6267\u884c\u6570\u636e\u8fc1\u79fb</p> <p>\u628astudents\u5b50\u5e94\u7528\u6dfb\u52a0\u5230INSTALL_APPS\u4e2d\uff1a</p> <p> </p> <p>\u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5\uff1a</p> <pre><code>\u5b89\u88c5pymysql\npip install pymysql\n</code></pre> <p>\u4e3b\u5f15\u7528\u4e2d<code>__init__.py</code>\u8bbe\u7f6e\u4f7f\u7528pymysql\u4f5c\u4e3a\u6570\u636e\u5e93\u9a71\u52a8</p> <pre><code>import pymysql\npymysql.install_as_MySQLdb()\n</code></pre> <p>settings.py\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6emysql\u7684\u8d26\u53f7\u5bc6\u7801</p> <pre><code>DATABASES = {\n    # 'default': {\n    #     'ENGINE': 'django.db.backends.sqlite3',\n    #     'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    # },\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': \"students\",\n        \"HOST\": \"127.0.0.1\",\n        \"PORT\": 3306,\n        \"USER\": \"root\",\n        \"PASSWORD\":\"123\",\n    },\n}\n</code></pre> <p>\u7ec8\u7aef\u4e0b\uff0c\u6267\u884c\u6570\u636e\u8fc1\u79fb\u3002</p> <pre><code>python manage.py makemigrations students\npython manage.py migrate\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#32","title":"3.2 \u521b\u5efa\u5e8f\u5217\u5316\u5668","text":"<p>\u4f8b\u5982\uff0c\u5728django\u9879\u76ee\u4e2d\u521b\u5efa\u5b66\u751f\u5b50\u5e94\u7528\u3002</p> <p>\u5728students\u5e94\u7528\u76ee\u5f55\u4e2d\u65b0\u5efaserializers.py\u7528\u4e8e\u4fdd\u5b58\u8be5\u5e94\u7528\u7684\u5e8f\u5217\u5316\u5668\u3002</p> <p>\u521b\u5efa\u4e00\u4e2aStudentModelSerializer\u7528\u4e8e\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\u3002</p> <pre><code>from \n\nclass StudentModelSerializer(serializers.ModelSerializer):\n    \"\"\"\u521b\u5efa\u5e8f\u5217\u5316\u5668\u7c7b\uff0c\u89c6\u56fe\u4e4b\u4e2d\u8c03\u7528\"\"\"\n    class Meta:\n        model = Student\n        fields = \"__all__\"\n</code></pre> <ul> <li>model \u6307\u660e\u8be5\u5e8f\u5217\u5316\u5668\u5904\u7406\u7684\u6570\u636e\u5b57\u6bb5\u4ece\u6a21\u578b\u7c7bStudent\u53c2\u8003\u751f\u6210</li> <li>fields \u6307\u660e\u8be5\u5e8f\u5217\u5316\u5668\u5305\u542b\u6a21\u578b\u7c7b\u4e2d\u7684\u54ea\u4e9b\u5b57\u6bb5\uff0c\u2019all\u2018\u6307\u660e\u5305\u542b\u6240\u6709\u5b57\u6bb5</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#33","title":"3.3 \u7f16\u5199\u89c6\u56fe","text":"<p>\u5728students\u5e94\u7528\u7684views.py\u4e2d\u521b\u5efa\u89c6\u56feStudentViewSet\uff0c\u8fd9\u662f\u4e00\u4e2a\u89c6\u56fe\u96c6\u5408\u3002</p> <pre><code>from rest_framework.viewsets import ModelViewSet\nfrom .models import Student\nfrom .serializers import StudentModelSerializer\n# Create your views here.\nclass StudentViewSet(ModelViewSet):\n    queryset = Student.objects.all()\n    serializer_class = StudentModelSerializer\n</code></pre> <ul> <li>queryset \u6307\u660e\u8be5\u89c6\u56fe\u96c6\u5728\u67e5\u8be2\u6570\u636e\u65f6\u4f7f\u7528\u7684\u67e5\u8be2\u96c6</li> <li>serializer_class \u6307\u660e\u8be5\u89c6\u56fe\u5728\u8fdb\u884c\u5e8f\u5217\u5316\u6216\u53cd\u5e8f\u5217\u5316\u65f6\u4f7f\u7528\u7684\u5e8f\u5217\u5316\u5668</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#34","title":"3.4 \u5b9a\u4e49\u8def\u7531","text":"<p>\u5728students\u5e94\u7528\u7684urls.py\u4e2d\u5b9a\u4e49\u8def\u7531\u4fe1\u606f\u3002</p> <pre><code>from . import views\nfrom rest_framework.routers import DefaultRouter\n\n# \u8def\u7531\u5217\u8868\nurlpatterns = []\n\nrouter = DefaultRouter()  # \u53ef\u4ee5\u5904\u7406\u89c6\u56fe\u7684\u8def\u7531\u5668\nrouter.register('students', views.StudentViewSet)  # \u5411\u8def\u7531\u5668\u4e2d\u6ce8\u518c\u89c6\u56fe\u96c6\n\nurlpatterns += router.urls  # \u5c06\u8def\u7531\u5668\u4e2d\u7684\u6240\u4ee5\u8def\u7531\u4fe1\u606f\u8ffd\u5230\u5230django\u7684\u8def\u7531\u5217\u8868\u4e2d\n</code></pre> <p>\u6700\u540e\u628astudents\u5b50\u5e94\u7528\u4e2d\u7684\u8def\u7531\u6587\u4ef6\u52a0\u8f7d\u5230\u603b\u8def\u7531\u6587\u4ef6\u4e2d\u3002</p> <pre><code>from django.contrib import admin\nfrom django.urls import path,include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path(\"stu/\",include(\"students.urls\")),\n]\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#35","title":"3.5 \u8fd0\u884c\u6d4b\u8bd5","text":"<p>\u8fd0\u884c\u5f53\u524d\u7a0b\u5e8f\uff08\u4e0e\u8fd0\u884cDjango\u4e00\u6837\uff09</p> <pre><code>python manage.py runserver\n</code></pre> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u7f51\u5740127.0.0.1:8000\uff0c\u53ef\u4ee5\u770b\u5230DRF\u63d0\u4f9b\u7684API Web\u6d4f\u89c8\u9875\u9762\uff1a</p> <p> </p> <p>1\uff09\u70b9\u51fb\u94fe\u63a5127.0.0.1:8000/stu/students \u53ef\u4ee5\u8bbf\u95ee\u83b7\u53d6\u6240\u6709\u6570\u636e\u7684\u63a5\u53e3\uff0c\u5448\u73b0\u5982\u4e0b\u9875\u9762\uff1a</p> <p> </p> <p>2\uff09\u5728\u9875\u9762\u5e95\u4e0b\u8868\u5355\u90e8\u5206\u586b\u5199\u5b66\u751f\u4fe1\u606f\uff0c\u53ef\u4ee5\u8bbf\u95ee\u6dfb\u52a0\u65b0\u5b66\u751f\u7684\u63a5\u53e3\uff0c\u4fdd\u5b58\u5b66\u751f\u4fe1\u606f\uff1a</p> <p> </p> <p>\u70b9\u51fbPOST\u540e\uff0c\u8fd4\u56de\u5982\u4e0b\u9875\u9762\u4fe1\u606f\uff1a</p> <p> </p> <p>3\uff09\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u7f51\u5740127.0.0.1:8000/stu/students/5/\uff0c\u53ef\u4ee5\u8bbf\u95ee\u83b7\u53d6\u5355\u4e00\u5b66\u751f\u4fe1\u606f\u7684\u63a5\u53e3\uff08id\u4e3a5\u7684\u5b66\u751f\uff09\uff0c\u5448\u73b0\u5982\u4e0b\u9875\u9762\uff1a</p> <p> </p> <p>4\uff09\u5728\u9875\u9762\u5e95\u90e8\u8868\u5355\u4e2d\u586b\u5199\u5b66\u751f\u4fe1\u606f\uff0c\u53ef\u4ee5\u8bbf\u95ee\u4fee\u6539\u5b66\u751f\u7684\u63a5\u53e3\uff1a</p> <p> </p> <p>\u70b9\u51fbPUT\uff0c\u8fd4\u56de\u5982\u4e0b\u9875\u9762\u4fe1\u606f\uff1a</p> <p> </p> <p>5\uff09\u70b9\u51fbDELETE\u6309\u94ae\uff0c\u53ef\u4ee5\u8bbf\u95ee\u5220\u9664\u5b66\u751f\u7684\u63a5\u53e3\uff1a</p> <p> </p> <p>\u8fd4\u56de\uff0c\u5982\u4e0b\u9875\u9762\uff1a</p> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#apiview","title":"\u4e03\u3001APIView\u89c6\u56fe","text":"<pre><code>rest_framework.views.APIView\n</code></pre> <p><code>APIView</code>\u662fREST framework\u63d0\u4f9b\u7684\u6240\u6709\u89c6\u56fe\u7684\u57fa\u7c7b\uff0c\u7ee7\u627f\u81eaDjango\u7684<code>View</code>\u7236\u7c7b\u3002</p> <p><code>APIView</code>\u4e0e<code>View</code>\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a</p> <ul> <li>\u4f20\u5165\u5230\u89c6\u56fe\u65b9\u6cd5\u4e2d\u7684\u662fREST framework\u7684<code>Request</code>\u5bf9\u8c61\uff0c\u800c\u4e0d\u662fDjango\u7684<code>HttpRequeset</code>\u5bf9\u8c61\uff1b</li> <li>\u89c6\u56fe\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56deREST framework\u7684<code>Response</code>\u5bf9\u8c61\uff0c\u89c6\u56fe\u4f1a\u4e3a\u54cd\u5e94\u6570\u636e\u8bbe\u7f6e\uff08render\uff09\u7b26\u5408\u524d\u7aef\u671f\u671b\u8981\u6c42\u7684\u683c\u5f0f\uff1b</li> <li>\u4efb\u4f55<code>APIException</code>\u5f02\u5e38\u90fd\u4f1a\u88ab\u6355\u83b7\u5230\uff0c\u5e76\u4e14\u5904\u7406\u6210\u5408\u9002\u683c\u5f0f\u7684\u54cd\u5e94\u4fe1\u606f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b</li> <li>\u91cd\u65b0\u58f0\u660e\u4e86\u4e00\u4e2a\u65b0\u7684as_views\u65b9\u6cd5\u5e76\u5728dispatch()\u8fdb\u884c\u8def\u7531\u5206\u53d1\u524d\uff0c\u4f1a\u5bf9\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u8fdb\u884c\u8eab\u4efd\u8ba4\u8bc1\u3001\u6743\u9650\u68c0\u67e5\u3001\u6d41\u91cf\u63a7\u5236\u3002</li> </ul> <p>APIView\u65b0\u589e\u4e86\u7c7b\u5c5e\u6027</p> <ul> <li>authentication_classes \u5217\u8868\u6216\u5143\u7ec4\uff0c\u8eab\u4efd\u8ba4\u8bc1\u7c7b</li> <li>permissoin_classes \u5217\u8868\u6216\u5143\u7ec4\uff0c\u6743\u9650\u68c0\u67e5\u7c7b</li> <li>throttle_classes \u5217\u8868\u6216\u5143\u7956\uff0c\u6d41\u91cf\u63a7\u5236\u7c7b</li> </ul> <p>\u5728<code>APIView</code>\u4e2d\u4ecd\u4ee5\u5e38\u89c4\u7684\u7c7b\u89c6\u56fe\u5b9a\u4e49\u65b9\u6cd5\u6765\u5b9e\u73b0get() \u3001post() \u6216\u8005\u5176\u4ed6\u8bf7\u6c42\u65b9\u5f0f\u7684\u65b9\u6cd5\u3002</p> <p>\u638c\u63e1APIView\u7684\u8bf7\u6c42\u6d41\u7a0b\uff01\uff01\uff01</p> <p>drf\u5728django\u539f\u6709\u7684\u57fa\u7840\u4e0a\uff0c\u65b0\u589e\u4e86\u4e00\u4e2arequest\u5bf9\u8c61\u7ee7\u627f\u5230\u4e86APIVIew\u89c6\u56fe\u7c7b\uff0c\u5e76\u5728django\u539f\u6709\u7684HttpResponse\u54cd\u5e94\u7c7b\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u4e86\u4e00\u4e2a\u5b50\u7c7brest_framework.response.Response\u54cd\u5e94\u7c7b\u3002\u8fd9\u4e24\u4e2a\u7c7b\uff0c\u90fd\u662f\u57fa\u4e8e\u5185\u5bb9\u534f\u5546\u6765\u5b8c\u6210\u6570\u636e\u7684\u683c\u5f0f\u8f6c\u6362\u7684\u3002</p> <p>request-&gt;parser-&gt;\u8bc6\u522b\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u4e2d\u7684Content-Type\u6765\u5b8c\u6210\u6570\u636e\u8f6c\u6362\u6210-&gt;\u7c7b\u5b57\u5178(QueryDict\uff0c\u5b57\u5178\u7684\u5b50\u7c7b)</p> <p>response-&gt;renderer-&gt;\u8bc6\u522b\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u7684\"Accept\"\u6765\u63d0\u53d6\u5ba2\u6237\u5355\u671f\u671b\u7684\u8fd4\u56de\u6570\u636e\u683c\u5f0f\uff0c-&gt; \u8f6c\u6362\u6210\u5ba2\u6237\u7aef\u7684\u671f\u671b\u683c\u5f0f\u6570\u636e</p>"},{"location":"mds/Python-Note/DRF-Note/#1_1","title":"1. \u8bf7\u6c42","text":"<p>REST framework \u4f20\u5165\u89c6\u56fe\u7684request\u5bf9\u8c61\u4e0d\u518d\u662fDjango\u9ed8\u8ba4\u7684HttpRequest\u5bf9\u8c61\uff0c\u800c\u662fREST framework\u63d0\u4f9b\u7684\u6269\u5c55\u4e86HttpRequest\u7c7b\u7684Request\u7c7b\u7684\u5bf9\u8c61\u3002</p> <p>REST framework \u63d0\u4f9b\u4e86Parser\u89e3\u6790\u5668\uff0c\u5728\u63a5\u6536\u5230\u8bf7\u6c42\u540e\u4f1a\u81ea\u52a8\u6839\u636eContent-Type\u6307\u660e\u7684\u8bf7\u6c42\u6570\u636e\u7c7b\u578b\uff08\u5982JSON\u3001\u8868\u5355\u7b49\uff09\u5c06\u8bf7\u6c42\u6570\u636e\u8fdb\u884cparse\u89e3\u6790\uff0c\u89e3\u6790\u4e3a\u7c7b\u5b57\u5178[QueryDict]\u5bf9\u8c61\u4fdd\u5b58\u5230Request\u5bf9\u8c61\u4e2d\u3002</p> <p>Request\u5bf9\u8c61\u7684\u6570\u636e\u662f\u81ea\u52a8\u6839\u636e\u524d\u7aef\u53d1\u9001\u6570\u636e\u7684\u683c\u5f0f\u8fdb\u884c\u89e3\u6790\u4e4b\u540e\u7684\u7ed3\u679c\u3002</p> <p>\u65e0\u8bba\u524d\u7aef\u53d1\u9001\u7684\u54ea\u79cd\u683c\u5f0f\u7684\u6570\u636e\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u8bfb\u53d6\u6570\u636e\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#11","title":"1.1 \u5e38\u7528\u5c5e\u6027","text":""},{"location":"mds/Python-Note/DRF-Note/#1data","title":"1\uff09.data","text":"<p><code>request.data</code> \u8fd4\u56de\u89e3\u6790\u4e4b\u540e\u7684\u8bf7\u6c42\u4f53\u6570\u636e\u3002\u7c7b\u4f3c\u4e8eDjango\u4e2d\u6807\u51c6\u7684<code>request.POST</code>\u548c <code>request.FILES</code>\u5c5e\u6027\uff0c\u4f46\u63d0\u4f9b\u5982\u4e0b\u7279\u6027\uff1a</p> <ul> <li>\u5305\u542b\u4e86\u89e3\u6790\u4e4b\u540e\u7684\u6587\u4ef6\u548c\u975e\u6587\u4ef6\u6570\u636e</li> <li>\u5305\u542b\u4e86\u5bf9POST\u3001PUT\u3001PATCH\u8bf7\u6c42\u65b9\u5f0f\u89e3\u6790\u540e\u7684\u6570\u636e</li> <li>\u5229\u7528\u4e86REST framework\u7684parsers\u89e3\u6790\u5668\uff0c\u4e0d\u4ec5\u652f\u6301\u8868\u5355\u7c7b\u578b\u6570\u636e\uff0c\u4e5f\u652f\u6301JSON\u6570\u636e</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#2query_params","title":"2\uff09.query_params","text":"<p><code>request.query_params</code>\u4e0eDjango\u6807\u51c6\u7684<code>request.GET</code>\u76f8\u540c\uff0c\u53ea\u662f\u66f4\u6362\u4e86\u66f4\u6b63\u786e\u7684\u540d\u79f0\u800c\u5df2\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#3request_request","title":"3\uff09request._request","text":"<p>\u83b7\u53d6django\u5c01\u88c5\u7684Request\u5bf9\u8c61</p>"},{"location":"mds/Python-Note/DRF-Note/#12","title":"1.2 \u89c6\u56fe\u5e94\u7528","text":"<pre><code>from django.views import View\nfrom django.http.response import HttpResponse\nfrom django.http.request import HttpRequest\nfrom django.core.handlers.wsgi import WSGIRequest\nclass ReqView(View):\n    def get(self,request):\n        print(request)\n        return HttpResponse(\"ok\")\n\n\"\"\"\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u7f16\u5199\u89c6\u56fe\u7c7b\u65f6\uff0c\u5982\u679c\u7ee7\u627f\u7684\u662fdjango\u5185\u7f6e\u7684django.view.View\u89c6\u56fe\u57fa\u7c7b\uff0c\n\u5219\u89c6\u56fe\u65b9\u6cd5\u4e2d\u5f97\u5230\u7684request\u5bf9\u8c61\uff0c\u662fdjango\u9ed8\u8ba4\u63d0\u4f9b\u7684django.core.handlers.wsgi.WSGIRequest\nWSGIRequest\u8fd9\u4e2a\u8bf7\u6c42\u5904\u7406\u5bf9\u8c61\uff0c\u65e0\u6cd5\u76f4\u63a5\u63d0\u4f9b\u7684\u5173\u4e8ejson\u6570\u636e\u6570\u636e\u5904\u7406\u3002\n\u5728\u7f16\u5199api\u63a5\u53e3\u65f6\u5f88\u4e0d\u65b9\u4fbf\uff0c\u6240\u4ee5drf\u4e3a\u4e86\u7b80\u5199\u8fd9\u5757\u5185\u5bb9\uff0c\u5728\u539f\u6765\u7684HttpRequest\u7684\u57fa\u7840\u4e0a\u9762\uff0c\u65b0\u589e\u4e86\u4e00\u4e2aRequest\u5bf9\u8c61\n\u8fd9\u4e2aRequest\u5bf9\u8c61\u662f\u5355\u72ec\u58f0\u660e\u7684\u548c\u539f\u6765django\u7684HttpRequest\u4e0d\u662f\u7236\u5b50\u5173\u7cfb\u3002\n\u540c\u65f6\u6ce8\u610f\uff1a\n   \u8981\u4f7f\u7528drf\u63d0\u4f9b\u7684Request\u8bf7\u6c42\u5904\u7406\u5bf9\u8c61\uff0c\u5fc5\u987b\u5728\u7f16\u5199\u89c6\u56fe\u7c7b\u65f6\u7ee7\u627fdrf\u63d0\u4f9b\u7684\u89c6\u56fe\u57fa\u7c7b\n   from rest_framework.views import APIView\n\n   \u5982\u679c\u4f7f\u7528drf\u63d0\u4f9b\u7684\u89c6\u56fe\u57fa\u7c7bAPIView\u7f16\u5199\u7c7b\u89c6\u56fe\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u6765\u81eadrf\u63d0\u4f9b\u7684Request\u8bf7\u6c42\u5bf9\u8c61\u548cResponse\u54cd\u5e94\u5bf9\u8c61\n\"\"\"\nfrom rest_framework.views import APIView\nfrom rest_framework.response import Response\nfrom rest_framework import status\nclass ReqAPIView(APIView):\n    def get(self,request):\n        # rest_framework.request.Request\u5bf9\u8c61\n        print(request) # &lt;rest_framework.request.Request: GET '/req/req2?name=xiaoming&amp;age=17&amp;lve=swim&amp;lve=code'&gt;\n        # \u83b7\u53d6\u67e5\u8be2\u5b57\u7b26\u4e32\n        print(request.query_params)\n        # \u6ca1\u6709\u53c2\u6570\u60c5\u51b5\u4e0b\uff1a &lt;QueryDict: {}&gt;\n        # \u6709\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\uff1a &lt;QueryDict: {'name': ['xiaoming'], 'age': ['17'], 'lve': ['swim', 'code']}&gt;\n        # \u6240\u4ee5\uff0crequest.query_params\u7684\u8fd4\u56de\u503c\u64cd\u4f5c\u548c\u539f\u6765\u5728django\u91cc\u9762\u662f\u4e00\u6a21\u4e00\u6837\u7684\n        print(request.query_params.get(\"name\")) # xiaoming\n        print(request.query_params.getlist(\"lve\")) # ['swim', 'code']\n\n        return Response(\"ok\")\n\n    def post(self, request):\n        # \u83b7\u53d6\u8bf7\u6c42\u4f53\n        print(request.data) # {'name': 'xiaoming', 'age': 16, 'lve': ['swim', 'code']}\n        \"\"\"\u76f4\u63a5\u4ece\u8bf7\u6c42\u4f53\u4e2d\u63d0\u53d6\u6570\u636e\u8f6c\n        # \u5ba2\u6237\u7aef\u5982\u679c\u4e0a\u4f20\u4e86json\u6570\u636e\uff0c\u76f4\u63a5\u8fd4\u56de\u5b57\u5178\n        {'name': '\u7070\u592a\u72fc', 'age': 20, 'sex': 1, 'classmate': '301', 'description': '\u6211\u8fd8\u4f1a\u518d\u56de\u6765\u7684~'}\n        # \u5ba2\u6237\u7aef\u5982\u679c\u4e0a\u4f20\u4e86\u8868\u5355\u6570\u636e\uff0c\u76f4\u63a5\u8fd4\u56deQueryDict\n        &lt;QueryDict: {'name': ['xiaohui'], 'age': ['18']}&gt;\n        \"\"\"\n        print(request.FILES) # \u83b7\u53d6\u4e0a\u4f20\u6587\u4ef6\u5217\u8868\n\n        # \u8981\u83b7\u53d6django\u539f\u751f\u63d0\u4f9b\u7684HttpRequest\u5bf9\u8c61\uff0c\u53ef\u4ee5\u901a\u8fc7request._request\u6765\u83b7\u53d6\u5230\n        print(request._request.META.get(\"Accept\")) # \u5f53\u503c\u4e3aNone\u65f6\uff0cdrf\u9ed8\u8ba4\u5728\u54cd\u5e94\u6570\u636e\u65f6\u6309json\u683c\u5f0f\u8fd4\u56de\n        # response = Response(data=\"not ok\", status=204, headers={\"Company\":\"Oldboy\"})\n        response = Response(data=\"not ok\", status=status.HTTP_400_BAD_REQUEST, headers={\"Company\":\"Oldboy\"})\n        return response\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2_2","title":"2. \u54cd\u5e94","text":"<pre><code>rest_framework.response.Response\n</code></pre> <p>REST framework\u63d0\u4f9b\u4e86\u4e00\u4e2a\u54cd\u5e94\u7c7b<code>Response</code>\uff0c\u4f7f\u7528\u8be5\u7c7b\u6784\u9020\u54cd\u5e94\u5bf9\u8c61\u65f6\uff0c\u54cd\u5e94\u7684\u5177\u4f53\u6570\u636e\u5185\u5bb9\u4f1a\u88ab\u8f6c\u6362\uff08render\u6e32\u67d3\u5668\uff09\u6210\u7b26\u5408\u524d\u7aef\u9700\u6c42\u7684\u7c7b\u578b\u3002</p> <p>REST framework\u63d0\u4f9b\u4e86<code>Renderer</code> \u6e32\u67d3\u5668\uff0c\u7528\u6765\u6839\u636e\u8bf7\u6c42\u5934\u4e2d\u7684<code>Accept</code>\uff08\u63a5\u6536\u6570\u636e\u7c7b\u578b\u58f0\u660e\uff09\u6765\u81ea\u52a8\u8f6c\u6362\u54cd\u5e94\u6570\u636e\u5230\u5bf9\u5e94\u683c\u5f0f\u3002\u5982\u679c\u524d\u7aef\u8bf7\u6c42\u4e2d\u672a\u8fdb\u884cAccept\u58f0\u660e\uff0c\u5219\u4f1a\u91c7\u7528Content-Type\u65b9\u5f0f\u5904\u7406\u54cd\u5e94\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6765\u4fee\u6539\u9ed8\u8ba4\u54cd\u5e94\u683c\u5f0f\u3002</p> <p>\u53ef\u4ee5\u5728rest_framework.settings\u67e5\u627e\u6240\u6709\u7684drf\u9ed8\u8ba4\u914d\u7f6e\u9879</p> <pre><code>REST_FRAMEWORK = {\n    'DEFAULT_RENDERER_CLASSES': (  # \u9ed8\u8ba4\u54cd\u5e94\u6e32\u67d3\u7c7b\n        'rest_framework.renderers.JSONRenderer',  # json\u6e32\u67d3\u5668\uff0c\u8fd4\u56dejson\u6570\u636e\n        'rest_framework.renderers.BrowsableAPIRenderer',  # \u6d4f\u89c8\u5668API\u6e32\u67d3\u5668\uff0c\u8fd4\u56de\u8c03\u8bd5\u754c\u9762\n    )\n}\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#21","title":"2.1 \u6784\u9020\u65b9\u5f0f","text":"<pre><code>Response(data, status=None, template_name=None, headers=None, content_type=None)\n</code></pre> <p>drf\u7684\u54cd\u5e94\u5904\u7406\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\u4e0d\u4e00\u6837\uff0cResponse\u5c31\u662fdjango\u7684HttpResponse\u54cd\u5e94\u5904\u7406\u7c7b\u7684\u5b50\u7c7b\u3002</p> <p><code>data</code>\u6570\u636e\u4e0d\u8981\u662frender\u5904\u7406\u4e4b\u540e\u7684\u6570\u636e\uff0c\u53ea\u9700\u4f20\u9012python\u7684\u5185\u5efa\u7c7b\u578b\u6570\u636e\u5373\u53ef\uff0cREST framework\u4f1a\u4f7f\u7528<code>renderer</code>\u6e32\u67d3\u5668\u5904\u7406<code>data</code>\u3002</p> <p><code>data</code>\u4e0d\u80fd\u662f\u590d\u6742\u7ed3\u6784\u7684\u6570\u636e\uff0c\u5982Django\u7684\u6a21\u578b\u7c7b\u5bf9\u8c61\uff0c\u5bf9\u4e8e\u8fd9\u6837\u7684\u6570\u636e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>Serializer</code>\u5e8f\u5217\u5316\u5668\u5e8f\u5217\u5316\u5904\u7406\u540e\uff08\u8f6c\u4e3a\u4e86Python\u5b57\u5178\u7c7b\u578b\uff09\u518d\u4f20\u9012\u7ed9<code>data</code>\u53c2\u6570\u3002</p> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li><code>data</code>: \u4e3a\u54cd\u5e94\u51c6\u5907\u7684\u5e8f\u5217\u5316\u5904\u7406\u540e\u7684\u6570\u636e\uff1b</li> <li><code>status</code>: \u72b6\u6001\u7801\uff0c\u9ed8\u8ba4200\uff1b</li> <li><code>template_name</code>: \u6a21\u677f\u540d\u79f0\uff0c\u5982\u679c\u4f7f\u7528<code>HTMLRenderer</code> \u65f6\u9700\u6307\u660e\uff1b</li> <li><code>headers</code>: \u7528\u4e8e\u5b58\u653e\u54cd\u5e94\u5934\u4fe1\u606f\u7684\u5b57\u5178\uff1b</li> <li><code>content_type</code>: \u54cd\u5e94\u6570\u636e\u7684Content-Type\uff0c\u901a\u5e38\u6b64\u53c2\u6570\u65e0\u9700\u4f20\u9012\uff0cREST framework\u4f1a\u6839\u636e\u524d\u7aef\u6240\u9700\u7c7b\u578b\u6570\u636e\u6765\u8bbe\u7f6e\u8be5\u53c2\u6570</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#22-response","title":"2.2 response\u5bf9\u8c61\u7684\u5c5e\u6027","text":"<p>.data\uff1a\u4f20\u7ed9response\u5bf9\u8c61\u7684\u5e8f\u5217\u5316\u540e\uff0c\u4f46\u5c1a\u672arender\u5904\u7406\u7684\u6570\u636e</p> <p>.status_code\uff1a\u72b6\u6001\u7801\u7684\u6570\u5b57</p> <p>.content\uff1a\u7ecf\u8fc7render\u5904\u7406\u540e\u7684\u54cd\u5e94\u6570\u636e</p>"},{"location":"mds/Python-Note/DRF-Note/#23","title":"2.3 \u72b6\u6001\u7801","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u8bbe\u7f6e\u72b6\u6001\u7801\uff0cREST framewrok\u5728<code>rest_framework.status</code>\u6a21\u5757\u4e2d\u63d0\u4f9b\u4e86\u5e38\u7528http\u72b6\u6001\u7801\u7684\u5e38\u91cf\u3002</p> <pre><code># 1\uff09\u4fe1\u606f\u544a\u77e5 - 1xx\nHTTP_100_CONTINUE\nHTTP_101_SWITCHING_PROTOCOLS\n\n# 2\uff09\u6210\u529f - 2xx\nHTTP_200_OK\nHTTP_201_CREATED\nHTTP_202_ACCEPTED\nHTTP_203_NON_AUTHORITATIVE_INFORMATION\nHTTP_204_NO_CONTENT\nHTTP_205_RESET_CONTENT\nHTTP_206_PARTIAL_CONTENT\nHTTP_207_MULTI_STATUS\n\n# 3\uff09\u91cd\u5b9a\u5411 - 3xx\nHTTP_300_MULTIPLE_CHOICES\nHTTP_301_MOVED_PERMANENTLY\nHTTP_302_FOUND\nHTTP_303_SEE_OTHER\nHTTP_304_NOT_MODIFIED\nHTTP_305_USE_PROXY\nHTTP_306_RESERVED\nHTTP_307_TEMPORARY_REDIRECT\n\n# 4\uff09\u5ba2\u6237\u7aef\u9519\u8bef - 4xx\nHTTP_400_BAD_REQUEST\nHTTP_401_UNAUTHORIZED\nHTTP_402_PAYMENT_REQUIRED\nHTTP_403_FORBIDDEN\nHTTP_404_NOT_FOUND\nHTTP_405_METHOD_NOT_ALLOWED\nHTTP_406_NOT_ACCEPTABLE\nHTTP_407_PROXY_AUTHENTICATION_REQUIRED\nHTTP_408_REQUEST_TIMEOUT\nHTTP_409_CONFLICT\nHTTP_410_GONE\nHTTP_411_LENGTH_REQUIRED\nHTTP_412_PRECONDITION_FAILED\nHTTP_413_REQUEST_ENTITY_TOO_LARGE\nHTTP_414_REQUEST_URI_TOO_LONG\nHTTP_415_UNSUPPORTED_MEDIA_TYPE\nHTTP_416_REQUESTED_RANGE_NOT_SATISFIABLE\nHTTP_417_EXPECTATION_FAILED\nHTTP_422_UNPROCESSABLE_ENTITY\nHTTP_423_LOCKED\nHTTP_424_FAILED_DEPENDENCY\nHTTP_428_PRECONDITION_REQUIRED\nHTTP_429_TOO_MANY_REQUESTS\nHTTP_431_REQUEST_HEADER_FIELDS_TOO_LARGE\nHTTP_451_UNAVAILABLE_FOR_LEGAL_REASONS\n\n# 5\uff09\u670d\u52a1\u5668\u9519\u8bef - 5xx\nHTTP_500_INTERNAL_SERVER_ERROR\nHTTP_501_NOT_IMPLEMENTED\nHTTP_502_BAD_GATEWAY\nHTTP_503_SERVICE_UNAVAILABLE\nHTTP_504_GATEWAY_TIMEOUT\nHTTP_505_HTTP_VERSION_NOT_SUPPORTED\nHTTP_507_INSUFFICIENT_STORAGE\nHTTP_511_NETWORK_AUTHENTICATION_REQUIRED\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#-serializer","title":"\u516b\u3001\u5e8f\u5217\u5316\u5668-Serializer","text":"<p>\u4f5c\u7528\uff1a</p> <pre><code>1. \u5e8f\u5217\u5316,\u5e8f\u5217\u5316\u5668\u4f1a\u628a\u6a21\u578b\u5bf9\u8c61\u8f6c\u6362\u6210\u5b57\u5178,\u7ecf\u8fc7response\u4ee5\u540e\u53d8\u6210json\u5b57\u7b26\u4e32\n2. \u53cd\u5e8f\u5217\u5316,\u628a\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e,\u7ecf\u8fc7request\u4ee5\u540e\u53d8\u6210\u5b57\u5178,\u5e8f\u5217\u5316\u5668\u53ef\u4ee5\u628a\u5b57\u5178\u8f6c\u6210\u6a21\u578b\n3. \u53cd\u5e8f\u5217\u5316,\u5b8c\u6210\u6570\u636e\u6821\u9a8c\u529f\u80fd\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#1_2","title":"1. \u5b9a\u4e49\u5e8f\u5217\u5316\u5668","text":"<p>Django REST framework\u4e2d\u7684Serializer\u4f7f\u7528\u7c7b\u6765\u5b9a\u4e49\uff0c\u987b\u7ee7\u627f\u81earest_framework.serializers.Serializer\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\u5e8f\u5217\u5316\u5668\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b50\u5e94\u7528sers</p> <pre><code>python manage.py startapp sers\n</code></pre> <p>\u6211\u4eec\u521b\u5efa\u51e0\u4e2a\u56fe\u4e66\u76f8\u5173\u6a21\u578b</p> <pre><code>from django.db import models\n\n\n# Create your models here.\n\n\nclass Book(models.Model):\n    title = models.CharField(max_length=32,verbose_name=\"\u4e66\u7c4d\u540d\u79f0\")\n    price = models.IntegerField(verbose_name=\"\u4ef7\u683c\")\n    pub_date = models.DateField(verbose_name=\"\u51fa\u7248\u65e5\u671f\")\n\n    bread = models.IntegerField(verbose_name=\"\u9605\u8bfb\u91cf\") \n    bcomment = models.IntegerField(verbose_name=\"\u8bc4\u8bba\u91cf\") \n\n    publish = models.ForeignKey(\"Publish\",on_delete=models.CASCADE,verbose_name=\"\u51fa\u7248\u793e\")\n    # authors = models.ManyToManyField(\"Author\",verbose_name=\"\u4f5c\u8005\")\n\n    def __str__(self):\n        return self.title\n\n\nclass Publish(models.Model):\n    name = models.CharField(max_length=32,verbose_name=\"\u51fa\u7248\u793e\u540d\u79f0\")\n    email = models.EmailField(verbose_name=\"\u51fa\u7248\u793e\u90ae\u7bb1\")\n\n    def __str__(self):\n        return self.name\n\n\nclass Author(models.Model):\n    name = models.CharField(max_length=32,verbose_name=\"\u4f5c\u8005\")\n    age = models.IntegerField(verbose_name=\"\u5e74\u9f84\")\n\n    def __str__(self):\n        return self.name\n</code></pre> <p>\u6211\u4eec\u60f3\u4e3aBook\u6a21\u578b\u7c7b\u63d0\u4f9b\u4e00\u4e2a\u5e8f\u5217\u5316\u5668\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>from rest_framework import serializers\n\nclass BookSerializer(serializers.Serializer):\n\n    title = serializers.CharField()\n    price = serializers.IntegerField()\n    pub_date = serializers.DateField()\n    publish_id = serializers.IntegerField(write_only=True)\n    publish_name = serializers.CharField(source=\"publish.name\", read_only=True)\n    publish_email = serializers.CharField(source=\"publish.email\", read_only=True)\n</code></pre> <p>\u6ce8\u610f\uff1aserializer\u4e0d\u662f\u53ea\u80fd\u4e3a\u6570\u636e\u5e93\u6a21\u578b\u7c7b\u5b9a\u4e49\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u975e\u6570\u636e\u5e93\u6a21\u578b\u7c7b\u7684\u6570\u636e\u5b9a\u4e49\u3002serializer\u662f\u72ec\u7acb\u4e8e\u6570\u636e\u5e93\u4e4b\u5916\u7684\u5b58\u5728\u3002</p> <p>\u5e38\u7528\u5b57\u6bb5\u7c7b\u578b\uff1a</p> \u5b57\u6bb5 \u5b57\u6bb5\u6784\u9020\u65b9\u5f0f BooleanField BooleanField() NullBooleanField NullBooleanField() CharField CharField(max_length=None, min_length=None, allow_blank=False, trim_whitespace=True) EmailField EmailField(max_length=None, min_length=None, allow_blank=False) RegexField RegexField(regex, max_length=None, min_length=None, allow_blank=False) SlugField SlugField(maxlength=50, min_length=None, allow_blank=False) \u6b63\u5219\u5b57\u6bb5\uff0c\u9a8c\u8bc1\u6b63\u5219\u6a21\u5f0f [a-zA-Z0-9-]+ URLField URLField(max_length=200, min_length=None, allow_blank=False) UUIDField UUIDField(format=\u2018hex_verbose\u2019) format: 1) <code>'hex_verbose'</code> \u5982<code>\"5ce0e9a5-5ffa-654b-cee0-1238041fb31a\"</code> 2\uff09 <code>'hex'</code> \u5982 <code>\"5ce0e9a55ffa654bcee01238041fb31a\"</code> 3\uff09<code>'int'</code> - \u5982: <code>\"123456789012312313134124512351145145114\"</code> 4\uff09<code>'urn'</code> \u5982: <code>\"urn:uuid:5ce0e9a5-5ffa-654b-cee0-1238041fb31a\"</code> IPAddressField IPAddressField(protocol=\u2018both\u2019, unpack_ipv4=False, **options) IntegerField IntegerField(max_value=None, min_value=None) FloatField FloatField(max_value=None, min_value=None) DecimalField DecimalField(max_digits, decimal_places, coerce_to_string=None, max_value=None, min_value=None) max_digits: \u6700\u591a\u4f4d\u6570 decimal_palces: \u5c0f\u6570\u70b9\u4f4d\u7f6e DateTimeField DateTimeField(format=api_settings.DATETIME_FORMAT, input_formats=None) DateField DateField(format=api_settings.DATE_FORMAT, input_formats=None) TimeField TimeField(format=api_settings.TIME_FORMAT, input_formats=None) DurationField DurationField() ChoiceField ChoiceField(choices) choices\u4e0eDjango\u7684\u7528\u6cd5\u76f8\u540c MultipleChoiceField MultipleChoiceField(choices) FileField FileField(max_length=None, allow_empty_file=False, use_url=UPLOADED_FILES_USE_URL) ImageField ImageField(max_length=None, allow_empty_file=False, use_url=UPLOADED_FILES_USE_URL) ListField ListField(child=, min_length=None, max_length=None) DictField DictField(child=) <p>\u9009\u9879\u53c2\u6570\uff1a</p> \u53c2\u6570\u540d\u79f0 \u4f5c\u7528 max_length \u6700\u5927\u957f\u5ea6 min_lenght \u6700\u5c0f\u957f\u5ea6 allow_blank \u662f\u5426\u5141\u8bb8\u4e3a\u7a7a trim_whitespace \u662f\u5426\u622a\u65ad\u7a7a\u767d\u5b57\u7b26 max_value \u6700\u5c0f\u503c min_value \u6700\u5927\u503c <p>\u901a\u7528\u53c2\u6570\uff1a</p> \u53c2\u6570\u540d\u79f0 \u8bf4\u660e read_only \u8868\u660e\u8be5\u5b57\u6bb5\u4ec5\u7528\u4e8e\u5e8f\u5217\u5316\u8f93\u51fa\uff0c\u9ed8\u8ba4False write_only \u8868\u660e\u8be5\u5b57\u6bb5\u4ec5\u7528\u4e8e\u53cd\u5e8f\u5217\u5316\u8f93\u5165\uff0c\u9ed8\u8ba4False required \u8868\u660e\u8be5\u5b57\u6bb5\u5728\u53cd\u5e8f\u5217\u5316\u65f6\u5fc5\u987b\u8f93\u5165\uff0c\u9ed8\u8ba4True default \u53cd\u5e8f\u5217\u5316\u65f6\u4f7f\u7528\u7684\u9ed8\u8ba4\u503c allow_null \u8868\u660e\u8be5\u5b57\u6bb5\u662f\u5426\u5141\u8bb8\u4f20\u5165None\uff0c\u9ed8\u8ba4False validators \u8be5\u5b57\u6bb5\u4f7f\u7528\u7684\u9a8c\u8bc1\u5668 error_messages \u5305\u542b\u9519\u8bef\u7f16\u53f7\u4e0e\u9519\u8bef\u4fe1\u606f\u7684\u5b57\u5178 label \u7528\u4e8eHTML\u5c55\u793aAPI\u9875\u9762\u65f6\uff0c\u663e\u793a\u7684\u5b57\u6bb5\u540d\u79f0 help_text \u7528\u4e8eHTML\u5c55\u793aAPI\u9875\u9762\u65f6\uff0c\u663e\u793a\u7684\u5b57\u6bb5\u5e2e\u52a9\u63d0\u793a\u4fe1\u606f"},{"location":"mds/Python-Note/DRF-Note/#2-serializer","title":"2. \u521b\u5efaSerializer\u5bf9\u8c61","text":"<p>\u5b9a\u4e49\u597dSerializer\u7c7b\u540e\uff0c\u5c31\u53ef\u4ee5\u521b\u5efaSerializer\u5bf9\u8c61\u4e86\u3002</p> <p>Serializer\u7684\u6784\u9020\u65b9\u6cd5\u4e3a\uff1a</p> <pre><code>Serializer(instance=None, data=empty, **kwarg)\n</code></pre> <p>\u8bf4\u660e\uff1a</p> <p>1\uff09\u7528\u4e8e\u5e8f\u5217\u5316\u65f6\uff0c\u5c06\u6a21\u578b\u7c7b\u5bf9\u8c61\u4f20\u5165instance\u53c2\u6570</p> <p>2\uff09\u7528\u4e8e\u53cd\u5e8f\u5217\u5316\u65f6\uff0c\u5c06\u8981\u88ab\u53cd\u5e8f\u5217\u5316\u7684\u6570\u636e\u4f20\u5165data\u53c2\u6570</p> <p>3\uff09\u9664\u4e86instance\u548cdata\u53c2\u6570\u5916\uff0c\u5728\u6784\u9020Serializer\u5bf9\u8c61\u65f6\uff0c\u8fd8\u53ef\u901a\u8fc7context\u53c2\u6570\u989d\u5916\u6dfb\u52a0\u6570\u636e\uff0c\u5982</p> <pre><code>serializer = AccountSerializer(account, context={'request': request})\n</code></pre> <p>\u901a\u8fc7context\u53c2\u6570\u9644\u52a0\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7Serializer\u5bf9\u8c61\u7684context\u5c5e\u6027\u83b7\u53d6\u3002</p> <ol> <li>\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u5e8f\u5217\u5316\u5668\u58f0\u660e\u4e86\u4ee5\u540e\uff0c\u4e0d\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u9700\u8981\u6211\u4eec\u5728\u89c6\u56fe\u4e2d\u8fdb\u884c\u8c03\u7528\u624d\u53ef\u4ee5\u3002</li> <li>\u5e8f\u5217\u5316\u5668\u65e0\u6cd5\u76f4\u63a5\u63a5\u6536\u6570\u636e\uff0c\u9700\u8981\u6211\u4eec\u5728\u89c6\u56fe\u4e2d\u521b\u5efa\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u65f6\u628a\u4f7f\u7528\u7684\u6570\u636e\u4f20\u9012\u8fc7\u6765\u3002</li> <li>\u5e8f\u5217\u5316\u5668\u7684\u5b57\u6bb5\u58f0\u660e\u7c7b\u4f3c\u4e8e\u6211\u4eec\u524d\u9762\u4f7f\u7528\u8fc7\u7684\u8868\u5355\u7cfb\u7edf\u3002</li> <li>\u5f00\u53d1restful api\u65f6\uff0c\u5e8f\u5217\u5316\u5668\u4f1a\u5e2e\u6211\u4eec\u628a\u6a21\u578b\u6570\u636e\u8f6c\u6362\u6210\u5b57\u5178.</li> <li>drf\u63d0\u4f9b\u7684\u89c6\u56fe\u4f1a\u5e2e\u6211\u4eec\u628a\u5b57\u5178\u8f6c\u6362\u6210json,\u6216\u8005\u628a\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u8f6c\u6362\u5b57\u5178.</li> </ol>"},{"location":"mds/Python-Note/DRF-Note/#3_1","title":"3. \u5e8f\u5217\u5316\u5668\u7684\u4f7f\u7528","text":"<p>\u5e8f\u5217\u5316\u5668\u7684\u4f7f\u7528\u5206\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u65f6\uff0c\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u53ef\u4ee5\u5b8c\u6210\u5bf9\u6570\u636e\u7684\u53cd\u5e8f\u5217\u5316\u3002</li> <li>\u5904\u7406\u670d\u52a1\u5668\u54cd\u5e94\u65f6\uff0c\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u53ef\u4ee5\u5b8c\u6210\u5bf9\u6570\u636e\u7684\u5e8f\u5217\u5316\u3002</li> </ol>"},{"location":"mds/Python-Note/DRF-Note/#31_1","title":"3.1 \u5e8f\u5217\u5316","text":""},{"location":"mds/Python-Note/DRF-Note/#1_3","title":"\uff081\uff09\u57fa\u672c\u5e8f\u5217\u5316","text":"<p>\u300a1\u300b \u5148\u67e5\u8be2\u51fa\u4e00\u4e2a\u5b66\u751f\u5bf9\u8c61</p> <pre><code>from sers.models import Book\nbook = Book.objects.get(pk=1)\n</code></pre> <p>\u300a2\u300b \u6784\u9020\u5e8f\u5217\u5316\u5668\u5bf9\u8c61</p> <pre><code>from .serializers import BookSerializer\nbookSer = BookSerializer(instance=book)\n</code></pre> <p>\u300a3\u300b\u83b7\u53d6\u5e8f\u5217\u5316\u6570\u636e</p> <p>\u901a\u8fc7data\u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u5e8f\u5217\u5316\u540e\u7684\u6570\u636e</p> <pre><code>bookSer.data \n# {'title': '\u4e71\u4e16\u4f73\u4eba', 'price': 335, 'pub_date': '2012-12-12', 'publish_name': '\u82f9\u679c\u51fa\u7248\u793e', 'publish_email': '123@qq.com'}\n</code></pre> <p>\u8def\u7531\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code># urls.py\npath(\"sers/\", include(\"sers.urls\")),\n# sers.urls\npath('books/', BookView.as_view()),\n</code></pre> <pre><code>from rest_framework.response import Response\nfrom rest_framework.views import APIView\nfrom .models import Book\nfrom .sers import BookSerializer\n\nclass BookView(APIView):\n\n    def get(self, request):\n        book = Book.objects.get(pk=1)\n        bs = BookSerializer(instance=book)\n        return Response(bs.data)\n</code></pre> <p> </p> <p>\u300a5\u300b\u5982\u679c\u8981\u88ab\u5e8f\u5217\u5316\u7684\u662f\u5305\u542b\u591a\u6761\u6570\u636e\u7684\u67e5\u8be2\u96c6QuerySet\uff0c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0many=True\u53c2\u6570\u8865\u5145\u8bf4\u660e</p> <pre><code>class BookView(APIView):\n\n    def get(self, request):\n        # book = Book.objects.get(pk=1)\n        books = Book.objects.all()\n        bs = BookSerializer(instance=books, many=True)\n        return Response(bs.data)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2_3","title":"\uff082\uff09\u5173\u8054\u5b57\u6bb5\u5e8f\u5217\u5316","text":"<pre><code>from rest_framework import serializers\n\nfrom .models import Book, Publish, Author\n\n\nclass BookRelatedPublish(serializers.RelatedField):\n\n    def to_representation(self, value):\n        return \"pub-%s\" % value.name\n\nclass BookRelatedAuthor(serializers.RelatedField):\n\n    def to_representation(self, value):\n        return \"author-%s\" % value.name\n\nclass BookSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=32)\n    price = serializers.IntegerField(required=False)\n    pub_date = serializers.DateField(required=False)\n    # \u5e8f\u5217\u5316\u5173\u8054\u5bf9\u8c61\u7684\u4e3b\u952e,read_only=True\u9650\u5236\u53ea\u80fd\u505a\u5e8f\u5217\u5316\n    # publish = serializers.PrimaryKeyRelatedField(read_only=True) \n    # \u5e8f\u5217\u5316\u5173\u8054\u5bf9\u8c61\u7684\u4e3b\u952e\uff0cqueryset\u8bbe\u7f6e\u53ef\u4ee5\u53cd\u5e8f\u5217\u5316\u505a\u6821\u9a8c\n    # authors = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all(),many=True) \n    # publish = serializers.StringRelatedField(read_only=True) # \u5e8f\u5217\u5316\u5173\u8054\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f \u5373__str__\n    # publish = serializers.SlugRelatedField(read_only=True,slug_field=\"email\") # \u5e8f\u5217\u5316\u5173\u8054\u5bf9\u8c61\u7684\u6307\u5b9a\u5b57\u6bb5\n    authors = BookRelatedAuthor(read_only=True,many=True)\n    publish = BookRelatedPublish(read_only=True)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#32_1","title":"3.2 \u53cd\u5e8f\u5217\u5316","text":""},{"location":"mds/Python-Note/DRF-Note/#1_4","title":"\uff081\uff09\u6570\u636e\u9a8c\u8bc1","text":"<p>\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u65f6\uff0c\u9700\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u9a8c\u8bc1\u540e\uff0c\u624d\u80fd\u83b7\u53d6\u9a8c\u8bc1\u6210\u529f\u7684\u6570\u636e\u6216\u4fdd\u5b58\u6210\u6a21\u578b\u7c7b\u5bf9\u8c61\u3002</p> <p>\u5728\u83b7\u53d6\u53cd\u5e8f\u5217\u5316\u7684\u6570\u636e\u524d\uff0c\u5fc5\u987b\u8c03\u7528is_valid()\u65b9\u6cd5\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u6210\u529f\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse\u3002</p> <p>\u9a8c\u8bc1\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u7684errors\u5c5e\u6027\u83b7\u53d6\u9519\u8bef\u4fe1\u606f\uff0c\u8fd4\u56de\u5b57\u5178\uff0c\u5305\u542b\u4e86\u5b57\u6bb5\u548c\u5b57\u6bb5\u7684\u9519\u8bef\u3002\u5982\u679c\u662f\u975e\u5b57\u6bb5\u9519\u8bef\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539REST framework\u914d\u7f6e\u4e2d\u7684NON_FIELD_ERRORS_KEY\u6765\u63a7\u5236\u9519\u8bef\u5b57\u5178\u4e2d\u7684\u952e\u540d\u3002</p> <p>\u9a8c\u8bc1\u6210\u529f\uff0c\u53ef\u4ee5\u901a\u8fc7\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u7684validated_data\u5c5e\u6027\u83b7\u53d6\u6570\u636e\u3002</p> <p>\u5728\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\u65f6\uff0c\u6307\u660e\u6bcf\u4e2a\u5b57\u6bb5\u7684\u5e8f\u5217\u5316\u7c7b\u578b\u548c\u9009\u9879\u53c2\u6570\uff0c\u672c\u8eab\u5c31\u662f\u4e00\u79cd\u9a8c\u8bc1\u884c\u4e3a\u3002</p> <p>\u901a\u8fc7\u6784\u9020\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\uff0c\u5e76\u5c06\u8981\u53cd\u5e8f\u5217\u5316\u7684\u6570\u636e\u4f20\u9012\u7ed9data\u6784\u9020\u53c2\u6570\uff0c\u8fdb\u800c\u8fdb\u884c\u9a8c\u8bc1</p> <pre><code>from sers.sers import BookSerializer\nbs = BookSerializer(data={\"title\":\"\u5c0f\u738b\u5b50\",\"price\":100})\nbs.is_valid()  # \u5fc5\u987b\u5148\u8981is_valid,\u624d\u4f1a\u6709bs.validated_data\u548cbs.errors\nFalse\nbs.validated_data\n{}\nbs.errors\n{'pub_date': [ErrorDetail(string='This field is required.', code='required')], 'publish_id': [ErrorDetail(string='This field is required.', code='required')]}\n</code></pre> <p>\u53ef\u4ee5\u8bbe\u7f6erequired=False\u8ba9\u6821\u9a8c\u5b57\u6bb5\u53ef\u4ee5\u4e3a\u7a7a\uff01</p> <p>is_valid()\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u5728\u9a8c\u8bc1\u5931\u8d25\u65f6\u629b\u51fa\u5f02\u5e38serializers.ValidationError\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012raise_exception=True\u53c2\u6570\u5f00\u542f\uff0cREST framework\u63a5\u6536\u5230\u6b64\u5f02\u5e38\uff0c\u4f1a\u5411\u524d\u7aef\u8fd4\u56deHTTP 400 Bad Request\u54cd\u5e94\u3002</p> <pre><code># Return a 400 response if the data was invalid.serializer.is_valid(raise_exception=True)\n</code></pre> <p>\u5982\u679c\u89c9\u5f97\u8fd9\u4e9b\u8fd8\u4e0d\u591f\uff0c\u9700\u8981\u518d\u8865\u5145\u5b9a\u4e49\u9a8c\u8bc1\u884c\u4e3a\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4e09\u79cd\u65b9\u6cd5\uff1a</p>"},{"location":"mds/Python-Note/DRF-Note/#1-validate_","title":"1) validate_\u5b57\u6bb5\u540d","text":"<p>\u5bf9<code>&lt;field_name&gt;</code>\u5b57\u6bb5\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982</p> <pre><code>class BookSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=32)\n    price = serializers.IntegerField(required=True)\n    pub_date = serializers.DateField(required=True)\n\n    def validate_title(self, value):\n        if 'django' not in value.lower():\n            raise serializers.ValidationError(\"\u56fe\u4e66\u4e0d\u662f\u5173\u4e8eDjango\u7684\")\n        return value\n</code></pre> <p>\u6d4b\u8bd5\uff1a</p> <pre><code>from sers.sers import BookSerializer\nbs = BookSerializer(data={\"title\":\"\u5c0f\u738b\u5b50\",\"price\":100})\nbs.is_valid()\nFalse\nbs.errors\n{'title': [ErrorDetail(string='\u56fe\u4e66\u4e0d\u662f\u5173\u4e8eDjango\u7684', code='invalid')], 'pub_date': [ErrorDetail(string='This field is required.', code='required')]}\n</code></pre> <p>\u8fd8\u6709\u4e00\u79cd\u5199\u6cd5\uff1a</p> <pre><code>def title_django(self, value):\n    if 'django' not in value.lower():\n        raise serializers.ValidationError(\"\u56fe\u4e66\u4e0d\u662f\u5173\u4e8eDjango\u7684\")\n    return value\n\nclass BookSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=32,validators=[title_django,])\n    ...\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2-validate","title":"2) validate","text":"<p>\u5728\u5e8f\u5217\u5316\u5668\u4e2d\u9700\u8981\u540c\u65f6\u5bf9\u591a\u4e2a\u5b57\u6bb5\u8fdb\u884c\u6bd4\u8f83\u9a8c\u8bc1\u65f6\uff0c\u53ef\u4ee5\u5b9a\u4e49validate\u65b9\u6cd5\u6765\u9a8c\u8bc1\uff0c\u5982</p> <pre><code>class BookSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=32)\n    price = serializers.IntegerField(required=False)\n    pub_date = serializers.DateField(required=False)\n\n    bread = serializers.IntegerField(label='\u9605\u8bfb\u91cf', max_value=2147483647, min_value=-2147483648, required=False)\n    bcomment = serializers.IntegerField(label='\u8bc4\u8bba\u91cf', max_value=2147483647, min_value=-2147483648, required=False)\n\n\n    def validate_title(self, value):\n        if 'django' not in value.lower():\n            raise serializers.ValidationError(\"\u56fe\u4e66\u4e0d\u662f\u5173\u4e8eDjango\u7684\")\n        return value\n\n    def validate(self, data):\n        bread = data.get(\"bread\")\n        bcomment = data.get(\"bcomment\")\n        if bread &lt; bcomment:\n            raise serializers.ValidationError('\u9605\u8bfb\u91cf\u5c0f\u4e8e\u8bc4\u8bba\u91cf')\n        return data\n</code></pre> <p>\u6d4b\u8bd5\uff1a</p> <pre><code>bs = BookSerializer(data={\"title\":\"Django\u6df1\u5165\u6d45\u51fa\",\"bread\":100,\"bcomment\":200,\"publish_id\":1})\nbs.is_valid()\nFalse\nbs.errors\n{'non_field_errors': [ErrorDetail(string='\u9605\u8bfb\u91cf\u5c0f\u4e8e\u8bc4\u8bba\u91cf', code='invalid')]}\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2-","title":"\uff082\uff09\u53cd\u5e8f\u5217\u5316-\u4fdd\u5b58\u6570\u636e","text":"<p>\u524d\u9762\u7684\u9a8c\u8bc1\u6570\u636e\u6210\u529f\u540e,\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u6765\u5b8c\u6210\u6570\u636e\u53cd\u5e8f\u5217\u5316\u7684\u8fc7\u7a0b.\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u628a\u6570\u636e\u8f6c\u6210\u6a21\u578b\u7c7b\u5bf9\u8c61.</p> <p>\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0create()\u548cupdate()\u4e24\u4e2a\u65b9\u6cd5\u6765\u5b9e\u73b0\u3002</p> <pre><code>class BookSerializer(serializers.Serializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    ...\n\n    def create(self, validated_data):\n        \"\"\"\u65b0\u5efa\"\"\"\n        return instance\n\n    def update(self, instance, validated_data):\n\n        return instance\n</code></pre> <p>\u5b9e\u73b0\u4e86\u4e0a\u8ff0\u4e24\u4e2a\u65b9\u6cd5\u540e\uff0c\u5728\u53cd\u5e8f\u5217\u5316\u6570\u636e\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7save()\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\u5b9e\u4f8b\u4e86</p> <pre><code>book = serializer.save()\n</code></pre> <p>1\u3001\u5982\u679c\u521b\u5efa\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4f20\u9012instance\u5b9e\u4f8b\uff0c\u5219\u8c03\u7528save()\u65b9\u6cd5\u7684\u65f6\u5019\uff0ccreate()\u88ab\u8c03\u7528</p> <p>2\u3001\u76f8\u53cd\uff0c\u5982\u679c\u4f20\u9012\u4e86instance\u5b9e\u4f8b\uff0c\u5219\u8c03\u7528save()\u65b9\u6cd5\u7684\u65f6\u5019\uff0cupdate()\u88ab\u8c03\u7528\u3002</p> <pre><code># \u8def\u7531\nfrom django.urls import path,re_path ,include\n\nfrom sers.views import BookView,BookDetailView\n\nurlpatterns = [\n    path('books/', BookView.as_view()),\n    re_path('books/(?P&lt;pk&gt;\\d+)/', BookDetailView.as_view()),\n]\n</code></pre> <pre><code># \u5e8f\u5217\u5316\u5668\n# \u58f0\u660e\u5e8f\u5217\u5316\u5668\uff0c\u6240\u6709\u7684\u5e8f\u5217\u5316\u5668\u90fd\u8981\u76f4\u63a5\u6216\u8005\u95f4\u63a5\u7ee7\u627f\u4e8e Serializer\n# \u5176\u4e2d\uff0cModelSerializer\u662fSerializer\u7684\u5b50\u7c7b\uff0cModelSerializer\u5728Serializer\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u4ee3\u7801\u7b80\u5316\nfrom rest_framework import serializers\n\nfrom .models import Book, Publish, Author\n\n\nclass BookRelatedPublish(serializers.RelatedField):\n\n    def to_representation(self, value):\n        return \"pub-%s\" % value.name\n\n\nclass BookRelatedAuthor(serializers.RelatedField):\n\n    def to_representation(self, value):\n        return \"author-%s\" % value.name\n\n\nclass BookSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=32)\n    price = serializers.IntegerField(required=False)\n    pub_date = serializers.DateField(required=False)\n\n    publish = serializers.PrimaryKeyRelatedField(queryset=Publish.objects.all())  # queryset\u7528\u4e8e\u53cd\u5e8f\u5217\u5316\u505a\u6821\u9a8c\n    authors = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all(), many=True)\n\n    def create(self, validated_data):\n        \"\"\"\u65b0\u5efa\"\"\"\n        print(\"validated_data:\", validated_data)\n        authors = validated_data.pop(\"authors\")\n        book = Book(**validated_data)\n        book.save()\n        book.authors.set(authors)\n        return book\n\n    def update(self, instance, validated_data):\n        \"\"\"\u66f4\u65b0\uff0cinstance\u4e3a\u8981\u66f4\u65b0\u7684\u5bf9\u8c61\u5b9e\u4f8b\"\"\"\n        authors = validated_data.pop(\"authors\")\n        for attr, value in validated_data.items():\n            setattr(instance, attr, value)\n        instance.save()\n\n        instance.authors.set(authors)\n\n        return instance\n</code></pre> <pre><code># \u89c6\u56fe\u51fd\u6570\n# Create your views here.\n\n\nfrom rest_framework.response import Response\nfrom rest_framework.views import APIView\n\nfrom .models import Book\nfrom .sers import BookSerializer\n\n\nclass BookView(APIView):\n\n    def get(self, request):\n        # book = Book.objects.get(pk=1)\n        books = Book.objects.all()\n        bs = BookSerializer(instance=books, many=True)\n        return Response(bs.data)\n\n    def post(self, request):\n        bs = BookSerializer(data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n\nclass BookDetailView(APIView):\n    def get(self, request, pk):\n        book = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=book)\n        return Response(bs.data)\n\n    def put(self, request, pk):\n        instance = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=instance, data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n    def delete(self, request, pk):\n        instance = Book.objects.get(pk=pk).delete()\n        return Response()\n</code></pre> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#3_2","title":"\uff083\uff09 \u9644\u52a0\u8bf4\u660e","text":"<p>1\uff09 \u5728\u5bf9\u5e8f\u5217\u5316\u5668\u8fdb\u884csave()\u4fdd\u5b58\u65f6\uff0c\u53ef\u4ee5\u989d\u5916\u4f20\u9012\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u53ef\u4ee5\u5728create()\u548cupdate()\u4e2d\u7684validated_data\u53c2\u6570\u83b7\u53d6\u5230</p> <pre><code># request.user \u662fdjango\u4e2d\u8bb0\u5f55\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u6a21\u578b\u5bf9\u8c61serializer.save(owner=request.user)\n</code></pre> <p>2\uff09\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668\u5fc5\u987b\u4f20\u9012\u6240\u6709required\u7684\u5b57\u6bb5\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u9a8c\u8bc1\u5f02\u5e38\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528partial\u53c2\u6570\u6765\u5141\u8bb8\u90e8\u5206\u5b57\u6bb5\u66f4\u65b0</p> <pre><code># Update `comment` with partial dataserializer = CommentSerializer(comment, data={'content': u'foo bar'}, partial=True)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#33_1","title":"3.3 \u6a21\u578b\u7c7b\u5e8f\u5217\u5316\u5668","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u8981\u4f7f\u7528\u5e8f\u5217\u5316\u5668\u5bf9\u5e94\u7684\u662fDjango\u7684\u6a21\u578b\u7c7b\uff0cDRF\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86ModelSerializer\u6a21\u578b\u7c7b\u5e8f\u5217\u5316\u5668\u6765\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u521b\u5efa\u4e00\u4e2aSerializer\u7c7b\u3002</p> <p>ModelSerializer\u4e0e\u5e38\u89c4\u7684Serializer\u76f8\u540c\uff0c\u4f46\u63d0\u4f9b\u4e86\uff1a</p> <ul> <li>\u57fa\u4e8e\u6a21\u578b\u7c7b\u81ea\u52a8\u751f\u6210\u4e00\u7cfb\u5217\u5b57\u6bb5</li> <li>\u57fa\u4e8e\u6a21\u578b\u7c7b\u81ea\u52a8\u4e3aSerializer\u751f\u6210validators\uff0c\u6bd4\u5982unique_together</li> <li>\u5305\u542b\u9ed8\u8ba4\u7684create()\u548cupdate()\u7684\u5b9e\u73b0</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#1_5","title":"\uff081\uff09\u5b9a\u4e49","text":"<p>\u6bd4\u5982\u6211\u4eec\u521b\u5efa\u4e00\u4e2aBookInfoSerializer</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    class Meta:\n        model = Book\n        fields = '__all__'\n</code></pre> <ul> <li>model \u6307\u660e\u53c2\u7167\u54ea\u4e2a\u6a21\u578b\u7c7b</li> <li>fields \u6307\u660e\u4e3a\u6a21\u578b\u7c7b\u7684\u54ea\u4e9b\u5b57\u6bb5\u751f\u6210</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u5728python manage.py shell\u4e2d\u67e5\u770b\u81ea\u52a8\u751f\u6210\u7684BookSerializer\u7684\u5177\u4f53\u5b9e\u73b0</p> <pre><code>&gt;&gt;&gt; from sers.sers import BookSerializer\n&gt;&gt;&gt; serializer = BookSerializer()\n&gt;&gt;&gt; serializer\nBookSerializer():\n    id = IntegerField(label='ID', read_only=True)\n    title = CharField(label='\u4e66\u7c4d\u540d\u79f0', max_length=32)\n    price = IntegerField(label='\u4ef7\u683c')\n    pub_date = DateField(label='\u51fa\u7248\u65e5\u671f')\n    bread = IntegerField(required=False)\n    bcomment = IntegerField(required=False)\n    publish = PrimaryKeyRelatedField(label='\u51fa\u7248\u793e', queryset=Publish.objects.all())\n    authors = PrimaryKeyRelatedField(allow_empty=False, label='\u4f5c\u8005', many=True, queryset=Author.objects.all())\n&gt;&gt;&gt;\n</code></pre> <p> </p>"},{"location":"mds/Python-Note/DRF-Note/#2_4","title":"\uff082\uff09\u6307\u5b9a\u5b57\u6bb5","text":"<p>1.\u4f7f\u7528fields\u6765\u660e\u786e\u5b57\u6bb5\uff0c<code>__all__</code>\u8868\u540d\u5305\u542b\u6240\u6709\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5199\u660e\u5177\u4f53\u54ea\u4e9b\u5b57\u6bb5\uff0c\u5982</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    class Meta\n        model = BookInfo\n        fields = ('id', 'title', 'pub_date')\n</code></pre> <p>2.\u4f7f\u7528exclude\u53ef\u4ee5\u660e\u786e\u6392\u9664\u6389\u54ea\u4e9b\u5b57\u6bb5</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    class Meta:\n        model = Book\n        exclude = ('pub_date',)\n</code></pre> <p>3.\u6307\u660e\u53ea\u8bfb\u5b57\u6bb5</p> <p>\u53ef\u4ee5\u901a\u8fc7read_only_fields\u6307\u660e\u53ea\u8bfb\u5b57\u6bb5\uff0c\u5373\u4ec5\u7528\u4e8e\u5e8f\u5217\u5316\u8f93\u51fa\u7684\u5b57\u6bb5</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    class Meta:\n        model = Book\n        fields = ('id', 'title', 'pub_date'\uff0c 'bread', 'bcomment')\n        read_only_fields = ('id', 'bread', 'bcomment')\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#3_3","title":"\uff083\uff09\u6dfb\u52a0\u989d\u5916\u53c2\u6570","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528extra_kwargs\u53c2\u6570\u4e3aModelSerializer\u6dfb\u52a0\u6216\u4fee\u6539\u539f\u6709\u7684\u9009\u9879\u53c2\u6570</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    \"\"\"\u56fe\u4e66\u6570\u636e\u5e8f\u5217\u5316\u5668\"\"\"\n    class Meta:\n        model = Book\n        fields = ('id', 'title', 'pub_date', 'bread', 'bcomment')\n        extra_kwargs = {\n            'bread': {'min_value': 0, 'required': True},\n            'bcomment': {'min_value': 0, 'required': True},\n        }\n'''\nBookSerializer():\n    id = IntegerField(label='ID', read_only=True)\n    title = CharField(label='\u4e66\u7c4d\u540d\u79f0', max_length=32)\n    pub_date = DateField(label='\u51fa\u7248\u65e5\u671f')\n    bread = IntegerField(min_value=0, required=True)\n    bcomment = IntegerField(min_value=0, required=True)\n\n'''\n</code></pre> <p>\u53c2\u8003\u6587\u7ae0</p>"},{"location":"mds/Python-Note/DRF-Note/#_3","title":"\u4e5d\u3001\u89c6\u56fe","text":"<p>Django REST framwork \u63d0\u4f9b\u7684\u89c6\u56fe\u7684\u4e3b\u8981\u4f5c\u7528\uff1a</p> <ul> <li>\u63a7\u5236\u5e8f\u5217\u5316\u5668\u7684\u6267\u884c\uff08\u68c0\u9a8c\u3001\u4fdd\u5b58\u3001\u8f6c\u6362\u6570\u636e\uff09</li> <li>\u63a7\u5236\u6570\u636e\u5e93\u6a21\u578b\u7684\u64cd\u4f5c</li> </ul> <p>REST framework \u63d0\u4f9b\u4e86\u4f17\u591a\u7684\u901a\u7528\u89c6\u56fe\u57fa\u7c7b\u4e0e\u6269\u5c55\u7c7b\uff0c\u4ee5\u7b80\u5316\u89c6\u56fe\u7684\u7f16\u5199\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#1_6","title":"1. \u4e24\u4e2a\u89c6\u56fe\u57fa\u7c7b","text":""},{"location":"mds/Python-Note/DRF-Note/#11-apiview","title":"1.1 APIView[\u57fa\u672c\u89c6\u56fe\u7c7b]","text":""},{"location":"mds/Python-Note/DRF-Note/#12-genericapiview","title":"1.2 GenericAPIView[\u901a\u7528\u89c6\u56fe\u7c7b]","text":"<p>\u901a\u7528\u89c6\u56fe\u7c7b\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u628a\u89c6\u56fe\u4e2d\u7684\u72ec\u7279\u7684\u4ee3\u7801\u62bd\u53d6\u51fa\u6765\uff0c\u8ba9\u89c6\u56fe\u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\u66f4\u52a0\u901a\u7528\uff0c\u65b9\u4fbf\u628a\u901a\u7528\u4ee3\u7801\u8fdb\u884c\u7b80\u5199\u3002</p> <pre><code>rest_framework.generics.GenericAPIView\n</code></pre> <p>\u7ee7\u627f\u81ea<code>APIView</code>\uff0c\u4e3b\u8981\u589e\u52a0\u4e86\u64cd\u4f5c\u5e8f\u5217\u5316\u5668\u548c\u6570\u636e\u5e93\u67e5\u8be2\u7684\u65b9\u6cd5\uff0c\u4f5c\u7528\u662f\u4e3a\u4e0b\u9762Mixin\u6269\u5c55\u7c7b\u7684\u6267\u884c\u63d0\u4f9b\u65b9\u6cd5\u652f\u6301\u3002\u901a\u5e38\u5728\u4f7f\u7528\u65f6\uff0c\u53ef\u642d\u914d\u4e00\u4e2a\u6216\u591a\u4e2aMixin\u6269\u5c55\u7c7b\u3002</p> <p>\u63d0\u4f9b\u7684\u5173\u4e8e\u5e8f\u5217\u5316\u5668\u4f7f\u7528\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5</p>"},{"location":"mds/Python-Note/DRF-Note/#1get_serializer_classself","title":"\uff081\uff09get_serializer_class(self)","text":"<p>\u5f53\u51fa\u73b0\u4e00\u4e2a\u89c6\u56fe\u7c7b\u4e2d\u8c03\u7528\u591a\u4e2a\u5e8f\u5217\u5316\u5668\u65f6,\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u6761\u4ef6\u5224\u65ad\u5728get_serializer_class\u65b9\u6cd5\u4e2d\u901a\u8fc7\u8fd4\u56de\u4e0d\u540c\u7684\u5e8f\u5217\u5316\u5668\u7c7b\u540d\u5c31\u53ef\u4ee5\u8ba9\u89c6\u56fe\u65b9\u6cd5\u6267\u884c\u4e0d\u540c\u7684\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u4e86\u3002</p> <p>\u8fd4\u56de\u5e8f\u5217\u5316\u5668\u7c7b\uff0c\u9ed8\u8ba4\u8fd4\u56de<code>serializer_class</code>\uff0c\u53ef\u4ee5\u91cd\u5199</p>"},{"location":"mds/Python-Note/DRF-Note/#2get_serializerself-args-kwargs","title":"\uff082\uff09get_serializer(self, args, *kwargs)","text":"<p>\u8fd4\u56de\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\uff0c\u4e3b\u8981\u7528\u6765\u63d0\u4f9b\u7ed9Mixin\u6269\u5c55\u7c7b\u4f7f\u7528\uff0c\u5982\u679c\u6211\u4eec\u5728\u89c6\u56fe\u4e2d\u60f3\u8981\u83b7\u53d6\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u6b64\u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u5728\u63d0\u4f9b\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u4f1a\u5411\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u7684context\u5c5e\u6027\u8865\u5145\u4e09\u4e2a\u6570\u636e\uff1arequest\u3001format\u3001view\uff0c\u8fd9\u4e09\u4e2a\u6570\u636e\u5bf9\u8c61\u53ef\u4ee5\u5728\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\u65f6\u4f7f\u7528\u3002</p> <ul> <li>request \u5f53\u524d\u89c6\u56fe\u7684\u8bf7\u6c42\u5bf9\u8c61</li> <li>view \u5f53\u524d\u8bf7\u6c42\u7684\u7c7b\u89c6\u56fe\u5bf9\u8c61</li> <li>format \u5f53\u524d\u8bf7\u6c42\u671f\u671b\u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#3get_querysetself","title":"\uff083\uff09get_queryset(self)","text":"<p>\u8fd4\u56de\u89c6\u56fe\u4f7f\u7528\u7684\u67e5\u8be2\u96c6\uff0c\u4e3b\u8981\u7528\u6765\u63d0\u4f9b\u7ed9Mixin\u6269\u5c55\u7c7b\u4f7f\u7528\uff0c\u662f\u5217\u8868\u89c6\u56fe\u4e0e\u8be6\u60c5\u89c6\u56fe\u83b7\u53d6\u6570\u636e\u7684\u57fa\u7840\uff0c\u9ed8\u8ba4\u8fd4\u56de<code>queryset</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u91cd\u5199\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def get_queryset(self):\n    user = self.request.user\n    return user.accounts.all()\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#4get_objectself","title":"\uff084\uff09get_object(self)","text":"<p>\u8fd4\u56de\u8be6\u60c5\u89c6\u56fe\u6240\u9700\u7684\u6a21\u578b\u7c7b\u6570\u636e\u5bf9\u8c61\uff0c\u4e3b\u8981\u7528\u6765\u63d0\u4f9b\u7ed9Mixin\u6269\u5c55\u7c7b\u4f7f\u7528\u3002</p> <p>\u5728\u8bd5\u56fe\u4e2d\u53ef\u4ee5\u8c03\u7528\u8be5\u65b9\u6cd5\u83b7\u53d6\u8be6\u60c5\u4fe1\u606f\u7684\u6a21\u578b\u7c7b\u5bf9\u8c61\u3002</p> <p>\u82e5\u8be6\u60c5\u8bbf\u95ee\u7684\u6a21\u578b\u7c7b\u5bf9\u8c61\u4e0d\u5b58\u5728\uff0c\u4f1a\u8fd4\u56de404\u3002</p> <p>\u8be5\u65b9\u6cd5\u4f1a\u9ed8\u8ba4\u4f7f\u7528APIView\u63d0\u4f9b\u7684check_object_permissions\u65b9\u6cd5\u68c0\u67e5\u5f53\u524d\u5bf9\u8c61\u662f\u5426\u6709\u6743\u9650\u88ab\u8bbf\u95ee\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code># url(r'^books/(?P&lt;pk&gt;\\d+)/$', views.BookDetailView.as_view()),\nclass BookDetailView(GenericAPIView):\n    queryset = BookInfo.objects.all()\n    serializer_class = BookInfoSerializer\n\n    def get(self, request, pk):\n        book = self.get_object() # get_object()\u65b9\u6cd5\u6839\u636epk\u53c2\u6570\u67e5\u627equeryset\u4e2d\u7684\u6570\u636e\u5bf9\u8c61\n        serializer = self.get_serializer(book)\n        return Response(serializer.data)\n</code></pre> <p>\u5176\u4ed6\u53ef\u4ee5\u8bbe\u7f6e\u7684\u5c5e\u6027</p> <ul> <li>pagination_class \u6307\u660e\u5206\u9875\u63a7\u5236\u7c7b</li> <li>filter_backends \u6307\u660e\u8fc7\u6ee4\u63a7\u5236\u540e\u7aef</li> </ul> <p>\u901a\u7528\u89c6\u56fe\u7c7b\u7684\u5e94\u7528</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u5b66\u4e60\u4e0a\u9762\u7684GenericAPIView\u901a\u7528\u89c6\u56fe\u7c7b\uff0c\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u5b50\u5e94\u7528\u3002</p> <pre><code>python manage.py startapp gen\n</code></pre> <p>\u8def\u7531\u4ee3\u7801\u4e3a\uff1a</p> <pre><code># \u8def\u7531\nfrom django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path(\"gen/\", include(\"gen.urls\")),\n]\n# \u5b50\u8def\u7531\n</code></pre> <p>\u89c6\u56fe\u4ee3\u7801\u4e3a\uff1a</p> <pre><code>from rest_framework import status\nfrom rest_framework.generics import GenericAPIView\nfrom rest_framework.response import Response\n\nfrom sers.models import Book\nfrom .sers import BookSerializer\n\n\nclass BookView(GenericAPIView):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request):\n        bs = BookSerializer(instance=self.get_queryset(), many=True)\n        return Response(bs.data)\n\n    def post(self, request):\n        serializer = self.get_serializer(data=request.data)\n        serializer.is_valid(raise_exception=True)\n        serializer.save()\n        return Response(serializer.data)\n\n\nclass BookDetailView(GenericAPIView):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request, pk):\n        bs = BookSerializer(instance=self.get_object())\n        return Response(bs.data)\n\n    def put(self, request, pk):\n        serializer = BookSerializer(instance=self.get_object(), data=request.data)\n        serializer.is_valid(raise_exception=True)\n        serializer.save()\n        return Response(serializer.data)\n\n    def delete(self, request, pk):\n        self.get_object().delete()\n        return Response(status=status.HTTP_204_NO_CONTENT)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2-5","title":"2. \u89c6\u56fe5\u4e2a\u6269\u5c55\u7c7b","text":"<p>\u4e5f\u53eb\u6df7\u5165\u7c7b\uff08Mixin\uff09\u3002</p> <p>\u4f5c\u7528\uff1a</p> <p>\u63d0\u4f9b\u4e86\u51e0\u79cd\u540e\u7aef\u89c6\u56fe\uff08\u5bf9\u6570\u636e\u8d44\u6e90\u8fdb\u884c\u589e\u5220\u6539\u67e5\uff09\u5904\u7406\u6d41\u7a0b\u7684\u5b9e\u73b0\uff0c\u5982\u679c\u9700\u8981\u7f16\u5199\u7684\u89c6\u56fe\u5c5e\u4e8e\u8fd9\u4e94\u79cd\uff0c\u5219\u89c6\u56fe\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f\u76f8\u5e94\u7684\u6269\u5c55\u7c7b\u6765\u590d\u7528\u4ee3\u7801\uff0c\u51cf\u5c11\u81ea\u5df1\u7f16\u5199\u7684\u4ee3\u7801\u91cf\u3002</p> <p>\u8fd9\u4e94\u4e2a\u6269\u5c55\u7c7b\u9700\u8981\u642d\u914dGenericAPIView\u901a\u7528\u89c6\u56fe\u57fa\u7c7b\uff0c\u56e0\u4e3a\u4e94\u4e2a\u6269\u5c55\u7c7b\u7684\u5b9e\u73b0\u9700\u8981\u8c03\u7528GenericAPIView\u63d0\u4f9b\u7684\u5e8f\u5217\u5316\u5668\u4e0e\u6570\u636e\u5e93\u67e5\u8be2\u7684\u65b9\u6cd5\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#1listmodelmixin","title":"\uff081\uff09ListModelMixin","text":"<p>\u5217\u8868\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u63d0\u4f9b<code>list(request, *args, **kwargs)</code>\u65b9\u6cd5\u5feb\u901f\u5b9e\u73b0\u5217\u8868\u89c6\u56fe\uff0c\u8fd4\u56de200\u72b6\u6001\u7801\u3002</p> <p>\u8be5Mixin\u7684list\u65b9\u6cd5\u4f1a\u5bf9\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\u548c\u5206\u9875\u3002</p> <p>\u6e90\u4ee3\u7801\uff1a</p> <pre><code>class ListModelMixin:\n    \"\"\"\n    List a queryset.\n    \"\"\"\n    def list(self, request, *args, **kwargs):\n        queryset = self.filter_queryset(self.get_queryset())\n\n        page = self.paginate_queryset(queryset)\n        if page is not None:\n            serializer = self.get_serializer(page, many=True)\n            return self.get_paginated_response(serializer.data)\n\n        serializer = self.get_serializer(queryset, many=True)\n        return Response(serializer.data)\n</code></pre> <p>\u57fa\u4e8e\u6269\u5c55\u7c7b\u5b9e\u73b0BookView\uff1a</p> <pre><code>from rest_framework import status\nfrom rest_framework.generics import GenericAPIView\nfrom rest_framework.response import Response\n\nfrom sers.models import Book\nfrom .sers import BookSerializer\n\nfrom rest_framework.mixins import ListModelMixin\n\nclass BookView(GenericAPIView,ListModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request):\n        return self.list(request)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2createmodelmixin","title":"\uff082\uff09CreateModelMixin","text":"<p>\u521b\u5efa\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u63d0\u4f9b<code>create(request, *args, **kwargs)</code>\u65b9\u6cd5\u5feb\u901f\u5b9e\u73b0\u521b\u5efa\u8d44\u6e90\u7684\u89c6\u56fe\uff0c\u6210\u529f\u8fd4\u56de201\u72b6\u6001\u7801\u3002</p> <p>\u5982\u679c\u5e8f\u5217\u5316\u5668\u5bf9\u524d\u7aef\u53d1\u9001\u7684\u6570\u636e\u9a8c\u8bc1\u5931\u8d25\uff0c\u8fd4\u56de400\u9519\u8bef\u3002</p> <p>\u6e90\u4ee3\u7801\uff1a</p> <pre><code>class CreateModelMixin:\n    \"\"\"\n    Create a model instance.\n    \"\"\"\n    def create(self, request, *args, **kwargs):\n        serializer = self.get_serializer(data=request.data)\n        serializer.is_valid(raise_exception=True)\n        self.perform_create(serializer)\n        headers = self.get_success_headers(serializer.data)\n        return Response(serializer.data, status=status.HTTP_201_CREATED, headers=headers)\n\n    def perform_create(self, serializer):\n        serializer.save()\n\n    def get_success_headers(self, data):\n        try:\n            return {'Location': str(data[api_settings.URL_FIELD_NAME])}\n        except (TypeError, KeyError):\n            return {}\n</code></pre> <p>\u57fa\u4e8e\u6269\u5c55\u7c7b\u5b9e\u73b0BookView\uff1a</p> <pre><code>class BookView(GenericAPIView, ListModelMixin, CreateModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request):\n        return self.list(request)\n\n    def post(self, request):\n        return self.create(request)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#3retrievemodelmixin","title":"\uff083\uff09RetrieveModelMixin","text":"<p>\u8be6\u60c5\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u63d0\u4f9b<code>retrieve(request, *args, **kwargs)</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u8fd4\u56de\u4e00\u4e2a\u5b58\u5728\u7684\u6570\u636e\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u5b58\u5728\uff0c\u8fd4\u56de200\uff0c \u5426\u5219\u8fd4\u56de404\u3002</p> <p>\u6e90\u4ee3\u7801\uff1a</p> <pre><code>class RetrieveModelMixin:\n    \"\"\"\n    Retrieve a model instance.\n    \"\"\"\n    def retrieve(self, request, *args, **kwargs):\n        instance = self.get_object()\n        serializer = self.get_serializer(instance)\n        return Response(serializer.data)\n</code></pre> <p>\u57fa\u4e8e\u6269\u5c55\u7c7b\u5b9e\u73b0BookDetailView\uff1a</p> <pre><code>class BookDetailView(GenericAPIView,RetrieveModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request, pk):\n        return self.retrieve(request, pk)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#4updatemodelmixin","title":"\uff084\uff09UpdateModelMixin","text":"<p>\u66f4\u65b0\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u63d0\u4f9b<code>update(request, *args, **kwargs)</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u66f4\u65b0\u4e00\u4e2a\u5b58\u5728\u7684\u6570\u636e\u5bf9\u8c61\u3002</p> <p>\u540c\u65f6\u4e5f\u63d0\u4f9b<code>partial_update(request, *args, **kwargs)</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5c40\u90e8\u66f4\u65b0\u3002</p> <p>\u6210\u529f\u8fd4\u56de200\uff0c\u5e8f\u5217\u5316\u5668\u6821\u9a8c\u6570\u636e\u5931\u8d25\u65f6\uff0c\u8fd4\u56de400\u9519\u8bef\u3002</p> <p>\u6e90\u4ee3\u7801\uff1a</p> <pre><code>class UpdateModelMixin:\n    \"\"\"\n    Update a model instance.\n    \"\"\"\n    def update(self, request, *args, **kwargs):\n        partial = kwargs.pop('partial', False)\n        instance = self.get_object()\n        serializer = self.get_serializer(instance, data=request.data, partial=partial)\n        serializer.is_valid(raise_exception=True)\n        self.perform_update(serializer)\n\n        if getattr(instance, '_prefetched_objects_cache', None):\n            # If 'prefetch_related' has been applied to a queryset, we need to\n            # forcibly invalidate the prefetch cache on the instance.\n            instance._prefetched_objects_cache = {}\n\n        return Response(serializer.data)\n\n    def perform_update(self, serializer):\n        serializer.save()\n\n    def partial_update(self, request, *args, **kwargs):\n        kwargs['partial'] = True\n        return self.update(request, *args, **kwargs)\n</code></pre> <p>\u57fa\u4e8e\u6269\u5c55\u7c7b\u5b9e\u73b0BookDetailView\uff1a</p> <pre><code>class BookDetailView(GenericAPIView, RetrieveModelMixin, UpdateModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request, pk):\n        return self.retrieve(request, pk)\n\n    def put(self, request, pk):\n        return self.update(request, pk)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#5destroymodelmixin","title":"\uff085\uff09DestroyModelMixin","text":"<p>\u5220\u9664\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u63d0\u4f9b<code>destroy(request, *args, **kwargs)</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u5220\u9664\u4e00\u4e2a\u5b58\u5728\u7684\u6570\u636e\u5bf9\u8c61\u3002</p> <p>\u6210\u529f\u8fd4\u56de204\uff0c\u4e0d\u5b58\u5728\u8fd4\u56de404\u3002</p> <p>\u6e90\u4ee3\u7801\uff1a</p> <pre><code>class DestroyModelMixin:\n    \"\"\"\n    Destroy a model instance.\n    \"\"\"\n    def destroy(self, request, *args, **kwargs):\n        instance = self.get_object()\n        self.perform_destroy(instance)\n        return Response(status=status.HTTP_204_NO_CONTENT)\n\n    def perform_destroy(self, instance):\n        instance.delete()\n</code></pre> <p>\u57fa\u4e8e\u6269\u5c55\u7c7b\u5b9e\u73b0BookDetailView\uff1a</p> <pre><code>class BookDetailView(GenericAPIView, RetrieveModelMixin, UpdateModelMixin, DestroyModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request, pk):\n        return self.retrieve(request, pk)\n\n    def put(self, request, pk):\n        return self.update(request, pk)\n\n    def delete(self, request, pk):\n        return self.destroy(request, pk)\n</code></pre> <p>\u6574\u4f53\u4ee3\u7801\uff0c\u4f7f\u7528GenericAPIView\u7ed3\u5408\u89c6\u56fe\u6269\u5c55\u7c7b\uff0c\u5b9e\u73b05\u4e2a\u57fa\u672capi\u63a5\u53e3\uff0c\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code># Create your views here.\n\"\"\"\n\u57fa\u4e8eGenericAPIView\u7ed3\u54085\u4e2a\u89c6\u56fe\u6269\u5c55\u7c7b\u5b8c\u6210\u57fa\u672c\u76845\u4e2aAPI\u63a5\u53e3\nListModelMixin     \u63d0\u4f9b\u4e86list\u65b9\u6cd5\uff0c\u83b7\u53d6\u591a\u6761\u6570\u636e\nCreateModelMixin   \u63d0\u4f9b\u4e86create\u65b9\u6cd5\uff0c\u6dfb\u52a0\u4e00\u6761\u6570\u636e\n\nRetrieveModelMixin \u63d0\u4f9b\u4e86retrieve\u65b9\u6cd5\uff0c\u83b7\u53d6\u4e00\u6761\u6570\u636e\nUpdateModelMixin   \u63d0\u4f9b\u4e86update\u65b9\u6cd5\uff0c\u66f4\u65b0\u4e00\u6761\u6570\u636e\nDestroyModelMixin   \u63d0\u4f9b\u4e86destroy\u65b9\u6cd5\uff0c\u5220\u9664\u4e00\u6761\u6570\u636e\n\"\"\"\n\nfrom rest_framework.generics import GenericAPIView\nfrom rest_framework.mixins import ListModelMixin, CreateModelMixin, RetrieveModelMixin, UpdateModelMixin, \\\n    DestroyModelMixin\n\nfrom sers.models import Book\nfrom .sers import BookSerializer\n\n\nclass BookView(GenericAPIView, ListModelMixin, CreateModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request):\n        return self.list(request)\n\n    def post(self, request):\n        return self.create(request)\n\n\nclass BookDetailView(GenericAPIView, RetrieveModelMixin, UpdateModelMixin, DestroyModelMixin):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n    def get(self, request, pk):\n        return self.retrieve(request, pk)\n\n    def put(self, request, pk):\n        return self.update(request, pk)\n\n    def delete(self, request, pk):\n        return self.destroy(request, pk)\n</code></pre> <p>\u5e8f\u5217\u5316\u7ec4\u4ef6\uff1a</p> <pre><code>class BookSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Book\n        fields = \"__all__\"\n</code></pre> <p>\u8def\u7531\uff1a</p> <pre><code>urlpatterns = [\n    path('books/', BookView.as_view()),\n    re_path('books/(?P&lt;pk&gt;\\d+)/', BookDetailView.as_view()),\n]\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#3-genericapiview","title":"3. GenericAPIView\u7684\u89c6\u56fe\u5b50\u7c7b","text":""},{"location":"mds/Python-Note/DRF-Note/#1createapiview","title":"\uff081\uff09CreateAPIView","text":"<p>\u63d0\u4f9b\u4e86post\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86create\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1a GenericAPIView\u3001CreateModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#2listapiview","title":"\uff082\uff09ListAPIView","text":"<p>\u63d0\u4f9b\u4e86get\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86list\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001ListModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#3retrieveapiview","title":"\uff083\uff09RetrieveAPIView","text":"<p>\u63d0\u4f9b\u4e86get\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86retrieve\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea: GenericAPIView\u3001RetrieveModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#4destoryapiview","title":"\uff084\uff09DestoryAPIView","text":"<p>\u63d0\u4f9b\u4e86delete\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86destory\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001DestoryModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#5updateapiview","title":"\uff085\uff09UpdateAPIView","text":"<p>\u63d0\u4f9b\u4e86put\u548cpatch\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86update\u548cpartial_update\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001UpdateModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#6listcreateapiview","title":"\uff086\uff09ListCreateAPIView","text":"<p>\u63d0\u4f9b\u4e86get\u548cpost\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86list\u548ccreate\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001ListModelMixin\u3001CreateModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#7retrieveupdateapiview","title":"\uff087\uff09RetrieveUpdateAPIView","text":"<p>\u63d0\u4f9b get\u3001put\u3001patch\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1a GenericAPIView\u3001RetrieveModelMixin\u3001UpdateModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#8retrievedestoryapiview","title":"\uff088\uff09RetrieveDestoryAPIView","text":"<p>\u63d0\u4f9b get\u3001delete\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001RetrieveModelMixin\u3001DestoryModelMixin</p>"},{"location":"mds/Python-Note/DRF-Note/#9retrieveupdatedestoryapiview","title":"\uff089\uff09RetrieveUpdateDestoryAPIView","text":"<p>\u63d0\u4f9b get\u3001put\u3001patch\u3001delete\u65b9\u6cd5</p> <p>\u7ee7\u627f\u81ea\uff1aGenericAPIView\u3001RetrieveModelMixin\u3001UpdateModelMixin\u3001DestoryModelMixin</p> <pre><code>from rest_framework import generics\nclass BookView(generics.ListCreateAPIView):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n\n\nclass BookDetailView(generics.RetrieveUpdateDestroyAPIView):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#4","title":"4. \u89c6\u56fe\u96c6","text":""},{"location":"mds/Python-Note/DRF-Note/#41-viewset","title":"4.1 ViewSet","text":"<p>\u7ee7\u627f\u81ea<code>APIView</code>\u4e0e<code>ViewSetMixin</code>\uff0c\u4f5c\u7528\u4e5f\u4e0eAPIView\u57fa\u672c\u7c7b\u4f3c\uff0c\u63d0\u4f9b\u4e86\u8eab\u4efd\u8ba4\u8bc1\u3001\u6743\u9650\u6821\u9a8c\u3001\u6d41\u91cf\u7ba1\u7406\u7b49\u3002</p> <p>ViewSet\u4e3b\u8981\u901a\u8fc7\u7ee7\u627fViewSetMixin\u6765\u5b9e\u73b0\u5728\u8c03\u7528as_view()\u65f6\u4f20\u5165\u5b57\u5178{\u201chttp\u8bf7\u6c42\u201d\uff1a\u201c\u89c6\u56fe\u65b9\u6cd5\u201d}\u7684\u6620\u5c04\u5904\u7406\u5de5\u4f5c\uff0c\u5982{\u2018get\u2019:\u2019list\u2019}\uff0c</p> <p>\u5728ViewSet\u4e2d\uff0c\u6ca1\u6709\u63d0\u4f9b\u4efb\u4f55\u52a8\u4f5caction\u65b9\u6cd5\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0action\u65b9\u6cd5\u3002</p> <p>\u4f7f\u7528\u89c6\u56fe\u96c6ViewSet\uff0c\u53ef\u4ee5\u5c06\u4e00\u7cfb\u5217\u89c6\u56fe\u76f8\u5173\u7684\u4ee3\u7801\u903b\u8f91\u548c\u76f8\u5173\u7684http\u8bf7\u6c42\u52a8\u4f5c\u5c01\u88c5\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff1a</p> <ul> <li>list() \u63d0\u4f9b\u4e00\u7ec4\u6570\u636e</li> <li>retrieve() \u63d0\u4f9b\u5355\u4e2a\u6570\u636e</li> <li>create() \u521b\u5efa\u6570\u636e</li> <li>update() \u4fdd\u5b58\u6570\u636e</li> <li>destory() \u5220\u9664\u6570\u636e</li> </ul> <p>ViewSet\u89c6\u56fe\u96c6\u7c7b\u4e0d\u518d\u9650\u5236\u89c6\u56fe\u65b9\u6cd5\u540d\u53ea\u5141\u8bb8get()\u3001post()\u7b49\u8fd9\u79cd\u60c5\u51b5\u4e86\uff0c\u800c\u662f\u5b9e\u73b0\u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u5b9a\u4e49\u81ea\u5b9a\u4e49\u65b9\u6cd5\u540d\uff0c\u4f8b\u5982 list() \u3001create() \u7b49\uff0c\u7136\u540e\u7ecf\u8fc7\u8def\u7531\u4e2d\u4f7f\u7528http\u548c\u8fd9\u4e9b\u89c6\u56fe\u65b9\u6cd5\u540d\u8fdb\u884c\u7ed1\u5b9a\u8c03\u7528\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\u89c6\u56fe\u96c6\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u5b50\u5e94\u7528\uff0c</p> <pre><code>python manage.py startapp vset\n</code></pre> <p>\u89c6\u56fe\u96c6\u53ea\u5728\u4f7f\u7528as_view()\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5c06action\u52a8\u4f5c\u4e0e\u5177\u4f53\u8bf7\u6c42\u65b9\u5f0f\u5bf9\u5e94\u4e0a\u3002\u5982\uff1a</p> <p>\u200b   \u8def\u7531</p> <pre><code>from django.urls import path, re_path\n\nfrom vset.views import BookView\n\nurlpatterns = [\n    # path(\"set\", views.BookView.as_view({\"http\u8bf7\u6c42\":\"\u89c6\u56fe\u65b9\u6cd5\"})),\n    path(\"books/\", BookView.as_view({\n        \"get\": \"get_all_book\",\n        \"post\": \"add_book\"\n    })),\n    re_path(\"^books/(?P&lt;pk&gt;\\d+)$\", BookView.as_view({\n        \"get\": \"get_one_book\",\n        \"put\": \"edit_book\",\n        \"delete\": \"delete\",\n    })),\n]\n</code></pre> <p>\u200b   \u89c6\u56fe</p> <pre><code>from rest_framework import serializers\nfrom rest_framework import status\nfrom rest_framework.response import Response\nfrom rest_framework.viewsets import ViewSet\n\nfrom sers.models import Book\n\n\nclass BookSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Book\n        fields = \"__all__\"\n\n\nclass BookView(ViewSet):\n\n    def get_all_book(self, request):\n\n        books = Book.objects.all()\n        bs = BookSerializer(instance=books, many=True)\n        return Response(bs.data)\n\n    def add_book(self, request):\n        bs = BookSerializer(data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n    def get_one_book(self, request, pk):\n        book = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=book)\n        return Response(bs.data)\n\n    def edit_book(self, request, pk):\n        instance = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=instance, data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n    def delete(self, request, pk):\n        Book.objects.get(pk=pk).delete()\n        return Response(status=status.HTTP_204_NO_CONTENT)\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#42-genericviewset","title":"4.2 GenericViewSet","text":"<p>\u7ee7\u627f\u81eaGenericAPIView\u548cViewSetMixin\uff0c\u4f5c\u7528\u8ba9\u89c6\u56fe\u96c6\u7684\u89c6\u56fe\u4ee3\u7801\u53d8\u5f97\u66f4\u52a0\u901a\u7528\uff0c\u62bd\u79bb\u72ec\u7279\u4ee3\u7801\u4f5c\u4e3a\u89c6\u56fe\u7c7b\u7684\u5c5e\u6027\u3002</p> <p>\u4f7f\u7528ViewSet\u901a\u5e38\u5e76\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3alist\u3001retrieve\u3001create\u3001update\u3001destory\u7b49\u65b9\u6cd5\u90fd\u9700\u8981\u81ea\u5df1\u7f16\u5199\uff0c\u800c\u8fd9\u4e9b\u65b9\u6cd5\u4e0e\u524d\u9762\u8bb2\u8fc7\u7684Mixin\u6269\u5c55\u7c7b\u63d0\u4f9b\u7684\u65b9\u6cd5\u540c\u540d\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627fMixin\u6269\u5c55\u7c7b\u6765\u590d\u7528\u8fd9\u4e9b\u65b9\u6cd5\u800c\u65e0\u9700\u81ea\u5df1\u7f16\u5199\u3002\u4f46\u662fMixin\u6269\u5c55\u7c7b\u4f9d\u8d56\u4e0e<code>GenericAPIView</code>\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u7ee7\u627f<code>GenericAPIView</code>\u3002</p> <p>GenericViewSet\u5c31\u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\u4e86\u8fd9\u6837\u7684\u7ee7\u627f\u5de5\u4f5c\uff0c\u7ee7\u627f\u81ea<code>GenericAPIView</code>\u4e0e<code>ViewSetMixin</code>\uff0c\u5728\u5b9e\u73b0\u4e86\u8c03\u7528as_view()\u65f6\u4f20\u5165\u5b57\u5178\uff08\u5982<code>{'get':'list'}</code>\uff09\u7684\u6620\u5c04\u5904\u7406\u5de5\u4f5c\u7684\u540c\u65f6\uff0c\u8fd8\u63d0\u4f9b\u4e86<code>GenericAPIView</code>\u63d0\u4f9b\u7684\u57fa\u7840\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u642d\u914dMixin\u6269\u5c55\u7c7b\u4f7f\u7528\u3002</p> <p>\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.viewsets import GenericViewSet\n\nclass BookView(GenericViewSet):\n\n    def list(self, request):\n\n        books = Book.objects.all()\n        bs = BookSerializer(instance=books, many=True)\n        return Response(bs.data)\n\n    def create(self, request):\n        bs = BookSerializer(data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n    def retrieve(self, request, pk):\n        book = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=book)\n        return Response(bs.data)\n\n    def update(self, request, pk):\n        instance = Book.objects.get(pk=pk)\n        bs = BookSerializer(instance=instance, data=request.data)\n        if bs.is_valid():\n            bs.save()\n            return Response(bs.data)\n        else:\n            return Response(bs.errors)\n\n    def delete(self, request, pk):\n        Book.objects.get(pk=pk).delete()\n        return Response(status=status.HTTP_204_NO_CONTENT)\n</code></pre> <pre><code>from django.urls import path, re_path\n\nfrom vset.views import BookView\n\nurlpatterns = [\n    # path(\"set\", views.BookView.as_view({\"http\u8bf7\u6c42\":\"\u89c6\u56fe\u65b9\u6cd5\"})),\n    path(\"books/\", BookView.as_view({\n        \"get\": \"list\",\n        \"post\": \"create\"\n    })),\n    re_path(\"^books/(?P&lt;pk&gt;\\d+)$\", BookView.as_view({\n        \"get\": \"retrieve\",\n        \"put\": \"update\",\n        \"delete\": \"delete\",\n    })),\n]\n</code></pre> <p>\u96c6\u5408\u6211\u4eec\u4e0a\u9762\u5b66\u4e60\u7684\u6a21\u578b\u6269\u5c55\u7c7b\uff0c\u5b9e\u73b0\u7b80\u5199\u64cd\u4f5c\uff0c\u89c6\u56fe\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.viewsets import GenericViewSet\nfrom rest_framework.mixins import ListModelMixin, CreateModelMixin, RetrieveModelMixin, UpdateModelMixin, \\\n    DestroyModelMixin\n\n\nclass BookView(GenericViewSet, ListModelMixin, CreateModelMixin, RetrieveModelMixin, UpdateModelMixin,\n                          DestroyModelMixin):\n    queryset = Book.objects\n    serializer_class = BookSerializer\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#43-modelviewsetreadonlymodelviewset","title":"4.3 ModelViewSet\u548cReadOnlyModelViewSet","text":"<p>ModelViewSet\u7ee7\u627f\u81ea<code>GenericViewSet</code>\uff0c\u540c\u65f6\u5305\u62ec\u4e86ListModelMixin\u3001RetrieveModelMixin\u3001CreateModelMixin\u3001UpdateModelMixin\u3001DestoryModelMixin\u3002</p> <p>ReadOnlyModelViewSet\u627f\u81ea<code>GenericViewSet</code>\uff0c\u540c\u65f6\u5305\u62ec\u4e86ListModelMixin\u3001RetrieveModelMixin\u3002</p> <pre><code>from rest_framework.viewsets import ModelViewSet\n\nclass BookView(ModelViewSet):\n    queryset = Book.objects\n    serializer_class = BookSerializer\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#routers","title":"\u5341\u3001\u8def\u7531Routers","text":"<p>\u5bf9\u4e8e\u89c6\u56fe\u96c6ViewSet\uff0c\u6211\u4eec\u9664\u4e86\u53ef\u4ee5\u81ea\u5df1\u624b\u52a8\u6307\u660e\u8bf7\u6c42\u65b9\u5f0f\u4e0e\u52a8\u4f5caction\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528Routers\u6765\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u5b9e\u73b0\u8def\u7531\u4fe1\u606f\u3002</p> <p>REST framework\u63d0\u4f9b\u4e86\u4e24\u4e2arouter</p> <ul> <li>SimpleRouter</li> <li>DefaultRouter</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#1_7","title":"1. \u4f7f\u7528\u65b9\u6cd5","text":"<p>1\uff09 \u521b\u5efarouter\u5bf9\u8c61\uff0c\u5e76\u6ce8\u518c\u89c6\u56fe\u96c6\uff0c\u4f8b\u5982</p> <pre><code>from rest_framework import routers\nrouter = routers.DefaultRouter()\nrouter.register('book', BookView, base_name='book')\n</code></pre> <p>register(prefix, viewset, base_name)</p> <ul> <li>prefix \u8be5\u89c6\u56fe\u96c6\u7684\u8def\u7531\u524d\u7f00</li> <li>viewset \u89c6\u56fe\u96c6</li> <li>base_name \u8def\u7531\u522b\u540d\u7684\u524d\u7f00</li> </ul> <p>\u5982\u4e0a\u8ff0\u4ee3\u7801\u4f1a\u5f62\u6210\u7684\u8def\u7531\u5982\u4e0b\uff1a</p> <pre><code>^book/$    name: book-list\n^book/{pk}/$   name: book-detail\n</code></pre> <p>2\uff09\u6dfb\u52a0\u8def\u7531\u6570\u636e</p> <p>\u53ef\u4ee5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <pre><code>urlpatterns = [\n    ...\n]\nurlpatterns += router.urls\n</code></pre> <p>\u6216</p> <pre><code>urlpatterns = [\n    ...\n    path('^', include(router.urls))\n]\n</code></pre> <p>\u8def\u7531\u4ee3\u7801\uff1a</p> <pre><code>from django.urls import path, re_path\nfrom . import views\nurlpatterns = [\n    ...\n]\n\n\"\"\"\u4f7f\u7528drf\u63d0\u4f9b\u8def\u7531\u7c7brouter\u7ed9\u89c6\u56fe\u96c6\u751f\u6210\u8def\u7531\u5217\u8868\"\"\"\n# \u5b9e\u4f8b\u5316\u8def\u7531\u7c7b\n# drf\u63d0\u4f9b\u4e00\u5171\u63d0\u4f9b\u4e86\u4e24\u4e2a\u8def\u7531\u7c7b\u7ed9\u6211\u4eec\u4f7f\u7528,\u4ed6\u4eec\u7528\u6cd5\u4e00\u81f4,\u529f\u80fd\u51e0\u4e4e\u4e00\u6837\nfrom rest_framework.routers import DefaultRouter\nrouter = DefaultRouter()\n\n# \u6ce8\u518c\u89c6\u56fe\u96c6\n# router.register(\"\u8def\u7531\u524d\u7f00\",\u89c6\u56fe\u96c6\u7c7b)\nrouter.register(\"book\",views.BookView)\n\n# \u628a\u751f\u6210\u7684\u8def\u7531\u5217\u8868\u8ffd\u52a0\u5230urlpatterns\nprint( router.urls )\nurlpatterns += router.urls\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5c31\u6210\u529f\u751f\u6210\u4e86\u8def\u7531\u5730\u5740[\u589e/\u5220/\u6539/\u67e5\u4e00\u6761/\u67e5\u591a\u6761\u7684\u529f\u80fd]\uff0c\u4f46\u662f\u4e0d\u4f1a\u81ea\u52a8\u6211\u4eec\u5728\u89c6\u56fe\u96c6\u81ea\u5b9a\u4e49\u65b9\u6cd5\u7684\u8def\u7531\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u5982\u679c\u4e5f\u8981\u7ed9\u81ea\u5b9a\u4e49\u65b9\u6cd5\u751f\u6210\u8def\u7531\uff0c\u5219\u9700\u8981\u8fdb\u884caction\u52a8\u4f5c\u7684\u58f0\u660e\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#2-action","title":"2. \u89c6\u56fe\u96c6\u4e2d\u9644\u52a0action\u7684\u58f0\u660e","text":"<p>\u5728\u89c6\u56fe\u96c6\u4e2d\uff0c\u5982\u679c\u60f3\u8981\u8ba9Router\u81ea\u52a8\u5e2e\u52a9\u6211\u4eec\u4e3a\u81ea\u5b9a\u4e49\u7684\u52a8\u4f5c\u751f\u6210\u8def\u7531\u4fe1\u606f\uff0c\u9700\u8981\u4f7f\u7528<code>rest_framework.decorators.action</code>\u88c5\u9970\u5668\u3002</p> <p>\u4ee5action\u88c5\u9970\u5668\u88c5\u9970\u7684\u65b9\u6cd5\u540d\u4f1a\u4f5c\u4e3aaction\u52a8\u4f5c\u540d\uff0c\u4e0elist\u3001retrieve\u7b49\u540c\u3002</p> <p>action\u88c5\u9970\u5668\u53ef\u4ee5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a</p> <ul> <li> <p>methods: \u58f0\u660e\u8be5action\u5bf9\u5e94\u7684\u8bf7\u6c42\u65b9\u5f0f\uff0c\u5217\u8868\u4f20\u9012</p> </li> <li> <p>detail: \u58f0\u660e\u8be5action\u7684\u8def\u5f84\u662f\u5426\u4e0e\u5355\u4e00\u8d44\u6e90\u5bf9\u5e94</p> </li> </ul> <pre><code>\u8def\u7531\u524d\u7f00/&lt;pk&gt;/action\u65b9\u6cd5\u540d/\n</code></pre> <ul> <li>True \u8868\u793a\u8def\u5f84\u683c\u5f0f\u662f<code>xxx/&lt;pk&gt;/action\u65b9\u6cd5\u540d/</code></li> <li> <p>False \u8868\u793a\u8def\u5f84\u683c\u5f0f\u662f<code>xxx/action\u65b9\u6cd5\u540d/</code></p> </li> <li> <p>url_path\uff1a\u58f0\u660e\u8be5action\u7684\u8def\u7531\u5c3e\u7f00\u3002</p> </li> </ul> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>from rest_framework.viewsets import ModelViewSet\nfrom rest_framework.decorators import action\n\nclass BookView(ModelViewSet):\n    queryset = Book.objects\n    serializer_class = BookSerializer\n    \"\"\"\n    action\u88c5\u9970\u5668\u7684\u4f5c\u7528\uff1a\u544a\u8bc9\u8def\u7531\u7c7b\u7ed9\u89c6\u56fe\u96c6\u7684\u81ea\u5b9a\u4e49\u65b9\u6cd5\u751f\u6210\u8def\u7531\u4fe1\u606f\n    methods, \u5217\u8868\uff0c\u5141\u8bb8\u54ea\u4e9bhttp\u8bf7\u6c42\u80fd\u8bbf\u95ee\u5f53\u524d\u89c6\u56fe\u65b9\u6cd5\n    detail\uff0c\u5e03\u5c14\uff0c\u751f\u6210\u8def\u7531\u65f6\u662f\u5426\u62fc\u63a5pk\u53c2\u6570\n            detail\u4e3aTrue\uff0c\u8868\u793a\u8def\u5f84\u540d\u683c\u5f0f\u5e94\u8be5\u4e3a book/{pk}/login/\n    url_path\uff0c\u5b57\u7b26\u4e32\uff0c\u751f\u6210\u8def\u7531\u65f6\u672b\u5c3e\u8def\u7531\u8def\u5f84\uff0c\u5982\u679c\u6ca1\u6709\u58f0\u660e\uff0c\u5219\u81ea\u52a8\u4ee5\u5f53\u524d\u65b9\u6cd5\u540d\u4f5c\u4e3a\u8def\u7531\u5c3e\u7f00\n\n    \"\"\"\n    @action(methods=['get'], detail=True,url_path=\"login\")\n    def login(self, request,pk):\n        \"\"\"\u767b\u5f55\"\"\"\n        return Response({\"msg\":request.method})\n\n    # detail\u4e3aFalse \u8868\u793a\u8def\u5f84\u540d\u683c\u5f0f\u5e94\u8be5\u4e3a book/get_new_5/\n    @action(methods=['get'], detail=False)\n    def get_new_5(self, request):\n        \"\"\"\u83b7\u53d6\u6700\u65b0\u6dfb\u52a0\u76845\u672c\u4e66\"\"\"\n        ...\n</code></pre> <p>\u7531\u8def\u7531\u5668\u81ea\u52a8\u4e3a\u6b64\u89c6\u56fe\u96c6\u81ea\u5b9a\u4e49action\u65b9\u6cd5\u5f62\u6210\u7684\u8def\u7531\u4f1a\u662f\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>^book/get_new_5/$    name: book-get_new_5\n^book/{pk}/login/$   name: book-login\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#3-routerurl","title":"3. \u8def\u7531router\u5f62\u6210URL\u7684\u65b9\u5f0f","text":"<p>1\uff09 SimpleRouter\uff08prefix=\u201c\u8def\u7531\u524d\u7f00\u201d\uff0cviewset=\u89c6\u56fe\u96c6\u7c7b\uff0cbasename=\u201c\u8def\u7531\u522b\u540d\u201d\uff09</p> <p> </p> <p>2\uff09DefaultRouter</p> <p> </p> <p>DefaultRouter\u4e0eSimpleRouter\u7684\u533a\u522b\u662f\uff0cDefaultRouter\u4f1a\u591a\u9644\u5e26\u4e00\u4e2a\u9ed8\u8ba4\u7684API\u6839\u89c6\u56fe\uff0c\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u6240\u6709\u5217\u8868\u89c6\u56fe\u7684\u8d85\u94fe\u63a5\u54cd\u5e94\u6570\u636e\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#_4","title":"\u5341\u4e00\u3001\u5176\u5b83\u529f\u80fd\u7ec4\u4ef6","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u63a5\u4e0b\u6765\u7684\u5b66\u4e60\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b50\u5e94\u7528 opt</p> <pre><code>python manage.py startapp opt\n</code></pre> <p>\u6ce8\u518c\u5b50\u5e94\u7528</p> <pre><code>INSTALLED_APPS = [\n    ...\n    'opt',     # drf\u63d0\u4f9b\u7684\u7ec4\u4ef6\u4f7f\u7528\n]\n</code></pre> <p>\u603b\u8def\u7531\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('students/', include(\"students.urls\")),\n    path('sers/', include(\"sers.urls\")),\n    path('school/', include(\"school.urls\")),\n    path(\"req/\", include(\"req.urls\")),\n    path(\"demo/\", include(\"demo.urls\")),\n    path(\"opt/\", include(\"opt.urls\")),\n]\n</code></pre> <p>\u5b50\u8def\u7531\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from django.urls import path\nfrom . import views\nurlpatterns = [\n\n]\n</code></pre> <p>\u56e0\u4e3a\u63a5\u4e0b\u6765\u7684\u8ba4\u8bc1\u7ec4\u4ef6\u4e2d\u9700\u8981\u4f7f\u7528\u5230\u767b\u9646\u529f\u80fd\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528django\u5185\u7f6eadmin\u7ad9\u70b9\u5e76\u521b\u5efa\u4e00\u4e2a\u7ba1\u7406\u5458.</p> <p>admin\u8fd0\u8425\u7ad9\u70b9\u7684\u8bbf\u95ee\u5730\u5740\uff1ahttp://127.0.0.1:8000/admin</p> <pre><code>python manage.py createsuperuser\n# \u5982\u679c\u4e4b\u524d\u6709\u8d26\u53f7\uff0c\u4f46\u662f\u5fd8\u4e86\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ec8\u7aef\u4e0b\u7684\u547d\u4ee4\u4fee\u6539\u6307\u5b9a\u7528\u6237\u7684\u5bc6\u7801\uff0c\u8fd9\u91cc\u7684\u5bc6\u7801\u5fc5\u987b8\u4f4d\u957f\u5ea6\u4ee5\u4e0a\u7684\npython manage.py changepassword \u7528\u6237\u540d\n</code></pre> <p>\u521b\u5efa\u7ba1\u7406\u5458\u4ee5\u540e\uff0c\u8bbf\u95eeadmin\u7ad9\u70b9\uff0c\u5148\u4fee\u6539\u7ad9\u70b9\u7684\u8bed\u8a00\u914d\u7f6e</p> <p>settings.py</p> <pre><code>LANGUAGE_CODE = 'zh-hans'\n\nTIME_ZONE = 'Asia/Shanghai'\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#1-authentication","title":"1. \u8ba4\u8bc1Authentication","text":"<p>\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u5168\u5c40\u9ed8\u8ba4\u7684\u8ba4\u8bc1\u65b9\u6848</p> <p>\u5e38\u89c1\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff1acookie\u3001session\u3001token</p> <p>/home/moluo/.virtualenvs/drfdemo/lib/python3.6/site-packages/rest_framework/settings.py \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6</p> <pre><code>REST_FRAMEWORK = {\n    # \u914d\u7f6e\u8ba4\u8bc1\u65b9\u5f0f\u7684\u9009\u9879\n    'DEFAULT_AUTHENTICATION_CLASSES': (\n        'rest_framework.authentication.SessionAuthentication', # session\u8ba4\u8bc1\n        'rest_framework.authentication.BasicAuthentication',   # \u57fa\u672c\u8ba4\u8bc1\n    )\n}\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u5728\u5177\u4f53\u7684\u89c6\u56fe\u7c7b\u4e2d\u901a\u8fc7\u8bbe\u7f6eauthentication_classess\u7c7b\u5c5e\u6027\u6765\u8bbe\u7f6e\u5355\u72ec\u7684\u4e0d\u540c\u7684\u8ba4\u8bc1\u65b9\u5f0f</p> <pre><code>from rest_framework.authentication import SessionAuthentication, BasicAuthentication\nfrom rest_framework.views import APIView\n\nclass ExampleView(APIView):\n    # \u7c7b\u5c5e\u6027\n    authentication_classes = [SessionAuthentication, BasicAuthentication]\n    def get(self,request):\n        pass\n</code></pre> <p>\u8ba4\u8bc1\u5931\u8d25\u4f1a\u6709\u4e24\u79cd\u53ef\u80fd\u7684\u8fd4\u56de\u503c\uff0c\u8fd9\u4e2a\u9700\u8981\u6211\u4eec\u914d\u5408\u6743\u9650\u7ec4\u4ef6\u6765\u4f7f\u7528\uff1a</p> <ul> <li>401 Unauthorized \u672a\u8ba4\u8bc1</li> <li>403 Permission Denied \u6743\u9650\u88ab\u7981\u6b62</li> </ul> <p>\u81ea\u5b9a\u4e49\u8ba4\u8bc1\uff0c<code>drfdemo.authentication</code>\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.authentication import BaseAuthentication\nfrom django.contrib.auth import get_user_model\n\nclass CustomAuthentication(BaseAuthentication):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u8ba4\u8bc1\u65b9\u5f0f\n    \"\"\"\n    def authenticate(self, request):\n        \"\"\"\n        \u8ba4\u8bc1\u65b9\u6cd5\n        request: \u672c\u6b21\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684http\u8bf7\u6c42\u5bf9\u8c61\n        \"\"\"\n        user = request.query_params.get(\"user\")\n        pwd  = request.query_params.get(\"pwd\")\n        if user != \"root\" or pwd != \"houmen\":\n            return None\n        # get_user_model\u83b7\u53d6\u5f53\u524d\u7cfb\u7edf\u4e2d\u7528\u6237\u8868\u5bf9\u5e94\u7684\u7528\u6237\u6a21\u578b\u7c7b\n        user = get_user_model().objects.first()\n        return (user, None)  # \u6309\u7167\u56fa\u5b9a\u7684\u8fd4\u56de\u683c\u5f0f\u586b\u5199 \uff08\u7528\u6237\u6a21\u578b\u5bf9\u8c61, None\uff09\n</code></pre> <p>\u89c6\u56fe\u8c03\u7528\u81ea\u5b9a\u4e49\u8ba4\u8bc1\uff0c\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code>from django.contrib.auth.models import AnonymousUser\nfrom django.shortcuts import render\nfrom rest_framework.views import APIView\nfrom rest_framework.response import Response\nfrom rest_framework.authentication import SessionAuthentication\nfrom drfdemo.authentication import CustomAuthentication\n# Create your views here.\nclass HomeAPIView(APIView):\n    # authentication_classes = [CustomAuthentication, ]\n    def get(self,request):\n        \"\"\"\u5355\u72ec\u8bbe\u7f6e\u8ba4\u8bc1\u65b9\u5f0f\"\"\"\n        print(request.user) # \u5728\u4e2d\u95f4\u4ef6AuthenticationMiddleware\u4e2d\u5b8c\u6210\u7528\u6237\u8eab\u4efd\u8bc6\u522b\u7684\uff0c\u5982\u679c\u6ca1\u6709\u767b\u5f55request.user\u503c\u4e3aAnonymousUser\n        if request.user.id is None:\n            return Response(\"\u672a\u767b\u5f55\u7528\u6237\uff1a\u6e38\u5ba2\")\n        else:\n            return Response(f\"\u5df2\u767b\u5f55\u7528\u6237\uff1a{request.user}\")\n</code></pre> <p>\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u6ce8\u91ca\u6389\u4e0a\u9762\u89c6\u56fe\u4e2d\u7684\u914d\u7f6e\uff0c\u6539\u6210\u5168\u5c40\u914d\u7f6e\u3002settings.py\uff0c\u4ee3\u7801\uff1a</p> <pre><code>\"\"\"drf\u914d\u7f6e\u4fe1\u606f\u5fc5\u987b\u5168\u90e8\u5199\u5728REST_FRAMEWORK\u914d\u7f6e\u9879\u4e2d\"\"\"\nREST_FRAMEWORK = {\n    # \u914d\u7f6e\u8ba4\u8bc1\u65b9\u5f0f\u7684\u9009\u9879\u3010drf\u7684\u8ba4\u8bc1\u662f\u5185\u90e8\u5faa\u73af\u904d\u5386\u6bcf\u4e00\u4e2a\u6ce8\u518c\u7684\u8ba4\u8bc1\u7c7b\uff0c\u4e00\u65e6\u8ba4\u8bc1\u901a\u8fc7\u8bc6\u522b\u5230\u7528\u6237\u8eab\u4efd\uff0c\u5219\u4e0d\u4f1a\u7ee7\u7eed\u5faa\u73af\u3011\n    'DEFAULT_AUTHENTICATION_CLASSES': (\n        'drfdemo.authentication.CustomAuthentication',          # \u81ea\u5b9a\u4e49\u8ba4\u8bc1\n        'rest_framework.authentication.SessionAuthentication',  # session\u8ba4\u8bc1\n        'rest_framework.authentication.BasicAuthentication',    # \u57fa\u672c\u8ba4\u8bc1\n    )\n}\n11.2. \u6743\u9650Permissions\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#2-permissions","title":"2. \u6743\u9650Permissions","text":"<p>\u6743\u9650\u63a7\u5236\u53ef\u4ee5\u9650\u5236\u7528\u6237\u5bf9\u4e8e\u89c6\u56fe\u7684\u8bbf\u95ee\u548c\u5bf9\u4e8e\u5177\u6709\u6a21\u578b\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002</p> <ul> <li>\u5728\u6267\u884c\u89c6\u56fe\u7684as_view()\u65b9\u6cd5\u7684dispatch()\u65b9\u6cd5\u524d\uff0c\u4f1a\u5148\u8fdb\u884c\u89c6\u56fe\u8bbf\u95ee\u6743\u9650\u7684\u5224\u65ad</li> <li>\u5728\u901a\u8fc7get_object()\u83b7\u53d6\u5177\u4f53\u6a21\u578b\u5bf9\u8c61\u65f6\uff0c\u4f1a\u8fdb\u884c\u6a21\u578b\u5bf9\u8c61\u8bbf\u95ee\u6743\u9650\u7684\u5224\u65ad</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#_5","title":"\u4f7f\u7528","text":"<p>\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5168\u5c40\u8bbe\u7f6e\u9ed8\u8ba4\u7684\u6743\u9650\u7ba1\u7406\u7c7b\uff0c\u5982</p> <pre><code>REST_FRAMEWORK = {\n    ....\n\n    'DEFAULT_PERMISSION_CLASSES': (\n        'rest_framework.permissions.IsAuthenticated',\n    )\n}\n</code></pre> <p>\u5982\u679c\u672a\u6307\u660e\uff0c\u5219\u91c7\u7528\u5982\u4e0b\u9ed8\u8ba4\u914d\u7f6e</p> <pre><code>'DEFAULT_PERMISSION_CLASSES': (\n   'rest_framework.permissions.AllowAny',\n)\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u5728\u5177\u4f53\u7684\u89c6\u56fe\u4e2d\u901a\u8fc7permission_classes\u5c5e\u6027\u6765\u8fdb\u884c\u5c40\u90e8\u8bbe\u7f6e\uff0c\u5982</p> <pre><code>from rest_framework.permissions import IsAuthenticated\nfrom rest_framework.views import APIView\n\nclass ExampleView(APIView):\n    permission_classes = (IsAuthenticated,)\n    ...\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#_6","title":"\u63d0\u4f9b\u7684\u6743\u9650","text":"<ul> <li>AllowAny \u5141\u8bb8\u6240\u6709\u7528\u6237\uff0c\u9ed8\u8ba4\u6743\u9650</li> <li>IsAuthenticated \u4ec5\u901a\u8fc7\u767b\u5f55\u8ba4\u8bc1\u7684\u7528\u6237</li> <li>IsAdminUser \u4ec5\u7ba1\u7406\u5458\u7528\u6237</li> <li>IsAuthenticatedOrReadOnly \u5df2\u7ecf\u767b\u9646\u8ba4\u8bc1\u7684\u7528\u6237\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u589e\u5220\u6539\u64cd\u4f5c\uff0c\u6ca1\u6709\u767b\u9646\u8ba4\u8bc1\u7684\u53ea\u80fd\u67e5\u770b\u6570\u636e\u3002</li> </ul>"},{"location":"mds/Python-Note/DRF-Note/#_7","title":"\u4e3e\u4f8b","text":"<pre><code>from rest_framework.authentication import SessionAuthentication\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.generics import RetrieveAPIView\n\nclass StudentAPIView(RetrieveAPIView):\n    queryset = Student.objects.all()\n    serializer_class = StudentSerializer\n    authentication_classes = [SessionAuthentication]\n    permission_classes = [IsAuthenticated]\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#_8","title":"\u81ea\u5b9a\u4e49\u6743\u9650","text":"<p>\u5982\u9700\u81ea\u5b9a\u4e49\u6743\u9650\uff0c\u9700\u7ee7\u627frest_framework.permissions.BasePermission\u7236\u7c7b\uff0c\u5e76\u5b9e\u73b0\u4ee5\u4e0b\u4e24\u4e2a\u4efb\u4f55\u4e00\u4e2a\u65b9\u6cd5\u6216\u5168\u90e8</p> <ul> <li><code>.has_permission(self, request, view)</code></li> </ul> <p>\u662f\u5426\u53ef\u4ee5\u8bbf\u95ee\u89c6\u56fe\uff0c view\u8868\u793a\u5f53\u524d\u89c6\u56fe\u5bf9\u8c61</p> <ul> <li><code>.has_object_permission(self, request, view, obj)</code></li> </ul> <p>\u662f\u5426\u53ef\u4ee5\u8bbf\u95ee\u6a21\u578b\u5bf9\u8c61\uff0c view\u8868\u793a\u5f53\u524d\u89c6\u56fe\uff0c obj\u4e3a\u6a21\u578b\u6570\u636e\u5bf9\u8c61</p> <p>\u4f8b\u5982\uff1a</p> <p>\u5728\u5f53\u524d\u5b50\u5e94\u7528\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2a\u6743\u9650\u6587\u4ef6drfdemo.permissions.py\u4e2d\u58f0\u660e\u81ea\u5b9a\u4e49\u6743\u9650\u7c7b:</p> <pre><code>from rest_framework.permissions import BasePermission\nclass IsXiaoMingPermission(BasePermission):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u6743\u9650\uff0c\u53ef\u7528\u4e8e\u5168\u5c40\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5c40\u90e8\n    \"\"\"\n    def has_permission(self, request, view):\n        \"\"\"\n        \u89c6\u56fe\u6743\u9650\n        \u8fd4\u56de\u7ed3\u679c\u672aTrue\u5219\u8868\u793a\u5141\u8bb8\u8bbf\u95ee\u89c6\u56fe\u7c7b\n        request: \u672c\u6b21\u5ba2\u6237\u7aef\u63d0\u4ea4\u7684\u8bf7\u6c42\u5bf9\u8c61\n        view: \u672c\u6b21\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u89c6\u56fe\u7c7b\n        \"\"\"\n        role = request.query_params.get(\"role\")\n        return role == \"xiaoming\"\n\n    def has_object_permission(self, request, view, obj):\n        \"\"\"\n        \u6a21\u578b\u6743\u9650\n        \u8fd4\u56de\u7ed3\u679c\u4e3aTrue\u5219\u8868\u793a\u5141\u8bb8\u64cd\u4f5c\u6a21\u578b\u5bf9\u8c61\n        \"\"\"\n        return True\n</code></pre> <p>\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code>from .permissions import IsXiaoMingPermission\nclass StudentViewSet(ModelViewSet):\n    queryset = Student.objects.all()\n    serializer_class = StudentSerializer\n    permission_classes = [IsXiaoMingPermission] # \u81ea\u5b9a\u4e49\u6743\u9650\n</code></pre> <p>\u8ba4\u8bc1\u548c\u6743\u9650\u7684\u4e3e\u4f8b\u4ee3\u7801\uff1a</p> <p>settings.py\uff0c\u5168\u5c40\u914d\u7f6e\uff0c\u4ee3\u7801\uff1a</p> <pre><code># \u5173\u4e8eREST_FRAMEWORK\u7684\u6240\u6709\u914d\u7f6e\u9879\u90fd\u662f\u586b\u5199\u5728django\u7684settings\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u3002\n# \u6240\u6709\u7684REST_FRAMEWORK\u90fd\u8981\u586b\u5199\u5728 REST_FRAMEWORK\u7684\u914d\u7f6e\u9879\uff0c\u800c\u4e14\u914d\u7f6e\u53ea\u80fd\u5927\u5199\uff01\uff01\nREST_FRAMEWORK = {\n    # # \u8ba4\u8bc1\u5168\u5c40\u914d\u7f6e\n    # 'DEFAULT_AUTHENTICATION_CLASSES':[\n    #     # \u9ed8\u8ba4\u7531drf\u63d0\u4f9b\u7684\u8ba4\u8bc1\u65b9\u5f0f\n    #     'rest_framework.authentication.SessionAuthentication',  # session\u8ba4\u8bc1\n    #     'rest_framework.authentication.BasicAuthentication',   # \u57fa\u672c\u8ba4\u8bc1\n    #     # \u5c06\u6765\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u5c5e\u4e8e\u81ea\u5df1\u9879\u76ee\u7684\u8ba4\u8bc1\u65b9\u5f0f\n    #     'drfdemo.authentications.CustomAuthentication',\n    # ],\n    # # \u6743\u9650\u5168\u5c40\u914d\u7f6e\n    # 'DEFAULT_PERMISSION_CLASSES': [\n    #     # \u8bbe\u7f6e\u6240\u6709\u89c6\u56fe\u53ea\u80fd\u88ab\u5df2\u7ecf\u767b\u5f55\u8ba4\u8bc1\u8fc7\u7684\u7528\u6237\u8bbf\u95ee\n    #     'rest_framework.permissions.IsAuthenticated',\n    # ]\n}\n</code></pre> <p>\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.viewsets import ModelViewSet\nfrom student.models import Student\nfrom student.serializers import StudentModelSerializer\nfrom drfdemo.authentications import CustomAuthentication\nfrom rest_framework.authentication import SessionAuthentication\nfrom rest_framework.permissions import IsAuthenticated,IsAdminUser,IsAuthenticatedOrReadOnly\nfrom drfdemo.permissions import IsXiaoMingPermission\nclass Student1ModelViewSet(ModelViewSet):\n    queryset = Student.objects\n    serializer_class = StudentModelSerializer\n    # \u5c40\u90e8\u8ba4\u8bc1\u914d\u7f6e\u65b9\u5f0f\n    authentication_classes = [SessionAuthentication,CustomAuthentication]\n    # \u5c40\u90e8\u6743\u9650\u914d\u7f6e\u65b9\u5f0f\n    # permission_classes = [IsAuthenticated] # \u53ea\u8981\u7ecf\u8fc7\u8ba4\u8bc1\u767b\u5f55\u5c31\u53ef\u4ee5\u8bbf\u95ee\n    # permission_classes = [IsAdminUser] # \u53ea\u8981\u662f\u7ad9\u70b9\u7ba1\u7406\u5458\u5c31\u53ef\u4ee5\u8bbf\u95ee\n    # permission_classes = [IsAuthenticatedOrReadOnly] # \u767b\u5f55\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u89c6\u56fe\u7684\u589e\u5220\u67e5\u6539\u9875\u9762\uff0c\u672a\u767b\u5f55\u7684\u6e38\u5ba2\u53ea\u80fd\u67e5\u770b\u6570\u636e\u3002\u4e0d\u80fd\u4fee\u6539\uff01\n    # permission_classes = [] # \u53d6\u6d88\u6743\u9650\u5224\u65ad\u8bc6\u522b\n    permission_classes = [IsXiaoMingPermission] # \u81ea\u5b9a\u4e49\u6743\u9650\n</code></pre> <p>\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u7c7b\uff0c<code>drfdemo.authentications</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.authentication import SessionAuthentication,BaseAuthentication\nfrom django.contrib.auth.models import User\nclass CustomAuthentication(BaseAuthentication):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u8ba4\u8bc1\n    \"\"\"\n    def authenticate(self, request):\n        \"\"\"\n        \u8ba4\u8bc1\u65b9\u6cd5\n        request: \u672c\u6b21\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684http\u8bf7\u6c42\u5bf9\u8c61\n        \"\"\"\n        role = request.query_params.get(\"role\")\n        root = None\n        if role == \"root\":\n            root = User.objects.get(pk=1)\n            return (root,None) # \u6309\u7167\u56fa\u5b9a\u7684\u8fd4\u56de\u683c\u5f0f\u586b\u5199 \uff08\u7528\u6237\u6a21\u578b\u5bf9\u8c61, None\uff09\n        else:\n            return None\n</code></pre> <p>\u81ea\u5b9a\u4e49\u6743\u9650\u7c7b\uff0c<code>defdemo.permissions</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.permissions import BasePermission\nclass IsXiaoMingPermission(BasePermission):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u6743\u9650\uff0c\u53ef\u7528\u4e8e\u5168\u5c40\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5c40\u90e8\n    \"\"\"\n    def has_permission(self, request, view):\n        \"\"\"\n        \u89c6\u56fe\u6743\u9650\n        \u8fd4\u56de\u7ed3\u679c\u672aTrue\u5219\u8868\u793a\u5141\u8bb8\u8bbf\u95ee\u89c6\u56fe\u7c7b\n        request: \u672c\u6b21\u5ba2\u6237\u7aef\u63d0\u4ea4\u7684\u8bf7\u6c42\u5bf9\u8c61\n        view: \u672c\u6b21\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u89c6\u56fe\u7c7b\n        \"\"\"\n        role = request.query_params.get(\"role\")\n        return role == \"xiaoming\" # \u8ba4\u8bc1\u7684\u7ed3\u679c\u5fc5\u987b\u8fd4\u56deTrue\u6216\u8005False\uff0c\u8868\u793a\u662f\u5426\u6709\u6743\u9650\n\n    def has_object_permission(self, request, view, obj):\n        \"\"\"\n        \u6a21\u578b\u6743\u9650\n        \u8fd4\u56de\u7ed3\u679c\u672aTrue\u5219\u8868\u793a\u5141\u8bb8\u64cd\u4f5c\u6a21\u578b\u5bf9\u8c61\n        \"\"\"\n        return True\n</code></pre> <p>urls\uff0c\u8def\u7531\u4ee3\u7801\uff1a</p> <pre><code>from django.urls import path,include\nfrom . import views\n# \u89c6\u56fe\u96c6\u7684\u8def\u7531\nfrom rest_framework.routers import SimpleRouter\nrouter = SimpleRouter()\nrouter.register(\"stu1\", views.Student1ModelViewSet,)\n\nurlpatterns = [\n    path(\"\", include(router.urls)),\n]\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#3-throttling","title":"3. \u9650\u6d41Throttling","text":"<p>\u53ef\u4ee5\u5bf9\u63a5\u53e3\u8bbf\u95ee\u7684\u9891\u6b21\u8fdb\u884c\u9650\u5236\uff0c\u4ee5\u51cf\u8f7b\u670d\u52a1\u5668\u538b\u529b\uff0c\u6216\u8005\u5b9e\u73b0\u7279\u5b9a\u7684\u4e1a\u52a1\u3002</p> <p>\u4e00\u822c\u7528\u4e8e\u4ed8\u8d39\u8d2d\u4e70\u6b21\u6570,\u6295\u7968\u7b49\u573a\u666f\u4f7f\u7528.</p>"},{"location":"mds/Python-Note/DRF-Note/#_9","title":"\u57fa\u672c\u4f7f\u7528","text":"<p>\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528<code>DEFAULT_THROTTLE_CLASSES</code> \u548c <code>DEFAULT_THROTTLE_RATES</code>\u8fdb\u884c\u5168\u5c40\u914d\u7f6e\uff0c</p> <pre><code>REST_FRAMEWORK = {\n    # \u9650\u6d41\u5168\u5c40\u914d\u7f6e\n    # 'DEFAULT_THROTTLE_CLASSES':[ # \u9650\u6d41\u914d\u7f6e\u7c7b\n    #     'rest_framework.throttling.AnonRateThrottle', # \u672a\u8ba4\u8bc1\u7528\u6237[\u672a\u767b\u5f55\u7528\u6237]\n    #     'rest_framework.throttling.UserRateThrottle', # \u5df2\u8ba4\u8bc1\u7528\u6237[\u5df2\u767b\u5f55\u7528\u6237]\n    # ],\n    'DEFAULT_THROTTLE_RATES':{ # \u9891\u7387\u914d\u7f6e\n        'anon': '2/day',  # \u9488\u5bf9\u6e38\u5ba2\u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u9650\u5236\uff0c\u5b9e\u9645\u4e0a\uff0cdrf\u53ea\u662f\u8bc6\u522b\u9996\u5b57\u6bcd\uff0c\u4f46\u662f\u4e3a\u4e86\u63d0\u9ad8\u4ee3\u7801\u7684\u7ef4\u62a4\u6027\uff0c\u5efa\u8bae\u5199\u5b8c\u6574\u5355\u8bcd\n        'user': '5/day', # \u9488\u5bf9\u4f1a\u5458\u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u9650\u5236\uff0c\n    }\n}\n</code></pre> <p><code>DEFAULT_THROTTLE_RATES</code> \u53ef\u4ee5\u4f7f\u7528 <code>second</code>, <code>minute</code>, <code>hour</code> \u6216<code>day</code>\u6765\u6307\u660e\u5468\u671f\u3002</p> <p>\u4e5f\u53ef\u4ee5\u5728\u5177\u4f53\u89c6\u56fe\u4e2d\u901a\u8fc7throttle_classess\u5c5e\u6027\u6765\u914d\u7f6e\uff0c\u5982</p> <pre><code>from rest_framework.throttling import UserRateThrottle\nclass Student2ModelViewSet(ModelViewSet):\n    queryset = Student.objects\n    serializer_class = StudentModelSerializer\n    # \u9650\u6d41\u5c40\u90e8\u914d\u7f6e[\u8fd9\u91cc\u9700\u8981\u914d\u5408\u5728\u5168\u5c40\u914d\u7f6e\u4e2d\u7684DEFAULT_THROTTLE_RATES\u6765\u8bbe\u7f6e\u9891\u7387]\n    throttle_classes = [UserRateThrottle]\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#_10","title":"\u53ef\u9009\u9650\u6d41\u7c7b","text":"<p>1\uff09 AnonRateThrottle</p> <p>\u9650\u5236\u6240\u6709\u533f\u540d\u672a\u8ba4\u8bc1\u7528\u6237\uff0c\u4f7f\u7528IP\u533a\u5206\u7528\u6237\u3002\u3010\u5f88\u591a\u516c\u53f8\u8fd9\u6837\u7684\uff0cIP\u7ed3\u5408\u8bbe\u5907\u4fe1\u606f\u6765\u5224\u65ad\uff0c\u5f53\u7136\u6bd4IP\u8981\u9760\u8c31\u4e00\u70b9\u70b9\u800c\u5df2\u3011</p> <p>\u4f7f\u7528<code>DEFAULT_THROTTLE_RATES['anon']</code> \u6765\u8bbe\u7f6e\u9891\u6b21</p> <p>2\uff09UserRateThrottle</p> <p>\u9650\u5236\u8ba4\u8bc1\u7528\u6237\uff0c\u4f7f\u7528User\u6a21\u578b\u7684 id\u4e3b\u952e \u6765\u533a\u5206\u3002</p> <p>\u4f7f\u7528<code>DEFAULT_THROTTLE_RATES['user']</code> \u6765\u8bbe\u7f6e\u9891\u6b21</p> <p>3\uff09ScopedRateThrottle</p> <p>\u9650\u5236\u7528\u6237\u5bf9\u4e8e\u6bcf\u4e2a\u89c6\u56fe\u7684\u8bbf\u95ee\u9891\u6b21\uff0c\u4f7f\u7528ip\u6216user id\u3002</p> <p>settings.py\uff0c\u4ee3\u7801\uff1a</p> <pre><code>REST_FRAMEWORK = {\n    # \u9650\u6d41\u5168\u5c40\u914d\u7f6e\n    'DEFAULT_THROTTLE_CLASSES':[ # \u9650\u6d41\u914d\u7f6e\u7c7b\n    #     'rest_framework.throttling.AnonRateThrottle', # \u672a\u8ba4\u8bc1\u7528\u6237[\u672a\u767b\u5f55\u7528\u6237]\n    #     'rest_framework.throttling.UserRateThrottle', # \u5df2\u8ba4\u8bc1\u7528\u6237[\u5df2\u767b\u5f55\u7528\u6237]\n        'rest_framework.throttling.ScopedRateThrottle', # \u81ea\u5b9a\u4e49\u9650\u6d41\n    ],\n    'DEFAULT_THROTTLE_RATES':{ # \u9891\u7387\u914d\u7f6e\n        'anon': '2/day',  # \u9488\u5bf9\u6e38\u5ba2\u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u9650\u5236\uff0c\u5b9e\u9645\u4e0a\uff0cdrf\u53ea\u662f\u8bc6\u522b\u9996\u5b57\u6bcd\uff0c\u4f46\u662f\u4e3a\u4e86\u63d0\u9ad8\u4ee3\u7801\u7684\u7ef4\u62a4\u6027\uff0c\u5efa\u8bae\u5199\u5b8c\u6574\u5355\u8bcd\n        'user': '5/day', # \u9488\u5bf9\u4f1a\u5458\u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u9650\u5236\uff0c\n        'vip': '10/day', # \u9488\u5bf9\u4f1a\u5458\u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u9650\u5236\uff0c\n    }\n}\n</code></pre> <p>\u89c6\u56fe\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.throttling import UserRateThrottle\nclass Student2ModelViewSet(ModelViewSet):\n    queryset = Student.objects\n    serializer_class = StudentModelSerializer\n    # \u9650\u6d41\u5c40\u90e8\u914d\u7f6e[\u8fd9\u91cc\u9700\u8981\u914d\u5408\u5728\u5168\u5c40\u914d\u7f6e\u4e2d\u7684DEFAULT_THROTTLE_RATES\u6765\u8bbe\u7f6e\u9891\u7387]\n    # throttle_classes = [UserRateThrottle] # \u4f7f\u7528drf\u9650\u6d41\u7c7b\u6765\u914d\u7f6e\u9891\u7387\n    throttle_scope = \"vip\" # \u81ea\u5b9a\u4e49\u9891\u7387\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#4-filtering","title":"4. \u8fc7\u6ee4Filtering","text":"<p>\u5bf9\u4e8e\u5217\u8868\u6570\u636e\u53ef\u80fd\u9700\u8981\u6839\u636e\u5b57\u6bb5\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0django-fitlter\u6269\u5c55\u6765\u589e\u5f3a\u652f\u6301\u3002</p> <pre><code>pip install django-filter\n</code></pre> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0\u8fc7\u6ee4\u540e\u7aef\u7684\u8bbe\u7f6e\uff1a</p> <pre><code>INSTALLED_APPS = [\n    ...\n    'django_filters',  # \u9700\u8981\u6ce8\u518c\u5e94\u7528\uff0c\n]\n\nREST_FRAMEWORK = {\n    ...\n    'DEFAULT_FILTER_BACKENDS': ('django_filters.rest_framework.DjangoFilterBackend',)\n}\n</code></pre> <p>\u5728\u89c6\u56fe\u7c7b\u4e2d\u6dfb\u52a0\u7c7b\u5c5e\u6027filter_fields\uff0c\u6307\u5b9a\u53ef\u4ee5\u8fc7\u6ee4\u7684\u5b57\u6bb5</p> <pre><code>class StudentListView(ListAPIView):\n    queryset = Student.objects.all()\n    serializer_class = StudentSerializer\n    filter_fields = ['age', 'sex']\n\n# 127.0.0.1:8000/four/students/?sex=1\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#5-ordering","title":"5. \u6392\u5e8fOrdering","text":"<p>\u5bf9\u4e8e\u5217\u8868\u6570\u636e\uff0cREST framework\u63d0\u4f9b\u4e86OrderingFilter\u8fc7\u6ee4\u5668\u6765\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u6307\u660e\u6570\u636e\u6309\u7167\u6307\u5b9a\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\u3002</p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <p>\u5728\u7c7b\u89c6\u56fe\u4e2d\u8bbe\u7f6efilter_backends\uff0c\u4f7f\u7528<code>rest_framework.filters.OrderingFilter</code>\u8fc7\u6ee4\u5668\uff0cREST framework\u4f1a\u5728\u8bf7\u6c42\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u53c2\u6570\u4e2d\u68c0\u67e5\u662f\u5426\u5305\u542b\u4e86ordering\u53c2\u6570\uff0c\u5982\u679c\u5305\u542b\u4e86ordering\u53c2\u6570\uff0c\u5219\u6309\u7167ordering\u53c2\u6570\u6307\u660e\u7684\u6392\u5e8f\u5b57\u6bb5\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u6392\u5e8f\u3002</p> <p>\u524d\u7aef\u53ef\u4ee5\u4f20\u9012\u7684ordering\u53c2\u6570\u7684\u53ef\u9009\u5b57\u6bb5\u503c\u9700\u8981\u5728ordering_fields\u4e2d\u6307\u660e\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>class StudentListView(ListAPIView):\n    queryset = Student.objects.all()\n    serializer_class = StudentModelSerializer\n    filter_backends = [OrderingFilter]\n    ordering_fields = ['id', 'age']\n\n# 127.0.0.1:8000/books/?ordering=-age\n# -id \u8868\u793a\u9488\u5bf9id\u5b57\u6bb5\u8fdb\u884c\u5012\u5e8f\u6392\u5e8f\n# id  \u8868\u793a\u9488\u5bf9id\u5b57\u6bb5\u8fdb\u884c\u5347\u5e8f\u6392\u5e8f\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5728\u8fc7\u6ee4\u4ee5\u540e\u518d\u6b21\u8fdb\u884c\u6392\u5e8f\uff0c\u5219\u9700\u8981\u4e24\u8005\u7ed3\u5408!</p> <p>\u5168\u5c40\u914d\u7f6e\u4e0b\u7684\u8fc7\u6ee4\u7ec4\u4ef6\u4e0d\u80fd\u548c\u6392\u5e8f\u7ec4\u4ef6\u4e00\u8d77\u4f7f\u7528\uff0c\u53ea\u652f\u6301\u5c40\u90e8\u914d\u7f6e\u7684\u8fc7\u6ee4\u7ec4\u4ef6\u548c\u6392\u5e8f\u7ec4\u4ef6\u4e00\u8d77\u4f7f\u7528\u3002</p> <pre><code>from rest_framework.generics import ListAPIView\nfrom students.models import Student\nfrom .serializers import StudentModelSerializer\nfrom django_filters.rest_framework import DjangoFilterBackend\nclass Student3ListView(ListAPIView):\n    queryset = Student.objects.all()\n    serializer_class = StudentModelSerializer\n    filter_fields = ['age', 'sex']\n    # \u56e0\u4e3a\u5c40\u90e8\u914d\u7f6e\u4f1a\u8986\u76d6\u5168\u5c40\u914d\u7f6e,\u6240\u4ee5\u9700\u8981\u91cd\u65b0\u628a\u8fc7\u6ee4\u7ec4\u4ef6\u6838\u5fc3\u7c7b\u518d\u6b21\u58f0\u660e,\n    # \u5426\u5219\u8fc7\u6ee4\u529f\u80fd\u4f1a\u5931\u6548\n    filter_backends = [OrderingFilter,DjangoFilterBackend]\n    ordering_fields = ['id', 'age']\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#6-pagination","title":"6. \u5206\u9875Pagination","text":"<p>\u56e0\u4e3adjango\u9ed8\u8ba4\u63d0\u4f9b\u7684\u5206\u9875\u5668\u4e3b\u8981\u4f7f\u7528\u4e8e\u524d\u540e\u7aef\u4e0d\u5206\u79bb\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u6240\u4ee5REST framework\u4e5f\u63d0\u4f9b\u4e86\u5206\u9875\u7684\u652f\u6301\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u5168\u5c40\u7684\u5206\u9875\u65b9\u5f0f\uff0c\u5982\uff1a</p> <pre><code>REST_FRAMEWORK = {\n    'DEFAULT_PAGINATION_CLASS':  'rest_framework.pagination.PageNumberPagination',\n    'PAGE_SIZE': 100  # \u6bcf\u9875\u6570\u76ee\n}\n</code></pre> <pre><code># \u5982\u679c\u5728\u914d\u7f6esettings.py\u6587\u4ef6\u4e2d\uff0c \u8bbe\u7f6e\u4e86\u5168\u5c40\u5206\u9875\uff0c\u90a3\u4e48\u5728drf\u4e2d\u51e1\u662f\u8c03\u7528\u4e86ListModelMixin\u7684list()\uff0c\u90fd\u4f1a\u81ea\u52a8\u5206\u9875\u3002\u5982\u679c\u9879\u76ee\u4e2d\u51fa\u73b0\u5927\u91cf\u9700\u8981\u5206\u9875\u7684\u6570\u636e\uff0c\u53ea\u6709\u5c11\u6570\u90e8\u5206\u7684\u5206\u9875\uff0c\u5219\u53ef\u4ee5\u5728\u5c11\u90e8\u5206\u7684\u89c6\u56fe\u7c7b\u4e2d\u5173\u95ed\u5206\u9875\u529f\u80fd\u3002\n# \u53e6\u5916\uff0c\u89c6\u56fe\u7c7b\u5728\u4f7f\u7528\u8fc7\u5206\u9875\u4ee5\u540e\uff0c\u52a1\u5fc5\u5728\u7f16\u5199queryset\u5c5e\u6027\u65f6\uff0c\u6a21\u578b.objects\u540e\u9762\u8c03\u7528\u7ed3\u679c\u3002\u4f8b\u5982\uff1a\n# Student.objects.all()\nclass Student3ModelViewSet(ListAPIView):\n    pagination_class = None\n</code></pre> <p>\u4e5f\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49Pagination\u7c7b\uff0c\u6765\u4e3a\u89c6\u56fe\u6dfb\u52a0\u4e0d\u540c\u5206\u9875\u884c\u4e3a\u3002\u5728\u89c6\u56fe\u4e2d\u901a\u8fc7<code>pagination_clas</code>\u5c5e\u6027\u6765\u6307\u660e\u3002</p> <p>\u53ef\u9009\u5206\u9875\u5668\uff1a</p> <p>1\uff09 PageNumberPagination</p> <p>\u524d\u7aef\u8bbf\u95ee\u7f51\u5740\u5f62\u5f0f\uff1a</p> <pre><code>GET  http://127.0.0.1:8000/students/?page=4\n</code></pre> <p>\u53ef\u4ee5\u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\uff1a</p> <ul> <li>page_size \u6bcf\u9875\u6570\u76ee</li> <li>page_query_param \u524d\u7aef\u53d1\u9001\u7684\u9875\u6570\u5173\u952e\u5b57\u540d\uff0c\u9ed8\u8ba4\u4e3a\"page\"</li> <li>page_size_query_param \u524d\u7aef\u53d1\u9001\u7684\u6bcf\u9875\u6570\u76ee\u5173\u952e\u5b57\u540d\uff0c\u9ed8\u8ba4\u4e3aNone</li> <li>max_page_size \u524d\u7aef\u6700\u591a\u80fd\u8bbe\u7f6e\u7684\u6bcf\u9875\u6570\u91cf</li> </ul> <p>\u5206\u9875\u5668\u7c7b\uff0c<code>paginations</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from  rest_framework.pagination import PageNumberPagination,LimitOffsetPagination\n# PageNumberPagination\uff0c\u4ee5\u9875\u7801\u4f5c\u4e3a\u5206\u9875\u6761\u4ef6\n# page=1&amp;size=10      \u7b2c1\u9875\n# page=2&amp;size=10      \u7b2c2\u9875\n# ...\n# LimitOffsetPagination\uff0c\u4ee5\u6570\u636e\u5e93\u67e5\u8be2\u7684limit\u548coffset\u6570\u503c\u4f5c\u4e3a\u5206\u9875\u6761\u4ef6\n# limit=10&amp;offset=0   \u7b2c1\u9875\n# limit=10&amp;offset=10  \u7b2c2\u9875\n# ...\n\n# PageNumberPagination\nclass StudentPageNumberPagination(PageNumberPagination):\n    page_query_param = \"page\" # \u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\u4ee3\u8868\u9875\u7801\u7684\u53d8\u91cf\u540d\n    page_size_query_param = \"size\" # \u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\u4ee3\u8868\u6bcf\u4e00\u9875\u6570\u636e\u7684\u53d8\u91cf\u540d\n    page_size = 2 # \u6bcf\u4e00\u9875\u7684\u6570\u636e\u91cf\n    max_page_size = 4 # \u5141\u8bb8\u5ba2\u6237\u7aef\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u8c03\u6574\u7684\u6700\u5927\u5355\u9875\u6570\u636e\u91cf\n</code></pre> <p>\u89c6\u56fe\uff0c<code>views</code> \uff0c\u4ee3\u7801\uff1a</p> <pre><code>from .paginations import StudentPageNumberPagination,StudentLimitOffsetPagination\nclass Student3ModelViewSet(ModelViewSet):\n    queryset = Student.objects.all()\n    serializer_class = StudentModelSerializer\n    # \u53d6\u6d88\u5f53\u524d\u89c6\u56fe\u7c7b\u7684\u5206\u9875\u6548\u679c\n    # pagination_class = None\n    # \u5c40\u90e8\u5206\u9875\n    pagination_class = StudentPageNumberPagination\n</code></pre> <p>2\uff09LimitOffsetPagination</p> <p>\u524d\u7aef\u8bbf\u95ee\u7f51\u5740\u5f62\u5f0f\uff1a</p> <pre><code>GET http://127.0.0.1/four/students/?limit=100&amp;offset=100\n</code></pre> <p>\u53ef\u4ee5\u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\uff1a</p> <ul> <li>default_limit \u9ed8\u8ba4\u9650\u5236\uff0c\u9ed8\u8ba4\u503c\u4e0e<code>PAGE_SIZE</code>\u8bbe\u7f6e\u4e00\u76f4</li> <li>limit_query_param limit\u53c2\u6570\u540d\uff0c\u9ed8\u8ba4\u2019limit\u2019</li> <li>offset_query_param offset\u53c2\u6570\u540d\uff0c\u9ed8\u8ba4\u2019offset\u2019</li> <li>max_limit \u6700\u5927limit\u9650\u5236\uff0c\u9ed8\u8ba4None</li> </ul> <p>\u5206\u9875\u7c7b\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from  rest_framework.pagination import PageNumberPagination,LimitOffsetPagination\n# PageNumberPagination\uff0c\u4ee5\u9875\u7801\u4f5c\u4e3a\u5206\u9875\u6761\u4ef6\n# page=1&amp;size=10      \u7b2c1\u9875\n# page=2&amp;size=10      \u7b2c2\u9875\n# LimitOffsetPagination\uff0c\u4ee5\u6570\u636e\u5e93\u67e5\u8be2\u7684limit\u548coffset\u6570\u503c\u4f5c\u4e3a\u5206\u9875\u6761\u4ef6\n# limit=10&amp;offset=0   \u7b2c1\u9875\n# limit=10&amp;offset=10  \u7b2c2\u9875\n\n# LimitOffsetPagination\nclass StudentLimitOffsetPagination(LimitOffsetPagination):\n    limit_query_param = \"limit\" # \u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\u4ee3\u8868\u6bcf\u4e00\u9875\u6570\u636e\u7684\u53d8\u91cf\u540d\n    offset_query_param = \"offset\" # \u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\u4ee3\u8868\u9875\u7801\u7684\u53d8\u91cf\u540d\n    default_limit = 2 # \u6bcf\u4e00\u9875\u7684\u6570\u636e\u91cf\n    max_limit = 4 # \u5141\u8bb8\u5ba2\u6237\u7aef\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u8c03\u6574\u7684\u6700\u5927\u5355\u9875\u6570\u636e\u91cf\n</code></pre> <p>\u89c6\u56fe\uff0c<code>views</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from .paginations import StudentPageNumberPagination,StudentLimitOffsetPagination\nclass Student3ModelViewSet(ModelViewSet):\n    queryset = Student.objects.all()\n    serializer_class = StudentModelSerializer\n    # \u53d6\u6d88\u5f53\u524d\u89c6\u56fe\u7c7b\u7684\u5206\u9875\u6548\u679c\n    # pagination_class = None\n    # \u5c40\u90e8\u5206\u9875\n    pagination_class = StudentLimitOffsetPagination\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#7-exceptions","title":"7. \u5f02\u5e38\u5904\u7406 Exceptions","text":"<p>REST framework\u63d0\u4f9b\u4e86\u5f02\u5e38\u5904\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5f02\u5e38\u5904\u7406\u51fd\u6570\u3002\u4f8b\u5982\u6211\u4eec\u60f3\u5728\u8981\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5f02\u5e38\u51fd\u6570\uff0c</p> <p>\u8fd9\u4e2a\u51fd\u6570\uff0c\u6211\u4eec\u4fdd\u5b58\u5230\u5f53\u524d\u5b50\u5e94\u7528opt\u4e2d[\u6ce8\u610f\uff0c\u5f00\u53d1\u65f6\uff0c\u6211\u4eec\u4f1a\u627e\u4e2a\u72ec\u7acb\u7684\u516c\u5171\u76ee\u5f55\u6765\u4fdd\u5b58\u8fd9\u79cd\u516c\u5171\u7684\u51fd\u6570/\u5de5\u5177/\u7c7b\u5e93]\u3002</p> <pre><code>from rest_framework.views import exception_handler\n\ndef custom_exception_handler(exc, context):\n    # \u5148\u8c03\u7528REST framework\u9ed8\u8ba4\u7684\u5f02\u5e38\u5904\u7406\u65b9\u6cd5\u83b7\u5f97\u6807\u51c6\u9519\u8bef\u54cd\u5e94\u5bf9\u8c61\n    response = exception_handler(exc, context)\n\n    # \u5728\u6b64\u5904\u8865\u5145\u81ea\u5b9a\u4e49\u7684\u5f02\u5e38\u5904\u7406\n    if response is None:\n        response.data['status_code'] = response.status_code\n\n    return response\n</code></pre> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u58f0\u660e\u81ea\u5b9a\u4e49\u7684\u5f02\u5e38\u5904\u7406\uff0c<code>settings</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code>REST_FRAMEWORK = {\n    'EXCEPTION_HANDLER': 'drfdemo.exceptions.custom_excetion_handle'\n}\n</code></pre> <p>\u5982\u679c\u672a\u58f0\u660e\uff0c\u4f1a\u91c7\u7528\u9ed8\u8ba4\u7684\u65b9\u5f0f\uff0c\u5982\u4e0b</p> <p>rest_frame/settings.py</p> <pre><code>REST_FRAMEWORK = {\n    'EXCEPTION_HANDLER': 'rest_framework.views.exception_handler'\n}\n</code></pre> <p>\u4f8b\u5982\uff1a</p> <p>\u8865\u5145\u4e0a\u5904\u7406\u5173\u4e8e\u6570\u636e\u5e93\u7684\u5f02\u5e38\uff0c\u8fd9\u91cc\u4f7f\u7528\u5176\u4ed6\u5f02\u5e38\u6765\u4e3e\u4f8b\uff1a</p> <p><code>\u4e3b\u5e94\u7528.exceptions</code>\uff0c\u4ee3\u7801\uff1a</p> <pre><code># \u81ea\u5b9a\u4e49\u5f02\u5e38\u51fd\u6570: \u5728drf\u672c\u8eab\u63d0\u4f9b\u7684\u5f02\u5e38\u51fd\u6570\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u589e\u52a0\u66f4\u591a\u7684\u5f02\u5e38\u5904\u7406\u5c31\u53ef\u4ee5\u4e86\u3002\nfrom rest_framework.views import exception_handler\nfrom django.db import DatabaseError\nfrom rest_framework import status\nfrom rest_framework.response import Response\ndef custom_excetion_handle(exc, context):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u5f02\u5e38\u51fd\u6570\uff0c\u5fc5\u987b\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ce8\u518c\u624d\u80fd\u88abdrf\u4f7f\u7528\n    exc: \u5f02\u5e38\u5bf9\u8c61\uff0c\u672c\u6b21\u53d1\u751f\u7684\u5f02\u5e38\u5bf9\u8c61\n    context: \u5b57\u5178\uff0c\u672c\u6b21\u53d1\u751f\u5f02\u5e38\u65f6\uff0cpython\u89e3\u6790\u5668\u63d0\u4f9b\u7684\u6267\u884c\u4e0a\u4e0b\u6587\n    \u6240\u8c13\u7684\u6267\u884c\u4e0a\u4e0b\u6587[context]\uff0c\u5c31\u662f\u7a0b\u5e8f\u6267\u884c\u5230\u5f53\u524d\u4e00\u884c\u4ee3\u7801\u65f6\uff0c\u80fd\u63d0\u4f9b\u7ed9\u5f00\u53d1\u8005\u8c03\u7528\u7684\u73af\u5883\u4fe1\u606f\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u4ee3\u7801\u6240\u5728\u7684\u8def\u5f84\uff0c\u65f6\u95f4\uff0c\u89c6\u56fe\uff0c\u5ba2\u6237\u7aefhttp\u8bf7\u6c42\u7b49\u7b49...]\n    \"\"\"\n    # \u5148\u8ba9drf\u5904\u7406\u5b83\u80fd\u8bc6\u522b\u7684\u5f02\u5e38\n    response = exception_handler(exc, context)\n    # \u5728\u7ecf\u8fc7\u4e86drf\u7684\u5f02\u5e38\u5904\u7406\u4ee5\u540e\uff0c\u8fd8\u662f\u8fd4\u56deNone\u5219\u8868\u793a\u67092\u79cd\u60c5\u51b5:\n    if response is None:\n        # \u5f02\u5e38\u53d1\u751f\u65f6\u7684\u89c6\u56fe\u5bf9\u8c61\n        view = context['view']\n        # \u5f02\u5e38\u53d1\u751f\u65f6\u7684http\u8bf7\u6c42\n        request = context[\"request\"]\n        if isinstance(exc, DatabaseError):\n            print('[%s]: %s' % (view, exc))\n            response = Response({'detail': '\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef'}, status=status.HTTP_507_INSUFFICIENT_STORAGE)\n\n        if isinstance(exc, TypeError):\n            print(\"0\u4e0d\u80fd\u4f5c\u4e3a\u9664\u6570~\")\n            print(request)\n            response = Response({'detail': '0\u4e0d\u80fd\u4f5c\u4e3a\u9664\u6570'}, status=status.HTTP_500_INTERNAL_SERVER_ERROR)\n\n    return response\n</code></pre> <p>\u89c6\u56fe\u4e2d\uff0c\u6545\u610f\u62a5\u9519\uff1a</p> <pre><code>from .paginations import StudentPageNumberPagination,StudentLimitOffsetPagination\nclass Student3ModelViewSet(ModelViewSet):\n    queryset = Student.objects  # \u53bb\u6389 .all()\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\n    serializer_class = StudentModelSerializer\n    pagination_class = StudentPageNumberPagination\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#rest-framework","title":"REST framework\u5b9a\u4e49\u7684\u5f02\u5e38","text":"<ul> <li>APIException \u6240\u6709\u5f02\u5e38\u7684\u7236\u7c7b</li> <li>ParseError \u89e3\u6790\u9519\u8bef</li> <li>AuthenticationFailed \u8ba4\u8bc1\u5931\u8d25</li> <li>NotAuthenticated \u5c1a\u672a\u8ba4\u8bc1</li> <li>PermissionDenied \u6743\u9650\u51b3\u7edd</li> <li>NotFound \u672a\u627e\u5230</li> <li>MethodNotAllowed \u8bf7\u6c42\u65b9\u5f0f\u4e0d\u652f\u6301</li> <li>NotAcceptable \u8981\u83b7\u53d6\u7684\u6570\u636e\u683c\u5f0f\u4e0d\u652f\u6301</li> <li>Throttled \u8d85\u8fc7\u9650\u6d41\u6b21\u6570</li> <li>ValidationError \u6821\u9a8c\u5931\u8d25</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f88\u591a\u7684\u6ca1\u6709\u5728\u4e0a\u9762\u5217\u51fa\u6765\u7684\u5f02\u5e38\uff0c\u5c31\u9700\u8981\u6211\u4eec\u5728\u81ea\u5b9a\u4e49\u5f02\u5e38\u4e2d\u81ea\u5df1\u5904\u7406\u4e86\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#8","title":"8. \u81ea\u52a8\u751f\u6210\u63a5\u53e3\u6587\u6863","text":"<p>REST framework\u53ef\u4ee5\u81ea\u52a8\u5e2e\u52a9\u6211\u4eec\u751f\u6210\u63a5\u53e3\u6587\u6863\u3002</p> <p>\u63a5\u53e3\u6587\u6863\u4ee5\u7f51\u9875\u7684\u65b9\u5f0f\u5448\u73b0\u3002</p> <p>\u81ea\u52a8\u63a5\u53e3\u6587\u6863\u80fd\u751f\u6210\u7684\u662f\u7ee7\u627f\u81ea<code>APIView</code>\u53ca\u5176\u5b50\u7c7b\u7684\u89c6\u56fe\u3002</p>"},{"location":"mds/Python-Note/DRF-Note/#81","title":"8.1 \u5b89\u88c5\u4f9d\u8d56","text":"<p>REST framewrok\u751f\u6210\u63a5\u53e3\u6587\u6863\u9700\u8981<code>coreapi</code>\u5e93\u7684\u652f\u6301\u3002</p> <pre><code>pip install coreapi\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#82","title":"8.2 \u8bbe\u7f6e\u63a5\u53e3\u6587\u6863\u8bbf\u95ee\u8def\u5f84","text":"<p>\u5728\u603b\u8def\u7531\u4e2d\u6dfb\u52a0\u63a5\u53e3\u6587\u6863\u8def\u5f84\u3002</p> <p>\u6587\u6863\u8def\u7531\u5bf9\u5e94\u7684\u89c6\u56fe\u914d\u7f6e\u4e3a<code>rest_framework.documentation.include_docs_urls</code>\uff0c</p> <p>\u53c2\u6570<code>title</code>\u4e3a\u63a5\u53e3\u6587\u6863\u7f51\u7ad9\u7684\u6807\u9898\u3002\u603b\u8def\u7531\uff0c\u4ee3\u7801\uff1a</p> <pre><code>from rest_framework.documentation import include_docs_urls\n\nurlpatterns = [\n    ...\n    path('docs/', include_docs_urls(title='\u7ad9\u70b9\u9875\u9762\u6807\u9898'))\n]\n</code></pre> <p>\u5728settings.py\u4e2d\u914d\u7f6e\u63a5\u53e3\u6587\u6863\u3002</p> <pre><code>REST_FRAMEWORK = {\n    # \u3002\u3002\u3002 \u5176\u4ed6\u9009\u9879\n    # \u63a5\u53e3\u6587\u6863\n    'DEFAULT_SCHEMA_CLASS': 'rest_framework.schemas.AutoSchema',\n}\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#83","title":"8.3 \u6587\u6863\u63cf\u8ff0\u8bf4\u660e\u7684\u5b9a\u4e49\u4f4d\u7f6e","text":"<p>1\uff09 \u5355\u4e00\u65b9\u6cd5\u7684\u89c6\u56fe\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528\u7c7b\u89c6\u56fe\u7684\u6587\u6863\u5b57\u7b26\u4e32\uff0c\u5982</p> <pre><code>class BookListView(generics.ListAPIView):\n    \"\"\"\n    \u8fd4\u56de\u6240\u6709\u56fe\u4e66\u4fe1\u606f.\n    \"\"\"\n</code></pre> <p>2\uff09\u5305\u542b\u591a\u4e2a\u65b9\u6cd5\u7684\u89c6\u56fe\uff0c\u5728\u7c7b\u89c6\u56fe\u7684\u6587\u6863\u5b57\u7b26\u4e32\u4e2d\uff0c\u5206\u5f00\u65b9\u6cd5\u5b9a\u4e49\uff0c\u5982</p> <pre><code>class BookListCreateView(generics.ListCreateAPIView):\n    \"\"\"\n    get:\n    \u8fd4\u56de\u6240\u6709\u56fe\u4e66\u4fe1\u606f.\n\n    post:\n    \u65b0\u5efa\u56fe\u4e66.\n    \"\"\"\n</code></pre> <p>3\uff09\u5bf9\u4e8e\u89c6\u56fe\u96c6ViewSet\uff0c\u4ecd\u5728\u7c7b\u89c6\u56fe\u7684\u6587\u6863\u5b57\u7b26\u4e32\u4e2d\u5c01\u5f00\u5b9a\u4e49\uff0c\u4f46\u662f\u5e94\u4f7f\u7528action\u540d\u79f0\u533a\u5206\uff0c\u5982</p> <pre><code>class BookInfoViewSet(mixins.ListModelMixin, mixins.RetrieveModelMixin, GenericViewSet):\n    \"\"\"\n    list:\n    \u8fd4\u56de\u56fe\u4e66\u5217\u8868\u6570\u636e\n\n    retrieve:\n    \u8fd4\u56de\u56fe\u4e66\u8be6\u60c5\u6570\u636e\n\n    latest:\n    \u8fd4\u56de\u6700\u65b0\u7684\u56fe\u4e66\u6570\u636e\n\n    read:\n    \u4fee\u6539\u56fe\u4e66\u7684\u9605\u8bfb\u91cf\n    \"\"\"\n</code></pre>"},{"location":"mds/Python-Note/DRF-Note/#84","title":"8.4 \u8bbf\u95ee\u63a5\u53e3\u6587\u6863\u7f51\u9875","text":"<p>\u6d4f\u89c8\u5668\u8bbf\u95ee 127.0.0.1:8000/docs/\uff0c\u5373\u53ef\u770b\u5230\u81ea\u52a8\u751f\u6210\u7684\u63a5\u53e3\u6587\u6863\u3002</p> <p> </p> <p>\u4e24\u70b9\u8bf4\u660e\uff1a</p> <p>1\uff09 \u89c6\u56fe\u96c6ViewSet\u4e2d\u7684retrieve\u540d\u79f0\uff0c\u5728\u63a5\u53e3\u6587\u6863\u7f51\u7ad9\u4e2d\u53eb\u505aread</p> <p>2\uff09\u53c2\u6570\u7684Description\u9700\u8981\u5728\u6a21\u578b\u7c7b\u6216\u5e8f\u5217\u5316\u5668\u7c7b\u7684\u5b57\u6bb5\u4e2d\u4ee5help_text\u9009\u9879\u5b9a\u4e49\uff0c\u5982\uff1a</p> <pre><code>class Student(models.Model):\n    ...\n    age = models.IntegerField(default=0, verbose_name='\u5e74\u9f84', help_text='\u5e74\u9f84')\n    ...\n</code></pre> <p>\u6216</p> <pre><code>class StudentSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Student\n        fields = \"__all__\"\n        extra_kwargs = {\n            'age': {\n                'required': True,\n                'help_text': '\u5e74\u9f84'\n            }\n        }\n</code></pre> <ul> <li>\u8be5\u6587\u6863\u539f\u6587\u4f5c\u8005\uff1aYuan</li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/","title":"FastAPI-uv-study","text":"<p>\u4e2a\u4eba\u5165\u95e8\u5b66\u4e60\u9879\u76ee -- \u5b66\u4e60\u7b14\u8bb0 -- 2025</p>"},{"location":"mds/Python-Note/FastAPI-Note/#1-fastapi","title":"1 FastAPI\u662f\u4ec0\u4e48\uff1f","text":"<ul> <li>FastAPI\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 Web \u6846\u67b6\uff0c\u7528\u4e8e\u6784\u5efa\u57fa\u4e8e Python \u7684 API\uff1b</li> </ul> <p>\u57fa\u4e8e\u6807\u51c6\u7684 Python \u7c7b\u578b\u63d0\u793a(type hints) -- Pydantic\uff1b</p> <p>\u901a\u8fc7\u5229\u7528 Python \u7684\u5f02\u6b65\u7279\u6027(\u5982 async\u548c await)\uff0c\u63d0\u4f9b\u4e86\u6781\u9ad8\u7684\u6027\u80fd -- Starlette\uff1b</p> <p>\u57fa\u4e8e Uvicorn \u8fd0\u884c\u7684 FastAP|\u7a0b\u5e8f\u662f \u622a\u6b622025\u5e74 \u6700\u5feb\u7684 Python web \u6846\u67b6  -- \u8fd0\u884c\u5de5\u5177\u3002</p>"},{"location":"mds/Python-Note/FastAPI-Note/#2-fastapi","title":"2 FastAPI\u7279\u70b9","text":"<ul> <li>\u9ad8\u6027\u80fd\uff1a\u6027\u80fd\u63a5\u8fd1 Node.js \u548c Golang\uff0c\u57fa\u4e8e\u5f02\u6b65 Web \u670d\u52a1\u6846\u67b6 Starlette\u3002</li> <li>\u81ea\u52a8\u751f\u6210\u6587\u6863\uff1a\u5f00\u53d1\u63a5\u53e3\u4f1a\u81ea\u52a8\u751f\u6210\u4ea4\u4e92\u5f0f\u6587\u6863\uff0c\u4fbf\u4e8e\u5f00\u53d1\u8005\u7406\u89e3\u4e0e\u8c03\u8bd5API\u3002</li> <li>\u652f\u6301\u7c7b\u578b\u63d0\u793a\uff1a\u5b8c\u5168\u91c7\u7528Python3.6+\u652f\u6301\u7684\u7c7b\u578b\u63d0\u793a\uff0c\u4ee3\u7801\u66f4\u7b80\u6d01\u6e05\u6670\uff0c\u652f\u6301\u81ea\u52a8\u6570\u636e\u9a8c\u8bc1\u4e0e\u9519\u8bef\u5904\u7406\u3002</li> <li>\u5f02\u6b65\u652f\u6301\uff1aFastAPI\u539f\u751f\u652f\u6301 ASGI \u534f\u8bae\uff0c\u5f88\u65b9\u4fbf\u7684\u4f7f\u7528 async/await \u8bed\u6cd5\u5f00\u53d1\u5f02\u6b65\u63a5\u53e3\uff0c\u975e\u5e38\u9002\u5408\u5904\u7406 I/O\u5bc6\u96c6\u578b \u4efb\u52a1\uff0c\u5982\u6587\u4ef6\u64cd\u4f5c\u3001\u6570\u636e\u5e93\u64cd\u4f5c\u3001\u5916\u90e8\u63a5\u53e3\u8c03\u7528\u7b49\u3002</li> <li>\u5f00\u53d1\u6548\u7387\u9ad8\uff1a\u501f\u52a9 FastAPI\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u66f4\u77ed\u7684\u65f6\u95f4\u5185\u5f00\u53d1\u51fa\u6027\u80fd\u4f18\u79c0\u3001\u7c7b\u578b\u5b89\u5168\u7684 API\u3002\u5b83\u63d0\u4f9b\u4e86\u8bb8\u591a\u5185\u7f6e\u5de5\u5177\uff0c\u5982\u6570\u636e\u9a8c\u8bc1\u3001\u5e8f\u5217\u5316\u3001\u4f9d\u8d56\u6ce8\u5165\u7b49\uff0c\u51cf\u5c11\u624b\u52a8\u7f16\u5199\u6837\u677f\u4ee3\u7801\u7684\u9700\u6c42\u3002</li> <li>\u6570\u636e\u9a8c\u8bc1\u548c\u5e8f\u5217\u5316\uff1aFastAPI\u4f7f\u7528 Pydantic \u8fdb\u884c\u6570\u636e\u9a8c\u8bc1\u548c\u5e8f\u5217\u5316\uff0c\u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u80fd\u591f\u8f7b\u677e\u5b9a\u4e49\u548c\u9a8c\u8bc1\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u786e\u4fdd API\u7684\u8f93\u5165\u8f93\u51fa\u90fd\u7b26\u5408\u9884\u671f\u3002</li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/#3-fastapidjangoflask","title":"3 FastAPI\u4e0eDjango\u3001Flask\u533a\u522b","text":"<ul> <li>FastAPI \u975e\u5e38\u9002\u5408\u642d\u5efa\u9ad8\u6027\u80fd\u7684API\u5fae\u670d\u52a1\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u5904\u7406\u5927\u91cf\u5e76\u53d1\u8bf7\u6c42\u6216\u6570\u636e\u9a8c\u8bc1\u7684\u573a\u666f\u3002</li> <li>Flask \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u6846\u67b6\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u5e94\u7528\u6216\u539f\u578b\u5f00\u53d1\uff0c\u5904\u7406\u590d\u6742\u7684\u9700\u6c42\u6216\u8bb8\u9700\u8981\u989d\u5916\u7684\u914d\u7f6e\u3002</li> <li>Django \u662f\u4e00\u4e2a\u5168\u529f\u80fd\u7684\u6846\u67b6\uff0c\u9002\u5408\u6784\u5efa\u5305\u542b\u6570\u636e\u5e93\u3001\u8ba4\u8bc1\u3001\u7ba1\u7406\u540e\u53f0\u7684\u590d\u6742\u5e94\u7528\uff1b\u4f46\u5bf9\u4e8e\u7eafAPI\u9879\u76ee\u6765\u8bf4\uff0c\u9009\u62e9\u8be5\u6846\u67b6\u4f1a\u6bd4\u8f83\u7b28\u91cd\u3002</li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/#4-fastapi","title":"4 FastAPI\u6280\u672f\u7ec4\u4ef6\u67b6\u6784","text":""},{"location":"mds/Python-Note/FastAPI-Note/#5","title":"5 \u76f8\u5173\u6587\u6863\u5b66\u4e60\u94fe\u63a5","text":"<ul> <li>FastAPl\uff1ahttps://fastapi.tiangolo.com/zh/FastAPI</li> </ul> <p>\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684Web \u6846\u67b6\uff0c\u57fa\u4e8e\u6807\u51c6 Python \u7c7b\u578b\u63d0\u793a\u6784\u5efa API\u3002</p> <ul> <li>Starlette\uff1ahttps://www.starlette.io/Starlette</li> </ul> <p>FastAP|\u662f\u6784\u5efa\u5728 Starlette \u4e4b\u4e0a\u7684\u4e00\u4e2a Web \u6846\u67b6\uff0c\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684 ASGI\u6846\u67b6/\u5de5\u5177\u5305\uff0c\u9002\u5408\u7528 Python \u6784\u5efa\u5f02\u6b65 Web \u670d\u52a1\uff1b</p> <p>\u5728FastAPI\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u751a\u81f3\u4f1a\u5f15\u5165Starlette\u7684\u4e00\u4e9b\u65b9\u6cd5\u6a21\u5757\u3002</p> <ul> <li>Pydantic\uff1ahttps://docs.pydantic.dev/latest/Pydantic</li> </ul> <p>\u662f Python \u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u6570\u636e\u9a8c\u8bc1\u3001\u6570\u636e\u8f6c\u6362\u5e93\u3002</p> <ul> <li>Tortoise\uff1ahttps://tortoise.github.io/index.html</li> </ul> <p>\u6587\u6863\u5730\u5740\uff1ahttps://tortoise.org.cn/index.html</p> <p>Tortoise ORM \u662f\u4e00\u4e2a\u6613\u4e8e\u4f7f\u7528\u7684\u5f02\u6b65 ORM(\u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\u5668)</p> <p>SQLAlchemy\u4e5f\u662f\u4e00\u4e2a\u529f\u80fd\u975e\u5e38\u5f3a\u5927\u7684 Python ORM \u6846\u67b6\u4f46\u4e0d\u652f\u6301\u5f02\u6b65\u3002</p> <ul> <li>Jinja\uff1ahttps://jinja.palletsprojects.com/en/3.1.x/</li> </ul> <p>Jinja \u662f\u4e00\u4e2a\u5feb\u901f\u3001\u5bcc\u6709\u8868\u73b0\u529b\u3001\u53ef\u6269\u5c55\u7684\u6a21\u677f\u5f15\u64ce\uff0c\u7528\u4e8e\u5f00\u53d1\u524d\u7aef\u9875\u9762</p> <ul> <li>Uvicorn\uff1ahttps://www.uvicorn.org/Uvicorn</li> </ul> <p>\u4e00\u4e2a\u57fa\u4e8e ASGl(Asynchronous Server Gateway Interface)\u7684\u9ad8\u6027\u80fd\u3001\u8f7b\u91cf\u7ea7\u7684 Python Web \u670d\u52a1\u5668\u3002</p> <ul> <li>Docker\uff1a https://www.docker.com/</li> </ul> <p>Docker \u662f\u7528\u4e8e\u90e8\u7f72\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u4f7f\u7528\u5bb9\u5668\u6280\u672f\u6765\u6253\u5305\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u4f9d\u8d56\u9879\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5728\u4efb\u4f55\u73af\u5883\u4e0b\u4e00\u81f4\u5730\u8fd0\u884c\uff0c\u65e0\u8bba\u662f\u5728\u5f00\u53d1\u3001\u6d4b\u8bd5\u8fd8\u662f\u751f\u4ea7\u73af\u5883\u3002</p> <ul> <li>uv\uff1a\u63a8\u8350\u4f7f\u7528 uv  \u521b\u5efa\u7ba1\u7406\u865a\u62df\u73af\u5883\u7684 FastAPI \u5b66\u4e60\u9879\u76ee</li> </ul> <p>uv \u662f\u4e00\u4e2a\u73b0\u4ee3\u7684python\u73af\u5883\u7ba1\u7406\u5668\uff0c\u975e\u5e38\u597d\u7528\uff0c\u4f7f\u7528Rust\u8bed\u8a00\u5f00\u53d1\u7684\uff0c\u901f\u5ea6\u5f88\u5feb</p> <p>\u5b98\u65b9\u5730\u5740\uff1ahttps://github.com/astral-sh/uv</p> <p>\u4e2d\u6587\u6587\u6863\uff1ahttps://hellowac.github.io/uv-zh-cn/</p> <ul> <li>\u76f8\u5173\u5f00\u6e90\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\uff1a</li> </ul> <p>https://github.com/Richard0403/FluxPanel</p>"},{"location":"mds/Python-Note/FastAPI-Note/#6-fastapi","title":"6 FastAPI\u9879\u76ee\u5f00\u53d1\u7279\u6027","text":"<ul> <li> <p>\u7c7b\u578b\u58f0\u660e\u7279\u6027\uff1a</p> </li> <li> <p>\u4f7f\u7528\u4e86\u5927\u91cf\u7684Python\u7c7b\u578b\u58f0\u660e\uff0c\u5373\u4ecefromtyping\u5f15\u5165\u5f88\u591a\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>\u51fd\u6570\u7684\u5165\u53c2\u90fd\u4f1a\u58f0\u660e\u7c7b\u578b\uff0c\u65b9\u4fbf\u6570\u636e\u7c7b\u578b\u68c0\u67e5\u3001\u4e5f\u65b9\u4fbf\u4ee3\u7801\u63d0\u793a</p> </li> <li> <p>\u6570\u636e\u6a21\u578b\u7c7b\u7279\u6027\uff1a</p> </li> <li> <p>\u5927\u91cf\u4f7f\u7528\u6570\u636e\u6a21\u578b\u7c7b\uff0c\u4f8b\u5982API\u7684\u5165\u53c2\u3001\u5904\u7406\u3001\u8fd4\u56de\u3001\u5230\u6570\u636e\u5e93\u7684\u5b58\u50a8</p> </li> <li> <p>\u4f8b\u5982\u5165\u53c2\u548c\u8fd4\u56de\uff0c\u90fd\u9884\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u8868\u8fbe\u6570\u636e\u7684\u6a21\u5f0f(\u6709\u54ea\u4e9b\u5b57\u6bb5\u3001\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b)</p> </li> <li> <p>\u4fbf\u6377\u652f\u6301\u5f02\u6b65\u7f16\u7a0b\u7279\u6027\uff1a</p> </li> <li> <p>\u5bf9\u4e8e\u6570\u636e\u5e93\u3001API\u3001\u6587\u4ef6\u7684\u8c03\u7528\uff0c\u5927\u91cf\u7ed3\u5408async\u548cawait\u7684\u5f02\u6b65\u7f16\u7a0b</p> </li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/#uv","title":"\u4e00\u3001uv\u521b\u5efa\u9879\u76ee","text":"<pre><code># \u521b\u5efa\u9879\u76ee\nuv init FastAPI-uv-study\ncd FastAPI-uv-study\n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\nuv venv .venv\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\n.venv\\Scripts\\activate\n\n# \u9000\u51fa\u865a\u62df\u73af\u5883\n.venv\\Scripts\\deactivate\n\n# ##### uv \u53ef\u4ee5\u6307\u5b9a\u5df2\u5b89\u88c5\u5728\u7cfb\u7edfpython\u7248\u672c ##### \n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\u5e76\u4f7f\u7528\u6307\u5b9a Python\nuv python list                     # \u770b\u6709\u54ea\u4e9b Python\nuv venv .venv --python=3.10        # \u7528\u6307\u5b9a\u7248\u672c\u521b\u5efa\u865a\u62df\u73af\u5883\n.venv\\Scripts\\activate             # \u6fc0\u6d3b\u865a\u62df\u73af\u5883\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#1","title":"1 \u5b89\u88c5\u4f9d\u8d56","text":"<p>\u65b0\u9879\u76ee\u5efa\u8bae\u4f7f\u7528\uff1auv add xxx</p> <p>\u4ee5\u524d pip \u7ba1\u7406\u7684\u65e7\u9879\u76ee\uff1auv add install xxx</p> <p>\u8fd9\u91cc\u6309\u65b0\u9879\u76ee\u65b9\u5f0f\uff1a</p> <pre><code>uv add fastapi \"uvicorn[standard]\"\nuv add pytest --dev\n\n# --dev \u53c2\u6570\uff1a\u8868\u793a\u53ea\u7528\u4e8e\u5f00\u53d1\u73af\u5883\u7684\u4f9d\u8d56\uff0c\u907f\u514d\u5728\u751f\u4ea7\u73af\u5883\u5b89\u88c5\u591a\u4f59\u4f9d\u8d56\n\n# \u751f\u4ea7\u73af\u5883\u540c\u6b65\u5b89\u88c5\u4f9d\u8d56\u547d\u4ee4\nuv sync\nuv sync --dev # \u5982\u679c\u6709\u5fc5\u8981\u5728\u751f\u4ea7\u4e5f\u5b89\u88c5\u5f00\u53d1\u73af\u5883\u76f8\u5173\u4f9d\u8d56\uff0c\u5219\u4f7f\u7528\u8be5\u547d\u4ee4\n\n# \u5220\u9664\u4f9d\u8d56\nuv remove &lt;\u5305\u540d&gt;\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#2-pyprojecttoml","title":"2 \u67e5\u770b\u9879\u76ee\u58f0\u660e\u7684\u4f9d\u8d56\uff08pyproject.toml \uff09","text":"\u547d\u4ee4 \u529f\u80fd <code>uv tree</code> \u4ee5\u4f9d\u8d56\u6811\u5f62\u5f0f\u663e\u793a\u9879\u76ee\u5b89\u88c5\u7684\u6240\u6709\u5305\uff08\u751f\u4ea7 + \u5f00\u53d1\uff09 <code>uv tree --dev</code> \u4ec5\u67e5\u770b\u5f00\u53d1\u4f9d\u8d56 <code>uv export</code> \u5bfc\u51fa\u6240\u6709\u4f9d\u8d56\u5230 <code>requirements.txt</code> \u5f62\u5f0f <code>uv export --dev</code> \u5305\u542b\u5f00\u53d1\u4f9d\u8d56\u4e00\u8d77\u5bfc\u51fa"},{"location":"mds/Python-Note/FastAPI-Note/#fastapi-","title":"\u4e8c\u3001FastAPI-\u9879\u76ee\u7ed3\u6784","text":"<pre><code>FastAPI-uv-study/\n\u251c\u2500\u2500 main.py                    # \u5e94\u7528\u5165\u53e3\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 v1/\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u2514\u2500\u2500 items.py       # \u6a21\u5757\u5316\u8def\u7531\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u2514\u2500\u2500 config.py          # \u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 db/\n\u2502   \u2502   \u2514\u2500\u2500 database.py        # \u6570\u636e\u5e93\u8fde\u63a5\n\u2502   \u251c\u2500\u2500 models/                # \u6570\u636e\u6a21\u578b\n\u2502   \u2514\u2500\u2500 schemas/               # Pydantic \u6a21\u578b\n\u2514\u2500\u2500 requirements.txt\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#_1","title":"\u4e09\u3001\u6a21\u5757\u5316\u5f00\u53d1\u793a\u4f8b","text":""},{"location":"mds/Python-Note/FastAPI-Note/#1-mainpy","title":"1 main.py","text":"<pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u670d\u52a1\u542f\u52a8\u547d\u4ee4\uff1auvicorn main:app --reload\n\"\"\"\nimport uvicorn  # noqa\nfrom fastapi import FastAPI\n\nfrom app.api.v1 import index, project, version\nfrom app.core.config import settings\nfrom app.core.http_client import lifespan\n\n\ndef create_app() -&gt; FastAPI:\n    \"\"\"\n    \u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b\n    \"\"\"\n    app = FastAPI(\n        title=settings.PROJECT_NAME,\n        version=\"1.0.0\",\n        description=\"FastAPI \u6a21\u5757\u5316\u9879\u76ee\u793a\u4f8b\",\n        lifespan=lifespan\n    )\n\n    # \u6ce8\u518c\u8def\u7531 -\u8def\u7531\u7ec4\u914d\u7f6e\n    routers = {\n        \"/home\": [\n            (index.router, {\"tags\": [\"\u9996\u9875\"]})\n        ],\n        \"/api/v1\": [\n            (project.router, {\"tags\": [\"\u9879\u76ee\u7ba1\u7406\"]}),\n            (version.router, {\"tags\": [\"\u7248\u672c\u7ba1\u7406\"]}),\n        ],\n        # \"/api/v2\":[]\n    }\n    for prefix, config in routers.items():\n        for router, tags in config:\n            app.include_router(router, prefix=prefix, tags=tags)\n\n    return app\n\n\napp = create_app()\n\nif __name__ == '__main__':\n    print(\"\u6587\u6863\u5730\u5740\uff1ahttp://127.0.0.1:8000/docs\")\n    print(\"\u9996\u9875\u5730\u5740\uff1ahttp://127.0.0.1:8000/home/index/\")\n    uvicorn.run(\"main:app\", host=\"0.0.0.0\", port=8000, reload=True)\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#2-appcoreconfigpy","title":"2 app/core/config.py","text":"<pre><code># _*_ coding: utf-8 _*_\nfrom pydantic import BaseConfig\n\n\nclass Settings(BaseConfig):\n    PROJECT_NAME: str = \"FastAPI-uv-study\"\n    DEBUG: bool = True\n    DATABASE_URL: str = \"sqlite:///./test.db\"\n\n    # class Config:\n    #     env_file = \".env\"  # \u652f\u6301\u4ece .env \u6587\u4ef6\u52a0\u8f7d\u73af\u5883\u53d8\u91cf\n\n\nsettings = Settings()\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#3-appcorehttp_clientpy","title":"3 app/core/http_client.py","text":"<pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u5f02\u6b65\u8bf7\u6c42\u5ba2\u6237\u7aef\n\nasynccontextmanager\uff1a\n    \u540d\u79f0\uff1a\u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\n    \u88ab\u88c5\u9970\u51fd\u6570\u4e2d yield\uff1a\u5206\u5272\u8fdb\u5165\u4e0e\u9000\u51fa\u7684\u64cd\u4f5c\n\"\"\"\nfrom contextlib import asynccontextmanager\n\nimport aiohttp\nfrom fastapi import FastAPI\n\n\n# \u5168\u5c40 session \u7ba1\u7406\nclass HTTPClient:\n    def __init__(self):\n        self.session = None\n\n    async def start(self):\n        self.session = aiohttp.ClientSession()\n\n    async def close(self):\n        if self.session:\n            await self.session.close()\n\n\nhttp_client = HTTPClient()\n\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # \u542f\u52a8\u65f6\u521b\u5efa session\n    print(f\"Starting application: {app.title}\")\n    await http_client.start()\n    yield\n    # \u5173\u95ed\u65f6\u6e05\u7406 session\n    print(f\"Shutting down application: {app.title}\")\n    await http_client.close()\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#4-appapiv1indexpy","title":"4 app/api/v1/index.py","text":"<pre><code># _*_ coding: utf-8 _*_\nfrom fastapi import APIRouter\n\nrouter = APIRouter(prefix=\"/index\")\n\n\n@router.get(\"/\")\ndef index():\n    return {\"message\": \"This is Index page\"}\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#5-appapiv1projectpy","title":"5 app/api/v1/project.py","text":"<pre><code># _*_ coding: utf-8 _*_\nimport asyncio\n\nimport aiohttp\nfrom fastapi import APIRouter\nfrom fastapi import HTTPException\n\nfrom app.core.http_client import http_client\n\nrouter = APIRouter(prefix=\"/project\")\n\n\n@router.get(\"/\")\nasync def get_projects(platform: str):\n    \"\"\"\n    \u83b7\u53d6\u9879\u76ee\u5217\u8868\n\n    Args:\n     platform (str): \u5e73\u53f0\u540d\u79f0\uff1b\u793a\u4f8b\uff1aMTK6993\n\n    Returns:\n     dict: \u5305\u542b\u9879\u76ee\u5217\u8868\u7684\u5b57\u5178\uff1b\u793a\u4f8b\uff1a{\"projects\": [p1, p2, p3...]}\n    \"\"\"\n    try:\n        # \u590d\u7528\u5168\u5c40 session\uff0c\u907f\u514d\u6bcf\u6b21\u521b\u5efa\n        async with http_client.session.get(\n                f\"http://172.16.191.214:9777/api/get-projects-and-versions?platform={platform}\",\n                timeout=aiohttp.ClientTimeout(total=10)  # \u6dfb\u52a0\u8d85\u65f6\n        ) as resp:\n            if resp.status == 200:\n                json_dict = await resp.json()\n                await asyncio.sleep(3)  # \u6a21\u62df\u8017\u65f6\u64cd\u4f5c\n                return {\"projects\": json_dict['projects']}\n            else:\n                raise HTTPException(status_code=resp.status, detail=f\"\u4e0a\u6e38\u670d\u52a1\u9519\u8bef: {resp.status}\")\n\n    except asyncio.TimeoutError:\n        raise HTTPException(status_code=504, detail=\"\u8bf7\u6c42\u8d85\u65f6\")\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"\u670d\u52a1\u5185\u90e8\u9519\u8bef: {str(e)}\")\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#6-appapiv1versionpy","title":"6 app/api/v1/version.py","text":"<pre><code># _*_ coding: utf-8 _*_\n# _*_ coding: utf-8 _*_\nimport asyncio\n\nimport aiohttp\nfrom fastapi import APIRouter\nfrom fastapi import HTTPException\n\nfrom app.core.http_client import http_client\n\nrouter = APIRouter(prefix=\"/version\")\n\n\n@router.get(\"/\")\nasync def get_versions(platform: str):\n    \"\"\"\n    \u83b7\u53d6\u9879\u76ee\u5217\u8868\n\n    Args:\n     platform (str): \u5e73\u53f0\u540d\u79f0\uff1b\u793a\u4f8b\uff1aMTK6993\n\n    Returns:\n     dict: \u5305\u542b\u7248\u672c\u5217\u8868\u7684\u5b57\u5178\uff1b\u793a\u4f8b\uff1a{\"versions\": [p1, p2, p3...]}\n    \"\"\"\n    try:\n        # \u590d\u7528\u5168\u5c40 session\uff0c\u907f\u514d\u6bcf\u6b21\u521b\u5efa\n        async with http_client.session.get(\n                f\"http://172.16.191.214:9777/api/get-projects-and-versions?platform={platform}\",\n                timeout=aiohttp.ClientTimeout(total=10)  # \u6dfb\u52a0\u8d85\u65f6\n        ) as resp:\n            if resp.status == 200:\n                json_dict = await resp.json()\n                await asyncio.sleep(3)  # \u6a21\u62df\u8017\u65f6\u64cd\u4f5c\n                return {\"versions\": json_dict['versions']}\n            else:\n                raise HTTPException(status_code=resp.status, detail=f\"\u4e0a\u6e38\u670d\u52a1\u9519\u8bef: {resp.status}\")\n\n    except asyncio.TimeoutError:\n        raise HTTPException(status_code=504, detail=\"\u8bf7\u6c42\u8d85\u65f6\")\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"\u670d\u52a1\u5185\u90e8\u9519\u8bef: {str(e)}\")\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#_2","title":"\u56db\u3001\u4e24\u4e2a\u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"mds/Python-Note/FastAPI-Note/#1-starlette-asgi","title":"1 Starlette - ASGI \u6846\u67b6","text":"<p>Starlette \u662f\u4e00\u4e2a \u8f7b\u91cf\u7ea7\u3001\u9ad8\u6027\u80fd\u7684 Python \u5f02\u6b65 Web \u6846\u67b6 / ASGI \u6846\u67b6\uff0c\u63d0\u4f9b\u5e95\u5c42 Web \u80fd\u529b\uff08\u8def\u7531\u3001\u8bf7\u6c42\u3001\u54cd\u5e94\u3001\u4e2d\u95f4\u4ef6\u7b49\uff09\u3002</p> <p>FastAPI \u548c Starlette \u5b8c\u5168\u517c\u5bb9(\u5e76\u57fa\u4e8e)\u3002\u6240\u4ee5\uff0c\u4f60\u6709\u7684\u5176\u4ed6\u7684 Starlette \u4ee3\u7801\u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002<code>FastAPI</code> \u5b9e\u9645\u4e0a\u662f <code>Starlette</code>\u7684\u4e00\u4e2a\u5b50\u7c7b\u3002</p> <pre><code>      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502          FastAPI             \u2502  \u2190 \u63d0\u4f9b\u7c7b\u578b\u6821\u9a8c\u3001\u4f9d\u8d56\u6ce8\u5165\u3001OpenAPI\u3001\u81ea\u52a8\u6587\u6863\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502 \u7ee7\u627f\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502          Starlette           \u2502  \u2190 \u63d0\u4f9b ASGI\u3001\u8def\u7531\u3001\u4e2d\u95f4\u4ef6\u3001\u8bf7\u6c42/\u54cd\u5e94 \u7b49\u57fa\u7840\u529f\u80fd\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502            ASGI              \u2502  \u2190 \u5f02\u6b65\u63a5\u53e3\u6807\u51c6 (\u7c7b\u4f3c\u4e8e Flask \u7684 WSGI)\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u901a\u8fc7 FastAPI \u4f60\u53ef\u4ee5\u83b7\u5f97\u6240\u6709 Starlette \u7684\u7279\u6027 ( FastAPI \u5c31\u50cf\u52a0\u5f3a\u7248\u7684 Starlette )\uff1a</p> <ul> <li>\u4ee4\u4eba\u60ca\u53f9\u7684\u6027\u80fd\u3002\u5b83\u662f Python \u53ef\u7528\u7684\u6700\u5feb\u7684\u6846\u67b6\u4e4b\u4e00\uff0c\u548c NodeJS \u53ca Go \u76f8\u5f53\u3002</li> <li>\u652f\u6301 WebSocket \u3002</li> <li>\u652f\u6301 GraphQL \u3002</li> <li>\u540e\u53f0\u4efb\u52a1\u5904\u7406\u3002</li> <li>Startup \u548c shutdown \u4e8b\u4ef6\u3002</li> <li>\u6d4b\u8bd5\u5ba2\u6237\u7aef\u57fa\u4e8e HTTPX\u3002</li> <li>CORS, GZip, \u9759\u6001\u6587\u4ef6, \u6d41\u54cd\u5e94\u3002</li> <li>\u652f\u6301 Session \u548c Cookie \u3002</li> <li>100% \u6d4b\u8bd5\u8986\u76d6\u7387\u3002</li> <li>\u4ee3\u7801\u5e93 100% \u7c7b\u578b\u6ce8\u91ca\u3002</li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/#2-pydantic-","title":"2 Pydantic - \u6570\u636e\u9a8c\u8bc1\u4e0e\u89e3\u6790\u5e93","text":"<p>Pydantic \u662f\u4e00\u4e2a\u57fa\u4e8e Python \u7c7b\u578b\u6ce8\u89e3\uff08Type Hints\uff09 \u7684 \u6570\u636e\u9a8c\u8bc1\u4e0e\u89e3\u6790\u5e93\u3002</p> <p>Pydantic\u7406\u5ff5\uff1a\u201c\u4f7f\u7528\u6807\u51c6\u7684 Python \u7c7b\u578b\u6ce8\u89e3\uff08typing\uff09\uff0c\u81ea\u52a8\u5b8c\u6210\u6570\u636e\u9a8c\u8bc1\u3001\u7c7b\u578b\u8f6c\u6362\u548c\u9519\u8bef\u63d0\u793a\u3002\u201d</p> \u529f\u80fd \u8bf4\u660e \u2705 \u7c7b\u578b\u9a8c\u8bc1 \u81ea\u52a8\u68c0\u67e5\u8f93\u5165\u6570\u636e\u7c7b\u578b \ud83d\udd04 \u7c7b\u578b\u8f6c\u6362 \u81ea\u52a8\u5c06\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u7b49\u8f6c\u6210\u76ee\u6807\u7c7b\u578b \ud83d\udea8 \u9519\u8bef\u63d0\u793a \u9a8c\u8bc1\u5931\u8d25\u65f6\u8fd4\u56de\u7ed3\u6784\u5316\u9519\u8bef\u4fe1\u606f \ud83e\uddf1 \u9ed8\u8ba4\u503c \u652f\u6301\u5b57\u6bb5\u9ed8\u8ba4\u503c \ud83e\uddfe JSON \u5e8f\u5217\u5316 \u652f\u6301 <code>.json()</code> \u5bfc\u51fa \ud83e\udde0 \u5d4c\u5957\u6a21\u578b \u652f\u6301\u590d\u6742\u5d4c\u5957\u7ed3\u6784 \ud83d\udd0d \u6821\u9a8c\u89c4\u5219 \u652f\u6301\u6b63\u5219\u3001\u8303\u56f4\u3001\u957f\u5ea6\u7b49\u9a8c\u8bc1 <p>Pydantic \u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u529f\u80fd\uff1a\u6f14\u793a\u4f7f\u7528pydantic\n\"\"\"\nfrom datetime import datetime\nfrom typing import List, Optional\n\nfrom pydantic import BaseModel\n\n\nclass User(BaseModel):\n    id: int\n    name: str = 'chc'  # \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5e38\u91cf\n    age: int\n    hobby: List[int] = []\n    signup_time: Optional[datetime] = None\n\n\nexternal_data = {\n    'id': '1',\n    'age': '23',\n    'hobby': ['1', '2', 99],\n    'signup_time': '2019-12-23 23:59:59',\n}\n\nuser = User(**external_data)\nprint(user.model_dump())\n\n# \u8f93\u51fa\u7ed3\u679c-\u81ea\u52a8\u8f6c\u5316\n# {'id': 1, 'name': 'chc', 'age': 23, 'hobby': [1, 2, 99], 'signup_time': datetime.datetime(2019, 12, 23, 23, 59, 59)}\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#3","title":"3 \u603b\u7ed3","text":"\u7ec4\u4ef6 \u4f5c\u7528 Starlette \u63d0\u4f9b ASGI \u5c42\u3001\u8def\u7531\u3001\u4e2d\u95f4\u4ef6\u3001HTTP/WebSocket \u57fa\u7840 Pydantic \u63d0\u4f9b\u6570\u636e\u6a21\u578b\u3001\u7c7b\u578b\u9a8c\u8bc1\u3001\u5e8f\u5217\u5316 FastAPI \u628a\u4e24\u8005\u7ed3\u5408 + \u81ea\u52a8\u751f\u6210\u6587\u6863 + \u4f9d\u8d56\u6ce8\u5165\u673a\u5236 <p>\u4e09\u8005\u7684\u5173\u7cfb\u5982\u4e0b\uff1a</p> <pre><code>       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502   Pydantic    \u2502  \u2190 \u6570\u636e\u9a8c\u8bc1/Schema\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        FastAPI            \u2502  \u2190 \u4e3b\u6846\u67b6 (\u5c01\u88c5 + \u6587\u6863 + \u4f9d\u8d56\u6ce8\u5165)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2502\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502  Starlette   \u2502  \u2190 \u5e95\u5c42 ASGI \u6846\u67b6\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Starlette \u4e0e FastAPI \u5bf9\u6bd4\uff1a</p> \u5bf9\u6bd4\u9879 Starlette FastAPI \u5b9a\u4f4d \u5e95\u5c42 ASGI \u6846\u67b6 \u9ad8\u7ea7 Web \u6846\u67b6 \u7279\u70b9 \u8f7b\u91cf\u3001\u7075\u6d3b\u3001\u65e0\u7c7b\u578b\u7cfb\u7edf \u81ea\u52a8\u6821\u9a8c\u3001\u81ea\u52a8\u6587\u6863 \u53c2\u6570\u9a8c\u8bc1 \u624b\u52a8 \u81ea\u52a8\uff08\u57fa\u4e8e\u7c7b\u578b\u63d0\u793a + Pydantic\uff09 \u6587\u6863\u751f\u6210 \u65e0 \u81ea\u52a8\u751f\u6210 Swagger / ReDoc \u5b66\u4e60\u96be\u5ea6 \u7a0d\u4f4e\u5c42 \u9ad8\u5c42\u5c01\u88c5\u66f4\u53cb\u597d \u63a8\u8350\u7528\u9014 \u81ea\u5b9a\u4e49\u5fae\u6846\u67b6\u3001\u4e2d\u95f4\u4ef6\u3001\u5de5\u5177 RESTful API\u3001\u5fae\u670d\u52a1 <p>\u4e00\u53e5\u8bdd\u8bb0\u5fc6\uff1aFastAPI = Starlette + Pydantic + \u81ea\u52a8\u6587\u6863 + \u4f9d\u8d56\u6ce8\u5165</p>"},{"location":"mds/Python-Note/FastAPI-Note/#http","title":"\u4e94\u3001http\u534f\u8bae","text":"<p>\u534f\u8bae\u89c4\u8303\u8bf7\u6c42\u683c\u5f0f\uff1a\u534f\u8bae://\u4e3b\u673a:\u7aef\u53e3 + \u8def\u5f84 + \u53c2\u6570 + \u5c01\u88c5\u53c2\u6570(\u5982\uff1a\u8bf7\u6c42\u5934)</p>"},{"location":"mds/Python-Note/FastAPI-Note/#_3","title":"\u516d\u3001\u5f00\u53d1\u6a21\u5f0f","text":""},{"location":"mds/Python-Note/FastAPI-Note/#1_1","title":"1 \u524d\u540e\u7aef\u4e0d\u5206\u79bb","text":""},{"location":"mds/Python-Note/FastAPI-Note/#2","title":"2 \u524d\u540e\u7aef\u5206\u79bb","text":""},{"location":"mds/Python-Note/FastAPI-Note/#api","title":"\u4e03\u3001API\u63a5\u53e3\u6982\u5ff5","text":"<p>\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3\uff08Application Programming Interface\uff0cAPI\u63a5\u53e3\uff09\uff0c\u5c31\u662f\u5e94\u7528\u7a0b\u5e8f\u5bf9\u5916\u63d0\u4f9b\u4e86\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u7684\u5165\u53e3\uff0c\u8fd9\u4e2a\u5165\u53e3\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u7c7b\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2aurl\u5730\u5740\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u5730\u5740\u3002\u5f53\u5ba2\u6237\u7aef\u8c03\u7528\u8fd9\u4e2a\u5165\u53e3\uff0c\u5e94\u7528\u7a0b\u5e8f\u5219\u4f1a\u6267\u884c\u5bf9\u5e94\u4ee3\u7801\u64cd\u4f5c\uff0c\u7ed9\u5ba2\u6237\u7aef\u5b8c\u6210\u76f8\u5bf9\u5e94\u7684\u529f\u80fd\u3002</p> <p>\u5f53\u7136\uff0capi\u63a5\u53e3\u5728\u5de5\u4f5c\u4e2d\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u5f00\u53d1\u5185\u5bb9\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u8c03\u7528\u5176\u4ed6\u4eba\u7f16\u5199\u7684api\u63a5\u53e3\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u63d0\u4f9bapi\u63a5\u53e3\u7ed9\u5176\u4ed6\u4eba\u64cd\u4f5c\u3002\u7531\u6b64\u5c31\u4f1a\u5e26\u6765\u4e00\u4e2a\u95ee\u9898\uff0capi\u63a5\u53e3\u5f80\u5f80\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\u3001\u7c7b\u65b9\u6cd5\u3001\u6216\u8005url\u6216\u5176\u4ed6\u7f51\u7edc\u5730\u5740\uff0c\u4e0d\u65ad\u662f\u54ea\u4e00\u79cd\uff0c\u5f53api\u63a5\u53e3\u7f16\u5199\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u90fd\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u8fd9\u4e2a\u63a5\u53e3\u5e94\u8be5\u600e\u4e48\u7f16\u5199\uff1f\u63a5\u53e3\u600e\u4e48\u5199\u7684\u66f4\u52a0\u5bb9\u6613\u7ef4\u62a4\u548c\u6e05\u6670\uff0c\u8fd9\u5c31\u9700\u8981\u5927\u5bb6\u5728\u8c03\u7528\u6216\u8005\u7f16\u5199api\u63a5\u53e3\u7684\u65f6\u5019\u8981\u6709\u4e00\u4e2a\u660e\u786e\u7684\u7f16\u5199\u89c4\u8303\uff01\uff01\uff01</p> <p>\u4e3a\u4e86\u5728\u56e2\u961f\u5185\u90e8\u5f62\u6210\u5171\u8bc6\u3001\u9632\u6b62\u4e2a\u4eba\u4e60\u60ef\u5dee\u5f02\u5f15\u8d77\u7684\u6df7\u4e71\uff0c\u6211\u4eec\u90fd\u9700\u8981\u627e\u5230\u4e00\u79cd\u5927\u5bb6\u90fd\u89c9\u5f97\u5f88\u597d\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\uff0c\u800c\u4e14\u8fd9\u79cd\u89c4\u8303\u80fd\u591f\u8ba9\u540e\u7aef\u5199\u7684\u63a5\u53e3\uff0c\u7528\u9014\u4e00\u76ee\u4e86\u7136\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u53cc\u65b9\u4e4b\u95f4\u7684\u5408\u4f5c\u6210\u672c\u3002</p> <p>\u76ee\u524d\u5e02\u9762\u4e0a\u5927\u90e8\u5206\u516c\u53f8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\u4e3b\u8981\u6709\uff1aRPC\u3001restful\u3002</p>"},{"location":"mds/Python-Note/FastAPI-Note/#1-rpc-remote-procedure-call","title":"1 RPC\uff08 Remote Procedure Call \uff09","text":"<p>\u200b   \u7ffb\u8bd1\u6210\u4e2d\u6587\uff1a\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528[\u8fdc\u7a0b\u670d\u52a1\u8c03\u7528\u3002\u4ece\u5b57\u9762\u4e0a\u7406\u89e3\u5c31\u662f\u8bbf\u95ee/\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u7aef\u63d0\u4f9b\u7684api\u63a5\u53e3\u3002\u8fd9\u79cd\u63a5\u53e3\u4e00\u822c\u4ee5\u670d\u52a1\u6216\u8005\u8fc7\u7a0b\u5f0f\u4ee3\u7801\u63d0\u4f9b\u3002</p> <ul> <li> <p>\u670d\u52a1\u7aef\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u8bbf\u95ee\u5165\u53e3\u5730\u5740\uff1ahttp://api.xxx.com/ \u6216 http://www.xx.com/api \u6216\u8005\u57fa\u4e8e\u5176\u4ed6\u534f\u8bae\u7684\u5730\u5740</p> </li> <li> <p>\u5ba2\u6237\u7aef\u8bf7\u6c42\u670d\u52a1\u7aef\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u7406\u89e3\u4e3a\u52a8\u4f5c(action)\uff0c\u4e00\u822cweb\u5f00\u53d1\u65f6\uff0c\u5bf9\u5e94\u7684\u5c31\u662fHTTP\u8bf7\u6c42\u7684post\u8bf7\u6c42</p> </li> <li> <p>\u901a\u8fc7\u8bf7\u6c42\u4f53\u53c2\u6570\uff0c\u6307\u5b9a\u8981\u8c03\u7528\u7684\u63a5\u53e3\u540d\u79f0\u548c\u63a5\u53e3\u6240\u9700\u7684\u53c2\u6570</p> </li> </ul> <p>action=get_all_student&amp;class=301&amp;sex=1</p> <p>m=get_all_student&amp;sex=1&amp;age=22</p> <p>command=100&amp;sex=1&amp;age=22</p> <p>RPC\u63a5\u53e3\u591a\u4e86,\u5bf9\u5e94\u51fd\u6570\u540d\u548c\u53c2\u6570\u5c31\u591a\u4e86,\u524d\u7aef\u5728\u8bf7\u6c42api\u63a5\u53e3\u65f6\u96be\u627e\uff0c\u5bf9\u4e8e\u5e74\u4ee3\u4e45\u8fdc\u7684rpc\u670d\u52a1\u7aef\u7684\u4ee3\u7801\u4e5f\u5bb9\u6613\u51fa\u73b0\u91cd\u590d\u7684\u63a5\u53e3</p>"},{"location":"mds/Python-Note/FastAPI-Note/#2-restful","title":"2 Restful","text":"<p>\u200b   \u7ffb\u8bd1\u6210\u4e2d\u6587\uff1a\u8d44\u6e90\u72b6\u6001\u8f6c\u6362.(\u8868\u5f81\u6027\u72b6\u6001\u8f6c\u79fb)</p> <ul> <li>\u628a\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u6240\u6709\u7684\u6570\u636e/\u6587\u4ef6\u90fd\u770b\u6210\u8d44\u6e90\uff0c \u90a3\u4e48\u901a\u8fc7api\u63a5\u53e3\u8bf7\u6c42\u6570\u636e\u7684\u64cd\u4f5c\uff0c\u672c\u8d28\u4e0a\u6765\u8bf4\u5c31\u662f\u5bf9\u8d44\u6e90\u7684\u64cd\u4f5c\u4e86.</li> </ul> <p>\u56e0\u6b64\uff0crestful\u4e2d\u8981\u6c42\uff0c\u6211\u4eec\u628a\u5f53\u524d\u63a5\u53e3\u5bf9\u5916\u63d0\u4f9b\u54ea\u79cd\u8d44\u6e90\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c31\u628a\u8d44\u6e90\u7684\u540d\u79f0\u5199\u5728url\u5730\u5740\u3002</p> <ul> <li>web\u5f00\u53d1\u4e2d\u64cd\u4f5c\u8d44\u6e90\uff0c\u6700\u5e38\u89c1\u7684\u6700\u901a\u7528\u7684\u65e0\u975e\u5c31\u662f\u589e\u5220\u67e5\u6539\uff0c\u6240\u4ee5restful\u8981\u6c42\u5728\u5730\u5740\u680f\u4e2d\u58f0\u660e\u8981\u64cd\u4f5c\u7684\u8d44\u6e90\u662f\u4ec0\u4e48\u3002\u7136\u540e\u901a\u8fc7http\u8bf7\u6c42\u52a8\u8bcd\u6765\u8bf4\u660e\u5bf9\u8be5\u8d44\u6e90\u8fdb\u884c\u54ea\u4e00\u79cd\u64cd\u4f5c</li> </ul> <p>POST http://www.xxx.com/api/students/   \u2014&gt;  \u6dfb\u52a0\u5b66\u751f\u6570\u636e</p> <p>GET http://www.xxx.com/api/students/   \u2014&gt;  \u83b7\u53d6\u6240\u6709\u5b66\u751f</p> <p>GET http://www.xxx.com/api/students//   \u2014&gt;  \u83b7\u53d6id=pk\u7684\u5b66\u751f <p>DELETE http://www.xxx.com/api/students//   \u2014&gt;  \u5220\u9664id=pk\u7684\u4e00\u4e2a\u5b66\u751f <p>PUT http://www.xxx.com/api/students//   \u2014&gt;  \u4fee\u6539\u4e00\u4e2a\u5b66\u751f\u7684\u5168\u90e8\u4fe1\u606f [id,name,sex,age,] <p>PATCH http://www.xxx.com/api/students//   \u2014&gt;  \u4fee\u6539\u4e00\u4e2a\u5b66\u751f\u7684\u90e8\u5206\u4fe1\u606f[age] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u4ec5\u9700\u8981\u901a\u8fc7url\u5730\u5740\u4e0a\u7684\u8d44\u6e90\u540d\u79f0\u7ed3\u5408HTTP\u8bf7\u6c42\u52a8\u4f5c\uff0c\u5c31\u53ef\u4ee5\u8bf4\u660e\u5f53\u524dapi\u63a5\u53e3\u7684\u529f\u80fd\u662f\u4ec0\u4e48\u4e86\u3002</p> <p>RPC\u52a8\u4f5c\u4e3a\u4e3b\u7684api\u63a5\u53e3\u89c4\u8303\uff0c\u4f53\u73b0\u5728\u63a5\u53e3\u540d\u79f0\u4e0a\u5f80\u5f80\u9644\u5e26\u64cd\u4f5c\u6570\u636e\u7684\u52a8\u4f5c\u3002</p> <p>Restful\u662f\u4ee5\u8d44\u6e90\u4e3a\u4e3b\u7684api\u63a5\u53e3\u89c4\u8303\uff0c\u4f53\u73b0\u5728\u5730\u5740\u4e0a\u5c31\u662f\u8d44\u6e90\u5c31\u662f\u4ee5\u540d\u8bcd\u8868\u8fbe\u3002</p> <p>\u603b\u7ed3\u6982\u62ec\uff1a\u589e\u5220\u6539\u67e5\u67e5</p>"},{"location":"mds/Python-Note/FastAPI-Note/#3-restful-api","title":"3 RESTful API\u89c4\u8303","text":"<p>REST\u5168\u79f0\u662fRepresentational State Transfer\uff0c\u4e2d\u6587\u610f\u601d\u662f\u8868\u8ff0\uff08\u7f16\u8005\u6ce8\uff1a\u901a\u5e38\u8bd1\u4e3a\u8868\u5f81\uff09\u6027\u72b6\u6001\u8f6c\u79fb\u3002 \u5b83\u9996\u6b21\u51fa\u73b0\u57282000\u5e74Roy Fielding\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u3002</p> <p>RESTful\u662f\u4e00\u79cd\u4e13\u95e8\u4e3aWeb \u5f00\u53d1\u800c\u5b9a\u4e49API\u63a5\u53e3\u7684\u8bbe\u8ba1\u98ce\u683c\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u524d\u540e\u7aef\u5206\u79bb\u7684\u5e94\u7528\u6a21\u5f0f\u4e2d\u3002</p> <p>\u8fd9\u79cd\u98ce\u683c\u7684\u7406\u5ff5\u8ba4\u4e3a\u540e\u7aef\u5f00\u53d1\u4efb\u52a1\u5c31\u662f\u63d0\u4f9b\u6570\u636e\u7684\uff0c\u5bf9\u5916\u63d0\u4f9b\u7684\u662f\u6570\u636e\u8d44\u6e90\u7684\u8bbf\u95ee\u63a5\u53e3\uff0c\u6240\u4ee5\u5728\u5b9a\u4e49\u63a5\u53e3\u65f6\uff0c\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684URL\u8def\u5f84\u5c31\u8868\u793a\u8fd9\u79cd\u8981\u64cd\u4f5c\u7684\u6570\u636e\u8d44\u6e90\u3002</p> <p>\u800c\u5bf9\u4e8e\u6570\u636e\u8d44\u6e90\u5206\u522b\u4f7f\u7528POST\u3001DELETE\u3001GET\u3001UPDATE\u7b49\u8bf7\u6c42\u52a8\u4f5c\u6765\u8868\u8fbe\u5bf9\u6570\u636e\u7684\u589e\u5220\u67e5\u6539\u3002</p>"},{"location":"mds/Python-Note/FastAPI-Note/#31-restful","title":"3.1 restful\u89c4\u8303","text":"GET /students \u83b7\u53d6\u6240\u6709\u5b66\u751f \u8bf7\u6c42\u65b9\u6cd5 \u8bf7\u6c42\u5730\u5740 \u540e\u7aef\u64cd\u4f5c POST /students \u589e\u52a0\u5b66\u751f GET /students/ \u83b7\u53d6\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f PUT /students/ \u4fee\u6539\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f DELETE /students/ \u5220\u9664\u7f16\u53f7\u4e3apk\u7684\u5b66\u751f <p>restful\u89c4\u8303\u662f\u4e00\u79cd\u901a\u7528\u7684\u89c4\u8303\uff0c\u4e0d\u9650\u5236\u8bed\u8a00\u548c\u5f00\u53d1\u6846\u67b6\u7684\u4f7f\u7528\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u4e00\u95e8\u8bed\u8a00\uff0c\u4efb\u4f55\u4e00\u4e2a\u6846\u67b6\u90fd\u53ef\u4ee5\u5b9e\u73b0\u7b26\u5408restful\u89c4\u8303\u7684API\u63a5\u53e3\u3002</p> <p>\u53c2\u8003\u6587\u6863\uff1ahttp://www.runoob.com/w3cnote/restful-architecture.html</p>"},{"location":"mds/Python-Note/FastAPI-Note/#32","title":"3.2 \u5e42\u7b49\u6027","text":"<p>\u63a5\u53e3\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5b58\u5728\u5e42\u7b49\u6027\u3002\u6240\u8c13\u5e42\u7b49\u6027\u662f\u6307\u4ee3\u5ba2\u6237\u7aef\u53d1\u8d77\u591a\u6b21\u540c\u6837\u8bf7\u6c42\u65f6\uff0c\u662f\u5426\u5bf9\u4e8e\u670d\u52a1\u7aef\u91cc\u9762\u7684\u8d44\u6e90\u4ea7\u751f\u4e0d\u540c\u7ed3\u679c\u3002\u5982\u679c\u591a\u6b21\u8bf7\u6c42\uff0c\u670d\u52a1\u7aef\u7ed3\u679c\u8fd8\u662f\u4e00\u6837\uff0c\u5219\u5c5e\u4e8e\u5e42\u7b49\u63a5\u53e3\uff0c\u5982\u679c\u591a\u6b21\u8bf7\u6c42\uff0c\u670d\u52a1\u7aef\u4ea7\u751f\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5219\u5c5e\u4e8e\u975e\u5e42\u7b49\u63a5\u53e3\u3002</p> \u8bf7\u6c42\u65b9\u5f0f \u662f\u5426\u5e42\u7b49 \u662f\u5426\u5b89\u5168 GET \u5e42\u7b49 \u5b89\u5168 POST \u4e0d\u5e42\u7b49 \u4e0d\u5b89\u5168 PUT/PATCH \u5e42\u7b49 \u4e0d\u5b89\u5168 DELETE \u5e42\u7b49 \u4e0d\u5b89\u5168"},{"location":"mds/Python-Note/FastAPI-Note/#33","title":"3.3 \u5e8f\u5217\u5316","text":"<p>api\u63a5\u53e3\u5f00\u53d1\uff0c\u6700\u6838\u5fc3\u6700\u5e38\u89c1\u7684\u4e00\u4e2a\u4ee3\u7801\u7f16\u5199\u8fc7\u7a0b\u5c31\u662f\u5e8f\u5217\u5316\uff0c\u6240\u8c13\u5e8f\u5217\u5316\u5c31\u662f\u628a\u6570\u636e\u8f6c\u6362\u683c\u5f0f\u3002</p> <p>\u5e38\u89c1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\uff1ajson\uff0cpickle\uff0cbase64\uff0c\u2026.</p> <p>\u5e8f\u5217\u5316\u53ef\u4ee5\u5206\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <p>\u200b   \u5e8f\u5217\u5316\uff1a \u628a\u6211\u4eec\u8bc6\u522b\u7684\u6570\u636e\u8f6c\u6362\u6210\u6307\u5b9a\u7684\u683c\u5f0f\u63d0\u4f9b\u7ed9\u522b\u4eba\u3002\u4f8b\u5982\uff1a\u6211\u4eec\u5728django\u4e2d\u83b7\u53d6\u5230\u7684\u6570\u636e\u9ed8\u8ba4\u662f\u6a21\u578b\u5bf9\u8c61\uff0c\u4f46\u662f\u6a21\u578b\u5bf9\u8c61\u6570\u636e\u65e0\u6cd5\u76f4\u63a5\u63d0\u4f9b\u7ed9\u524d\u7aef\u6216\u522b\u7684\u5e73\u53f0\u4f7f\u7528\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u628a\u6570\u636e\u8fdb\u884c\u5e8f\u5217\u5316\uff0c\u53d8\u6210\u5b57\u7b26\u4e32\u6216\u8005json\u6570\u636e\uff0c\u63d0\u4f9b\u7ed9\u522b\u4eba\u3002</p> <p>\u200b   \u53cd\u5e8f\u5217\u5316\uff1a\u628a\u522b\u4eba\u63d0\u4f9b\u7684\u6570\u636e\u8f6c\u6362/\u8fd8\u539f\u6210\u6211\u4eec\u9700\u8981\u7684\u683c\u5f0f\u3002\u4f8b\u5982\uff1a\u524d\u7aefjs\u63d0\u4f9b\u8fc7\u6765\u7684json\u6570\u636e\uff0c\u5bf9\u4e8epython\u800c\u8a00json\u5c31\u662f\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u6362\u6210\u5b57\u5178\uff0c\u7136\u540e\u63a5\u7740\u5b57\u5178\u518d\u8fdb\u884c\u8f6c\u6362\u6210\u6a21\u578b\u5bf9\u8c61\uff0c\u8fd9\u6837\u6211\u4eec\u624d\u80fd\u628a\u6570\u636e\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u4e2d\u3002</p> <p> </p>"},{"location":"mds/Python-Note/FastAPI-Note/#fastapi","title":"\u516b\u3001FastAPI\u8bf7\u6c42\u63a5\u53e3","text":""},{"location":"mds/Python-Note/FastAPI-Note/#1_2","title":"1 \u652f\u6301\u7684\u8bf7\u6c42\u65b9\u5f0f","text":"<pre><code>@app.get()\n@app.post()\n@app.put()\n@app.patch()\n@app.delete()\n@app.options()\n@app.head()\n@app.trace()\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#2_1","title":"2 \u8def\u5f84\u53c2\u6570","text":"<pre><code>@app.post(\n    \"/items/{item_id}\",\n    response_model=Item,\n    status_code=status.HTTP_200_OK,\n    tags=[\"AAA\"],\n    summary=\"this is summary\",\n    description=\"this is description\",\n    response_description= \"this is response_description\",\n    deprecated=False,\n)\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#3-include_router","title":"3 \u8def\u7531\u7ec4(include_router)","text":"<ul> <li>main.py</li> </ul> <pre><code>from typing import Union\n\nfrom fastapi import FastAPI\nimport uvicorn\n\nfrom apps import app01, app02\n\napp = FastAPI()\n\napp.include_router(app01, prefix=\"/app01\", tags=[\"\u7b2c\u4e00\u7ae0\u8282\uff1a\u5546\u57ce\u63a5\u53e3\", ])\napp.include_router(app02, prefix=\"/app02\", tags=[\"\u7b2c\u4e8c\u7ae0\u8282\uff1a\u7528\u6237\u4e2d\u5fc3\u63a5\u53e3\", ])\n\nif __name__ == '__main__':\n    uvicorn.run(\"main:app\", host=\"127.0.0.1\", port=8080, debug=True, reload=True)\n</code></pre> <ul> <li>app01..py</li> </ul> <p><pre><code>from fastapi import APIRouter\n\napp01 = APIRouter()\n\n@app01.get(\"/shop/food\")\ndef shop_food():\n    return {\"shop\": \"food\"}\n\n@app01.get(\"/shop/bed\")\ndef shop_food():\n    return {\"shop\": \"bed\"}\n</code></pre> - app02..py</p> <pre><code>from fastapi import APIRouter\n\napp02 = APIRouter()\n\n@app02.post(\"/user/login\")\ndef user_login():\n    return {\"user\": \"login\"}\n\n@app02.post(\"/user/reg\")\ndef user_reg():\n    return {\"user\": \"reg\"}\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#app","title":"\u4e5d\u3001\u5de5\u5382\u51fd\u6570\u521b\u5efaapp","text":"<ul> <li>main.py</li> </ul> <pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u670d\u52a1\u542f\u52a8\u547d\u4ee4\uff1auvicorn main:app --reload\n\"\"\"\nimport uvicorn  # noqa\nfrom fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\n\nfrom app.api.v1 import index, project, version, file\nfrom app.core.config import settings\nfrom app.core.http_client import lifespan\n\n\ndef create_app() -&gt; FastAPI:\n    \"\"\"\n    \u521b\u5efa FastAPI \u5e94\u7528\u5b9e\u4f8b\n    \"\"\"\n    app = FastAPI(\n        title=settings.PROJECT_NAME,\n        version=\"1.0.0\",\n        description=\"FastAPI \u6a21\u5757\u5316\u9879\u76ee\u793a\u4f8b\",\n        lifespan=lifespan\n    )\n\n    # \u6ce8\u518c\u8def\u7531 -\u8def\u7531\u7ec4\u914d\u7f6e\n    routers = {\n        \"/home\": [\n            (index.router, {\"tags\": [\"\u9996\u9875\"]})\n        ],\n        \"/api/v1\": [\n            (project.router, {\"tags\": [\"\u9879\u76ee\u7ba1\u7406\"]}),\n            (version.router, {\"tags\": [\"\u7248\u672c\u7ba1\u7406\"]}),\n            (file.router, {\"tags\": [\"\u6587\u4ef6\u7ba1\u7406\"]}),\n        ],\n        # \"/api/v2\":[]\n    }\n    for prefix, config in routers.items():\n        for router, tags in config:\n            app.include_router(router, prefix=prefix, tags=tags)\n\n    # \u5141\u8bb8\u591a\u4e2a\u6e90\n    origins = [\n        \"http://localhost:9008\",\n    ]\n\n    app.add_middleware(\n        CORSMiddleware,\n        allow_origins=origins,\n        allow_credentials=True,\n        allow_methods=[\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n        allow_headers=[\"*\"],\n    )\n\n    return app\n\n\napp = create_app()\n\nif __name__ == '__main__':\n    host = \"0.0.0.0\"\n    port = 9777\n    print(f\"\u6587\u6863\u5730\u5740\uff1ahttp://127.0.0.1:{port}/docs\")\n    print(f\"\u9996\u9875\u5730\u5740\uff1ahttp://127.0.0.1:{port}/home/index/\")\n    uvicorn.run(\"main:app\", host=host, port=9777, log_level=\"debug\")\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#_4","title":"\u5341\u3001\u8def\u5f84\u53c2\u6570","text":"<ul> <li>\u9700\u8981\u4f7f\u7528\u62ec\u53f7\uff1a{} \u5c06\u53d8\u91cf\u5305\u88f9\u8d77\u6765</li> </ul> <pre><code># _*_ coding: utf-8 _*_\nfrom fastapi import APIRouter\n\nrouter = APIRouter(prefix=\"/user\")\n\n\n@router.get(\"/1\")  # \u6709\u7684\u573a\u666f\u53ef\u80fd\u9700\u8981\uff1a\u4e2a\u522b\u8def\u7531\u4f18\u5148\u7ea7 &gt; \u8def\u5f84\u53c2\u6570\u8def\u7531\uff0c\u6b64\u65f6\u9700\u8981\u5199\u5728\u524d\u9762\u624d\u4f1a\u4f18\u5148\u5339\u914d\ndef get_user_info():\n    \"\"\"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\"\"\"\n    return {\"id\": 1}\n\n\n@router.get(\"/{id}\")\ndef get_user_info(id: int):  # \u540c\u540d\u53d8\u91cf\uff0c\u4e14\u6ce8\u89e3\u4e3aint\u7c7b\u578b\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3aint\u7c7b\u578b\n    \"\"\"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\"\"\"\n    return {\"id\": id, \"name\": \"\u5f20\u4e09\", \"age\": 25}\n</code></pre> <ul> <li>\u5de5\u5382\u51fd\u6570\u9700\u8981\u6ce8\u518c\u5bf9\u5e94\u7684\u8def\u7531\u5206\u53d1\u5b9e\u4f8b</li> </ul> <pre><code># \u6ce8\u518c\u8def\u7531 -\u8def\u7531\u7ec4\u914d\u7f6e\nrouters = {\n    \"/home\": [\n        (index.router, {\"tags\": [\"\u9996\u9875\"]})\n    ],\n    \"/api/v1\": [\n        (project.router, {\"tags\": [\"\u9879\u76ee\u7ba1\u7406\"]}),\n        (version.router, {\"tags\": [\"\u7248\u672c\u7ba1\u7406\"]}),\n        (file.router, {\"tags\": [\"\u6587\u4ef6\u7ba1\u7406\"]}),\n        (user.router, {\"tags\": [\"\u7528\u6237\u7ba1\u7406\"]})  # \u65b0\u589e\u7528\u6237\u8def\u7531\u914d\u7f6e\n    ],\n    # \"/api/v2\":[]\n}\nfor prefix, config in routers.items():\n    for router, tags in config:\n        app.include_router(router, prefix=prefix, tags=tags)\n</code></pre>"},{"location":"mds/Python-Note/FastAPI-Note/#_5","title":"\u5341\u4e00\u3001\u5b57\u7b26\u4e32\u67e5\u8be2\u53c2\u6570","text":""},{"location":"mds/Python-Note/FastAPI-Note/#1_3","title":"1 \u53c2\u6570\u5b9a\u4e49","text":"<p>\u5b9a\u4e49\u63a5\u53e3\u51fd\u6570\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8def\u5f84\u53c2\u6570\uff0c\u4f46\u5728\u63a5\u53e3\u51fd\u6570\u5b9a\u4e49\u4e86\u5176\u4ed6\u53c2\u6570\uff0c\u90a3\u4e48\u5176\u4ed6\u53c2\u6570\u5c06\u4f1a\u81ea\u52a8\u8bc6\u522b\u4e3a\u5b57\u7b26\u7a7f\u67e5\u8be2\u53c2\u6570</p> <pre><code>from typing import Union, Optional  # noqa\n\nfrom fastapi import APIRouter, Depends  # noqa\n\n\n@router.get(\"/{id}\")\ndef get_user_info(id: int, a: int, b: str, c: Union[int, None], d: Optional[int], e=None):\n    \"\"\"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\"\"\"\n    print(id, type(id))\n    print(a, type(a))\n    print(b, type(b))\n    print(c, type(c))\n    print(d, type(d))\n    print(e, type(e))\n    data = {\"id\": id, \"a\": a, \"b\": b, \"c\": c, \"d\": d, \"e\": e}\n    return data\n</code></pre> <ul> <li>Union\uff1a\u5177\u4f53\u8054\u5408\u7c7b\u578b\uff08\u4e0d\u53ef\u7701\u7565None\u7c7b\u578b\uff09</li> <li>Optional\uff1a\u53ef\u7701\u7565None\u7c7b\u578b\u586b\u5199\uff0c\u81ea\u52a8\u5305\u542b</li> </ul>"},{"location":"mds/Python-Note/FastAPI-Note/#2-pydantic","title":"2 \u7ed3\u5408Pydantic\u5305\u5b9a\u4e49","text":"<pre><code>from pydantic import BaseModel\nfrom typing import Union, Optional\n\n\nclass UserInfoQuery(BaseModel):\n    id: int\n    a: int\n    b: str\n    c: Union[int, None] = None\n    d: Optional[int] = None\n    e: Optional[str] = None\n\n\n@router.get(\"/{id}\")\ndef get_user_info(query: UserInfoQuery):\n    \"\"\"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\"\"\"\n    print(query.id, type(query.id))\n    print(query.a, type(query.a))\n    print(query.b, type(query.b))\n    print(query.c, type(query.c))\n    print(query.d, type(query.d))\n    print(query.e, type(query.e))\n    data = {\n        \"id\": query.id,\n        \"a\": query.a,\n        \"b\": query.b,\n        \"c\": query.c,\n        \"d\": query.d,\n        \"e\": query.e\n    }\n    return data\n</code></pre> <p>\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u63a5\u53e3\uff0c\u9ed8\u8ba4\u5c31\u4f7f\u7528json\u683c\u5f0f\u63a5\u6536\u6570\u636e\uff1a</p> <p> </p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/","title":"Python-\u5e76\u53d1\u7f16\u7a0b","text":"<p>Python - \u5e76\u53d1\u7f16\u7a0b\u662f\u4e3a\u4e86\u66f4\u5feb\u7684\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5145\u5206\u5229\u7528\u673a\u5668\u8d44\u6e90\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#_1","title":"\u4e00\u3001\u5e76\u53d1\u4e0e\u5e76\u884c","text":"<p>\u5e76\u53d1\u4e0e\u5e76\u884c</p> <p>\u5e76\u53d1\uff1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u67d0\u4e00\u65f6\u95f4\u6bb5\uff0c\u51e0\u4e2a\u7a0b\u5e8f\u5728\u540c\u4e00\u4e2aCPU\u4e0a\u8fd0\u884c\uff0c\u4f46\u5728\u4efb\u610f\u4e00\u4e2a\u65f6\u95f4\u70b9\u4e0a\uff0c\u53ea\u6709\u4e00\u4e2a\u7a0b\u5e8f\u5728CPU\u4e0a\u8fd0\u884c\u3002 \u5f53\u6709\u591a\u4e2a\u7ebf\u7a0b\u65f6\uff0c\u5982\u679c\u7cfb\u7edf\u53ea\u6709\u4e00\u4e2aCPU\uff0c\u90a3\u4e48CPU\u4e0d\u53ef\u80fd\u771f\u6b63\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u7ebf\u7a0b\uff0cCPU\u7684\u8fd0\u884c\u65f6\u95f4\u4f1a\u88ab\u5212\u5206\u6210\u82e5\u5e72\u4e2a\u65f6\u95f4\u6bb5\uff0c\u6bcf\u4e2a\u65f6\u95f4\u6bb5\u5206\u914d\u7ed9\u5404\u4e2a\u7ebf\u7a0b\u53bb\u6267\u884c\uff0c\u4e00\u4e2a\u65f6\u95f4\u6bb5\u91cc\u67d0\u4e2a\u7ebf\u7a0b\u8fd0\u884c\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5904\u4e8e\u6302\u8d77\u72b6\u6001\uff0c\u8fd9\u5c31\u662f\u5e76\u53d1\u3002\u5e76\u53d1\u89e3\u51b3\u4e86\u7a0b\u5e8f\u6392\u961f\u7b49\u5f85\u7684\u95ee\u9898\uff0c\u5982\u679c\u4e00\u4e2a\u7a0b\u5e8f\u53d1\u751f\u963b\u585e\uff0c\u5176\u4ed6\u7a0b\u5e8f\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\u3002</p> <p>\u5e76\u884c\uff1a\u5f53\u64cd\u4f5c\u7cfb\u7edf\u6709\u591a\u4e2aCPU\u65f6\uff0c\u4e00\u4e2aCPU\u5904\u7406A\u7ebf\u7a0b\uff0c\u53e6\u4e00\u4e2aCPU\u5904\u7406B\u7ebf\u7a0b\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u4e92\u76f8\u4e0d\u62a2\u5360CPU\u8d44\u6e90\uff0c\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6210\u4e3a\u5e76\u884c\u3002</p> <p>\u4e24\u8005\u533a\u522b\uff1a</p> <ol> <li>\u5e76\u53d1\u53ea\u662f\u5728\u5b8f\u89c2\u4e0a\u7ed9\u4eba\u611f\u89c9\u6709\u591a\u4e2a\u7a0b\u5e8f\u5728\u540c\u65f6\u8fd0\u884c\uff0c\u4f46\u5728\u5b9e\u9645\u7684\u5355CPU\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7a0b\u5e8f\u5728\u8fd0\u884c\uff0c\u5fae\u89c2\u4e0a\u8fd9\u4e9b\u7a0b\u5e8f\u662f\u5206\u65f6\u4ea4\u66ff\u6267\u884c\u3002</li> <li>\u5728\u591aCPU\u7cfb\u7edf\u4e2d\uff0c\u5c06\u8fd9\u4e9b\u5e76\u53d1\u6267\u884c\u7684\u7a0b\u5e8f\u5206\u914d\u5230\u4e0d\u540c\u7684CPU\u4e0a\u5904\u7406\uff0c\u6bcf\u4e2aCPU\u7528\u6765\u5904\u7406\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u8fd9\u6837\u591a\u4e2a\u7a0b\u5e8f\u4fbf\u53ef\u4ee5\u5b9e\u73b0\u540c\u65f6\u6267\u884c\u3002</li> </ol> <p>\u5e76\u53d1\u7f16\u7a0b\uff1a</p> <pre><code># \u8fdb\u7a0b\uff1a\n    \u4e00\u4e2a\u8fdb\u7a0b\u597d\u6bd4\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u662f \u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d \u3002\n    \u540c\u4e00\u65f6\u523b\u6267\u884c\u7684\u8fdb\u7a0b\u6570\u4e0d\u4f1a\u8d85\u8fc7\u6838\u5fc3\u6570\u3002\u4e0d\u8fc7\u5982\u679c\u95ee\u5355\u6838CPU\u80fd\u5426\u8fd0\u884c\u591a\u8fdb\u7a0b\uff1f\u7b54\u6848\u53c8\u662f\u80af\u5b9a\u7684\u3002\u5355\u6838CPU\u4e5f\u53ef\u4ee5\u8fd0\u884c\u591a\u8fdb\u7a0b\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u662f\u540c\u65f6\u7684\uff0c\u800c\u662f\u6781\u5feb\u5730\u5728\u8fdb\u7a0b\u95f4\u6765\u56de\u5207\u6362\u5b9e\u73b0\u7684\u591a\u8fdb\u7a0b\u3002\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5c31\u7b97\u662f\u5341\u5e74\u524d\u7684\u5355\u6838CPU\u7684\u7535\u8111\uff0c\u4e5f\u53ef\u4ee5\u804aQQ\u7684\u540c\u65f6\u770b\u89c6\u9891\u3002\n\n# \u7ebf\u7a0b\n    \u5982\u679c\u8bf4\u8fdb\u7a0b\u548c\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u5f53\u4e8e\u7a0b\u5e8f\u4e0e\u7a0b\u5e8f\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u90a3\u4e48\u7ebf\u7a0b\u4e0e\u7ebf\u7a0b\u4e4b\u95f4\u5c31\u76f8\u5f53\u4e8e\u7a0b\u5e8f\u5185\u7684\u4efb\u52a1\u548c\u4efb\u52a1\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n    \u6240\u4ee5\u7ebf\u7a0b\u662f\u4f9d\u8d56\u4e8e\u8fdb\u7a0b\u7684\uff0c\u4e5f\u79f0\u4e3a \u300c\u5fae\u8fdb\u7a0b\u300d \u3002\u5b83\u662f \u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u6700\u5c0f\u5355\u5143\u3002\n\n# \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b\u7684\u533a\u522b\n    \u8fdb\u7a0b\u662fCPU\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u7ebf\u7a0b\u662f\u72ec\u7acb\u8fd0\u884c\u548c\u72ec\u7acb\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\uff08CPU\u4e0a\u771f\u6b63\u8fd0\u884c\u7684\u662f\u7ebf\u7a0b\uff09\u3002\n    \u8fdb\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u8d44\u6e90\u7a7a\u95f4\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u5305\u542b\u82e5\u5e72\u4e2a\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u4e0eCPU\u8d44\u6e90\u5206\u914d\u65e0\u5173\uff0c\u591a\u4e2a\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u8d44\u6e90\u3002\n    \u7ebf\u7a0b\u7684\u8c03\u5ea6\u4e0e\u5207\u6362\u6bd4\u8fdb\u7a0b\u5feb\u5f88\u591a\u3002\n    CPU\u5bc6\u96c6\u578b\u4ee3\u7801(\u5404\u79cd\u5faa\u73af\u5904\u7406\u3001\u8ba1\u7b97\u7b49\u7b49)\uff1a\u4f7f\u7528\u591a\u8fdb\u7a0b\u3002IO\u5bc6\u96c6\u578b\u4ee3\u7801(\u6587\u4ef6\u5904\u7406\u3001\u7f51\u7edc\u722c\u866b\u7b49)\uff1a\u4f7f\u7528\u591a\u7ebf\u7a0b\n\n# \u963b\u585e\u4e0e\u975e\u963b\u585e\n    \u963b\u585e\u662f\u6307\u8c03\u7528\u7ebf\u7a0b\u6216\u8005\u8fdb\u7a0b\u88ab\u64cd\u4f5c\u7cfb\u7edf\u6302\u8d77\u3002\n    \u975e\u963b\u585e\u662f\u6307\u8c03\u7528\u7ebf\u7a0b\u6216\u8005\u8fdb\u7a0b\u4e0d\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u6302\u8d77\u3002\n\n# \u540c\u6b65\u4e0e\u5f02\u6b65\n    \u540c\u6b65\u662f\u963b\u585e\u6a21\u5f0f\uff0c\u5f02\u6b65\u662f\u975e\u963b\u585e\u6a21\u5f0f\u3002\n    \u540c\u6b65\u5c31\u662f\u6307\u4e00\u4e2a\u8fdb\u7a0b\u5728\u6267\u884c\u67d0\u4e2a\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u82e5\u8be5\u8bf7\u6c42\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u624d\u80fd\u8fd4\u56de\u4fe1\u606f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fdb\u7a0b\u5c06\u4f1a\u4e00\u76f4\u7b49\u5f85\u4e0b\u53bb\uff0c\u76f4\u5230\u6536\u5230\u8fd4\u56de\u4fe1\u606f\u624d\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\uff1b\n\n    \u5f02\u6b65\u662f\u6307\u8fdb\u7a0b\u4e0d\u9700\u8981\u4e00\u76f4\u7b49\u4e0b\u53bb\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u64cd\u4f5c\uff0c\u4e0d\u7ba1\u5176\u4ed6\u8fdb\u7a0b\u7684\u72b6\u6001\u3002\u5f53\u6709\u6d88\u606f\u8fd4\u56de\u5f0f\u7cfb\u7edf\u4f1a\u901a\u77e5\u8fdb\u7a0b\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u6267\u884c\u7684\u6548\u7387\u3002\n    \u7531\u8c03\u7528\u65b9\u76f2\u76ee\u4e3b\u52a8\u95ee\u8be2\u7684\u65b9\u5f0f\u662f\u540c\u6b65\u8c03\u7528\uff0c\u7531\u88ab\u8c03\u7528\u65b9\u4e3b\u52a8\u901a\u77e5\u8c03\u7528\u65b9\u4efb\u52a1\u5df2\u5b8c\u6210\u7684\u65b9\u5f0f\u662f\u5f02\u6b65\u8c03\u7528\u3002\n\n# \u534f\u7a0b\n    \u534f\u7a0b\uff0c\u53c8\u79f0\u5fae\u7ebf\u7a0b\uff0c\u7ea4\u7a0b\u3002\u82f1\u6587\u540dCoroutine\u3002\u534f\u7a0b\u662f\u4e00\u79cd\u7528\u6237\u6001\u7684\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\u3002\n    \u534f\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u534f\u7a0b\u8c03\u5ea6\u5207\u6362\u65f6\uff0c\u5c06\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u4fdd\u5b58\u5230\u5176\u4ed6\u5730\u65b9\uff0c\u5728\u5207\u56de\u6765\u7684\u65f6\u5019\uff0c\u6062\u590d\u5148\u524d\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u3002\u56e0\u6b64\uff1a\n    \u534f\u7a0b\u80fd\u4fdd\u7559\u4e0a\u4e00\u6b21\u8c03\u7528\u65f6\u7684\u72b6\u6001\uff08\u5373\u6240\u6709\u5c40\u90e8\u72b6\u6001\u7684\u4e00\u4e2a\u7279\u5b9a\u7ec4\u5408\uff09\uff0c\u6bcf\u6b21\u8fc7\u7a0b\u91cd\u5165\u65f6\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fdb\u5165\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u72b6\u6001\uff0c\u6362\u79cd\u8bf4\u6cd5\uff1a\u8fdb\u5165\u4e0a\u4e00\u6b21\u79bb\u5f00\u65f6\u6240\u5904\u903b\u8f91\u6d41\u7684\u4f4d\u7f6e\u3002\n\n    \u534f\u7a0b\u7684\u597d\u5904\uff1a\n    1.\u65e0\u9700\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\n    2.\u65e0\u9700\u539f\u5b50\u64cd\u4f5c\u9501\u5b9a\u53ca\u540c\u6b65\u7684\u5f00\u9500\n    3.\u65b9\u4fbf\u5207\u6362\u63a7\u5236\u6d41\uff0c\u7b80\u5316\u7f16\u7a0b\u6a21\u578b\n    4.\u9ad8\u5e76\u53d1+\u9ad8\u6269\u5c55\u6027+\u4f4e\u6210\u672c\uff1a\u4e00\u4e2aCPU\u652f\u6301\u4e0a\u4e07\u7684\u534f\u7a0b\u90fd\u4e0d\u662f\u95ee\u9898\u3002\u6240\u4ee5\u5f88\u9002\u5408\u7528\u4e8e\u9ad8\u5e76\u53d1\u5904\u7406\u3002\n\n    \u7f3a\u70b9\uff1a\n    1.\u65e0\u6cd5\u5229\u7528\u591a\u6838\u8d44\u6e90\uff1a\u534f\u7a0b\u7684\u672c\u8d28\u662f\u4e2a\u5355\u7ebf\u7a0b,\u5b83\u4e0d\u80fd\u540c\u65f6\u5c06 \u5355\u4e2aCPU \u7684\u591a\u4e2a\u6838\u7528\u4e0a,\u534f\u7a0b\u9700\u8981\u548c\u8fdb\u7a0b\u914d\u5408\u624d\u80fd\u8fd0\u884c\u5728\u591aCPU\u4e0a.\u5f53\u7136\u6211\u4eec\u65e5\u5e38\u6240\u7f16\u5199\u7684\u7edd\u5927\u90e8\u5206\u5e94\u7528\u90fd\u6ca1\u6709\u8fd9\u4e2a\u5fc5\u8981\uff0c\u9664\u975e\u662fcpu\u5bc6\u96c6\u578b\u5e94\u7528\u3002\n    2.\u8fdb\u884c\u963b\u585e\uff08Blocking\uff09\u64cd\u4f5c\uff08\u5982IO\u65f6\uff09\u4f1a\u963b\u585e\u6389\u6574\u4e2a\u7a0b\u5e8f\n\n# CPU\u5bc6\u96c6\u578b\uff08CPU-bound\uff09\n    CPU\u5bc6\u96c6\u578b\u4e5f\u53eb\u8ba1\u7b97\u5bc6\u96c6\u578b\uff0c\u6307\u7684\u662f\u7cfb\u7edf\u7684\u786c\u76d8\u3001\u5185\u5b58\u6027\u80fd\u76f8\u5bf9CPU\u8981\u597d\u5f88\u591a\uff0c\u6b64\u65f6\uff0c\u7cfb\u7edf\u8fd0\u4f5c\u5927\u90e8\u5206\u7684\u72b6\u51b5\u662fCPU Loading 100%\uff0cCPU\u8981\u8bfb/\u5199I/O(\u786c\u76d8/\u5185\u5b58)\uff0cI/O\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5c31\u53ef\u4ee5\u5b8c\u6210\uff0c\u800cCPU\u8fd8\u6709\u8bb8\u591a\u8fd0\u7b97\u8981\u5904\u7406\uff0cCPU Loading\u5f88\u9ad8\u3002\n    \u5728\u591a\u91cd\u7a0b\u5e8f\u7cfb\u7edf\u4e2d\uff0c\u5927\u90e8\u4efd\u65f6\u95f4\u7528\u6765\u505a\u8ba1\u7b97\u3001\u903b\u8f91\u5224\u65ad\u7b49CPU\u52a8\u4f5c\u7684\u7a0b\u5e8f\u79f0\u4e4bCPU bound\u3002\u4f8b\u5982\u4e00\u4e2a\u8ba1\u7b97\u5706\u5468\u7387\u81f3\u5c0f\u6570\u70b9\u4e00\u5343\u4f4d\u4ee5\u4e0b\u7684\u7a0b\u5e8f\uff0c\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u5f53\u4e2d\u7edd\u5927\u90e8\u4efd\u65f6\u95f4\u7528\u5728\u4e09\u89d2\u51fd\u6570\u548c\u5f00\u6839\u53f7\u7684\u8ba1\u7b97\uff0c\u4fbf\u662f\u5c5e\u4e8eCPU bound\u7684\u7a0b\u5e8f\u3002\n    CPU bound\u7684\u7a0b\u5e8f\u4e00\u822c\u800c\u8a00CPU\u5360\u7528\u7387\u76f8\u5f53\u9ad8\u3002\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u4efb\u52a1\u672c\u8eab\u4e0d\u592a\u9700\u8981\u8bbf\u95eeI/O\u8bbe\u5907\uff0c\u4e5f\u53ef\u80fd\u662f\u56e0\u4e3a\u7a0b\u5e8f\u662f\u591a\u7ebf\u7a0b\u5b9e\u73b0\u56e0\u6b64\u5c4f\u853d\u6389\u4e86\u7b49\u5f85I/O\u7684\u65f6\u95f4\u3002\n\n# IO\u5bc6\u96c6\u578b\uff08I/O bound\uff09\n    IO\u5bc6\u96c6\u578b\u6307\u7684\u662f\u7cfb\u7edf\u7684CPU\u6027\u80fd\u76f8\u5bf9\u786c\u76d8\u3001\u5185\u5b58\u8981\u597d\u5f88\u591a\uff0c\u6b64\u65f6\uff0c\u7cfb\u7edf\u8fd0\u4f5c\uff0c\u5927\u90e8\u5206\u7684\u72b6\u51b5\u662fCPU\u5728\u7b49I/O (\u786c\u76d8/\u5185\u5b58) \u7684\u8bfb/\u5199\u64cd\u4f5c\uff0c\u6b64\u65f6CPU Loading\u5e76\u4e0d\u9ad8\u3002\n    I/O bound\u7684\u7a0b\u5e8f\u4e00\u822c\u5728\u8fbe\u5230\u6027\u80fd\u6781\u9650\u65f6\uff0cCPU\u5360\u7528\u7387\u4ecd\u7136\u8f83\u4f4e\u3002\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u4efb\u52a1\u672c\u8eab\u9700\u8981\u5927\u91cfI/O\u64cd\u4f5c\uff0c\u800cpipeline\u505a\u5f97\u4e0d\u662f\u5f88\u597d\uff0c\u6ca1\u6709\u5145\u5206\u5229\u7528\u5904\u7406\u5668\u80fd\u529b\u3002\n</code></pre> <p> </p> <p> </p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#_2","title":"\u4e8c\u3001\u591a\u7ebf\u7a0b","text":"<p>\u6bcf\u4e2a\u7a0b\u5e8f\u81f3\u5c11\u6709\u4e00\u4e2a\u8fdb\u7a0b\uff1b</p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff1b</p> <p>python\u8bed\u8a00\u4e2d\uff0c\u4e00\u4e2acpu\u6838\u5fc3\u540c\u4e00\u65f6\u523b\u6700\u591a\u53ea\u80fd\u8c03\u5ea6\u4e00\u4e2a\u7ebf\u7a0b\u5728\u5de5\u4f5c\uff08\u5168\u5c40\u89e3\u91ca\u5668\u9501-GIL\uff09\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#1","title":"1 \u5e94\u7528\u573a\u666f","text":"<p>\u591a\u7ebf\u7a0b\u9002\u5408\u4f7f\u7528\u5728IO\u5bc6\u96c6\u578b\u7a0b\u5e8f\u4e2d\uff0c\u6bd4\u5982\u7f51\u7edc\u8bf7\u6c42\u3001\u6587\u4ef6\u8bfb\u5199\u7b49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u573a\u666f\u7ebf\u7a0b\u5728\u9047\u5230 I/O \u64cd\u4f5c\u65f6\u4f1a\u91ca\u653e GIL</p> <ul> <li>\u7f51\u7edc\u8bf7\u6c42\uff1a</li> <li>\u722c\u866b\u7a0b\u5e8f\uff1a\u5411\u6210\u767e\u4e0a\u5343\u4e2a\u7f51\u5740\u53d1\u9001 HTTP \u8bf7\u6c42\uff0c\u7136\u540e\u7b49\u5f85\u54cd\u5e94\u3002\u7b49\u5f85\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u7684\u65f6\u95f4\u8fdc\u5927\u4e8e\u89e3\u6790 URL \u548c\u6784\u5efa\u8bf7\u6c42\u7684\u65f6\u95f4\u3002</li> <li>\u8c03\u7528 Web API\uff1a\u4f8b\u5982\u540c\u65f6\u8c03\u7528\u591a\u4e2a\u7b2c\u4e09\u65b9\u670d\u52a1\u7684 API \u6765\u805a\u5408\u6570\u636e\u3002</li> <li>\u5fae\u670d\u52a1\u95f4\u901a\u4fe1\uff1a\u4e00\u4e2a\u670d\u52a1\u9700\u8981\u540c\u65f6\u5411\u591a\u4e2a\u5176\u4ed6\u670d\u52a1\u8bf7\u6c42\u6570\u636e\u3002</li> <li>\u6587\u4ef6\u8bfb\u5199\uff1a</li> <li>\u5904\u7406\u5927\u91cf\u6587\u4ef6\uff1a\u4f8b\u5982\uff0c\u9700\u8981\u8bfb\u53d6\u4e0a\u5343\u4e2a\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u5206\u6790\uff0c\u6216\u8005\u5c06\u5927\u91cf\u6570\u636e\u5199\u5165\u4e0d\u540c\u7684\u6587\u4ef6\u3002\u4e3b\u8981\u7684\u8017\u65f6\u5728\u4e8e\u78c1\u76d8\u7684\u8bfb\u5199\u901f\u5ea6\uff0c\u800c\u4e0d\u662f CPU \u5904\u7406\u6570\u636e\u7684\u901f\u5ea6\u3002</li> <li>\u6570\u636e\u5e93\u64cd\u4f5c\uff1a</li> <li>\u6267\u884c\u5927\u91cf\u6570\u636e\u5e93\u67e5\u8be2\uff0c\u7279\u522b\u662f\u5f53\u6570\u636e\u5e93\u5728\u53e6\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u65f6\uff0c\u7f51\u7edc\u5ef6\u8fdf\u548c\u6570\u636e\u5e93\u672c\u8eab\u7684\u5904\u7406\u65f6\u95f4\u6210\u4e3a\u4e86\u74f6\u9888\u3002</li> </ul>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#2","title":"2 \u521b\u5efa\u65b9\u5f0f","text":""},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#21","title":"2.1 \u51fd\u6570\u521b\u5efa\u65b9\u5f0f","text":"<pre><code># _*_ coding: utf-8 _*_\nimport threading\n\ntotal = 0\n\n\ndef func1(num):\n    global total\n    for i in range(num):\n        total += i\n\n\nt1 = threading.Thread(target=func1, args=(1000000,))\nt1.start()\n\nprint(total)\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#22","title":"2.2 \u7c7b\u7ee7\u627f\u521b\u5efa\u65b9\u5f0f","text":"<pre><code># _*_ coding: utf-8 _*_\nfrom threading import Thread\n\n\nclass MyThread(Thread):\n    \"\"\"\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u7c7b\"\"\"\n\n    def __init__(self, num):\n        super().__init__()\n        self.total = 0\n        self.num = num\n\n    def run(self) -&gt; None:\n        \"\"\"start\u65b9\u6cd5\u81ea\u52a8\u8fd0\u884c\u7684\u51fd\u6570\"\"\"\n        for i in range(self.num):\n            self.total += i\n        print(self.total)\n\n\nthread1 = MyThread(100000)\nthread2 = MyThread(10000)\nthread2.start()\nthread2.join()\nthread1.start()\nthread1.join()\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#3","title":"3 \u7279\u6027","text":""},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#31-start","title":"3.1 start \u51fd\u6570","text":"<p>\u7ebf\u7a0b\u51c6\u5907\u5c31\u7eea\uff0c\u7b49\u5f85cpu\u7684\u8c03\u5ea6\uff0c\u5177\u4f53\u8c03\u5ea6\u65f6\u95f4\u7531cpu\u51b3\u5b9a\uff0c\u4f60\u6bd4\u5982\u518d\u65b9\u5f0f\u4e00\u521b\u5efa\u7ebf\u7a0b\u4e2d\uff0c\u6bcf\u6b21\u6253\u5370\u7684total\u4e0d\u4e00\u5b9a\uff01\u56e0\u4e3a\u4e0d\u786e\u5b9a\u8fd0\u884c\u5230\u6253\u5370\u7684\u4ee3\u7801\u884c\u7684\u65f6\u5019\uff0c\u7ebf\u7a0b\u8fd0\u884c\u5230\u4e86\u54ea\u91cc\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#32-join","title":"3.2 join() \u51fd\u6570","text":"<p>\u4e3b\u7ebf\u7a0b\u4f1a\u7b49\u5f85\u5f53\u524d\u5b50\u7ebf\u7a0b\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u518d\u5411\u4e0b\u6267\u884c\uff1b\u5426\u5219\u4e3b\u7ebf\u7a0b\u4e00\u65e6\u6267\u884c\uff0c\u542f\u52a8\u4e86\u5b50\u7ebf\u7a0b\uff0c\u4e0d\u4f1a\u7b49\u5f85\u5b50\u7ebf\u7a0b\u7ed3\u675f\u800c\u81ea\u5df1\u5c31\u5148\u7ed3\u675f\u4e86\uff01</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#33-setdaemo","title":"3.3 setDaemo\u51fd\u6570","text":"<p>\u5b88\u62a4\u7ebf\u7a0b\uff0c\u5f53\u4e3b\u7ebf\u7a0b\u7ed3\u675f\u4ee5\u540e\uff0c\u4e0d\u4f1a\u7b49\u5f85\u5b50\u7ebf\u7a0b\u7ed3\u675f\uff0c\u800c\u662f\u4f1a\u5c06\u5168\u90e8\u5b50\u7ebf\u7a0b\u7acb\u5373\u7ed3\u675f\u3002</p> <pre><code>thread = threading.Thread(target=func,args=(a,b,))\nthread.daemon = True \u6216\u8005 thread.setDaemon(True)  # \u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b\nthread.name = True \u6216\u8005 thread.setName(True)  # \u8bbe\u7f6e\u540d\u79f0\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#4","title":"4 \u7ebf\u7a0b\u9501","text":"<p>\u7ebf\u7a0b\u9501\u5206\u4e3a\uff1aLock\u548cRLock</p> <p>\u4e24\u4e2a\u7ebf\u7a0b\u542f\u52a8\uff0c\u867d\u8bf4\u4fdd\u8bc1\u4e3b\u7ebf\u7a0b\u7b49\u5f85\u5b50\u7ebf\u7a0b\u8fd0\u884c\u5b8c\u6bd5\u540e\u518d\u7ee7\u7eed\uff0c\u4f46\u4e24\u4e2a\u5b50\u7ebf\u7a0b\u4e4b\u95f4\u5b58\u5728\u64cd\u4f5c\u540c\u4e00\u4e2a\u53d8\u91cf\u7684\u60c5\u51b5\uff0c\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u4f7f\u7528\u540c\u4e00\u628a\u9501\uff0c\u8c01\u5148\u83b7\u5f97\u9501\u7ebf\u8c01\u5c31\u5148\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u624d\u5230\u53e6\u5916\u4e00\u4e2a\u3002</p> <pre><code>import time\nfrom threading import Thread, RLock\n\ntotal = 0\nrlock = RLock()\n\n\ndef func1():\n    rlock.acquire()\n    global total\n    for i in range(100000):\n        total += i\n    rlock.release()\n\n\ndef func2():\n    with rlock:\n        global total\n        for i in range(100000):\n            total -= i\n\n\nt1 = Thread(target=func1)\nt2 = Thread(target=func2)\nt1.start()  # t1\u7ebf\u7a0b\u542f\u52a8\nt2.start()  # t2\u7ebf\u7a0b\u542f\u52a8\n# t1.join()  # t1\u6267\u884c\u5b8c\u4e3b\u7ebf\u7a0b\u624d\u7ee7\u7eed\u5f80\u540e\n# t2.join()  # t2\u6267\u884c\u5b8c\u4e3b\u7ebf\u7a0b\u624d\u7ee7\u7eed\u5f80\u540e\n\n# \u4e0d\u4f7f\u7528join\u65b9\u5f0f\uff0c\u4f7f\u7528\u9501\u7684\u65b9\u5f0f\u8fd0\u884c\u5168\u90e8\uff0c\u6b64\u5904sleep\u662f\u4e3a\u4e86\u7b49\u5b50\u7ebf\u7a0b\u8fd0\u884c\u5b8c\u6210\ntime.sleep(1)\nprint(total)\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#5","title":"5 \u7ebf\u7a0b\u6c60","text":""},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#_3","title":"\u4e09\u3001\u591a\u8fdb\u7a0b","text":"<p>Python \u7684 GIL \u4f7f\u5f97\u591a\u7ebf\u7a0b\u65e0\u6cd5\u5229\u7528\u591a\u6838 CPU \u8fdb\u884c\u5e76\u884c\u8ba1\u7b97\u3002\u591a\u8fdb\u7a0b\u901a\u8fc7\u521b\u5efa\u591a\u4e2a\u72ec\u7acb\u7684 Python \u89e3\u91ca\u5668\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684 GIL\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u5e76\u884c\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5728\u591a\u6838 CPU \u4e0a\uff0c\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u540c\u65f6\u6267\u884c Python \u4ee3\u7801\uff0c\u5145\u5206\u5229\u7528\u8ba1\u7b97\u8d44\u6e90\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#1_1","title":"1 \u5e94\u7528\u573a\u666f","text":"<p>\u591a\u8fdb\u7a0b\u9002\u5408\u4f7f\u7528\u5728CPU\u5bc6\u96c6\u578b\u8ba1\u7b97\u7a0b\u5e8f\u4e2d\uff0c\u6bd4\u52a0\u5bc6\u3001\u538b\u7f29\u3001\u6570\u636e\u5904\u7406\u7b49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u573a\u666f\u7ebf\u7a0b\u5728\u9047\u5230 I/O \u64cd\u4f5c\u65f6\u4f1a\u91ca\u653e GIL</p> <p>\u8fd9\u662f\u591a\u8fdb\u7a0b\u6700\u7ecf\u5178\u3001\u6700\u65e0\u53ef\u66ff\u4ee3\u7684\u5e94\u7528\u573a\u666f\u3002\u5f53\u4efb\u52a1\u9700\u8981\u5927\u91cf\u6570\u5b66\u8fd0\u7b97\u3001\u903b\u8f91\u5224\u65ad\uff0c\u6d88\u8017\u5927\u91cf CPU \u5468\u671f\u65f6\uff0c\u5c31\u5fc5\u987b\u4f7f\u7528\u591a\u8fdb\u7a0b\u3002</p> <ul> <li>\u79d1\u5b66\u8ba1\u7b97\u4e0e\u6570\u636e\u5904\u7406\uff1a</li> <li>\u6570\u503c\u6a21\u62df\uff1a\u4f8b\u5982\u8499\u7279\u5361\u6d1b\u6a21\u62df\uff0c\u9700\u8981\u6267\u884c\u4ebf\u4e07\u6b21\u968f\u673a\u8ba1\u7b97\u3002</li> <li>\u56fe\u50cf/\u89c6\u9891\u5904\u7406\uff1a\u5bf9\u5927\u91cf\u56fe\u7247\u6216\u89c6\u9891\u5e27\u8fdb\u884c\u6ee4\u955c\u3001\u7f29\u653e\u3001\u7279\u5f81\u63d0\u53d6\u7b49\u64cd\u4f5c\uff08\u4f8b\u5982\u4f7f\u7528 <code>numpy</code>, <code>opencv</code> \u8fdb\u884c\u7684\u8ba1\u7b97\uff09\u3002</li> <li>\u6570\u636e\u8f6c\u6362\u4e0e\u805a\u5408\uff1a\u5bf9\u5927\u578b\u6570\u636e\u96c6\uff08\u5982 Pandas DataFrame\uff09\u8fdb\u884c\u590d\u6742\u7684\u3001\u65e0\u6cd5\u5411\u91cf\u5316\u7684\u9010\u884c\u8ba1\u7b97\u3002</li> <li>\u673a\u5668\u5b66\u4e60\u4e0e\u6a21\u578b\u8bad\u7ec3\uff1a</li> <li>\u8d85\u53c2\u6570\u641c\u7d22\uff1a\u540c\u65f6\u8bad\u7ec3\u591a\u4e2a\u5177\u6709\u4e0d\u540c\u8d85\u53c2\u6570\u7684\u6a21\u578b\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u72ec\u7acb\u8fd0\u884c\u4e00\u4e2a\u8bad\u7ec3\u4efb\u52a1\u3002</li> <li>\u96c6\u6210\u5b66\u4e60\uff1a\u5e76\u884c\u8bad\u7ec3\u591a\u4e2a\u5f31\u5b66\u4e60\u5668\uff0c\u5982\u968f\u673a\u68ee\u6797\u4e2d\u7684\u4e0d\u540c\u51b3\u7b56\u6811\u3002</li> <li>\u52a0\u5bc6\u4e0e\u538b\u7f29\uff1a</li> <li>\u52a0\u5bc6\u6216\u89e3\u5bc6\u5927\u91cf\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528\u9ad8\u538b\u7f29\u7387\u7b97\u6cd5\uff08\u5982 LZMA\uff09\u538b\u7f29\u591a\u4e2a\u5927\u578b\u6587\u4ef6\u3002</li> </ul>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#2_1","title":"2 \u521b\u5efa\u65b9\u5f0f","text":"<pre><code># _*_ coding: utf-8 _*_\nfrom multiprocessing import Process\n\ndef fun1():\n    time.sleep(3)\n\n\ndef fun2():\n    time.sleep(3)\n\n\nif __name__ == '__main__':\n    p1 = Process(target=fun1)\n    p1.start()\n    p1.join()\n    p2 = Process(target=fun2)\n    p2.start()\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#3_1","title":"3 \u591a\u8fdb\u7a0b\u5171\u4eab\u53d8\u91cf","text":"<p>\u591a\u8fdb\u7a0b\u9ed8\u8ba4\u8fdb\u7a0b\u95f4\u662f\u5185\u5b58\u9694\u79bb\u7684\uff01</p> <p>\u5728 Python \u591a\u8fdb\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5185\u5b58\u7a7a\u95f4\u3002\u5f53\u4f60\u521b\u5efa\u65b0\u8fdb\u7a0b\u65f6\uff0c\u5e76\u4e0d\u662f\u5728\u5171\u4eab\u7684\u5185\u5b58\u4e2d\u521b\u5efa\u7ebf\u7a0b\uff0c\u800c\u662f\u590d\u5236\u4e86\u7236\u8fdb\u7a0b\u7684\u6574\u4e2a\u5185\u5b58\u72b6\u6001\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#31","title":"3.1 \u4e0d\u4f7f\u7528\u5171\u4eab\u53d8\u91cf\u4f8b\u5b50\uff08\u9ed8\u8ba4\u72b6\u6001\uff09","text":"<pre><code># _*_ coding: utf-8 _*_\nimport time\nfrom multiprocessing import Process\nfrom io import StringIO\n\nvar = \"0\"\nbio = StringIO()\n\n\ndef fun1():\n    global var, bio\n    print(var)\n    var = \"111\"\n    print(var)\n    bio.write(var)\n    time.sleep(3)\n\n\ndef fun2():\n    global var, bio\n    print(bio.getvalue())\n    var = \"222\"\n    print(var)\n\n\nif __name__ == '__main__':\n    p1 = Process(target=fun1)\n    p1.start()\n    p1.join()\n    p2 = Process(target=fun2)\n    p2.start()\n</code></pre> <p>\u8fd9\u4e2a\u4f8b\u5b50\u6d41\u7a0b\uff1a</p> <pre><code>\u4e3b\u8fdb\u7a0b (\u521d\u59cb\u72b6\u6001)\n\u251c\u2500\u2500 var = \"0\"\n\u251c\u2500\u2500 bio = StringIO()\n\u2502\n\u251c\u2500\u2500 p1\u8fdb\u7a0b (\u590d\u5236\u4e3b\u8fdb\u7a0b\u521d\u59cb\u72b6\u6001)\n\u2502   \u251c\u2500\u2500 var = \"0\" \u2192 \u4fee\u6539\u4e3a \"111\"\n\u2502   \u2514\u2500\u2500 bio = StringIO() \u2192 \u5199\u5165 \"111\"\n\u2502   (\u8fdb\u7a0b\u7ed3\u675f\uff0c\u6240\u6709\u4fee\u6539\u4e22\u5931)\n\u2502\n\u2514\u2500\u2500 p2\u8fdb\u7a0b (\u590d\u5236\u4e3b\u8fdb\u7a0b\u521d\u59cb\u72b6\u6001)\n    \u251c\u2500\u2500 var = \"0\" \u2192 \u4fee\u6539\u4e3a \"222\"\n    \u2514\u2500\u2500 bio = StringIO() \u2192 \u4ecd\u7136\u662f\u7a7a\u7684\n    (\u8fdb\u7a0b\u7ed3\u675f\uff0c\u6240\u6709\u4fee\u6539\u4e22\u5931)\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#32","title":"3.2 \u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1","text":"<p>\u5728\u8fdb\u7a0b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u5fc5\u987b\u4f7f\u7528\u591a\u8fdb\u7a0b\u63d0\u4f9b\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff08IPC\uff09 \u673a\u5236</p> <ul> <li>\u65b9\u68481\uff1a\u4f7f\u7528 <code>multiprocessing.Value</code> \u548c <code>multiprocessing.Array</code></li> </ul> <pre><code>import time\nfrom multiprocessing import Process, Value, Array\n\n# \u521b\u5efa\u53ef\u5728\u8fdb\u7a0b\u95f4\u5171\u4eab\u7684\u53d8\u91cf\nvar = Value('i', 0)  # 'i' \u8868\u793a\u6574\u6570\u7c7b\u578b\n# \u6216\u8005\u5171\u4eab\u5b57\u7b26\u4e32\u53ef\u4ee5\u4f7f\u7528 Array\n\ndef fun1():\n    var.value = 111\n    print(f\"fun1: var = {var.value}\")\n\ndef fun2():\n    print(f\"fun2: var = {var.value}\")\n    var.value = 222\n\nif __name__ == '__main__':\n    p1 = Process(target=fun1)\n    p1.start()\n    p1.join()\n\n    p2 = Process(target=fun2)\n    p2.start()\n    p2.join()\n\n    print(f\"\u6700\u7ec8: var = {var.value}\")\n</code></pre> <ul> <li>\u65b9\u68482\uff1a\u4f7f\u7528 <code>multiprocessing.Manager</code></li> </ul> <pre><code>import time\nfrom multiprocessing import Process, Manager\n\ndef fun1(shared_dict):\n    shared_dict['var'] = \"111\"\n    print(f\"fun1: var = {shared_dict['var']}\")\n\ndef fun2(shared_dict):\n    print(f\"fun2: var = {shared_dict['var']}\")\n    shared_dict['var'] = \"222\"\n\nif __name__ == '__main__':\n    with Manager() as manager:\n        shared_dict = manager.dict({'var': '0'})\n\n        p1 = Process(target=fun1, args=(shared_dict,))\n        p1.start()\n        p1.join()\n\n        p2 = Process(target=fun2, args=(shared_dict,))\n        p2.start()\n        p2.join()\n\n        print(f\"\u6700\u7ec8: var = {shared_dict['var']}\")\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#33","title":"3.3 \u5171\u4eab\u53d8\u91cf\u652f\u6301\u66f4\u591a\u7684\u503c\u7c7b\u578b","text":"<p>\u5b66\u4e60\u94fe\u63a5\uff1ahttps://www.cnblogs.com/junyuhuang/p/5539599.html</p>"},{"location":"mds/Python-Note/Python-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#_4","title":"\u56db\u3001\u534f\u7a0b","text":"<p>\u534f\u7a0b\uff08Coroutine\uff09\u662f\u4e00\u79cd\u6bd4\u7ebf\u7a0b\u66f4\u52a0\u8f7b\u91cf\u7ea7\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a \"\u7528\u6237\u6001\u7684\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\" \u6216 \"\u53ef\u6682\u505c\u548c\u6062\u590d\u7684\u51fd\u6570\"\u3002</p> <p>\u6838\u5fc3\u7279\u5f81\uff1a</p> <ul> <li>\u534f\u4f5c\u5f0f\u8c03\u5ea6\uff1a\u7531\u7a0b\u5e8f\u5458\u5728\u4ee3\u7801\u4e2d\u663e\u5f0f\u63a7\u5236\u5207\u6362\u70b9\uff08<code>await</code>\uff09</li> <li>\u6781\u5176\u8f7b\u91cf\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u5185\u53ef\u8fd0\u884c\u6570\u4e07\u4e2a\u534f\u7a0b</li> <li>\u65e0\u5207\u6362\u5f00\u9500\uff1a\u5728\u7528\u6237\u6001\u8fdb\u884c\u8c03\u5ea6\uff0c\u4e0d\u6d89\u53ca\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838</li> </ul> <p>\u5173\u4e8e\u534f\u7a0b\uff0c\u5c5e\u4e8e\u5f02\u6b65\u7f16\u7a0b\u8303\u7574\uff0c\u53ef\u4ee5\u67e5\u770b\u5f02\u6b65\u7f16\u7a0b\u6587\u6863\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/","title":"\u534f\u7a0b &amp; asyncio &amp; \u5f02\u6b65\u7f16\u7a0b","text":"<p>\u4e3a\u4ec0\u4e48\u8981\u5b66\u4e60\uff1f --&gt; \u63d0\u5347\u6027\u80fd</p> <ul> <li>\u5f02\u6b65\u975e\u963b\u585e\u3001asyncio</li> <li>\u5f02\u6b65\u6846\u67b6\uff1atornado\u3001fastapi\u3001django&gt;=3.x\uff08asgi\u5e94\u7528\uff09\u3001aiohttp</li> </ul> <p>\u5b66\u4e60\u5185\u5bb9\uff1a</p> <ul> <li>\u534f\u7a0b</li> <li>\u5f02\u6b65\u7f16\u7a0b\u6a21\u5757asyncio</li> <li>\u5b9e\u6218\u6848\u4f8b</li> </ul>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#_1","title":"\u4e00\u3001\u534f\u7a0b","text":"<p>\u534f\u7a0b(Coroutine)\u4e0d\u662f\u8ba1\u7b97\u673a\u63d0\u4f9b\u7684\uff0c\u662f\u4e00\u79cd\u4eba\u4e3a\u63cf\u8ff0\u7684\u6280\u672f\uff1b\u534f\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u88ab\u79f0\u4e3a\u5fae\u7ebf\u7a0b\uff0c\u662f\u4e00\u79cd\u7528\u6237\u6001\u5185\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u6280\u672f\u3002</p> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u5176\u5b9e\u5c31\u662f\u901a\u8fc7\u4e00\u4e2a\u7ebf\u7a0b\u5b9e\u73b0\u4ee3\u7801\u5757\u76f8\u4e92\u5207\u6362\u6267\u884c\u3002\u4f8b\u5982\uff1a</p> <pre><code>def func1():\n    print(1)\n    ...\n    print(2)\n\ndef func2():\n    print(3)\n    ...\n    print(4)\n\n\nfunc1()\nfunc2()\n</code></pre> <p>\u534f\u7a0b\u5177\u4f53\u5b9e\u73b0\u6a21\u5757\uff1a</p> <ul> <li>greenlet\uff08\u65e9\u671f\u6a21\u5757\uff0c\u9002\u5408\u7cbe\u786e\u63a7\u5236\u534f\u7a0b\u6267\u884c\u6d41\u7a0b\u573a\u666f\uff0c\u662f\u6784\u5efa\u66f4\u9ad8\u7ea7\u522b\u5f02\u6b65\u6846\u67b6\u7684\u57fa\u7840\uff09</li> <li>yield\u5173\u952e\u5b57\uff08python&lt;3.4\uff09</li> <li>asyncio\u88c5\u9970\u5668\uff08python&gt;=3.4\uff09</li> <li>async/await\u5173\u952e\u5b57\uff08python&gt;=3.5 -- \u7248\u672c3.8\u53ca\u4e4b\u540e\u63a8\u8350\u5199\u6cd5\uff09</li> </ul>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#1-greenlet","title":"1 greenlet\u534f\u7a0b","text":"<pre><code>import greenlet\n\n\ndef test1():\n    print(\"12\")\n    gr2.switch()  # \u5207\u6362\u5230 gr2\n    print(\"34\")\n    gr2.switch()\n\n\ndef test2():\n    print(\"56\")\n    gr1.switch()  # \u5207\u6362\u56de gr1\n    print(\"78\")\n\n\ngr1 = greenlet.greenlet(test1)\ngr2 = greenlet.greenlet(test2)\ngr1.switch()\n\n# \u6267\u884c\u7ed3\u679c\uff1a\n# 12\n# 56\n# 34\n# 78\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#2-yield","title":"2 yield\u5173\u952e\u5b57\u534f\u7a0b","text":"<pre><code>def func1():\n    yield 1\n    yield from func2()  # \u6267\u884c\u5b8c\u6210\u4e4b\u540e\u518d\u7ee7\u7eed\u540e\u9762\u903b\u8f91\n    yield 2\n\n\ndef func2():\n    yield 3\n    yield 4\n\n\nf1 = func1()\nfor item in f1:\n    print(item)\n\n# \u6267\u884c\u7ed3\u679c\uff1a\n# 1\n# 3\n# 4\n# 2\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#3-asyncio","title":"3 asyncio\u88c5\u9970\u5668","text":"<pre><code>import asyncio\n\n\n@asyncio.coroutine\ndef func1():\n    print(1)\n    yield from asyncio.sleep(8)\n    print(2)\n\n\n@asyncio.coroutine\ndef func2():\n    print(3)\n    yield from asyncio.sleep(2)\n    print(4)\n\n\ntasks = [\n    asyncio.ensure_future(func1()),\n    asyncio.ensure_future(func2())\n]\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(asyncio.wait(tasks))\n\n# \u8fd0\u884c\u7ed3\u679c\uff1a\n# 1\n# 3\n# 4\n# 2\n</code></pre> <p>asyncio\u5389\u5bb3\u4e4b\u5904\uff1a\u9047\u5230IO\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u4f1a\u81ea\u52a8\u5207\u6362\u5176\u4ed6\u4efb\u52a1\u6267\u884c\uff0c\u800c\u672c\u8eab\u7684\u64cd\u4f5c\u88ab\u76d1\u542c\uff0c\u6709\u8fd4\u56de\u5219\u7ee7\u7eed\u6267\u884c\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#4-asyncawait","title":"4 async/await\u5173\u952e\u5b57\uff08\u63a8\u8350\uff09","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#41-python37","title":"4.1 python&lt;3.7","text":"<pre><code>import asyncio\n\n\nasync def func1():\n    print(1)\n    await asyncio.sleep(8)\n    print(2)\n\n\nasync def func2():\n    print(3)\n    await asyncio.sleep(2)\n    print(4)\n\n\ntasks = [\n    asyncio.ensure_future(func1()),\n    asyncio.ensure_future(func2())\n]\n\n# python&lt;3.7\u5199\u6cd5\nloop = asyncio.get_event_loop()\nloop.run_until_complete(asyncio.wait(tasks))\n# \u6216\n# loop = asyncio.get_event_loop_policy().get_event_loop()\n# loop.run_until_complete(asyncio.wait(tasks))\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#42-python37","title":"4.2 python&gt;=3.7\uff08\u66f4\u73b0\u4ee3\u7684\u5199\u6cd5\uff09","text":"<pre><code>import asyncio\n\n\nasync def func1():\n    print(1)\n    await asyncio.sleep(8)\n    print(2)\n\n\nasync def func2():\n    print(3)\n    await asyncio.sleep(2)\n    print(4)\n\n\nasync def main():\n    tasks = [\n        asyncio.create_task(func1()),\n        asyncio.create_task(func2())\n    ]\n    # await asyncio.wait(tasks)\n    await asyncio.gather(*tasks)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#43-asynciowait-asynciogather","title":"4.3 asyncio.wait \u4e0e asyncio.gather\u533a\u522b\u5bf9\u6bd4","text":"\u65b9\u6cd5 \u4f5c\u7528\u603b\u7ed3 <code>asyncio.gather()</code> \u7b49\u5f85\u6240\u6709\u4efb\u52a1\u5b8c\u6210\uff0c\u6536\u96c6\u8fd4\u56de\u503c <code>asyncio.wait()</code> \u7b49\u5f85\u4efb\u52a1\uff0c\u63d0\u4f9b\u66f4\u7075\u6d3b\u7684\u63a7\u5236 <pre><code>results = await asyncio.gather(task1(), task2())\nprint(results)  # =&gt; [task1\u7684\u8fd4\u56de\u503c, task2\u7684\u8fd4\u56de\u503c]\n\n# \u5982\u679c\u6709\u4e00\u4e2a\u4efb\u52a1\u629b\u5f02\u5e38\uff0cgather() \u4f1a\u7acb\u523b\u4f20\u64ad\u5f02\u5e38\n</code></pre> <pre><code>done, pending = await asyncio.wait(tasks)\n\n# \u4f60\u53ef\u4ee5\u68c0\u67e5\u54ea\u4e9b\u5b8c\u6210\u4e86\uff0c\u54ea\u4e9b\u8fd8\u6ca1\u5b8c\u6210\uff0c\u9002\u5408\u66f4\u590d\u6742\u7684\u63a7\u5236\u903b\u8f91\u3002\n# \u9ed8\u8ba4\u662f\u7b49\u5230\u6240\u6709\u4efb\u52a1\u5b8c\u6210\uff0c\u4f46\u4f60\u4e5f\u53ef\u4ee5\u52a0\u53c2\u6570 return_when=asyncio.FIRST_COMPLETED \u7b49\u63a7\u5236\u3002\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>import asyncio\n\nasync def task(name, delay):\n    await asyncio.sleep(delay)\n    return f'{name} done'\n\nasync def main():\n    tasks = [task(\"A\", 2), task(\"B\", 1)]\n\n    # gather\n    res = await asyncio.gather(*tasks)\n    print(\"gather:\", res)  # ['A done', 'B done']\n\n    # wait\n    tasks2 = [asyncio.create_task(task(\"C\", 2)), asyncio.create_task(task(\"D\", 1))]\n    done, pending = await asyncio.wait(tasks2)\n    for d in done:\n        print(\"wait:\", await d)\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#5","title":"5. \u603b\u7ed3\u534f\u7a0b\u7684\u610f\u4e49","text":"<p>\u534f\u7a0b\u6280\u672f\u7684\u610f\u4e49\uff1a\u5355\u4e2a\u7ebf\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u89c1IO\u64cd\u4f5c\u9700\u8981\u7b49\u5f85\u65f6\uff0c\u53ef\u4ee5\u5229\u7528\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u53ef\u4ee5\u540c\u65f6\u53bb\u5904\u7406\u5176\u4ed6\u4efb\u52a1\uff1b\u7531\u6b64\u63d0\u9ad8\u7a0b\u5e8f\u6267\u884c\u7684\u6027\u80fd\uff0c\u51cf\u5c11\u6267\u884c\u65f6\u95f4\u3002</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#aiohttp-","title":"\u4e8c\u3001aiohttp-\u9ad8\u6027\u80fd\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757-\u793a\u4f8b","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#1","title":"1 \u7b80\u5355\u7684\u4e0b\u8f7d\u6587\u4ef6\u793a\u4f8b","text":"<pre><code>import asyncio\nimport logging\nfrom urllib.parse import unquote, urlparse\n\nfrom aiohttp import ClientSession\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\nlogger.addHandler(logging.StreamHandler())\nhandler = logging.FileHandler(\"log.txt\", encoding=\"utf-8\")\nformatter = logging.Formatter(' - %(asctime)s - %(levelname)s - %(message)s')\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)\n\n\nasync def fetch(session, url):\n    url = unquote(url)\n    print(\"\u53d1\u9001\u8bf7\u6c42\uff1a\", url)\n    async with session.get(url, verify_ssl=False) as response:\n        content = await response.content.read()\n        file_name = urlparse(url).path.split(\"/\")[-1]\n        with open(file_name, mode='wb') as file_object:\n            file_object.write(content)\n\n\nasync def main():\n    async with ClientSession() as session:\n        urls = [\n            \"http://localhost/xxx1.rar\",\n            \"http://localhost/xxx2.zip\",\n            \"http://localhost/xxx3.zip\",\n            \"http://localhost/xxx4.tgz\",\n            \"http://localhost/notExist.tgz\"\n        ]\n\n        tasks = [asyncio.create_task(fetch(session, url), name=url) for url in urls]\n        await asyncio.wait(tasks)\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#2","title":"2 \u6b63\u5f0f\u7684\u4e0b\u8f7d\u6587\u4ef6\u793a\u4f8b\uff1a\u663e\u793a\u4e0b\u8f7d\u8fdb\u5ea6","text":"<pre><code>import asyncio\nimport logging\nfrom urllib.parse import unquote, urlparse\n\nimport tqdm\nfrom aiohttp import ClientSession\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\nlogger.addHandler(logging.StreamHandler())\nhandler = logging.FileHandler(\"log.txt\", encoding=\"utf-8\")\nformatter = logging.Formatter(' - %(asctime)s - %(levelname)s - %(message)s')\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)\n\n\nasync def fetch(session: ClientSession, url: str):\n    url = unquote(url)\n    logger.info(f'\u53d1\u9001\u8bf7\u6c42\uff1a{url}')\n\n    async with session.get(url, verify_ssl=False) as resp:\n        resp.raise_for_status()  # \u8bf7\u6c42\u5931\u8d25\u4f1a\u629b\u51fa\u5f02\u5e38\n\n        # \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\u7528\u4e8e\u8fdb\u5ea6\u6761\n        total_size = int(resp.headers.get('Content-Length', 0))\n\n        # \u4eceURL\u4e2d\u63d0\u53d6\u6587\u4ef6\u540d\n        fname = urlparse(url).path.split('/')[-1]\n\n        # \u521b\u5efa\u8fdb\u5ea6\u6761\n        progress = tqdm.tqdm(\n            total=total_size,\n            unit='B',\n            unit_scale=True,\n            desc=fname,\n            # file=logger.handlers[1].stream if logger.handlers else None,\n            position=0\n        )\n\n        with open(fname, \"wb\") as f:\n            while True:\n                chunk = await resp.content.read(1024)  # \u8bfb\u53d61KB\u6570\u636e\n                if not chunk:\n                    break\n                f.write(chunk)\n                progress.update(len(chunk))\n\n        progress.close()\n\n\nasync def main():\n    async with ClientSession() as session:\n        urls = [\n            \"http://localhost/xxx1.rar\",\n            \"http://localhost/xxx2.zip\",\n            \"http://localhost/xxx3.zip\",\n            \"http://localhost/xxx4.tgz\",\n            \"http://localhost/notExist.tgz\"\n        ]\n\n        tasks = [asyncio.create_task(fetch(session, url), name=url) for url in urls]\n        done, pending = await asyncio.wait(tasks)\n\n        # \u68c0\u67e5\u5df2\u5b8c\u6210\u7684\u4efb\u52a1\u662f\u5426\u6709\u5f02\u5e38\n        for task in done:\n            name = unquote(task.get_name())\n            if exc := task.exception():\n                logger.error(f\"\u4efb\u52a1\u5931\u8d25: {name}, \u5f02\u5e38: {exc}\")\n            else:\n                logger.info(f\"\u4efb\u52a1\u6210\u529f: {name}\")\n\n        # \u68c0\u67e5\u672a\u5b8c\u6210\u7684\u4efb\u52a1\uff08\u5982\u679c\u6709\uff09\n        if pending:\n            for task in pending:\n                name = unquote(task.get_name())\n                logger.warning(\n                    f\"\u672a\u5b8c\u6210\u4efb\u52a1: {name}, \"\n                    f\"\u53d6\u6d88\u72b6\u6001: {task.cancelled()}, \"\n                    f\"\u5f02\u5e38: {task.exception()}\"\n                )\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#_2","title":"\u4e09\u3001\u5f02\u6b65\u7f16\u7a0b","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#1_1","title":"1 \u4e8b\u4ef6\u5faa\u73af","text":"<p>\u4e8b\u4ef6\u5faa\u73af\u5b9e\u73b0\u903b\u8f91\u4f2a\u4ee3\u7801\uff1a</p> <pre><code># \u4f2a\u4ee3\u7801\n\n# \u4efb\u52a1\u5217\u8868=[\u4efb\u52a11, \u4efb\u52a12, \u4efb\u52a13, ...]\n\nwhile True:\n    \u53ef\u6267\u884c\u7684\u4efb\u52a1\u5217\u8868\uff0c\u5df2\u5b8c\u6210\u7684\u4efb\u52a1\u5217\u8868 = \u53bb\u4efb\u52a1\u5217\u8868\u4e2d\u68c0\u67e5\u6240\u6709\u7684\u4efb\u52a1\uff0c\u5c06'\u53ef\u6267\u884c'\u548c'\u5df2\u5b8c\u6210'\u7684\u4efb\u52a1\u8fd4\u56de\n\n    for \u5c31\u7eea\u4efb\u52a1 in \u53ef\u6267\u884c\u7684\u4efb\u52a1\u5217\u8868\uff1a\n        \u6267\u884c\u5df2\u5c31\u7eea\u7684\u4efb\u52a1\n\n    for \u5df2\u5b8c\u6210\u7684\u4efb\u52a1 in \u5df2\u5b8c\u6210\u7684\u4efb\u52a1\u5217\u8868\uff1a\n        \u5728\u4efb\u52a1\u5217\u8868\u4e2d\u79fb\u9664 \u5df2\u5b8c\u6210\u7684\u4efb\u52a1\n\n    \u5982\u679c \u4efb\u52a1\u5217\u8868 \u4e2d\u7684\u4efb\u52a1\u90fd\u5df2\u5b8c\u6210\uff0c\u5219\u7ec8\u6b62\u5faa\u73af\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#2_1","title":"2 \u534f\u7a0b\u8bed\u6cd5","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#21","title":"2.1 \u57fa\u672c\u8bed\u6cd5","text":"<p>\u4e00\u6bb5\u534f\u7a0b\u903b\u8f91\u9700\u8981\u6267\u884c\u9700\u8981\uff1a\u534f\u7a0b\u51fd\u6570 -&gt; \u534f\u7a0b\u5bf9\u8c61 -&gt; \u4e8b\u4ef6\u5faa\u73af</p> <p>\u534f\u7a0b\u51fd\u6570\uff1a<code>async def \u51fd\u6570\u540d()</code></p> <p>\u534f\u7a0b\u5bf9\u8c61\uff1a\u534f\u7a0b\u51fd\u6570\u540d+ () \uff0c\u6267\u884c\u4e4b\u540e\u5f97\u5230\u534f\u7a0b\u5bf9\u8c61</p> <p>\u534f\u7a0b\u51fd\u6570\u8fd0\u884c\uff1a\u4e8b\u4ef6\u5faa\u73af\u5165\u53c2\u534f\u7a0b\u5bf9\u8c61 -&gt; \u534f\u7a0b\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u6307\u5b9a\u65b9\u6cd5\uff0c\u8fd0\u884c\u534f\u7a0b\u51fd\u6570\u903b\u8f91</p> <pre><code>import asyncio\n\n\nasync def func():\n    print(\"wokao!\")\n\n\ncoroutine_objetct = func()\n\n# loop = asyncio.get_event_loop()\n# loop.run_until_complete(coroutine_objetct)\n\n# python3.7+\nasyncio.run(coroutine_objetct)\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#22-await","title":"2.2 await\u5173\u952e\u5b57","text":"<p>await\u4f7f\u7528\u65b9\u5f0f\uff1aawait + \u534f\u7a0b\u53ef\u7b49\u5f85\u5bf9\u8c61\uff08\u534f\u7a0b\u5bf9\u8c61\u3001Task\u5bf9\u8c61\u3001Future\u5bf9\u8c61 -&gt; IO\u7b49\u5f85\uff09</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#221-await","title":"2.2.1 await + \u534f\u7a0b\u5bf9\u8c61","text":"<pre><code>import asyncio\n\n\nasync def coroutine_print_message(name):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(3)\n    print(f\"coroutine_print_message - {name} - end\")\n    return f\"coroutine_print_message - {name} - finished!\"\n\n\nasync def main():\n    print(\"start!\")\n    response1 = await coroutine_print_message(\"A\")\n    print(\"response1:\", response1)\n    response2 = await coroutine_print_message(\"B\")\n    print(\"response2:\", response2)\n    print(\"end!\")\n\n\nasyncio.run(main())\n\n# start!\n# coroutine_print_message - A - start\n# coroutine_print_message - A - end\n# response1: coroutine_print_message - A - finished!\n# coroutine_print_message - B - start\n# coroutine_print_message - B - end\n# response2: coroutine_print_message - B - finished!\n# end!\n</code></pre> <p>\u7ed3\u8bba\uff1aawait\u5173\u952e\u5b57+\u534f\u7a0b\u5bf9\u8c61\uff0c\u4f1a\u5728\u6b64\u7b49\u5f85\u6267\u884c\u83b7\u53d6\u5230\u7ed3\u679c\u4e4b\u540e\uff0c\u518d\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u3002\uff08\u4f9d\u7136\u662f\u540c\u6b65\u7f16\u7a0b\uff09</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#222-await-task","title":"2.2.2 await + Task\u5bf9\u8c61","text":"<p>\u5199\u6cd5\u4e00\uff1a</p> <pre><code>\"\"\"\n\u521b\u5efaTask\u5bf9\u8c61\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\n    1. asyncio.create_task()  &lt;- python3.7\u7248\u672c\u53ca\u4e4b\u540e\n    2. ensure_future() &lt;- python3.6\u7248\u672c\u53ca\u4e4b\u524d\n    3. loop.create_task()\n\"\"\"\nimport asyncio\nimport time\n\n\nasync def coroutine_print_message(name, wtime=3):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(wtime)\n    print(f\"coroutine_print_message - {name} - end\")\n    return f\"coroutine_print_message - {name} - finished!\"\n\n\nasync def main():\n    \"\"\"\n    \u9047\u5230IO\u64cd\u4f5c\u6302\u8d77\u5f53\u524d\u534f\u7a0b\uff08\u4efb\u52a1\uff09\uff0c\u7b49IO\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\u518d\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff1b\u5f53\u524d\u534f\u7a0b\u6302\u8d77\u65f6\uff0c\u4e8b\u4ef6\u5faa\u73af\u53ef\u4ee5\u53bb\u6267\u884c\u5176\u4ed6\u534f\u7a0b\uff08\u4efb\u52a1\uff09\u3002\n    \"\"\"\n    print(\"main start!\")\n    # \u521b\u5efaTask\u5bf9\u8c61 -&gt; \u5c06\u534f\u7a0b\u5bf9\u8c61\u52a0\u5165\u4e8b\u4ef6\u5faa\u73af\n    task1 = asyncio.create_task(coroutine_print_message(\"A\", wtime=2))\n    task2 = asyncio.create_task(coroutine_print_message(\"B\", wtime=8))\n    # \u7b49\u5f85\u6240\u6709Task\u5bf9\u8c61\u8fd4\u56de\n    response1 = await task1\n    response2 = await task2\n\n    # \u7b49\u5f85\u6240\u6709Task\u5bf9\u8c61\u5168\u90e8\u83b7\u53d6\u8fd4\u56de\u503c\u4e4b\u540e\u624d\u7ee7\u7eed\n    print(\"response1:\", response1)\n    print(\"response2:\", response2)\n\n    print(\"main end!\")\n\n\nasyncio.run(main())\n\n# main start!\n# coroutine_print_message - A - start\n# coroutine_print_message - B - start\n# coroutine_print_message - A - end\n# coroutine_print_message - B - end\n# response1: coroutine_print_message - A - finished!\n# response2: coroutine_print_message - B - finished!\n# main end!\n</code></pre> <p>\u5199\u6cd5\u4e8c\uff08\u63a8\u8350\uff09\uff1a</p> <pre><code>import asyncio\n\n\nasync def coroutine_print_message(name, wtime=3):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(wtime)\n    print(f\"coroutine_print_message - {name} - end\")\n    return f\"coroutine_print_message - {name} - finished!\"\n\n\nasync def main():\n    print(\"main start!\")\n    task_list = [\n        asyncio.create_task(coroutine_print_message(\"A\", wtime=2), name=\"Task-A\"),\n        asyncio.create_task(coroutine_print_message(\"B\", wtime=8), name=\"Task-B\"),\n    ]\n    done, pending = await asyncio.wait(task_list, timeout=None)\n    print(\"done:\", done)\n    print(\"pending:\", pending)\n    print(\"main end!\")\n\n\nasyncio.run(main())\n</code></pre> <p>\u5199\u6cd5\u4e09\uff1a\u6ce8\u610f\u4e8b\u4ef6\u5faa\u73af\u521b\u5efa\u7684\u95ee\u9898</p> <pre><code>import asyncio\n\n\nasync def coroutine_print_message(name, wtime=3):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(wtime)\n    print(f\"coroutine_print_message - {name} - end\")\n    return f\"coroutine_print_message - {name} - finished!\"\n\n\nprint(\"main start!\")\ncoroutine_object_list = [\n    coroutine_print_message(\"A\", wtime=2),\n    coroutine_print_message(\"B\", wtime=8)\n]\n# \u4e0d\u5305\u4e00\u5c42\u4e3b\u7ebf\u7a0b\u534f\u7a0b\u51fd\u6570\u65f6\uff1a\u9700\u8981\u4f20\u5165\u7684\u53c2\u6570\u4e3a\u534f\u7a0b\u5bf9\u8c61\u5217\u8868\uff0c\u4e8b\u4ef6\u5faa\u73af\u4f1a\u81ea\u52a8\u521b\u5efa\uff0c\u624d\u4e0d\u4f1a\u62a5\u9519\ndone, pending = asyncio.run(asyncio.wait(coroutine_object_list, timeout=None))\nprint(\"done:\", done)\nprint(\"pending:\", pending)\nprint(\"main end!\")\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#23-asynciofuture","title":"2.3 asyncio.Future\u5bf9\u8c61","text":"<p>Future \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u4f4e\u7ea7\u53ef\u7b49\u5f85\u5bf9\u8c61\uff0c\u4ee3\u8868\u5f02\u6b65\u64cd\u4f5c\u7684\u6700\u7ec8\u7ed3\u679c\u3002</p> <p>\u793a\u4f8b\u4e00\uff1a</p> <pre><code>import asyncio\n\n\nasync def coroutine_print_message(future: asyncio.Future, name: str, wtime: int = 3):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(wtime)\n    print(f\"coroutine_print_message - {name} - end\")\n    future.set_result(f\"coroutine_print_message - {name} - finished!\")\n\n\nasync def main():\n    # \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5faa\u73af\n    loop = asyncio.get_event_loop()\n\n    # \u521b\u5efa\u4efb\u52a1 - Future\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5185\u90e8\u5565\u4e5f\u4e0d\u5e72\n    future = loop.create_future()\n    await loop.create_task(coroutine_print_message(future, \"A\"), name=\"Task-A\")\n    # \u7b49\u5f85 Future \u5b8c\u6210\n    results = await future\n    print(\"results:\", results)\n\n\nasyncio.run(main())\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a</p> <pre><code>import asyncio\n\n\nasync def coroutine_print_message(future: asyncio.Future, name: str, wtime: int = 3):\n    print(f\"coroutine_print_message - {name} - start\")\n    await asyncio.sleep(wtime)\n    print(f\"coroutine_print_message - {name} - end\")\n    future.set_result(f\"coroutine_print_message - {name} - finished!\")\n\n\nasync def main():\n    # \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5faa\u73af\n    loop = asyncio.get_event_loop()\n\n    # \u521b\u5efa\u4efb\u52a1 - Future\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5185\u90e8\u5565\u4e5f\u4e0d\u5e72\n    future1 = loop.create_future()\n    future2 = loop.create_future()\n\n    await loop.create_task(coroutine_print_message(future1, \"A\"), name=\"Task-A\")\n    await loop.create_task(coroutine_print_message(future2, \"B\"), name=\"Task-B\")\n\n    # \u7b49\u5f85\u6240\u6709 Future \u5b8c\u6210\n    results = await asyncio.gather(future1, future2)\n    print(\"\u6240\u6709\u4efb\u52a1\u5b8c\u6210:\", results)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#24-concurrentfuturesfuture","title":"2.4 concurrent.futures.Future\u5bf9\u8c61","text":"<p>\u4f7f\u7528\u7ebf\u7a0b\u6c60\u3001\u8fdb\u7a0b\u6c60\u5b9e\u73b0\u5f02\u6b65\u64cd\u4f5c\u65f6\u7528\u5230\u7684\u5bf9\u8c61\u3002</p> <p>\u7ebf\u7a0b\u6c60/\u8fdb\u7a0b\u6c60 Future\u5bf9\u8c61\uff08\u63d0\u4ea4\u4efb\u52a1\u83b7\u5f97\uff0c\u7b49\u5f85\u7ed3\u679c\uff09\uff1a</p> <pre><code>\"\"\"\n1.concurrent.futures\u4e0e\u7ebf\u7a0b\u6c60\u548c\u8fdb\u7a0b\u6c60\u7684\u4f7f\u7528\n2.\u63a2\u8ba8\u534f\u7a0b\u4e0e\u7ebf\u7a0b\u6c60\u6df7\u7528\u573a\u666f\n\"\"\"\nfrom concurrent.futures import Future\n# from concurrent.futures import ProcessPoolExecutor\nfrom concurrent.futures import ThreadPoolExecutor\n\n\ndef func(value):\n    print(value)\n    time.sleep(1)\n    return value\n\n\nif __name__ == '__main__':\n    pool = ThreadPoolExecutor(max_workers=5)\n    # pool = ProcessPoolExecutor(max_workers=5)\n\n    for i in range(10):\n        future: Future = pool.submit(func, i)\n        # print(future)\n</code></pre> <p>\u534f\u7a0b \u642d\u914d \u7ebf\u7a0b\u6c60/\u8fdb\u7a0b\u6c60\u6df7\u5408\u4f7f\u7528\uff1a</p> <p>\u9002\u7528\u573a\u666f\uff1a\u5f53\u67d0\u4e2a\u9879\u76ee80%\u5b9e\u73b0\u65b9\u5f0f\u4f7f\u7528\u534f\u7a0b\u5f02\u6b65\u7f16\u7a0b + \u67d0\u4e2a\u4e0d\u652f\u6301\u534f\u7a0b\u7684\u6a21\u5757\uff08\u4f8b\u5982\uff1amysql - \u652f\u6301\u7ebf\u7a0b/\u8fdb\u7a0b\u5f02\u6b65\u7f16\u7a0b\uff09</p> <p>\u793a\u4f8b1-\u6df1\u5165\u7406\u89e3\uff1a</p> <pre><code>\"\"\"\n1.concurrent.futures\u4e0e\u7ebf\u7a0b\u6c60\u548c\u8fdb\u7a0b\u6c60\u7684\u4f7f\u7528\n2.\u63a2\u8ba8\u534f\u7a0b\u4e0e\u7ebf\u7a0b\u6c60\u6df7\u7528\u573a\u666f\n\"\"\"\nimport asyncio\nimport time\n\n\ndef func(v1, v2):\n    print(\"v1:\", v1, \"v2:\", v2)\n    time.sleep(1)\n    return {\"v1:\", v1, \"v2:\", v2}\n\n\nasync def main():\n    \"\"\"\n    \u5173\u4e8eloop.run_in_executor\u51fd\u6570\u7684\u89e3\u91ca\uff1a\n        \u5173\u4e8e\u4f20\u53c2\uff1a\n            \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3aNone\uff0c\u8868\u793a\u4f7f\u7528\u9ed8\u8ba4\u7ebf\u7a0b\u6c60\uff1b\u4e5f\u53ef\u4ee5\u4f20\u5165\u6307\u5b9a\u7ebf\u7a0b\u6c60\u5bf9\u8c61/\u8fdb\u7a0b\u6c60\u5bf9\u8c61\u3002\n        \u51fd\u6570\u5185\u90e8\uff1a\n            \u7b2c\u4e00\u6b65\uff1a\u8c03\u7528submit\u51fd\u6570\u63d0\u4ea4\u4efb\u52a1\u7533\u8bf7\u5230\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2aconcurrent.futures.Future\u5bf9\u8c61\uff1b\n            \u7b2c\u4e8c\u6b65\uff1a\u8c03\u7528asyncio.wrap_future\u5c06concurrent.futures.Future\u5bf9\u8c61\u5305\u88c5\u6210\u4e00\u4e2a\u8c03\u7528asyncio.Future\u5bf9\u8c61\uff0c\u4ee5\u4fbf\u5728asyncio\u4e2d\u4f7f\u7528\uff1b\n    \"\"\"\n    loop = asyncio.get_running_loop()\n    fut = loop.run_in_executor(None, func, \"666\", \"999\")\n    result = await fut\n    print(\"result:\", result)\n\n    # \u7ebf\u7a0b\u6c60+\u534f\u7a0b -&gt; \u4e0e\u4e0a\u9762\u5199\u6cd5\u7b49\u4ef7\n    # with concurrent.futures.ThreadPoolExecutor(max_workers=5) as pool:\n    #     result = await loop.run_in_executor(pool, func, \"hello\")\n    #     print(\"result:\", result)\n\n    # \u8fdb\u7a0b\u6c60+\u534f\u7a0b\n    # with concurrent.futures.ProcessPoolExecutor(max_workers=5) as pool:\n    #     result = await loop.run_in_executor(pool, func, \"hello\")\n    #     print(\"result:\", result)\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre> <p>\u793a\u4f8b2-\u5b9e\u9645\u5e94\u7528\uff1a</p> <pre><code>\"\"\"\n\u5f02\u6b65\u534f\u7a0b\u51fd\u6570+\u540c\u6b65\u51fd\u6570\uff08\u4f7f\u7528\u7ebf\u7a0b\u6c60\uff09\u6df7\u5408\u4f7f\u7528\u573a\u666f\u793a\u4f8b\n\"\"\"\nimport asyncio\nimport logging\nfrom urllib.parse import unquote\n\nimport requests\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\nlogger.addHandler(logging.StreamHandler())\nhandler = logging.FileHandler(\"log.txt\", encoding=\"utf-8\")\nformatter = logging.Formatter(' - %(asctime)s - %(levelname)s - %(message)s')\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)\n\n\nasync def download_file(url: str):\n    logger.info(f\"url: {url}\")\n    loop = asyncio.get_event_loop()\n    # requests.get\u4e0d\u652f\u6301\u534f\u7a0b\u5f02\u6b65\uff0c\u9700\u8981\u8f6c\u6362\n    future = loop.run_in_executor(None, requests.get, url)\n    response = await future\n    if response.status_code != 200:\n        logger.info(f\"\u4e0b\u8f7d\u5931\u8d25\uff1aurl: {url}\\n\u8fd4\u56de\u5185\u5bb9\uff1a{response.text}\")\n        return response.status_code\n\n    # \u6587\u4ef6\u4fdd\u5b58\n    file_name = url.rsplit(\"/\")[-1]\n    with open(file_name, mode=\"wb\") as fp:\n        fp.write(response.content)\n\n\nasync def main():\n    urls = [\n        'http://localhost/10%E5%BA%A6%E6%97%B6%E9%95%BF.zip',\n        'http://localhost/%E5%B1%8F%E5%B9%95%E5%94%A4%E9%86%92%E5%A4%B1%E8%B4%A5.zip',\n        'http://localhost/ollama-linux-amd64.tgz'\n        'http://localhost/notExist.txt'\n    ]\n    tasks = [download_file(unquote(url)) for url in urls]\n    results = await asyncio.gather(*tasks)\n    logger.debug(f\"results: {results}\")\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#3","title":"3 \u5f02\u6b65\u8fed\u4ee3\u5668","text":"<p>\u5f02\u6b65\u8fed\u4ee3\u5668 \u2014 Python 3.13.5 \u6587\u6863</p> <p>\u5f02\u6b65\u8fed\u4ee3\u5668 \u53ef\u4ee5\u5728\u5176 <code>__anext__</code> \u65b9\u6cd5\u4e2d\u8c03\u7528\u5f02\u6b65\u4ee3\u7801\u3002</p> <p>\u5f02\u6b65\u8fed\u4ee3\u5668\u53ef\u5728 <code>async for</code> \u8bed\u53e5\u4e2d\u4f7f\u7528\u3002</p> <p><code>object</code> \u7c7b\u672c\u8eab\u4e0d\u63d0\u4f9b\u8fd9\u4e9b\u65b9\u6cd5\u3002</p> <ul> <li>object.aiter(self)</li> </ul> <p>\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a \u5f02\u6b65\u8fed\u4ee3\u5668 \u5bf9\u8c61\u3002</p> <ul> <li>object.anext(self)</li> </ul> <p>\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a \u53ef\u7b49\u5f85\u5bf9\u8c61 \u8f93\u51fa\u8fed\u4ee3\u5668\u7684\u4e0b\u4e00\u7ed3\u679c\u503c\u3002 \u5f53\u8fed\u4ee3\u7ed3\u675f\u65f6\u5e94\u8be5\u5f15\u53d1 <code>StopAsyncIteration</code> \u9519\u8bef\u3002</p> <p>\u5f02\u6b65\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u4e00\u4e2a\u793a\u4f8b:</p> <pre><code>class Reader:\n    async def readline(self):\n        ...\n\n    def __aiter__(self):\n        return self\n\n    async def __anext__(self):\n        val = await self.readline()\n        if val == b'':\n            raise StopAsyncIteration\n        return val\n</code></pre> <p>\u5b9e\u9645\u793a\u4f8b\uff1a\u6267\u884c\u5f02\u6b65\u5faa\u73af\u7684\u65f6\u5019\u53ef\u4ee5\u540c\u65f6\u5e72\u522b\u7684\u4e8b\u60c5</p> <pre><code>import asyncio\n\n\nclass Reader:\n    \"\"\"\u5f02\u6b65\u8fed\u4ee3\u5668\"\"\"\n\n    def __init__(self):\n        self.count = 0\n\n    def __aiter__(self):\n        return self\n\n    async def __anext__(self):\n        val = await self.readline()\n        if val is None:\n            raise StopAsyncIteration\n        return val\n\n    async def readline(self):\n        await asyncio.sleep(2)  # \u6a21\u62df\u5f02\u6b65\u8bfb\u53d6\u8017\u65f6\n        self.count += 1\n        if self.count &gt; 5:\n            return None\n        return self.count\n\n\nasync def read_lines(reader):\n    print(\"\u5f00\u59cb\u8bfb\u53d6\u6570\u636e\")\n    async for line in reader:\n        print(f\"[\u8bfb\u53d6\u5230] {line}\")\n    print(\"\u6570\u636e\u8bfb\u53d6\u5b8c\u6210\")\n\n\nasync def other_task():\n    for i in range(10):\n        await asyncio.sleep(0.5)\n        print(f\"[\u5176\u4ed6\u4efb\u52a1] Tick {i}\")\n\n\nasync def main():\n    reader = Reader()\n    print(f\"Reader \u7c7b\u578b: {type(reader)}\")\n\n    # \u540c\u65f6\u8fd0\u884c\u8bfb\u53d6\u4efb\u52a1\u548c\u5176\u4ed6\u4efb\u52a1\n    await asyncio.gather(\n        read_lines(reader),\n        other_task()\n    )\n\n    print(\"\u6240\u6709\u4efb\u52a1\u5b8c\u6210\")\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#4","title":"4 \u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#41","title":"4.1 \u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u662f\u4ec0\u4e48\uff1f","text":"<p>\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u662f Python \u4e2d\u7528\u4e8e\u7ba1\u7406\u8d44\u6e90\u7684\u4e00\u79cd\u673a\u5236\uff0c\u5b83\u786e\u4fdd\u8d44\u6e90\u5728\u4f7f\u7528\u540e\u88ab\u6b63\u786e\u91ca\u653e\u6216\u6e05\u7406\uff0c\u5373\u4f7f\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5f02\u5e38\u4e5f\u662f\u5982\u6b64\u3002</p> <p>\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u901a\u8fc7 <code>with</code> \u8bed\u53e5\u4f7f\u7528\uff0c\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u7279\u6b8a\u65b9\u6cd5\uff1a</p> <p>\u200b   1\uff09<code>__enter__()</code>: \u8fdb\u5165\u4e0a\u4e0b\u6587\u65f6\u8c03\u7528\uff0c\u8fd4\u56de\u8d44\u6e90\u5bf9\u8c61\uff1b</p> <p>\u200b   2\uff09<code>__exit__()</code>: \u9000\u51fa\u4e0a\u4e0b\u6587\u65f6\u8c03\u7528\uff0c\u5904\u7406\u6e05\u7406\u5de5\u4f5c\u3002</p> <ul> <li> <p>\u5b9e\u73b0\u65b9\u5f0f</p> </li> <li> <p>\u7c7b\u5b9e\u73b0</p> </li> </ul> <pre><code>class MyContextManager:\n    def __enter__(self):\n        print(\"Entering the context\")\n        return self  # \u4f8b\u5982\uff1awith\u8bed\u53e5 as f -&gt; f\u5c31\u662f\u8fd9\u4e2a\u8fd4\u56de\u503c\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print(\"Exiting the context\")\n        if exc_type is not None:\n            print(f\"An exception occurred: {exc_val}\")\n        return True  # \u5982\u679c\u8fd4\u56deTrue\uff0c\u5219\u6291\u5236\u5f02\u5e38\n\nwith MyContextManager() as cm:\n    print(\"Inside the context\")\n</code></pre> <ul> <li>\u4f7f\u7528 contextlib \u6a21\u5757</li> </ul> <pre><code>from contextlib import contextmanager\n\n\n@contextmanager\ndef my_context_manager(value):\n    print(\"Entering the context\")  # \u76f8\u5f53\u4e8e __enter__\n    try:\n        yield value  # \u8fd9\u662f as \u540e\u9762\u7684\u503c \u6267\u884c\u65f6\u5c06\u4f1a\u5728\u8fd9\u91cc\u6682\u505c\uff0c\u5c06\u6587\u4ef6\u5bf9\u8c61\u8fd4\u56de\u7ed9with\u8bed\u53e5\u7684as\u53d8\u91cf\uff0c\u7136\u540e\u6267\u884cwith\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u6700\u540e\u8fdb\u5165finally\n    finally:\n        print(\"Exiting the context\")  # \u76f8\u5f53\u4e8e __exit__\n\n\nwith my_context_manager(value=100) as resource:\n    print(f\"Using {resource}\")\n</code></pre> <ul> <li>\u4f7f\u7528\u573a\u666f</li> <li>\u6587\u4ef6\u64cd\u4f5c\uff08\u81ea\u52a8\u5173\u95ed\uff09</li> <li>\u6570\u636e\u5e93\u8fde\u63a5\uff08\u81ea\u52a8\u63d0\u4ea4/\u56de\u6eda\u548c\u5173\u95ed\uff09</li> <li>\u7ebf\u7a0b\u9501\uff08\u81ea\u52a8\u83b7\u53d6\u548c\u91ca\u653e\uff09</li> <li>\u4e34\u65f6\u4fee\u6539\u7cfb\u7edf\u72b6\u6001\uff08\u5982\u73af\u5883\u53d8\u91cf\uff09</li> <li>\u8ba1\u65f6\u5668</li> </ul>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#42","title":"4.2 \u5b9e\u73b0\u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668","text":"<p>\u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u662f Python \u4e2d\u7528\u4e8e\u7ba1\u7406\u5f02\u6b65\u8d44\u6e90\u7684\u4e00\u79cd\u673a\u5236\uff0c\u5b83\u5141\u8bb8\u5728\u5f02\u6b65\u4ee3\u7801\u4e2d\u5b89\u5168\u5730\u83b7\u53d6\u548c\u91ca\u653e\u8d44\u6e90\uff0c\u7c7b\u4f3c\u4e8e\u5e38\u89c4\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4f46\u5728\u5f02\u6b65\u73af\u5883\u4e2d\u5de5\u4f5c\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\u6709\u4e09\u79cd\uff1a\u7b2c\u4e09\u65b9\u6a21\u5757aiohttp\u65b9\u6cd5\u3001\u81ea\u5b9a\u4e49\u7c7b\u5b9e\u73b0\u4ee5\u53cacontextlib\u6a21\u5757\u65b9\u6cd5</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#421-aiohttp","title":"4.2.1 \u7b2c\u4e09\u65b9\u6a21\u5757aiohttp\u65b9\u6cd5","text":"<pre><code>import aiohttp\n\nasync def fetch_data():\n    async with aiohttp.ClientSession() as session:  # \u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\n        async with session.get('https://example.com') as response:\n            return await response.text()\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#422","title":"4.2.2 \u7c7b\u5b9e\u73b0","text":"<pre><code>import asyncio\n\n\nclass SyncContextManager:\n    def __init__(self, conn):\n        self.conn = conn\n\n    async def __aenter__(self):\n        # \u5f02\u6b65\u8fde\u63a5\u6570\u636e\u5e93\n        await asyncio.sleep(1)\n        return self\n\n    async def __aexit__(self, exc_type, exc_val, exc_tb):\n        # \u5f02\u6b65\u65ad\u5f00\u6570\u636e\u5e93\n        await asyncio.sleep(1)\n\n    async def do_something(self):\n        print(f\"do something, conn={self.conn}\")\n        await asyncio.sleep(1)\n        print(\"done\")\n        return \"ok\"\n\n\nasync def main():\n    async with SyncContextManager('mysql') as cm:\n        result = await cm.do_something()\n        print(result)\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#423-contextlib","title":"4.2.3 contextlib\u6a21\u5757","text":"<pre><code>import asyncio\nimport time\nfrom contextlib import asynccontextmanager\n\n\n@asynccontextmanager\nasync def async_timer():\n    start = time.time()\n    try:\n        yield 888\n    finally:\n        end = time.time()\n        print(f\"Execution took {end - start:.2f} seconds\")\n\n\nasync def some_async_task():\n    await asyncio.sleep(2)\n\n\nasync def main():\n    async with async_timer() as atr:\n        print(\"atr:\", atr)\n        await some_async_task()\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#uvloop","title":"\u56db\u3001uvloop","text":"<p>uvloop\u662fasyncio\u5185\u7f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u66ff\u4ee3\u65b9\u6848\u3002</p> <pre><code>import asyncio\n\nif os.name != 'nt':\n    # uvloop\u4ec5\u652f\u6301linux\u7cfb\u7edf -&gt; \u66f4\u5feb\uff0c\u63a5\u8fd1GO\u8bed\u8a00\u7684\u901f\u5ea6\n    import uvloop\n\n    asyncio.set_event_loop_policy(uvloop.EventLoopPolicy)\n\n\n# #####################\n# \u5176\u4ed6\u903b\u8f91\u4ee3\u7801\u4e0e\u4e4b\u524d\u4fdd\u6301\u4e00\u81f4\n# #####################\n\nasync def main():\n    pass\n\n\nasyncio.run(main())\n</code></pre> <p>\u6ce8\u610f\uff1aasgi -&gt; uvicorn</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#_3","title":"\u4e94\u3001\u5b9e\u6218\u6848\u4f8b","text":""},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#1-redis","title":"1 redis\u5f02\u6b65\u64cd\u4f5c","text":"<p>\u5f53\u9ad8\u5e76\u53d1\u573a\u666f\u9700\u8981\u5c06\u8bf7\u6c42\u5206\u6563\u5230\u591a\u53f0Redis\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65\u64cd\u4f5cRedis</p>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#11","title":"1.1 \u65b9\u5f0f\u4e00\uff1a\u6bcf\u6b21\u521b\u5efa\u8fde\u63a5\uff08\u4e0d\u63a8\u8350\uff09","text":"<pre><code>import asyncio\n\nimport redis.asyncio as aioredis\n\n\nasync def excute(host, port, db, password):\n    print(f\"host:{host}, port:{port}\")\n    r = await aioredis.Redis(host=host, port=port, db=db, password=password)\n    await r.set(\"TTT\", \"123\", ex=10)\n    value = await r.get(\"TTT\")\n    print(\"value:\", value)\n    await r.close()\n\n\nasync def main():\n    tasks = [\n        asyncio.create_task(excute(\"192.168.127.140\", 6379, 1, \"xxx\")),\n        asyncio.create_task(excute(\"192.168.127.140\", 6379, 2, \"xxx\")),\n    ]\n    await asyncio.gather(*tasks)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#12","title":"1.2 \u65b9\u5f0f\u4e8c\uff1a\u8fde\u63a5\u6c60\uff08\u63a8\u8350\uff09","text":"<p>\u8fde\u63a5\u590d\u7528\uff1a\u591a\u4e2a Redis \u5b9e\u4f8b\u5171\u4eab\u540c\u4e00\u4e2a\u8fde\u63a5\u6c60\uff0c\u53ef\u4ee5\u8282\u7701\u8fde\u63a5\u521b\u5efa/\u9500\u6bc1\u7684\u5f00\u9500\u3002</p> <pre><code>import asyncio\n\nfrom redis.asyncio import Redis, ConnectionPool\n\n\nasync def execute_with_pool(pool: ConnectionPool):\n    r = Redis(connection_pool=pool)\n    await r.set(\"TTT\", \"123\", ex=20)\n    value = await r.get(\"TTT\")\n    print(\"value:\", value)\n    await r.close()  # \u867d\u7136\u4e0d\u662f\u5fc5\u987b\uff0c\u63a8\u8350\u8c03\u7528\n\n\nasync def main():\n    # \u5206\u522b\u521b\u5efa\u8fde\u63a5\u6c60\uff1a\u4e00\u4e2a Redis db=1\uff0c\u4e00\u4e2a Redis db=2\uff1bdecode_responses=True \u662f\u8ba9\u8fd4\u56de\u7684\u503c\u4e3a\u5b57\u7b26\u4e32\uff08\u5426\u5219\u662f\u5b57\u8282\u4e32 b'123'\uff09\n    pool1 = ConnectionPool(host=\"192.168.127.140\", port=6379, db=6, password=\"xxx\", decode_responses=True)\n    pool2 = ConnectionPool(host=\"192.168.127.140\", port=6379, db=7, password=\"xxx\", decode_responses=True)\n\n    tasks = [\n        execute_with_pool(pool1),\n        execute_with_pool(pool2),\n    ]\n    await asyncio.gather(*tasks)\n\n    # \u6700\u540e\u5173\u95ed\u8fde\u63a5\u6c60\n    await pool1.disconnect()\n    await pool2.disconnect()\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#2-mysql","title":"2 mysql\u5f02\u6b65\u64cd\u4f5c","text":"<p>\u8fde\u63a5\u590d\u7528\uff1a\u591a\u4e2amysql \u5b9e\u4f8b\u5171\u4eab\u540c\u4e00\u4e2a\u8fde\u63a5\u6c60\uff0c\u53ef\u4ee5\u8282\u7701\u8fde\u63a5\u521b\u5efa/\u9500\u6bc1\u7684\u5f00\u9500\u3002</p> <pre><code>import asyncio\nimport aiomysql\n\nasync def main():\n    # \u521b\u5efa\u8fde\u63a5\u6c60\n    pool = await aiomysql.create_pool(\n        host='localhost',\n        port=3306,\n        user='your_user',\n        password='your_password',\n        db='your_database',\n        minsize=1,\n        maxsize=10,  # \u5e76\u53d1\u8fde\u63a5\u6570\n        autocommit=True\n    )\n\n    async with pool.acquire() as conn:\n        async with conn.cursor() as cur:\n            await cur.execute(\"SELECT id, name FROM users LIMIT 5;\")\n            rows = await cur.fetchall()\n            for row in rows:\n                print(row)\n\n    pool.close()\n    await pool.wait_closed()\n\nasyncio.run(main())\n</code></pre>"},{"location":"mds/Python-Note/Python-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/#3-flaskapi","title":"3 FlaskAPI\u6846\u67b6","text":"<p>\u65b9\u4fbf\u7684\u652f\u6301\u4f7f\u7528\u5f02\u6b65\u7f16\u7a0b\u65b9\u5f0f \u7684 web\u6846\u67b6\uff0c\u6027\u80fd\u66f4\u4f18\uff01</p>"},{"location":"mds/Python-Note/celery-Note/","title":"celery-Note","text":"<p>\u5b66\u4e60\u94fe\u63a5\u96c6\uff1a</p> <p>https://blog.csdn.net/chinawangfei/article/details/125441684</p>"},{"location":"mds/Python-Note/celery-Note/#_1","title":"\u4e00\u3001\u57fa\u672c\u4ecb\u7ecd","text":""},{"location":"mds/Python-Note/celery-Note/#celery","title":"\u2b50celery\uff1a\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u5f02\u6b65\u4efb\u52a1\u6846\u67b6\u3002","text":"<ul> <li>\u7279\u6027\u4f18\u52bf\uff1a\u5f02\u6b65\u4efb\u52a1\uff0c\u5ef6\u8fdf\u4efb\u52a1\uff0c\u5b9a\u65f6\u4efb\u52a1\u3002</li> <li>\u5f02\u6b65\u6267\u884c\uff1a\u89e3\u51b3\u8017\u65f6\u4efb\u52a1\uff0c\u5c06\u201c\u8017\u65f6\u64cd\u4f5c\u4efb\u52a1\u201d\u63d0\u4ea4\u7ed9Celery\u53bb\u5f02\u6b65\u6267\u884c\uff0c\u6bd4\u5982\u53d1\u9001\u77ed\u4fe1/\u90ae\u4ef6\u3001\u6d88\u606f\u63a8\u9001\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49\u3002</li> <li>\u5ef6\u8fdf\u6267\u884c\uff1a\u89e3\u51b3\u5ef6\u8fdf\u4efb\u52a1\u3002</li> <li>\u5b9a\u65f6\u6267\u884c\uff1a\u89e3\u51b3\u5468\u671f(\u5468\u671f)\u4efb\u52a1\uff0c\u6bd4\u5982\u6bcf\u5929\u6570\u636e\u7edf\u8ba1</li> </ul> <pre><code>1\uff09\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u4efb\u4f55\u670d\u52a1\u5668\uff0c\u901a\u8fc7\u81ea\u8eab\u547d\u4ee4\uff0c\u542f\u52a8\u670d\u52a1\u3002\n2\uff09celery\u670d\u52a1\u4e3a\u5176\u4ed6\u9879\u76ee\u670d\u52a1\u63d0\u4f9b\u201c\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u201d\u7684\u529f\u80fd\u3002\n\u6ce8\uff1a\u6709\u4e24\u4e2a\u670d\u52a1\u540c\u65f6\u8fd0\u884c\uff0c\u4e00\u4e2a\u662f\u9879\u76ee\u670d\u52a1\uff0c\u4e00\u4e2a\u662fcelery\u670d\u52a1\u3002\u9879\u76ee\u670d\u52a1\u5c06\u201c\u9700\u8981\u5f02\u6b65\u5904\u7406\u7684\u4efb\u52a1\u201d\u4ea4\u7ed9celery\u670d\u52a1\uff0ccelery\u4f1a\u5728\u9700\u8981\u65f6\u5f02\u6b65\u5b8c\u6210\u9879\u76ee\u7684\u9700\u6c42\u3002\n    \u4eba\u662f\u4e00\u4e2a\u72ec\u7acb\u8fd0\u884c\u7684\u670d\u52a1\u3002 \n    \u533b\u9662\u4e5f\u662f\u4e00\u4e2a\u72ec\u7acb\u8fd0\u884c\u7684\u670d\u52a1\u3002\n    \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4eba\u53ef\u4ee5\u5b8c\u6210\u6240\u6709\u5065\u5eb7\u60c5\u51b5\u7684\u52a8\u4f5c\uff0c\u4e0d\u9700\u8981\u533b\u9662\u7684\u53c2\u4e0e\uff1b\u4f46\u5f53\u4eba\u751f\u75c5\u65f6\uff0c\u5c31\u4f1a\u88ab\u533b\u9662\u63a5\u6536\uff0c\u89e3\u51b3\u4eba\u751f\u75c5\u95ee\u9898\u3002\n    \u4eba\u751f\u75c5\u7684\u5904\u7406\u65b9\u6848\u4ea4\u7ed9\u533b\u9662\u6765\u89e3\u51b3\uff0c\u6240\u6709\u4eba\u4e0d\u751f\u75c5\u65f6\uff0c\u533b\u9662\u72ec\u7acb\u8fd0\u884c\uff1b\u4eba\u751f\u75c5\u65f6\uff0c\u533b\u9662\u5c31\u6765\u89e3\u51b3\u4eba\u751f\u75c5\u7684\u9700\u6c42\u3002\n</code></pre>"},{"location":"mds/Python-Note/celery-Note/#celery_1","title":"\u4e8c\u3001celery\u67b6\u6784","text":"<ol> <li> <p>\u6d88\u606f\u4e2d\u95f4\u4ef6(broker): Celery\u672c\u8eab\u4e0d\u63d0\u4f9b\u6d88\u606f\u670d\u52a1\uff0c\u4f46\u662f\u53ef\u4ee5\u65b9\u4fbf\u5730\u548c\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684\u6d88\u606f\u4e2d\u95f4\u4ef6\u96c6\u6210\uff0c\u5305\u62ec Redis \u7b49\u3002</p> </li> <li> <p>\u4efb\u52a1\u6267\u884c\u5355\u5143(worker): Worker\u662fCelery\u63d0\u4f9b\u7684\u4efb\u52a1\u6267\u884c\u7684\u5355\u5143\uff0c\u5e76\u53d1\u8fd0\u884c\u5728\u5206\u5e03\u5f0f\u7684\u7cfb\u7edf\u8282\u70b9\u4e2d(\u672c\u8d28\uff1a\u4e00\u4e2awork\u5c31\u662f\u4e00\u4e2a\u8fdb\u7a0b)\u3002</p> </li> <li> <p>\u4efb\u52a1\u7ed3\u679c\u5b58\u50a8\uff08backend\uff09: Task result store\u7528\u6765\u5b58\u50a8Worker\u6267\u884c\u7684\u4efb\u52a1\u7684\u7ed3\u679c\uff0cCelery\u652f\u6301\u4ee5\u4e0d\u540c\u65b9\u5f0f\u5b58\u50a8\u4efb\u52a1\u7684\u7ed3\u679c\uff0c\u5305\u62ec redis \u7b49\u3002</p> </li> </ol> <p>Celery\u5f02\u6b65\u4efb\u52a1\u6846\u67b6\uff0c\u662f\u4e00\u4e2a\u72ec\u7acb\u8fd0\u884c\u7684\u670d\u52a1\uff08\u5185\u7f6esocket\uff09\uff1a</p> <p> </p> <p>\u4f7f\u7528Celery\u6846\u67b6\u7684\u6b65\u9aa4\u4e3a\uff1a</p> <p>1.\u5b89\u88c5Celery\u6846\u67b6\u73af\u5883\uff0c\u542f\u52a8Celery\u670d\u52a1\uff08\u9700\u8981\u63d0\u524d\u914d\u7f6eBroker\u548cBackend\uff09\uff1b</p> <p>2.\u624b\u52a8\u6216\u81ea\u52a8\u6dfb\u52a0\u4efb\u52a1\u5230Broker\u4e2d\uff0cWorker\u5c31\u4f1a\u81ea\u52a8\u5728\u540e\u53f0\u5f02\u6b65\u6267\u884c\u4efb\u52a1\uff1b</p> <p>3.\u4eceBackend\u4e2d\u83b7\u53d6\u4efb\u52a1\u6267\u884c\u7ed3\u679c\u3002</p> <p>Celery\u5177\u4f53\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p> </p>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/","title":"nginx+uwsgi+django\u9879\u76ee\u90e8\u7f72","text":"<p>\u25cf \u865a\u62df\u673a\u90e8\u7f72\uff1ahttps://docs.qq.com/doc/DWHhFTGpyQ09xZkdo</p> <p>\u25cf \u90e8\u7f72\u53c2\u8003\u6587\u7ae0\uff1a </p> <pre><code>1. https://cloud.tencent.com/developer/article/1877954\n2. https://blog.csdn.net/qq_32656561/article/details/107781823\n3. https://blog.csdn.net/weixin_44685869/article/details/103949664\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#1","title":"1.\u914d\u7f6e\u8fc7\u7a0b\u95ee\u9898","text":"<pre><code>1\\ vim\u7f16\u5199wsgi.py\u8def\u5f84\u4e0d\u6b63\u786e\u3001\u9879\u76ee\u8def\u5f84\u4e0d\u6b63\u786e\uff1b=&gt;\u67e5\u770b\u65e5\u5fd7\u4f1a\u63d0\u793a;\n\n2\\ django\u9759\u6001\u6587\u4ef6\u805a\u96c6\uff08\u7cfb\u7edf\u91cd\u542f\u53ef\u80fd\u4f1a\u4e22\u5931\uff0c\u9700\u8981\u91cd\u65b0\u805a\u96c6\u518d\u8fd0\u884cuwsgi+nginx\uff09;\n\n3\\ \u751f\u6210\u9a8c\u8bc1\u7801\u7684pillow\u5305\uff0c\u5b57\u4f53\u6587\u4ef6\u4e0d\u652f\u6301\u76f8\u5bf9\u8def\u5f84\uff0c\u8981\u6539\u4e3a\u7edd\u5bf9\u8def\u5f84\u5bfb\u627e\u5b57\u4f53\u6587\u4ef6\u624d\u80fd\u6b63\u5e38\u663e\u793a;\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#2ifconfigvimwget","title":"2.\u5b89\u88c5ifconfig/vim/wget\u5de5\u5177","text":"<pre><code>yum -y install net-tools.x86_64 vim wget\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#3python3","title":"3.\u5b89\u88c5python3\u53ca\u4f9d\u8d56\u5305","text":"<pre><code># opt\u76ee\u5f55\u4e0b\u8f7d(linux\u6211\u4eec\u91c7\u7528\u6e90\u7801\u5b89\u88c5),\u89e3\u538b\u5230/usr/local/src/\n\nwget https://www.python.org/ftp/python/3.9.12/Python-3.9.12.tgz\ncd /opt\ntar -xzvf /opt/Python-3.9.12.tgz -C /usr/local/src/\n\n# \u5b89\u88c5Python\u4f9d\u8d56\u5305\nyum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make\n\n# \u7cfb\u7edf\u66f4\u65b0\nyum -y update\n</code></pre> <p>\u25cf \u6e90\u7801\u65b9\u5f0f\u5b89\u88c5python-\u68c0\u67e5\u5f53\u524d\u73af\u5883\u662f\u90fd\u6ee1\u8db3\u6761\u4ef6\u4f7f\u7528./configure </p> <pre><code>cd /usr/local/\ntar -xzvf python-3.9.12.tar.gz\ncd ~/Python-3.9.12\n./configure --prefix=/usr/local/python3\nmake &amp;&amp; make install\n</code></pre> <p>\u25cf \u73af\u5883\u53d8\u91cf\u914d\u7f6e</p> <pre><code># \u6dfb\u52a0\u7528\u6237\u7ea7\u73af\u5883\u53d8\u91cf profile.d--\u597d\u7ef4\u62a4\uff0c\u4e0d\u518d\u9700\u8981\u914d\u7f6e\u7684\u73af\u5883\u53d8\u91cf\u76f4\u63a5\u5220\u9664.sh\u6587\u4ef6\u5373\u53ef\u3002\nvim /etc/profile.d/python3.sh\n\n# \u5199\u5165\u5185\u5bb9\u4fdd\u5b58\nexport PATH=$PATH:/usr/local/python3/bin\n\n# \u91cd\u8f7d\u73af\u5883\u53d8\u91cf\u6587\u4ef6\nsource /etc/profile\n\n# \u67e5\u770b\u5f53\u524d\u73af\u5883\u53d8\u91cf\u662f\u5426\u5b58\u5728\necho $PATH\n</code></pre> <p>\u200b   \u9ed8\u8ba4.bashrc\u6587\u4ef6\u73af\u5883\u53d8\u91cf</p> <pre><code># .bashrc\n\n# User specific aliases and functions\n\nalias rm='rm -i'\nalias cp='cp -i'\nalias mv='mv -i'\n\n# Source global definitions\nif [ -f /etc/bashrc ]; then\n        . /etc/bashrc\nfi\nexport NSS_STRICT_NOFORK=DISABLED\n</code></pre> <p>\u25cf \u66f4\u6539pypi\u6e90\u4e3a\u6e05\u534e\u955c\u50cf\u6e90</p> <pre><code>python3 -m pip install --upgrade pip \npip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>\u25cf \u5173\u4e8elinux\u73af\u5883\u53d8\u91cf\u7684\u8bbe\u7f6e\u6587\u7ae0\uff1ahttps://blog.csdn.net/f110300641/article/details/82663132</p>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#4gitsftp-rootip-put-get","title":"4.\u5b89\u88c5git\uff08\u672c\u5730\u4e0a\u4f20\u53ef\u4ee5\u7528sftp root@ip + \u5bc6\u7801=&gt; put / get\uff09","text":"<pre><code>yum -y install git\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#5","title":"5.\u5b89\u88c5\u9879\u76ee\u4f9d\u8d56\u5305","text":"<pre><code>\u5bfc\u51fa\u4f9d\u8d56\u5305\u5217\u8868\uff1a\n\u65b9\u5f0f\u4e00\uff1a\u5bfc\u51fa\u73af\u5883\u5168\u90e8\u5305\npip3 freeze &gt; requirement.txt\n\n\u65b9\u5f0f\u4e8c\uff1a\u5bfc\u51fa\u73af\u5883\u9879\u76ee\u4f9d\u8d56\u5305\npip3 install pipreqs\npipreqs ./ --encoding=utf-8\n\n# \u5b89\u88c5\u5168\u90e8\u5305\npip3 install -r requirements.txt\n</code></pre> <p>\u25cf \u62a5\u9519\u95ee\u9898\uff1a</p> <p>django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module. Did you install mysqlclient?</p> <p>\u25cf \u89e3\u51b3\u65b9\u6cd5\uff1a</p> <pre><code>pip3 install pymysql\n\n\u9879\u76ee\uff08settings.py\u540c\u7ea7)\u76ee\u5f55\u4e2d__init__.py\u4e2d\u6dfb\u52a0\nimport pymysql \npymysql.install_as_MySQLdb()\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#6","title":"6.\u914d\u7f6e\u524d\u8fd0\u884c\u6d4b\u8bd5","text":"<p>cd ... (\u8fdb\u5165\u9879\u76ee\u76ee\u5f55)</p> <p>python3 manage.py runserver 192.168.127.145:80</p> <p></p> <p></p> <p>\u542f\u52a8\u6210\u529f\uff01\u6ca1\u6709\u95ee\u9898\uff0c\u7ee7\u7eed\u4e0b\u9762\uff1b</p>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#7uwsgi","title":"7.\u5b89\u88c5\u53ca\u914d\u7f6euWSGI","text":""},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#uwsgi","title":"\u25cf \u5b89\u88c5uWSGI","text":"<pre><code>python3 -m pip install --upgrade pip setuptools uwsgi\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#uwsgi_1","title":"\u25cf uWSGI\u542f\u52a8\u670d\u52a1\u6d4b\u8bd5\uff08\u9879\u76ee\u76ee\u5f55\u6267\u884c\uff09","text":"<pre><code>uwsgi --http :80 --wsgi-file Django_Stdy02_EMS/wsgi.py\n# \u6216\u8005 uwsgi --http :80 --module Django_Stdy02_EMS.wsgi:application\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#uwsgiini","title":"\u25cf \u7f16\u5199uwsgi.ini\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#1-djangouwsgiini","title":"1. django\u914d\u7f6euwsgi.ini","text":"<pre><code> vim /opt/Django_Stdy02_EMS/uwsgi.ini\n</code></pre> <pre><code>[uwsgi]\nchdir=/opt/Django_Stdy02_EMS/\nmodule=Django_Stdy02_EMS.wsgi:application\nsocket=127.0.0.1:8000\npidfile=uwsgi.pid\ndaemonize=uwsgi.log\nchmod-socket=660\nmaster=true\nvacuum=true\nthunder-lock=true\nenable-threads=true\nharakiri=30\npost-buffering=4096\nprocesses=2\nthreads=2\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#2-flaskuwsgiini","title":"2. flask\u914d\u7f6euwsgi.ini","text":"<pre><code>[uwsgi]\n;\u8fd0\u884c\u5165\u53e3\uff0cpy\u6587\u4ef6\u540d:app\u540d\u79f0\nmodule=app:app\nmaster=true\n;\u8fdb\u7a0b\u6570\nprocesses=2\n;\u8fd0\u884c\u76ee\u5f55\nchdir=/data/qdwskj_project/micservice/\nsocket=uwsgi.sock\nsocket=127.0.0.1:8000\n;\u8fdb\u7a0bpid\u6587\u4ef6\npidfile=uwsgi.pid\n;\u65e5\u5fd7\u6587\u4ef6\ndaemonize=uwsgi.log\nchmod-socket=660\nvacuum=true\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#uwsgiuwsgiinit","title":"\u25cf \u542f\u52a8uWSGI\u6d4b\u8bd5\uff08uwsgi.init\u76ee\u5f55\u6267\u884c\uff09","text":"<pre><code># \u5173\u95eduwsgi\u6240\u6709\u8fdb\u7a0b\npkill -f uwsgi -9\n# \u542f\u52a8\nuwsgi --ini uwsgi.ini\n# \u67e5\u770b\u8fdb\u7a0b\nps -ef|grep -i uwsgi\n# \u91cd\u542f\nuwsgi --reload uwsgi.pid\n# \u5173\u95ed\nuwsgi --stop uwsgi.pid\n\n#\u76ee\u5f55\u4f1a\u751f\u6210\u6587\u4ef6\nuwsgi.ini\nuwsgi.log\nuwsgi.pid\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#8nginx","title":"8.\u5b89\u88c5\u53ca\u914d\u7f6eNginx","text":"<pre><code>yum\u6e90\u5b89\u88c5nginx\uff08\u63a8\u8350\uff09\n\n# \u67e5\u770b\u662f\u5426\u5b58\u5728nginx\nrpm -qa | grep nginx\n\n# \u5220\u9664nginx\u5305\uff08\u5f3a\u5236\u6a21\u5f0f\uff09\nrpm -e --nodeps \u8f6f\u4ef6\u5305\u540d\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#yumvim-etcyumreposdnginxrepo","title":"\u25cf \u7f16\u8f91yum\u6e90\u6587\u4ef6\uff1avim /etc/yum.repos.d/nginx.repo","text":"<pre><code>[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n</code></pre> <pre><code># \u5b89\u88c5\u4f9d\u8d56\u5305\nsudo yum  -y install yum-utils\n\n# \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u7a33\u5b9a\u7684nginx\u8f6f\u4ef6\u5305\u7684\u5b58\u50a8\u5e93\u3002\u5982\u679c\u8981\u4f7f\u7528\u4e3b\u7ebfnginx\u8f6f\u4ef6\u5305\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\nsudo yum-config-manager --enable nginx-mainline\n\n# \u67e5\u770b\u7248\u672c\u5217\u8868\nyum list | grep nginx\n\n# \u5b89\u88c5\nsudo yum install nginx -y\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#django","title":"\u25cf \u8bbe\u7f6edjango\u9879\u76ee\u9759\u6001\u6587\u4ef6","text":"<p># \u5728setting.py\u6587\u4ef6\u5185STATIC_URL = '/static/' \u540e\u9762\u6dfb\u52a0\uff1a</p> <pre><code>STATIC_ROOT = os.path.join(BASE_DIR, \"static/\")\n</code></pre> <p># \u8fd0\u884c\u547d\u4ee4\u590d\u5236\u9759\u6001\u6587\u4ef6\uff1a</p> <pre><code>python3 manage.py collectstatic\n</code></pre> <pre><code># Nginx\u7f16\u8f91\u914d\u7f6e\nvim /etc/nginx/conf.d/Django_Study02_EMS.conf\n\n# nginx\u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u5408\u6cd5\u6027\nnginx  -t \n\n# \u67e5\u770b\u8fdb\u7a0b\nps -ef|grep nginx\n\n#\u5173\u6389ngxin\u8fdb\u7a0b\npkill -f nginx -9\n\n#\u542f\u52a8nginx\nsystemctl start nginx\nnginx\u914d\u7f6e\u8bbe\u7f6e vim /etc/nginx/conf.d/Django_Study02_EMS.conf\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#nginxconf","title":"\u25cf \u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\uff1anginx.conf","text":"<pre><code>#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    use epoll;\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server {\n        listen       80;\n        server_name  127.0.0.1;\n\n        charset utf-8;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            include uwsgi_params;\n            uwsgi_connect_timeout 30;\n            uwsgi_pass 127.0.0.1:8000;\n        }\n\n        location /static/ {\n            alias  /data/qdwskj_project/micservice/templates/static/;\n            index  index.html index.htm;\n        }\n\n        gzip on;\n        gzip_types text/plain application/x-javascript text/css text/javascript application/x-httpd-php application/json text/json image/jpeg image/gif image/png application/octet-stream;\n\n        error_page  404              /404.html;\n        error_page   500 502 503 504  /50x.html;\n\n\n        # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n        #\n        #location ~ \\.php$ {\n        #    proxy_pass   http://127.0.0.1;\n        #}\n\n        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n        #\n        #location ~ \\.php$ {\n        #    root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n        #    fastcgi_index  index.php;\n        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n        #    include        fastcgi_params;\n        #}\n\n        # deny access to .htaccess files, if Apache's document root\n        # concurs with nginx's one\n        #\n        #location ~ /\\.ht {\n        #    deny  all;\n        #}\n    }\n\n\n    # another virtual host using mix of IP-, name-, and port-based configuration\n    #\n    #server {\n    #    listen       8000;\n    #    listen       somename:8080;\n    #    server_name  somename  alias  another.alias;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n\n    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    ssl_certificate      cert.pem;\n    #    ssl_certificate_key  cert.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n\n    #    ssl_ciphers  HIGH:!aNULL:!MD5;\n    #    ssl_prefer_server_ciphers  on;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n}\n</code></pre> <p>\u91c7\u7528\u6e90\u7801\u5b89\u88c5Nginx\uff1b\u914d\u7f6e\u6587\u4ef6\u6bd4\u8fd9\u4e2a\u9ebb\u70e6\u4e00\u4e9b\uff1b</p> <p></p> <p>\u8fdb\u5165\u7f51\u7ad9\u67e5\u770b\uff1a\u529f\u80fd\u6b63\u5e38~~</p>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#httpsnginxconf","title":"\u25cf https\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\uff1anginx.conf","text":"<pre><code>#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    #server {\n    #    listen       80;\n    #    server_name  www.qdwskj.com;\n    #    \n    #    charset utf-8;\n    #\n    #    #access_log  logs/host.access.log  main;\n    #\n    #    location / {\n    #        include uwsgi_params;\n    #        uwsgi_connect_timeout 30;\n    #        uwsgi_pass 127.0.0.1:8000;\n    #    }\n    #\n    #    location /static/ {\n    #        alias  /data/qdwskj_project/micservice/templates/static/;\n    #        index  index.html index.htm;\n    #    }\n    #\n    #    gzip on;\n    #    gzip_types text/plain application/x-javascript text/css text/javascript application/x-httpd-php application/json text/json image/jpeg image/gif image/png application/octet-stream;\n    #\n    #    error_page  404              /404.html;\n    #    error_page   500 502 503 504  /50x.html;\n    #\n    #\n    #    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #    #\n    #    #location ~ \\.php$ {\n    #    #    proxy_pass   http://127.0.0.1;\n    #    #}\n    #\n    #    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #    #\n    #    #location ~ \\.php$ {\n    #    #    root           html;\n    #    #    fastcgi_pass   127.0.0.1:9000;\n    #    #    fastcgi_index  index.php;\n    #    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    #    #    include        fastcgi_params;\n    #    #}\n    #\n    #    # deny access to .htaccess files, if Apache's document root\n    #    # concurs with nginx's one\n    #    #\n    #    #location ~ /\\.ht {\n    #    #    deny  all;\n    #    #}\n    #}\n\n\n    # another virtual host using mix of IP-, name-, and port-based configuration\n    #\n    #server {\n    #    listen       8000;\n    #    listen       somename:8080;\n    #    server_name  somename  alias  another.alias;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n\n    # HTTPS server\n\n    server {\n        listen 80;\n        server_name www.qdwskj.com;    #\u586b\u5199\u60a8\u7684\u8bc1\u4e66\u7ed1\u5b9a\u7684\u57df\u540d\uff0c\u4f8b\u5982\uff1acloud.tencent.com\n        return 301 https://$host$request_uri;    #\u5c06http\u7684\u57df\u540d\u8bf7\u6c42\u8f6c\u6210https\n    }\n\n    server {\n        listen       443 ssl;\n        server_name  www.qdwskj.com;\n\n        charset utf-8;\n\n        ssl_certificate qdwskj.com_bundle.crt;\n        ssl_certificate_key qdwskj.com.key;\n\n        ssl_session_cache    shared:SSL:1m;\n        ssl_session_timeout  5m;\n\n        ssl_ciphers  HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers  on;\n\n        location / {\n            include uwsgi_params;\n            uwsgi_connect_timeout 30;\n            uwsgi_pass 127.0.0.1:8000;\n        }\n\n        location /static/ {\n            alias  /data/qdwskj_project/micservice/templates/static/;\n            index  index.html index.htm;\n        }\n\n        gzip on;\n        gzip_types text/plain application/x-javascript text/css text/javascript application/x-httpd-php application/json text/json image/jpeg image/gif image/png application/octet-stream;\n\n        error_page  404              /404.html;\n        error_page   500 502 503 504  /50x.html;\n\n    }\n\n}\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#9","title":"9.\u603b\u7ed3\u4ee3\u7406\u5173\u7cfb\u6d41\u7a0b","text":""},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#10uwsginginx","title":"10.\u5173\u4e8euwsgi\u548cNginx\u77e5\u8bc6","text":"<p>\u25cf uWSGI\u662f\u4e00\u4e2aWeb\u670d\u52a1\u5668\uff0c\u5b83\u5b9e\u73b0\u4e86WSGl\u534f\u8bae\u3001uwsgi\u3001 http\u7b49\u534f\u8bae\u3002Nginx\u4e2dHttpUwsgiModule\u7684\u4f5c\u7528\u662f\u4e0euWSGI\u670d\u52a1\u5668\u8fdb\u884c\u4ea4\u6362\u3002</p> <p>\u8981\u6ce8\u610fwSGI / uwsgi / uwSGI\u8fd9\u4e09\u4e2a\u6982\u5ff5\u7684\u533a\u5206\u3002</p> <p>\u25cf WSGI\u662f\u4e00\u79cd\u901a\u4fe1\u534f\u8bae,Flask,webpy\uff0cDjango\u3001CherryPy\u7b49\u7b49\u90fd\u81ea\u5e26WSGI\uff0c\u4e0d\u8fc7\u6027\u80fd\u90fd\u4e0d\u597d\u3002Web\u670d\u52a1\u5668\u7f51\u5173\u63a5\u53e3(Python  Web Server Gateway Interface\uff0c\u7f29\u5199\u4e3aWSGI)</p> <p>WSGl\u662f\u4e00\u5957\u63a5\u53e3\u6807\u51c6\u534f\u8bae</p> <p>\u25cf uWSGl\u540cWSGl\u4e00\u6837\u662f\u4e00\u79cd\u901a\u4fe1\u534f\u8bae\u3002\u800cuWSGI\u662f\u5b9e\u73b0\u4e86uwsgi\u548cWSGI\u4e24\u79cd\u534f\u8bae\u7684Web\u670d\u52a1\u5668\u3002</p> <p>\u4e3a\u4ec0\u4e48\u6709\u4e86uWSGI\u4e3a\u4ec0\u4e48\u8fd8\u9700\u8981nginx?\u56e0\u4e3anginx\u5177\u5907\u4f18\u79c0\u7684\u9759\u6001\u5185\u5bb9\u5904\u7406\u80fd\u529b\uff0c\u7136\u540e\u5c06\u52a8\u6001\u5185\u5bb9\u8f6c\u53d1\u7ed9uWSGI\u670d\u52a1\u5668\uff0c\u8fd9\u6837\u53ef\u4ee5\u8fbe\u5230\u5f88\u597d\u7684\u5ba2\u6237\u7aef\u54cd\u5e94\u3002</p> <p>\u7edf\u4e00\u6807\u51c6: \u8bf4\u5230\u8fd9\uff0c\u6211\u4eec\u57fa\u672c\u7406\u6e05\u4e86uWSGI\u5728web\u670d\u52a1\u5668\u4e0eweb\u6846\u67b6\u4e4b\u95f4\u4f5c\u7528, uWSGl\u5c31\u50cf\u4e00\u6761\u7ebd\u5e26\uff0c\u5c06web\u670d\u52a1\u5668\u4e0eweb\u6846\u67b6\u8fde\u63a5\u8d77\u6765\u3002Nginx\u5c5e\u4e8e\u4e00\u79cd\u9ad8\u5e76\u53d1\u80fd\u529bweb\u670d\u52a1\u5668\uff0cFlask\u5c5e\u4e8e\u4e00\u79cdweb\u6846\u67b6\uff0c\u56e0\u6b64\uff0cuWSGl\u4e0eNginx\u3001Flask\u7684\u4f5c\u7528\u5c31\u4e0d\u660e\u800c\u55bb\u4e86\u3002</p> <p></p> <p></p>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#nginx","title":"\u25cf Nginx\u914d\u7f6e\u6587\u4ef6\u89e3\u91ca","text":"<pre><code>#\u5b9a\u4e49nginx\u8fd0\u884c\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\n#user  nobody; \n\n\n#nginx\u8fdb\u7a0b\u6570\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u7b49\u4e8eCPU\u603b\u6838\u5fc3\u6570\u3002\nworker_processes  1; \n\n\n#\u5168\u5c40\u9519\u8bef\u65e5\u5fd7\u5b9a\u4e49\u7c7b\u578b\uff0c[ debug | info | notice | warn | error | crit ]\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n\n#\u8fdb\u7a0b\u6587\u4ef6\n#pid   logs/nginx.pid;\n\n\n#\u5de5\u4f5c\u6a21\u5f0f\u4e0e\u8fde\u63a5\u6570\u4e0a\u9650\nevents {\n        # \u5f02\u6b65\u975e\u963b\u585e\u65b9\u5f0f\u8fd0\u884c\uff0c\u8f7b\u677e\u5904\u7406\u767e\u4e07\u7ea7\u7684\u5e76\u53d1\u8fde\u63a5\n        use epoll;\n        #\u5355\u4e2a\u8fdb\u7a0b\u6700\u5927\u8fde\u63a5\u6570\uff08\u6700\u5927\u8fde\u63a5\u6570=\u8fde\u63a5\u6570*\u8fdb\u7a0b\u6570\uff09\n        worker_connections  1024;\n}\n\n\n#\u8bbe\u5b9ahttp\u670d\u52a1\u5668\nhttp {\n        #\u6587\u4ef6\u6269\u5c55\u540d\u4e0e\u6587\u4ef6\u7c7b\u578b\u6620\u5c04\u8868\n        include  mime.types;\n        #\u9ed8\u8ba4\u6587\u4ef6\u7c7b\u578b\n        default_type  application/octet-stream;\n\n        #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n\n        #'$status $body_bytes_sent \"$http_referer\" '\n\n        #'\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n        #access_log  logs/access.log  main;\n\n        #\u5f00\u542f\u9ad8\u6548\u6587\u4ef6\u4f20\u8f93\u6a21\u5f0f\uff0csendfile\u6307\u4ee4\u6307\u5b9anginx\u662f\u5426\u8c03\u7528sendfile\u51fd\u6570\u6765\u8f93\u51fa\u6587\u4ef6\uff0c\u5bf9\u4e8e\u666e\u901a\u5e94\u7528\u8bbe\u4e3a on\uff0c\u5982\u679c\u7528\u6765\u8fdb\u884c\u4e0b\u8f7d\u7b49\u5e94\u7528\u78c1\u76d8IO\u91cd\u8d1f\u8f7d\u5e94\u7528\uff0c\u53ef\u8bbe\u7f6e\u4e3aoff\uff0c\u4ee5\u5e73\u8861\u78c1\u76d8\u4e0e\u7f51\u7edcI/O\u5904\u7406\u901f\u5ea6\uff0c\u964d\u4f4e\u7cfb\u7edf\u7684\u8d1f\u8f7d\u3002\u6ce8\u610f\uff1a\u5982\u679c\u56fe\u7247\u663e\u793a\u4e0d\u6b63\u5e38\u628a\u8fd9\u4e2a\u6539 \u6210off\u3002\n        sendfile   on;\n\n\n        #\u9632\u6b62\u7f51\u7edc\u963b\u585e\n        #tcp_nopushon;\n\n\n        #\u957f\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\n        keepalive_timeout  60;\n\n        #\u5f00\u542fgzip\u538b\u7f29\u8f93\u51fa\n        #gzip  on;\n\n        #\u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e\n        server {\n            #\u76d1\u542c\u7aef\u53e3\n            listen  80;\n\n            #\u57df\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u7a7a\u683c\u9694\u5f00\n            server_name  localhost;\n\n            #\u9ed8\u8ba4\u7f16\u7801\n            charset utf-8;\n\n            #\u5b9a\u4e49\u672c\u865a\u62df\u4e3b\u673a\u7684\u8bbf\u95ee\u65e5\u5fd7\n            #access_log  logs/host.access.log  main;\n\n            location / {\n                root   html;\n                index  index.html index.htm;\n            }\n\n            location /web/ {\n                include uwsgi_params;\n                uwsgi_connect_timeout 30;\n                uwsgi_pass 127.0.0.1:8684;\n            }\n\n            location /static/ {\n                alias  /data/qdwskj_project/micservice/templates/static/;\n                index  index.html index.htm;\n            }\n\n\n            #error_page  404    /404.html;\n\n            # redirect server error pages to the static page /50x.html\n\n            error_page   500 502 503 504  /50x.html;\n\n            location = /50x.html {\n                root   html;\n            }\n\n\n            # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n\n\n            #location ~ \\.php$ {\n\n            #    proxy_pass   http://127.0.0.1;\n\n            #}\n\n\n\n            # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n\n            #\n\n            #location ~ \\.php$ {\n\n            #    root html;\n\n            #    fastcgi_pass   127.0.0.1:9000;\n\n            #    fastcgi_index  index.php;\n\n            #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n\n            #    include   fastcgi_params;\n\n            #}\n\n\n\n            # deny access to .htaccess files, if Apache's document root\n\n            # concurs with nginx's one\n\n            #\n\n            #location ~ /\\.ht {\n\n            #    deny  all;\n\n            #}\n\n        }\n\n\n        # another virtual host using mix of IP-, name-, and port-based configuration\n\n        #\n\n        #server {\n\n        #    listen  8000;\n\n        #    listen  somename:8080;\n\n        #    server_name  somename  alias  another.alias;\n\n\n\n        #    location / {\n\n        #   root   html;\n\n        #   index  index.html index.htm;\n\n        #    }\n\n        #}\n\n\n\n\n\n        # HTTPS server\n\n        #\n\n        #server {\n\n        #    listen  443 ssl;\n\n        #    server_name  localhost;\n\n\n\n        #    ssl_certificate cert.pem;\n\n        #    ssl_certificate_key  cert.key;\n\n\n\n        #    ssl_session_cache    shared:SSL:1m;\n\n        #    ssl_session_timeout  5m;\n\n\n\n        #    ssl_ciphers  HIGH:!aNULL:!MD5;\n\n        #    ssl_prefer_server_ciphers  on;\n\n\n\n        #    location / {\n\n        #   root   html;\n\n        #   index  index.html index.htm;\n\n        #    }\n\n        #}\n\n\n\n}\n</code></pre>"},{"location":"mds/Python-Note/django%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#uwsgi_2","title":"\u25cf uWSGI\u914d\u7f6e\u6587\u4ef6\u89e3\u91ca","text":"<pre><code>uwsgi \u5e38\u7528\u53c2\u6570\n\n\u9879\u76ee\u76ee\u5f55\n\nchdir=/var/www/orange_web/\n\n\n\n\u6307\u5b9a\u9879\u76eeapplication\n\nmodule=orange_web.wsgi:application\n\n\n\n\u6307\u5b9asock\u7684\u6587\u4ef6\u8def\u5f84\uff08nginx\u4f7f\u7528\uff09\n\nsocket=/var/www/script/uwsgi.sock\n\n\n\n\u8fdb\u7a0b\u4e2a\u6570\uff08processess\u4e00\u6837\u6548\u679c\uff09\n\nworkers=2\n\n\n\n\u6307\u5b9a\u542f\u52a8\u65f6\u7684pid\u6587\u4ef6\u8def\u5f84\n\npidfile=/var/www/script/uwsgi.pid\n\n\n\n\u6307\u5b9aip\u53ca\u7aef\u53e3\uff08\u914d\u7f6enginx\u5c31\u4e0d\u9700\u8981\u5355\u72ec\u542f\u52a8uwsgi\u9700\u8981\u586b\u5199\uff09\n\nhttp=172.16.0.4:8001\n\n\u6307\u5b9a\u9759\u6001\u6587\u4ef6\uff08\u914d\u7f6enginx\u4e0d\u9700\u8981\uff0c\u5355\u72ec\u542f\u52a8uwsgi\u52a0\u8f7d\u9759\u6001\u6587\u4ef6\uff09\n\nstatic-map=/static=/var/www/orange_web/static\n\n\u542f\u52a8uwsgi\u7684\u7528\u6237\u540d\u548c\u7528\u6237\u7ec4\n\nuid=root\n\ngid=root\n\n\n\n\u542f\u7528\u4e3b\u8fdb\u7a0b\n\nmaster=true\n\n\n\n\u542f\u7528\u7ebf\u7a0b\n\nenable-threads=true\n\n\n\n\u81ea\u52a8\u79fb\u9664unix Socket\u548cpid\u6587\u4ef6\u5f53\u670d\u52a1\u505c\u6b62\u7684\u65f6\u5019\n\nvacuum=true\n\n\n\n\u8bbe\u7f6e\u65e5\u5fd7\u76ee\u5f55\n\ndaemonize=/var/www/script/uwsgi.log\n\n\n\n\u4e0d\u8bb0\u5f55\u4fe1\u606f\u65e5\u5fd7\uff0c\u53ea\u8bb0\u5f55\u9519\u8bef\u4ee5\u53cauwsgi\u5185\u90e8\u6d88\u606f\n\ndisable-logging=true\n\n\n\n\u5e8f\u5217\u5316\u63a5\u53d7\u7684\u5185\u5bb9\uff0c\u5982\u679c\u53ef\u80fd\u7684\u8bdd\n\nthunder-lock=true\n\n\n\n\u542f\u52a8\u4e3b\u8fdb\u7a0b\uff0c\u6765\u7ba1\u7406\u5176\u4ed6\u8fdb\u7a0b\uff0c\u5176\u5b83\u7684uwsgi\u8fdb\u7a0b\u90fd\u662f\u8fd9\u4e2amaster\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\uff0c\u5982\u679ckill\u8fd9\u4e2amaster\u8fdb\u7a0b\uff0c\u76f8\u5f53\u4e8e\u91cd\u542f\u6240\u6709\u7684uwsgi\u8fdb\u7a0b\u3002\n\nmaster = true\n\n\n\n\u5728app\u52a0\u8f7d\u524d\u5207\u6362\u5230\u5f53\u524d\u76ee\u5f55\uff0c \u6307\u5b9a\u8fd0\u884c\u76ee\u5f55\n\nchdir = /web/www/mysite\n\n\n\n\u52a0\u8f7d\u4e00\u4e2aWSGI\u6a21\u5757,\u8fd9\u91cc\u52a0\u8f7dmysite/wsgi.py\u8fd9\u4e2a\u6a21\u5757\n\nmodule = mysite.wsgi\n\n\n\n\u76d1\u63a7python\u6a21\u5757mtime\u6765\u89e6\u53d1\u91cd\u8f7d (\u53ea\u5728\u5f00\u53d1\u65f6\u4f7f\u7528)\n\npy-autoreload=1\n\n\n\n\u5728\u6bcf\u4e2aworker\u800c\u4e0d\u662fmaster\u4e2d\u52a0\u8f7d\u5e94\u7528\n\nlazy-apps=true\n\n\n\n\u6307\u5b9asocket\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a127.0.0.1:9000\uff0c\u8fd9\u6837\u5c31\u4f1a\u76d1\u542c\u5230\u7f51\u7edc\u5957\u63a5\u5b57\n\nsocket = /test/myapp.sock\n\n\n\n\u542f\u52a82\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\uff0c\u751f\u6210\u6307\u5b9a\u6570\u76ee\u7684worker/\u8fdb\u7a0b\n\nprocesses = 2\n\n\n\n\u8bbe\u7f6e\u7528\u4e8euwsgi\u5305\u89e3\u6790\u7684\u5185\u90e8\u7f13\u5b58\u533a\u5927\u5c0f\u4e3a64k\u3002\u9ed8\u8ba4\u662f4k\u3002\n\nbuffer-size = 32768\n\n\n\n\u4f7f\u8fdb\u7a0b\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u5e76\u5c06\u65e5\u5fd7\u6253\u5230\u6307\u5b9a\u7684\u65e5\u5fd7\u6587\u4ef6\u6216\u8005udp\u670d\u52a1\u5668\n\ndaemonize = /var/log/myapp_uwsgi.log\n\n\n\n\u8bbe\u7f6e\u6700\u5927\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\n\nlog-maxsize = 5000000\n\n\n\n\u7981\u7528\u8bf7\u6c42\u65e5\u5fd7\u8bb0\u5f55\n\ndisable-logging = true\n\n\n\n\u5f53\u670d\u52a1\u5668\u9000\u51fa\u7684\u65f6\u5019\u81ea\u52a8\u5220\u9664unix socket\u6587\u4ef6\u548cpid\u6587\u4ef6\u3002\n\nvacuum = true\n\n\n\n\u8bbe\u7f6esocket\u7684\u76d1\u542c\u961f\u5217\u5927\u5c0f\uff08\u9ed8\u8ba4\uff1a100\uff09\n\nlisten = 120\n\n\n\n\u6307\u5b9apid\u6587\u4ef6\n\npidfile = /var/run/uwsgi.pid\n\n\n\n\u5141\u8bb8\u7528\u5185\u5d4c\u7684\u8bed\u8a00\u542f\u52a8\u7ebf\u7a0b\u3002\u8fd9\u5c06\u5141\u8bb8\u4f60\u5728app\u7a0b\u5e8f\u4e2d\u4ea7\u751f\u4e00\u4e2a\u5b50\u7ebf\u7a0b\n\nenable-threads = true\n\n\n\n\u8bbe\u7f6e\u5728\u5e73\u6ed1\u7684\u91cd\u542f\uff08\u76f4\u5230\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u5904\u7406\u5b8c\u624d\u91cd\u542f\uff09\u4e00\u4e2a\u5de5\u4f5c\u5b50\u8fdb\u7a0b\u4e2d\uff0c\u7b49\u5f85\u8fd9\u4e2a\u5de5\u4f5c\u7ed3\u675f\u7684\u6700\u957f\u79d2\u6570\u3002\u8fd9\u4e2a\u914d\u7f6e\u4f1a\u4f7f\u5728\u5e73\u6ed1\u5730\u91cd\u542f\u5de5\u4f5c\u5b50\u8fdb\u7a0b\u4e2d\uff0c\u5982\u679c\u5de5\u4f5c\u8fdb\u7a0b\u7ed3\u675f\u65f6\u95f4\u8d85\u8fc7\u4e868\u79d2\u5c31\u4f1a\u88ab\u5f3a\u884c\u7ed3\u675f\uff08\u5ffd\u7565\u4e4b\u524d\u5df2\u7ecf\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u800c\u76f4\u63a5\u7ed3\u675f\uff09\n\nreload-mercy = 8\n\n\n\n\u4e3a\u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u8bbe\u7f6e\u8bf7\u6c42\u6570\u7684\u4e0a\u9650\u3002\u5f53\u4e00\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u5904\u7406\u7684\u8bf7\u6c42\u6570\u8fbe\u5230\u8fd9\u4e2a\u503c\uff0c\u90a3\u4e48\u8be5\u5de5\u4f5c\u8fdb\u7a0b\u5c31\u4f1a\u88ab\u56de\u6536\u91cd\u7528\uff08\u91cd\u542f\uff09\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u9009\u9879\u6765\u9ed8\u9ed8\u5730\u5bf9\u6297\u5185\u5b58\u6cc4\u6f0f\n\nmax-requests = 5000\n\n\n\n\u901a\u8fc7\u4f7f\u7528POSIX/UNIX\u7684setrlimit()\u51fd\u6570\u6765\u9650\u5236\u6bcf\u4e2auWSGI\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u4f7f\u7528\u6570\u3002\u8fd9\u4e2a\u914d\u7f6e\u4f1a\u9650\u5236uWSGI\u7684\u8fdb\u7a0b\u5360\u7528\u865a\u62df\u5185\u5b58\u4e0d\u8d85\u8fc7256M\u3002\u5982\u679c\u865a\u62df\u5185\u5b58\u5df2\u7ecf\u8fbe\u5230256M\uff0c\u5e76\u7ee7\u7eed\u7533\u8bf7\u865a\u62df\u5185\u5b58\u5219\u4f1a\u4f7f\u7a0b\u5e8f\u62a5\u5185\u5b58\u9519\u8bef\uff0c\u672c\u6b21\u7684http\u8bf7\u6c42\u5c06\u8fd4\u56de500\u9519\u8bef\u3002\n\nlimit-as = 256\n\n\n\n\u4e00\u4e2a\u8bf7\u6c42\u82b1\u8d39\u7684\u65f6\u95f4\u8d85\u8fc7\u4e86\u8fd9\u4e2aharakiri\u8d85\u65f6\u65f6\u95f4\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8bf7\u6c42\u90fd\u4f1a\u88ab\u4e22\u5f03\uff0c\u5e76\u4e14\u5f53\u524d\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5de5\u4f5c\u8fdb\u7a0b\u4f1a\u88ab\u56de\u6536\u518d\u5229\u7528\uff08\u5373\u91cd\u542f\uff09\n\nharakiri = 60\n\n\n\n\u865a\u62df\u73af\u5883\u8bbe\u7f6e\n\nvirtualenv=/home/saas_env\n</code></pre> <p>\u5b8c\u7f8e\u663e\u793a\uff01</p> <p> </p>"},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/","title":"uwsgi+nginx\u4e24\u79cd\u534f\u8bae\u4ee3\u7406\u914d\u7f6e","text":""},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#uwsgi","title":"\u4e00\u3001\u5173\u4e8euwsgi\u534f\u8bae","text":""},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#1-uwsgiini-httphttp-socketsocket","title":"1 uwsgi.ini \u914d\u7f6e http\u3001http-socket\u548csocket\u533a\u522b","text":""},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#11-httphttp-socket","title":"1.1 http\u548chttp-socket","text":"<ol> <li> <p>\u5982\u679c\u6211\u4eec\u60f3\u76f4\u63a5\u5c06uwsgi\u7528\u4f5c\u670d\u52a1\u5668\uff08\u4f8b\u5982Apache\u548cnginx\u90a3\u6837\uff09\u76f4\u63a5\u66b4\u9732\u5728\u516c\u7f51\u90a3\u4e48\u5c31\u4f7f\u7528http\uff1b</p> </li> <li> <p>\u5982\u679c\u6709\u5355\u72ec\u7684\u670d\u52a1\u5668\uff08\u4f8b\u5982Apache\u6216\u8005nginx\uff09\uff0c\u7531\u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9uwsgi\u5904\u7406\uff0c\u5e76\u4e14\u4f7f\u7528http\u534f\u8bae\uff0c\u90a3\u4e48\u6b64\u65f6\u4f7f\u7528http-socket\u3002</p> </li> <li> <p>\u603b\u7ed3\uff1a</p> </li> </ol> <p>http: \u81ea\u5df1\u4f1a\u4ea7\u751f\u4e00\u4e2ahttp\u8fdb\u7a0b(\u53ef\u4ee5\u8ba4\u4e3a\u4e0enginx\u540c\u4e00\u5c42)\u8d1f\u8d23\u8def\u7531http\u8bf7\u6c42\u7ed9worker, http\u8fdb\u7a0b\u548cworker\u4e4b\u95f4\u4f7f\u7528\u7684\u662fuwsgi\u534f\u8bae    http-socket: \u4e0d\u4f1a\u4ea7\u751fhttp\u8fdb\u7a0b, \u4e00\u822c\u7528\u4e8e\u5728\u524d\u7aefwebserver\u4e0d\u652f\u6301uwsgi\u800c\u4ec5\u652f\u6301http\u65f6\u4f7f\u7528, \u4ed6\u4ea7\u751f\u7684worker\u4f7f\u7528\u7684\u662fhttp\u534f\u8bae    \u56e0\u6b64, http \u4e00\u822c\u662f\u4f5c\u4e3a\u72ec\u7acb\u90e8\u7f72\u7684\u9009\u9879; http-socket \u5728\u524d\u7aefwebserver\u4e0d\u652f\u6301uwsgi\u65f6\u4f7f\u7528,\u5982\u679c\u524d\u7aefwebserver\u652f\u6301uwsgi, \u5219\u76f4\u63a5\u4f7f\u7528socket\u5373\u53ef(tcp or unix)    http\u548chttp-socket\u5bf9\u5e94\u7684nginx\u914d\u7f6e\uff1a</p> <pre><code>server{\n    listen 80;\n    location / {\n    proxy_pass http://127.0.0.1:5000/ #\u5fc5\u987b\u52a0http://\n}\n</code></pre>"},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#12-socket","title":"1.2 socket","text":"<p>\u6309\u7167uwsgi\u6587\u6863\u7ed9\u51fa\u7684\u89e3\u91ca\u662f\uff1abind to the specified UNIX/TCP socket using default protocol.\u4e5f\u5c31\u662f\u8bf4\u6307\u5b9aUNIX/TCP socket\u4f5c\u4e3a\u9ed8\u8ba4\u7684\u534f\u8bae\uff08\u5f15\uff09\u3002 UNIX/TCP socket\u5176\u5b9e\u662f\u4e24\u7c7bsocket\u3002UNIX socket\u662f\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff08Inter Process Communication\uff09\uff0c\u4f46\u53ea\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff1bTCP/IP sockets\u5141\u8bb8\u8fdb\u7a0b\u901a\u8fc7\u7f51\u7edc\u901a\u4fe1\u3002 \u5728uwsgi\u4e2d\u5982\u679c\u914d\u7f6e\u5982\u4e0b\u5219\u662f\u4f7f\u7528UNIX socket\uff1a</p> <pre><code>;\u7b2c1\u79cd\u65b9\u5f0f ------------------------------------------\n[uwsgi]\nsocket = /tmp/uwsgi.sock\n\n;uWSGI socket\uff08unix socket\uff09 nginx\u914d\u7f6e\nuwsgi_pass unix:///tmp/uwsgi.sock;\ninclude uwsgi_params;\n\n;\u7b2c2\u79cd\u65b9\u5f0f ------------------------------------------\n[uwsgi]\nsocket = 127.0.0.1:8000\n\n;uWSGI socket\uff08unix socket\uff09 nginx\u914d\u7f6e\nTCP sockets\nuwsgi_pass 127.0.0.1:8000;\ninclude uwsgi_params;\n</code></pre>"},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#http","title":"\u4e8c\u3001http\u534f\u8bae\u53cd\u5411\u4ee3\u7406\u914d\u7f6e\u793a\u4f8b","text":""},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#uwsgiini","title":"uwsgi.ini\u914d\u7f6e","text":"<pre><code>[uwsgi]\nmodule = app:app\nmaster = true\nprocesses =2\nchdir =/data/qdwskj_project/micservice/\nhttp = 0.0.0.0:8000\n;socket = 0.0.0.0:8000\n;http-socket = 0.0.0.0:8000\nhttp =0.0.0.0:8000\npidfile=uwsgi.pid\ndaemonize=uwsgi.log\nchmod-socket =660\nvacuum = true\nbuffer-size = 65536\n</code></pre> <p>nginx.conf\u914d\u7f6e</p> <pre><code>server{\n    listen 80;\n    location / {\n    # \u5bf9\u5e94http\u6216http-socket\u65b9\u5f0f\n    proxy_pass http://127.0.0.1:8000/ #\u5fc5\u987b\u52a0http://\n}\n</code></pre>"},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#uwsgi_1","title":"\u4e09\u3001uwsgi\u534f\u8bae\u53cd\u5411\u4ee3\u7406\u914d\u7f6e\u793a\u4f8b","text":""},{"location":"mds/Python-Note/uwsgi%2Bnginx%E4%B8%A4%E7%A7%8D%E5%8D%8F%E8%AE%AE%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/#uwsgiini_1","title":"uwsgi.ini\u914d\u7f6e","text":"<pre><code>[uwsgi]\nmodule = app:app\nmaster = true\nprocesses =2\nchdir =/data/qdwskj_project/micservice/\n;http = 0.0.0.0:8000\nsocket = 0.0.0.0:8000\n;http-socket = 0.0.0.0:8000\nhttp =0.0.0.0:8000\npidfile=uwsgi.pid\ndaemonize=uwsgi.log\nchmod-socket =660\nvacuum = true\nbuffer-size = 65536\n</code></pre> <p>nginx.conf\u914d\u7f6e</p> <pre><code>server{\n    listen 80;\n    location / {\n    # \u5bf9\u5e94socket\u65b9\u5f0f\n    include uwsgi_params;\n    uwsgi_pass 127.0.0.1:8000;\n    uwsgi_connect_timeout 30;\n}\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/","title":"Basic","text":""},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#pnpm","title":"\u4e00\u3001\u9879\u76ee\u521b\u5efa\u547d\u4ee4(pnpm)","text":"<p>\u9879\u76ee\u540d\uff1abasic</p> <p>\u6a21\u677f\uff1avue-ts  (\u6587\u6863\uff1ahttps://cn.vite.dev/guide/)</p> <p>\u5728\u7ebfIDE\uff1ahttps://stackblitz.com/edit/vitejs-vite-u5ajgo2v?file=index.html&amp;terminal=dev</p> <pre><code>npm install -g pnpm\npnpm create vite basic --template vue-ts\n# \u8fdb\u5165\u9879\u76ee\u8fdb\u884c\u521d\u59cb\u5316\ncd basic\npnpm install\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#typescript","title":"\u4e8c\u3001\u5b66\u4e60TypeScript","text":"<ul> <li>\u5f00\u53d1\u73af\u5883\u6d4b\u8bd5ts\u811a\u672c</li> </ul> <pre><code># \u4f7f\u7528 pnpm \u5b89\u88c5 typescript \u548c ts-node\npnpm add -D typescript ts-node\n\n# \u5982\u679c\u4f60\u60f3\u540c\u65f6\u5b89\u88c5 Node.js \u7c7b\u578b\u5b9a\u4e49\u6587\u4ef6\uff08\u63a8\u8350\uff0c\u7528\u4e8e\u83b7\u5f97\u66f4\u597d\u7684\u7c7b\u578b\u63d0\u793a\uff09\npnpm add -D @types/node\n</code></pre> <ul> <li> <p>WebStorm \u4e2d\u914d\u7f6e\u8fd0\u884c</p> </li> <li> <p>\u53f3\u4e0a\u89d2\u6dfb\u52a0\u914d\u7f6e\uff0c\u9009\u62e9node.js</p> </li> <li>\u8f93\u5165\u540d\u79f0\uff1arunTS\uff1b\u9009\u62e9scrip\u6587\u4ef6\uff0c\u5373\u53ef</li> </ul>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#1","title":"1 \u6570\u636e\u7c7b\u578b","text":"<pre><code>// \u81ea\u5b9a\u4e49\u7c7b\u578b\ntype OderId = number\n\n// \u8054\u5408\u7c7b\u578b\ntype OderId = number | string | bigint\n\n// \u5b9a\u4e49\u5f15\u7528\u7c7b\u578b object\ntype Gender = \"man\" | \"woman\";  // tS\u652f\u6301\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b\n\ntype Person = {\n    name: string;\n    age: number;\n    gender: Gender;\n    others: {\n        hobby: string[];\n    };\n};\n\ntype PigColor = \"white\" | \"black\"\ntype Pig = {\n    name: string;\n    age: number;\n    color: PigColor\n}\n\n// \u5b9a\u4e49\u4ea4\u53c9\u7c7b\u578b\uff08\u7c7b\u578b\u5e76\u96c6\uff09 -- Animal\u542b\u6709Person+Pig\u5168\u90e8\u5b57\u6bb5\ntype Animal = Person &amp; Pig\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#2","title":"2 \u6cdb\u578b\u5b9a\u4e49","text":"<p>\u6cdb\u578b\u53ef\u4ee5\u5b9e\u73b0\uff1a\u5728\u5b9e\u4f8b\u5316\u7c7b\u578b\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5bf9\u5e94\u7684\u7c7b\u578b</p>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#21","title":"2.1 \u4e0d\u9650\u5236\u5b9a\u4e49\u5b57\u6bb5\u6cdb\u578b","text":"<p>\u4e0d\u9650\u5236\u5b57\u6bb5\u540d\u5fc5\u987b\u6709\uff1ahobby</p> <pre><code>type Person&lt;T&gt; = {\n    name: string;\n    age: int;\n    gender: Gender;\n    others: T;\n};\n\nconst person = Person&lt;{ hobby: string[] }&gt;{\n    name: \"chc\",\n    age: 29,\n    gender: \"man\",\n    others: {\n        hobby: [\"\u5531\u6b4c\", \"\u8df3\u821e\"]\n    }\n}\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#22","title":"2.2 \u9650\u5236\u5b9a\u4e49\u5b57\u6bb5\u6cdb\u578b","text":"<p>\u9650\u5236\u5b57\u6bb5\u540d\u5fc5\u987b\u6709\uff1ahobby</p> <pre><code>// \u5b9a\u4e49\u5f15\u7528\u7c7b\u578b object\ntype Gender = \"man\" | \"woman\";  // tS\u652f\u6301\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b\n\ntype Person&lt;T extends { hobby: string[] }&gt; = {\n    name: string;\n    age: number;\n    gender: Gender;\n    others: T;\n};\n\n// hobby\u5b57\u6bb5\u5fc5\u987b\u6709\nconst person: Person&lt;{ hobby: string[]; salary: number }&gt; = {\n    name: \"chc\",\n    age: 29,\n    gender: \"man\",\n    others: {\n        hobby: [\"\u5531\u6b4c\", \"\u8df3\u821e\"],\n        salary: 20000\n    }\n}\n\nconsole.log(person);\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#23","title":"2.3 \u5b9a\u4e49\u9ed8\u8ba4\u5b57\u6bb5\u6cdb\u578b","text":"<pre><code>// \u5b9a\u4e49\u5f15\u7528\u7c7b\u578b object\ntype Gender = \"man\" | \"woman\";  // tS\u652f\u6301\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b\n\n// \u9ed8\u8ba4\u5b57\u6bb5\u6cdb\u578b\ntype Person&lt;T = { hobby: string[] }&gt; = {\n    name: string;\n    age: number;\n    gender: Gender;\n    others: T;\n};\n\n// hobby\u5b57\u6bb5\u5fc5\u987b\u6709\nconst person: Person = {\n    name: \"chc\",\n    age: 29,\n    gender: \"man\",\n    others: {\n        hobby: [\"\u5531\u6b4c\", \"\u8df3\u821e\"],\n    }\n}\n\nconsole.log(person);\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#24-extends","title":"2.4 extends\u5173\u952e\u5b57\u4f7f\u7528\u573a\u666f","text":"<p>\u5173\u952e\u5b57 extends \u4e3b\u8981\u4f7f\u7528\u573a\u666f\uff1a</p> <ol> <li>\u7ee7\u627f</li> <li>\u5b9a\u4e49\u6cdb\u578b</li> <li>\u6761\u4ef6\u7c7b\u578b</li> </ol>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#241","title":"2.4.1 \u7ee7\u627f","text":"<pre><code>type Gender = 'male' | 'female';\n\nclass Person {\n    name: string;\n    age: number;\n    gender: Gender;\n}\n\nclass Teacher extends Person {\n    college: string;\n}\n\nclass Student extends Person {\n    grade: number;\n}\n\nconst student: Student = {\n    name: \"\u5c0f\u660e\",\n    age: 18,\n    gender: \"male\",\n    grade: 8\n};\n\nconsole.log(student);\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#242","title":"2.4.2 \u6cdb\u578b\u7ea6\u675f","text":"<pre><code>function Say&lt;T extends { id: number; name: string }&gt;(info: T) {\n    console.log(info);\n}\n\n// \u5fc5\u987b\u5305\u542b\u6cdb\u578b\u7ea6\u675f\u5b57\u6bb5\uff1aid\u3001name\nSay({id: 100, name: \"Hello World!\", hobby: [\"sing song\", \"play game\"]})\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#243","title":"2.4.3 \u6761\u4ef6\u7c7b\u578b","text":"<p>\u4e09\u76ee\u8fd0\u7b97\u7b26\u786e\u5b9a\u6761\u4ef6\u7c7b\u578b</p> <pre><code>type IsString&lt;T&gt; = T extends string ? true : false;\n\nconst isString: IsString&lt;string&gt; = true;  // \u53ea\u80fd\u662f\uff1astring+true \u6216 \u5176\u4ed6\u7c7b\u578b+false \u5426\u5219\u62a5\u9519\n\nconsole.log(isString);\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#3-pickomitreadonly","title":"3 \u5185\u7f6e\u7c7b\u578b\u5de5\u5177(Pick/Omit/Readonly...)","text":"<pre><code>type Person = {\n    name: string;\n    age: number;\n    gender: string;\n}\n\n// \u521b\u5efa\u4e00\u4e2a\u7c7b\u578b\uff0c\u53ea\u9700\u8981Person\u91cc\u9762\u7684\u67d0\u4e9b\u5b57\u6bb5\u6216\u8bbe\u7f6e\u4e3a\u53ea\u8bfb\uff1a\u4f7f\u7528\u5185\u7f6e\u7c7b\u578b\u5de5\u5177\ntype NamePerson = Pick&lt;Person, 'name'&gt;;  // \u53ea\u53d6\u67d0\u4e9b\u5b57\u6bb5\ntype AgePerson = Omit&lt;Person, 'name' | 'age'&gt;;  // \u6392\u9664\u67d0\u4e9b\u5b57\u6bb5\ntype ReadonlyPerson = Readonly&lt;Person&gt;;\n\nconst agePerson: AgePerson = {\n    gender: 'male',\n}\n\nconsole.log(agePerson);\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#4","title":"4 \u7c7b\u578b\u4fdd\u62a4","text":"<p>\u5224\u65ad\u7c7b\u578b\u4f5c\u51fa\u76f8\u5e94\u7684\u64cd\u4f5c</p> <pre><code>type Index = number | string;\n\nfunction isNumber(x: unknown): x is number {\n    return typeof x === \"number\"\n}\n\nlet num = 0\nconst index: Index = \"123\"\n// const index: Index = 123\n\n// index \u4e0d\u662f\u6570\u5b57\u7c7b\u578b\u5219\u81ea\u52a8\u8f6c\u6362\nif (isNumber(index) === false) {\n    console.log('index is not a number')\n    num = Number(index)\n} else {\n    num = index\n}\n\nconsole.log('num', num)\n</code></pre>"},{"location":"mds/Vue3-Note/Vue3%2BTS%2BPnpm-Note/#vue3ts","title":"\u4e09\u3001vue3\u4f7f\u7528TS\u5b9a\u4e49\u7c7b\u578b\u7ea6\u675f","text":"<pre><code>&lt;template&gt;\n  &lt;h2&gt;name: {{ name }}&lt;/h2&gt;\n  &lt;h2&gt;age: {{ age }}&lt;/h2&gt;\n  &lt;h2 @click=\"isOpen = !isOpen\"&gt;{{ isOpen ? '\u70b9\u51fb\u5173\u95ed' : '\u70b9\u51fb\u5f00\u542f' }}&lt;/h2&gt;\n  &lt;p&gt;\n    {{ personInfo?.age}}\n  &lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script setup lang=\"ts\"&gt;\nimport {defineProps, ref} from 'vue';\n\n// \u5b8f\u5b9a\u4e49 - \u7236\u4f20\u5b50 - \u7c7b\u578b\u7ea6\u675f\ndefineProps&lt;{\n  name: string;\n  age: number\n}&gt;();\n\n// \u5f00\u5173\u72b6\u6001\u663e\u793a - \u7c7b\u578b\u7ea6\u675f\nconst isOpen = ref&lt;boolean&gt;(false);\n\n// \u6570\u636e\u4fe1\u606f - \u7c7b\u578b\u7ea6\u675f\nconst personInfo = ref&lt;{\n  name: string;\n  age: number\n}&gt;();\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n\n&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/","title":"vue3-\u5165\u95e8","text":"<p>Vue \u4f7f\u7528\u4e00\u79cd\u57fa\u4e8e HTML\u7684\u6a21\u677f\u8bed\u6cd5\uff0c\u4f7f\u6211\u4eec\u80fd\u591f\u58f0\u660e\u5f0f\u5730\u5c06\u5176\u7ec4\u4ef6\u5b9e\u4f8b\u7684\u6570\u636e\u7ed1\u5b9a\u5230\u5448\u73b0\u7684 DOM \u4e0a\u3002\u6240\u6709\u7684 Vue \u6a21\u677f\u90fd\u662f\u8bed\u6cd5\u5c42\u9762\u5408\u6cd5\u7684 HTML\uff0c\u53ef\u4ee5\u88ab\u7b26\u5408\u89c4\u8303\u7684\u6d4f\u89c8\u5668\u548c HTML\u89e3\u6790\u5668\u89e3\u6790\u3002</p> <p>** \u5b98\u65b9\u6587\u6863\uff1a**https://cn.vuejs.org/guide/introduction.html</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#nvm","title":"\u4e00\u3001nvm\u5de5\u5177\u7684\u4f7f\u7528","text":"<p>\u5b89\u88c5\u6587\u6863\uff1ahttps://nvm.p6p.net/download.html</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1","title":"1 \u57fa\u7840\u547d\u4ee4+\u5b89\u88c5\u914d\u7f6e","text":"<pre><code>nvm list # \u67e5\u770b\u5df2\u7ecf\u5b89\u88c5\u7684\u7248\u672c\nnvm list installed  # \u67e5\u770b\u5df2\u7ecf\u5b89\u88c5\u7684\u7248\u672c\nnvm list available  # \u67e5\u770b\u7f51\u7edc\u53ef\u4ee5\u5b89\u88c5\u7684\u7248\u672c\nnvm install latest  # \u5b89\u88c5\u6700\u65b0\u7248\u672cnode.js\nnvm on # \u6253\u5f00nodejs\u7248\u672c\u63a7\u5236\nnvm off # \u5173\u95ednodejs\u7248\u672c\u63a7\u5236\n\nnvm arch # \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u4f4d\u6570\u548c\u5f53\u524dnodejs\u7684\u4f4d\u6570\nnvm install [arch]  # \u5b89\u88c5\u5236\u5b9a\u7248\u672c\u7684node \u5e76\u4e14\u53ef\u4ee5\u6307\u5b9a\u5e73\u53f0 version \u7248\u672c\u53f7 arch \u5e73\u53f0\nnvm proxy [url] # \u67e5\u770b\u548c\u8bbe\u7f6e\u4ee3\u7406\nnvm node_mirror [url] # \u8bbe\u7f6e\u6216\u8005\u67e5\u770bsetting.txt\u4e2d\u7684node_mirror\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u662f https://nodejs.org/dist/\nnvm npm_mirror [url] # \u8bbe\u7f6e\u6216\u8005\u67e5\u770bsetting.txt\u4e2d\u7684npm_mirror,\u5982\u679c\u4e0d\u8bbe\u7f6e\u7684\u8bdd\u9ed8\u8ba4\u7684\u662f\uff1ahttps://github.com/npm/npm/archive/.\nnvm uninstall 16.9.1  # \u5378\u8f7d\u6307\u5b9a\u7684\u7248\u672c\nnvm use [version] [arch] # \u5207\u6362\u5236\u5b9a\u7684node\u7248\u672c\u548c\u4f4d\u6570\nnvm root [path] # \u8bbe\u7f6e\u548c\u67e5\u770broot\u8def\u5f84\nnvm version # \u67e5\u770b\u5f53\u524d\u7684\u7248\u672c\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6210\uff0c\u81ea\u52a8\u9644\u5e26\u73af\u5883\u53d8\u91cf\uff0c\u5176\u4e2d<code>D:\\Nodejs</code> \u8fd9\u4e2a\u662f\u5f53\u524d\u4f7f\u7528nodejs\u6587\u4ef6\u5939\u5feb\u6377\u65b9\u5f0f</p> <p></p> <p>\u6dfb\u52a0\u955c\u50cf\u6e90\uff1a</p> <pre><code>nvm npm_mirror https://npmmirror.com/mirrors/npm/\nnvm node_mirror https://npmmirror.com/mirrors/node/\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#vue3","title":"\u4e8c\u3001vue3\u521b\u5efa\u9879\u76ee","text":"<p>\u4fdd\u59c6\u7ea7\u521b\u5efa\u9879\u76ee\u6307\u5bfc\uff1ahttps://www.bilibili.com/video/BV1MHSMYvEJq/?spm_id_from=333.1391.0.0&amp;vd_source=8bbd1ae82def35aeb499dde7680a0ee6</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_1","title":"1 \u9879\u76ee\u6280\u672f\u9009\u578b","text":"<ul> <li> <p>Vue3\uff1a\u4e3b\u6d41\u524d\u7aef\u6846\u67b6</p> </li> <li> <p>Vite/Vue-CLl \u811a\u624b\u67b6 \u811a\u624b\u67b6\uff1a\u5feb\u901f\u542f\u52a8\u9879\u76ee</p> </li> <li> <p>Ant Design \u7ec4\u4ef6\u5e93\uff1a\u5feb\u901f\u5f00\u53d1 U\u754c\u9762</p> </li> <li> <p>Axios \u8bf7\u6c42\u5e93\uff1a\u5411\u540e\u7aef\u53d1\u9001\u8bf7\u6c42</p> </li> <li> <p>Pinia \u72b6\u6001\u7ba1\u7406\uff1a\u7ef4\u62a4\u524d\u7aef\u5168\u5c40\u6570\u636e</p> </li> <li> <p>\u524d\u7aef\u5de5\u7a0b\u5316\uff1aESLint+Prettier+TypeScript\uff0c\u4fdd\u8bc1\u524d\u7aef\u9879\u76ee\u5f00\u53d1\u89c4\u8303\uff0c\u5b89\u88c5\u547d\u4ee4\uff1a<code>Prettiernpm install -save-dev ESLint Prettier</code></p> </li> <li> <p>WebStorm\u9879\u76ee\u914d\u7f6e\uff1a</p> </li> </ul> <p> </p> <p> </p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2-npm","title":"2 npm\u547d\u4ee4","text":"<p>\u955c\u50cf\u6e90\uff1a</p> <pre><code>1. \u5b98\u65b9\u955c\u50cf\uff1ahttps://registry.npmjs.org/\n2. \u6dd8\u5b9d\u955c\u50cf\uff1ahttps://registry.npmmirror.com\n3. cnpm\u955c\u50cf\uff1ahttps://r.cnpmjs.org/\n4. \u963f\u91cc\u4e91\u955c\u50cf\uff1ahttps://npm.aliyun.com/\n5. \u4e2d\u56fd\u79d1\u6280\u5927\u5b66\u955c\u50cf\uff1ahttps://mirrors.ustc.edu.cn/npm/\n6. \u534e\u4e3a\u4e91\u955c\u50cf\uff1ahttps://mirrors.huaweicloud.com/repository/npm/\n7. \u4e03\u725b\u4e91\u955c\u50cf\uff1ahttps://npm.qiniu.com/\n</code></pre> <pre><code># npm\u7684\u914d\u7f6e\u6587\u4ef6\u662f\uff1a.npmrc \uff0c\u9ed8\u8ba4\u5728\u7528\u6237\u76ee\u5f55 C:\\Users\\\u7528\u6237\\.npmrc \u6216 ~/.npmrc\n\nnpm config ls ## \u67e5\u770b\u7b80\u5355\u7684\u914d\u7f6e\u9879\nnpm config ls -l  ##\u3000\u67e5\u770b\u6240\u6709\u914d\u7f6e\u9879\nnpm config get cache  ## \u67e5\u770b\u7f13\u5b58\u914d\u7f6e\uff0cget\u540e\u9762\u53ef\u4ee5\u8ddf\u4efb\u610f\u914d\u7f6e\u9879\nnpm config edit  ## \u76f4\u63a5\u7f16\u8f91config\u6587\u4ef6\uff0c\u8fd9\u4e2a\u4f1a\u6253\u5f00\u6587\u672c\nnpm config set strict-ssl false  # \u53d6\u6d88ssl\u9a8c\u8bc1\nnpm config get registry  # \u67e5\u770b\u955c\u50cf\u6e90\nnpm config set registry https://registry.npmmirror.com  # \u914d\u7f6e\u955c\u50cf\u6e90\nnpm cache clean --force  # \u6e05\u7406npm\u7f13\u5b58\nnpm config get userconfig  # \u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#3-vue3","title":"3 \u521b\u5efavue3\u9879\u76ee","text":""},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#31-npm","title":"3.1 \u4f7f\u7528npm\u521b\u5efa\u9879\u76ee","text":"<pre><code># \u521b\u5efa\u9879\u76ee\u547d\u4ee4\nnpm init vue@latest\n# \u9879\u76ee\u540d: demo\ncd demo\nnpm install\nnpm run dev\n# \u8bbf\u95ee\u5373\u53ef\u770b\u5230\u754c\u9762~\n</code></pre> <p>\u76ee\u5f55\u89e3\u91ca\uff1a</p> <pre><code>.vscode              --- Vscode\u5de5\u5177\u7684\u914d\u7f6e\u6587\u4ef6\u5939\nnode_modules         --- Vue\u9879\u76ee\u7684\u8fd0\u884c\u4f9d\u8d56\u6587\u4ef6\u5939\npublic               --- \u8d44\u6e90\u6587\u4ef6\u5939(\u6d4f\u89c8\u5668\u56fe\u6807)\nsrcgit               --- \u6e90\u7801\u6587\u4ef6\u5939\n.gitignore           --- \u5ffd\u7565\u6587\u4ef6\nindex.htm            --- \u5982\u679cHTML\u6587\u4ef6\npackage.json         --- \u4fe1\u606f\u63cf\u8ff0\u6587\u4ef6\n./vue3-\u5165\u95e8/ .md           --- \u6ce8\u91ca\u6587\u4ef6\nvite.config.js       --- Vue\u914d\u7f6e\u6587\u4ef6\n</code></pre> <p>\u5220\u9664\u9ed8\u8ba4\u6587\u4ef6\uff1a</p> <pre><code># \u5220\u9664\u6587\u4ef6\uff1a\nsrc/components/*\n# \u6e05\u7a7a\u5185\u5bb9\nApp.vue\n\n&lt;template&gt;\n  &lt;h3 style=\"color: red\"&gt;\u6a21\u677f\u8bed\u6cd5&lt;/h3&gt;\n  &lt;p style=\"color: blue\"&gt;Message: {{ msg }}&lt;/p&gt;\n  &lt;p&gt;{{ number + 1 }}&lt;/p&gt;\n  &lt;p&gt;{{ ok ? \"Yes\" : \"No\" }}&lt;/p&gt;\n  &lt;p&gt;{{ name.split(\",\").reverse()[0] }}&lt;/p&gt;  &lt;!--\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\uff08\u4e0d\u80fd-1\u54c8\uff0c\u6ce8\u610f\uff09--&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    // \u8981\u6709return\n    return {\n      msg: \"\u795e\u5947\u7684\u8bed\u6cd5~\",\n      number: 10,\n      ok: true,\n      name: \"cen,hong,chang\"\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#32-pnpmts","title":"3.2 \u4f7f\u7528pnpm\u521b\u5efa\u9879\u76ee(+TS)","text":"<pre><code>npm install -g pnpm\npnpm create vite basic --template vue-ts\n# \u8fdb\u5165\u9879\u76ee\u8fdb\u884c\u521d\u59cb\u5316\ncd basic\npnpm install\n\n# \u9879\u76ee\u5de5\u7a0b\u5316\npnpm add -D typescript ts-node\npnpm add -D eslint\npnpm add -D eslint-plugin-vue vue-eslint-parser\npnpm add -D @typescript-eslint/parser @typescript-eslint/eslint-plugin typescript\npnpm add -D prettier eslint-config-prettier eslint-plugin-prettier\npnpm add -D husky lint-staged\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#321-eslintrcjs","title":"3.2.1 .eslintrc.js \u914d\u7f6e","text":"<pre><code>module.exports = {\n  root: true,\n  env: {\n    node: true,\n    browser: true,\n    es2021: true,\n  },\n  parser: 'vue-eslint-parser',\n  parserOptions: {\n    parser: '@typescript-eslint/parser', // \u652f\u6301 TS \u8bed\u6cd5\n    ecmaVersion: 2021,\n    sourceType: 'module',\n    extraFileExtensions: ['.vue'],\n  },\n  extends: [\n    'eslint:recommended',\n    'plugin:vue/vue3-recommended',     // Vue3 \u63a8\u8350\u89c4\u5219\n    'plugin:@typescript-eslint/recommended', // TypeScript \u63a8\u8350\u89c4\u5219\n    'plugin:prettier/recommended',     // Prettier \u6574\u5408\n  ],\n  plugins: ['vue', '@typescript-eslint', 'prettier'],\n  rules: {\n    // ---------- \u57fa\u7840 ----------\n    'prettier/prettier': 'error',\n    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',\n    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',\n\n    // ---------- TypeScript ----------\n    '@typescript-eslint/no-explicit-any': 'off', // \u5141\u8bb8\u4f7f\u7528 any\n    '@typescript-eslint/explicit-module-boundary-types': 'off', // \u4e0d\u5f3a\u5236\u51fd\u6570\u8fd4\u56de\u7c7b\u578b\n    '@typescript-eslint/no-unused-vars': ['warn', { argsIgnorePattern: '^_' }], // \u5ffd\u7565 _ \u5f00\u5934\u53c2\u6570\n\n    // ---------- Vue ----------\n    'vue/multi-word-component-names': 'off', // \u5355\u8bcd\u7ec4\u4ef6\u540d\u5141\u8bb8\n    'vue/script-setup-uses-vars': 'error', // setup\u53d8\u91cf\u88ab\u8ba4\u4e3a\u5df2\u4f7f\u7528\n    'vue/html-indent': ['error', 2],\n    'vue/max-attributes-per-line': ['warn', { singleline: 5 }],\n    'vue/singleline-html-element-content-newline': 'off',\n  },\n  overrides: [\n    {\n      files: ['*.ts', '*.tsx'],\n      rules: {\n        'no-undef': 'off',\n      },\n    },\n  ],\n  ignorePatterns: [\n    'dist',\n    'node_modules',\n    'build',\n    'public',\n    '*.config.js',\n  ],\n};\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#322-prettierrc","title":"3.2.2 .prettierrc \u914d\u7f6e","text":"<pre><code>{\n  \"printWidth\": 100,\n  \"tabWidth\": 2,\n  \"useTabs\": false,\n  \"semi\": true,\n  \"singleQuote\": true,\n  \"trailingComma\": \"all\",\n  \"bracketSpacing\": true,\n  \"arrowParens\": \"always\",\n  \"endOfLine\": \"auto\"\n}\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#323-prettierignore","title":"3.2.3 prettierignore\u914d\u7f6e","text":"<pre><code>node_modules\ndist\nbuild\npublic\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#324-srcenvdts-appvue","title":"3.2.4 src/env.d.ts (\u89e3\u51b3APP.vue\u6587\u4ef6\u5bfc\u5165\u95ee\u9898)","text":"<pre><code>/// &lt;reference types=\"vite/client\" /&gt;\n\ndeclare module '*.vue' {\n  import { DefineComponent } from 'vue';\n  const component: DefineComponent&lt;{}, {}, any&gt;;\n  export default component;\n}\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#4","title":"4 \u5220\u9664\u9ed8\u8ba4\u4ee3\u7801","text":""},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#xxx","title":"\u4e09\u3001\u6587\u672c\u63d2\u503c({{ xxx }})","text":"<pre><code>&lt;script&gt;\nexport default {\n  data() {\n    // \u8981\u6709return\n    return {\n      msg: \"\u795e\u5947\u7684\u8bed\u6cd5~\",\n      number: 10,\n      ok: true,\n      name: \"cen,hong,chang\"\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h3 style=\"color: red\"&gt;\u6a21\u677f\u8bed\u6cd5&lt;/h3&gt;\n  &lt;p style=\"color: blue\"&gt;Message: {{ msg }}&lt;/p&gt;\n  &lt;p&gt;{{ number + 1 }}&lt;/p&gt;\n  &lt;p&gt;{{ ok ? \"Yes\" : \"No\" }}&lt;/p&gt;\n  &lt;p&gt;{{ name.split(\",\").reverse()[0] }}&lt;/p&gt;  &lt;!--\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\uff08\u4e0d\u80fd-1\u54c8\uff0c\u6ce8\u610f\uff09--&gt;\n&lt;/template&gt;\n</code></pre> <p>\u6bcf\u4e2a\u7ed1\u5b9a\u4ec5\u652f\u6301\u5355\u4e00\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u4e00\u6bb5\u80fd\u591f\u88ab\u6c42\u503c\u7684JavaScript \u4ee3\u7801\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u5224\u65ad\u65b9\u6cd5\u662f\uff1a * *\u662f\u5426\u53ef\u4ee5\u5408\u6cd5\u5730\u5199\u5728 retum \u540e\u9762 **</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#v-bind","title":"\u56db\u3001\u5c5e\u6027\u7ed1\u5b9a(v-bind)","text":"<p>\u53cc\u5927\u62ec\u53f7\u4e0d\u80fd\u5728 HTML attributes \u4e2d\u4f7f\u7528\u3002\u60f3\u8981\u54cd\u5e94\u5f0f\u5730\u7ed1\u5b9a\u4e00\u4e2a attribute\uff0c\u5e94\u8be5\u4f7f\u7528 v-bind \u6307\u4ee4\u3002</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      dynamicId: \"dynamicId\",  //ID\u9009\u62e9\u5668\n      greenColor: \"green\",  //\u7c7b\u9009\u62e9\u5668\n      isButtonDisabled: false, //\u52a8\u6001\u5e03\u5c14\u7c7b\u578b\n      objectOfAttrs: {\n        dynamicId: \"dynamicId\",  //ID\u9009\u62e9\u5668\n        greenColor: \"red\",  //\u7c7b\u9009\u62e9\u5668\n      }\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;div v-bind:id=\"dynamicId\" v-bind:class=\"greenColor\"&gt;\n    &lt;h1&gt;TITLE&lt;/h1&gt;\n    &lt;button :disabled=\"isButtonDisabled\"&gt;BUTTON&lt;/button&gt;  &lt;!-- \u7b80\u5199\u5f62\u5f0f --&gt;\n  &lt;/div&gt;\n  &lt;div v-bind=\"objectOfAttrs\"&gt;\n    &lt;h2&gt;\u7ed1\u5b9a\u591a\u4e2a\u5c5e\u6027&lt;/h2&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#v-if","title":"\u4e94\u3001\u6761\u4ef6\u6e32\u67d3(v-if)","text":"<p>v-if \u6307\u4ee4\u7528\u4e8e\u6761\u4ef6\u6027\u5730\u6e32\u67d3\u4e00\u5757\u5185\u5bb9\u3002\u8fd9\u5757\u5185\u5bb9\u53ea\u4f1a\u5728\u6307\u4ee4\u7684\u8868\u8fbe\u5f0f\u8fd4\u56de\u771f\u503c\u65f6\u624d\u88ab\u6e32\u67d3\u3002</p> <pre><code>v-if VS v-show\nv-if\u662f\u201c\u771f\u5b9e\u7684\u201d\u6309\u6761\u4ef6\u6e32\u67d3\uff0c\u56e0\u4e3a\u5b83\u786e\u4fdd\u4e86\u5728\u5207\u6362\u65f6\uff0c\u6761\u4ef6\u533a\u5757\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\u548c\u5b50\u7ec4\u4ef6\u90fd\u4f1a\u88ab\u9500\u6bc1\u4e0e\u91cd\u5efa\u3002\nv-if\u4e5f\u662f\u60f0\u6027\u7684\uff1a\u5982\u679c\u5728\u521d\u6b21\u6e32\u67d3\u65f6\u6761\u4ef6\u503c\u4e3a false\uff0c\u5219\u4e0d\u4f1a\u505a\u4efb\u4f55\u4e8b\u3002\u6761\u4ef6\u533a\u5757\u53ea\u6709\u5f53\u6761\u4ef6\u9996\u6b21\u53d8\u4e3a true \u65f6\u624d\u88ab\u6e32\u67d3\u3002\n\n\u76f8\u6bd4\u4e4b\u4e0b\uff0cv-show \u7b80\u5355\u8bb8\u591a\uff0c\u5143\u7d20\u65e0\u8bba\u521d\u59cb\u6761\u4ef6\u5982\u4f55\uff0c\u59cb\u7ec8\u4f1a\u88ab\u6e32\u67d3\uff0c\u53ea\u6709CSS display \u5c5e\u6027\u4f1a\u88ab\u5207\u6362\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c v-if\u6709\u66f4\u9ad8\u7684\u5207\u6362\u5f00\u9500\uff0c\u800c v-show\u6709\u66f4\u9ad8\u7684\u521d\u59cb\u6e32\u67d3\u5f00\u9500\u3002\u56e0\u6b64\uff0c\u5982\u679c\u9700\u8981\u9891\u7e41\u5207\u6362\uff0c\u5219\u4f7f\u7528v-show \u8f83\u597d\u3002\n\u5982\u679c\u5728\u8fd0\u884c\u65f6\u7ed1\u5b9a\u6761\u4ef6\u5f88\u5c11\u6539\u53d8\uff0c\u5219v-if\u4f1a\u66f4\u5408\u9002\u3002\n</code></pre> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      flag: true, // false\n      type: \"T\"\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;  \n  &lt;h2&gt;\u6761\u4ef6\u6e32\u67d3&lt;/h2&gt;\n\n  &lt;!--  v-if/v-else/v-else-if\u53ea\u6709flag\u4e3a\u771f,\u624d\u4f1a\u6e32\u67d3  --&gt;\n  &lt;div v-if=\"flag\"&gt;if\u903b\u8f91 - flag: {{ flag }}&lt;/div&gt;\n  &lt;div v-else&gt;else\u903b\u8f91 - flag: {{ flag }}&lt;/div&gt;\n  &lt;div v-if=\"type === 'A'\"&gt;type: {{ type }}&lt;/div&gt;\n  &lt;div v-else-if=\"type === 'A'\"&gt;type: {{ type }}&lt;/div&gt;\n  &lt;div v-else-if=\"type === 'B'\"&gt;type: {{ type }}&lt;/div&gt;\n  &lt;div v-else-if=\"type === 'C'\"&gt;type: {{ type }}&lt;/div&gt;\n  &lt;div v-else&gt;\u4e3a\u5176\u4ed6\u503c\uff0ctype: {{ type }}&lt;/div&gt;\n\n  &lt;!--  v-show\u57fa\u4e8eCSS\u5207\u6362,\u4e0d\u7ba1flag\u662f\u5426\u4e3a\u771f,\u90fd\u4f1a\u6e32\u67d3,\u7136\u540e\u901a\u8fc7display\u63a7\u5236\u662f\u5426\u663e\u793a  --&gt;\n  &lt;div v-show=\"flag\"&gt;\u4e3a\u5176\u4ed6\u503c\uff0ctype: {{ type }}&lt;/div&gt;\n\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#v-for","title":"\u516d\u3001\u5217\u8868\u6e32\u67d3(v-for)","text":"<pre><code>&lt;p v-for=\"name in names\"&gt;{{ name }}&lt;/p&gt;\n&lt;p v-for=\"name of names\"&gt;{{ name }}&lt;/p&gt; (\u63a8\u8350\u4f7f\u7528of\u4f1a\u66f4\u597d)\n</code></pre> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      names: [\"\u4e2d\u5174\", \"\u534e\u4e3a\", \"\u5927\u5510\", \"\u8bfa\u57fa\u4e9a\"]\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;h2&gt;\u5217\u8868\u6e32\u67d3&lt;/h2&gt;\n  &lt;p v-for=\"name in names\"&gt;{{ name }}&lt;/p&gt;\n  &lt;p v-for=\"(name,index) in names\"&gt;\u5e8f\u53f7\uff1a{{ index }}\uff0c\u540d\u79f0\uff1a{{ name }}&lt;/p&gt;  --&gt; \u5199\u6cd5\u4e00\n  &lt;p v-for=\"(name,index) in names\" :key=\"index\"&gt;\u5e8f\u53f7\uff1a{{ index }}\uff0c\u540d\u79f0\uff1a{{ name }}&lt;/p&gt;  --&gt; \u5199\u6cd5\u4e8c \u51cf\u5c11\u5185\u5b58\u6d88\u8017\n&lt;/template&gt;\n\n\n\u5e94\u7528\u573a\u666f\uff1a\n    \u540e\u7aef\u6570\u636e\u4e00\u822c\u683c\u5f0f\uff1aresult = [{'id':1,'name':'xxx','age':32},{'id':2,'name':'yyy','age':33}...]\n    \u6240\u4ee5\u63a8\u8350\u5199\u6cd5\uff1a&lt;p v-for=\"item of result\" :key=\"item.id\"&gt;ID\uff1a{{ item.id }}\uff0c\u540d\u79f0\uff1a{{ item.name }}&lt;/p&gt;  --&gt; \u5199\u6cd5\u4e09\n</code></pre> <p>* *key \u5728\u8fd9\u91cc\u662f\u4e00\u4e2a\u901a\u8fc7 v-bind \u7ed1\u5b9a\u7684\u7279\u6b8a attribute\uff0c\u8fd9\u91cc\u53ef\u4ee5\u7528: \u7b80\u5199\u4ee3\u66ff\uff0c\u5373\uff1a: key=\" item.id\" \u7b49\u4ef7\u4e8e v-bind: key=\" item.id\" **</p> <p>* *\u63a8\u8350\u5728\u4efb\u4f55\u53ef\u884c\u7684\u65f6\u5019\u4e3a v-for \u63d0\u4f9b\u4e00\u4e2a key attribute **</p> <p>* *key \u7ed1\u5b9a\u7684\u503c\u671f\u671b\u662f\u4e00\u4e2a\u57fa\u7840\u7c7b\u578b\u7684\u503c\uff0c\u4f8b\u5982\u5b57\u7b26\u4e32\u6216 number \u7c7b\u578b **</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#v-on","title":"\u4e03\u3001\u4e8b\u4ef6\u5904\u7406(v-on)","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 von \u6307\u4ee4( \u7b80\u5199\u4e3a @) \u6765\u76d1\u542c DOM \u4e8b\u4ef6\uff0c\u5e76\u5728\u4e8b\u4ef6\u89e6\u53d1\u65f6\u6267\u884c\u5bf9\u5e94\u7684JavaScript\u3002</p> <p>\u57fa\u672c\u7528\u6cd5:</p> <pre><code>v-on:click=\"methodName\"\n\u6216\n@click=\"methodName\"\n\nmethodName \u4e3a\u51fd\u6570\u540d\u6216\u8868\u8fbe\u5f0f\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_2","title":"1 \u5185\u8054\u4e8b\u4ef6","text":"<p>\u5185\u8054\u4e8b\u4ef6\u5904\u7406\u5668\u4e8b\u4ef6\u88ab\u89e6\u53d1\u65f6\u6267\u884c\u7684\u5185\u8054JavaScript\u8bed\u53e5( \u4e0eonclick \u7c7b\u4f3c)\uff1b</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      count: 0\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;button v-on:click=\"count++\"&gt;add&lt;/button&gt;\n  &lt;br&gt;\n\n  &lt;button @click=\"count--\"&gt;reduce&lt;/button&gt;\n  &lt;p&gt;{{ count }}&lt;/p&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2","title":"2 \u65b9\u6cd5\u4e8b\u4ef6","text":"<p>\u65b9\u6cd5\u4e8b\u4ef6\u5904\u7406\u5668\u4e00\u4e2a\u6307\u5411\u7ec4\u4ef6\u4e0a\u5b9a\u4e49\u7684\u65b9\u6cd5\u7684\u5c5e\u6027\u540d\u6216\u662f\u8def\u5f84</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      count: 0,\n\n      totalCount() {\n        //\u81ea\u5b9a\u4e49++\n        console.log(\"currentCount\", this.count)\n        this.count++\n      }\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;button v-on:click=\"count++\"&gt;add&lt;/button&gt;\n  &lt;br&gt;\n\n  &lt;button @click=\"count--\"&gt;reduce&lt;/button&gt;\n  &lt;p&gt;{{ count }}&lt;/p&gt;\n\n  &lt;button @click=\"totalCount\"&gt;totalCount&lt;/button&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#paramevent","title":"\u516b\u3001\u4e8b\u4ef6\u4f20\u53c2(param,$event)","text":"<pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      dataList: [\"cenhongchang\", \"xuexi\", \"study\"],\n      eventClick(param, e) {\n        console.log(\"param\", param)\n        console.log(\"e\", e)\n      }\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;p v-for=\"(name,index) of dataList\" @click=\"eventClick(name,$event)\" :key=\"index\"&gt;\n    &lt;button&gt;{{ name }}&lt;/button&gt;\n  &lt;/p&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_1","title":"\u4e5d\u3001\u4e8b\u4ef6\u4fee\u9970\u7b26","text":"<p>\u6587\u6863\u94fe\u63a5\uff1ahttps://cn.vuejs.org/guide/essentials/event-handling.html#event-modifiers</p> <ul> <li><code>.stop</code></li> <li><code>.prevent</code></li> <li><code>.self</code></li> <li><code>.capture</code></li> <li><code>.once</code></li> <li><code>.passive</code></li> </ul> <p>\u5728\u5904\u7406\u4e8b\u4ef6\u65f6\u8c03\u7528 * event.preventDefault() ** \u6216 * even.stopPropagation() ** \u662f\u5f88\u5e38\u89c1\u7684\u3002</p> <p>\u5c3d\u7ba1\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728\u65b9\u6cd5\u5185\u8c03\u7528\uff0c\u4f46\u5982\u679c\u65b9\u6cd5\u80fd\u66f4\u4e13\u6ce8\u4e8e\u6570\u636e\u903b\u8f91\u800c\u4e0d\u7528\u53bb\u5904\u7406 DOM \u4e8b\u4ef6\u7684\u7ec6\u8282\u4f1a\u66f4\u597d\uff0c\u4e3a\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0cVue \u4e3a v-on \u63d0\u4f9b\u4e86\u4e8b\u4ef6\u4fee\u9970\u7b26\uff0c\u5e38\u7528\u6709\u4ee5\u4e0b\u51e0\u4e2a!</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_3","title":"1 \u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6","text":"<pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      count: 0,\n      name: \"cenhongchang\",\n\n      testClick(e) {\n        // e.preventDefault() //\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6\n        this.count++\n        console.log(this.name, \"\u70b9\u51fb\", this.count, \"\u6b21\")\n      }\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;a href=\"http://www.baidu.com\" @click.prevent=\"testClick\"&gt;\u70b9\u51fb\u6b64\u5904&lt;/a&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2_1","title":"2 \u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1","text":"<pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      divFunc() {\n        console.log(\"div\u6807\u7b7e\")\n      },\n      pFunc(e) {\n        // e.stopPropagation() // \u963b\u6b62\u7236\u7ea7\u5143\u7d20\u4e8b\u4ef6\u89e6\u53d1\n        console.log(\"p\u6807\u7b7e\")\n      }\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr&gt;\n  &lt;div @click=\"divFunc\"&gt;\n    div\u6807\u7b7e\n    &lt;p @click.stop=\"pFunc\"&gt;p\u6807\u7b7e&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_2","title":"\u5341\u3001\u6570\u7ec4\u53d8\u5316\u4fa6\u6d4b","text":""},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_4","title":"1 \u53d8\u66f4\u65b9\u6cd5","text":"<p>Vue \u80fd\u591f\u4fa6\u542c\u54cd\u5e94\u5f0f\u6570\u7ec4\u7684\u53d8\u66f4\u65b9\u6cd5\uff0c\u5e76\u5728\u5b83\u4eec\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\u76f8\u5173\u7684\u66f4\u65b0\u3002</p> <p>\u8fd9\u4e9b\u53d8\u66f4\u65b9\u6cd5\u5305\u62ec:</p> <pre><code>push()\npop()\nshift()\nunshift()\nsplice()\nsort()\nreverse()\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      dataList: [\"\u5f20\u4e09\", \"\u674e\u56db\", \"\u738b\u9ebb\u5b50\"],\n    };\n  },\n  methods: {\n    addHandler() {\n      // let newDataList = this.dataList.push(\"\u4e03\u4e09\"); // \u53d8\u66f4\u65b9\u6cd5-&gt;\u6e90\u6570\u636e\u4f1a\u88ab\u4fee\u6539\uff0c\u8fd4\u56de\u589e\u52a0\u4e4b\u540e\u7684\u957f\u5ea6\n      // console.log(\"newDataList:\", newDataList);\n\n      let newDataList = this.dataList.concat([\"\u4e03\u4e09\"]); // \u975e\u53d8\u66f4\u65b9\u6cd5-&gt;\u6e90\u6570\u636e\u4e0d\u4f1a\u66f4\u6539\uff0c\u8fd4\u56de\u5f53\u524d\u6570\u7ec4\u5408\u5e76\u4e4b\u540e\u7684\u6570\u7ec4\n      console.log(\"dataList:\", this.dataList);\n      console.log(\"newDataList:\", newDataList);\n    },\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;hr /&gt;\n  &lt;h3&gt;\u6570\u7ec4\u53d8\u5316\u4fa6\u6d4b&lt;/h3&gt;\n  &lt;button @click=\"addHandler\"&gt;\u6dfb\u52a0\u6570\u636e(push)&lt;/button&gt;\n  &lt;div&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"(item, index) of dataList\" :key=\"index\"&gt;{{ item }}&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2_2","title":"2 \u975e\u53d8\u66f4\u65b9\u6cd5","text":"<pre><code>filter()\nconcat()\nslice()\n</code></pre> <pre><code>methods: {\n    addHandler() {\n      // let newDataList = this.dataList.push(\"\u4e03\u4e09\"); // \u53d8\u66f4\u65b9\u6cd5-&gt;\u6e90\u6570\u636e\u4f1a\u88ab\u4fee\u6539\uff0c\u8fd4\u56de\u589e\u52a0\u4e4b\u540e\u7684\u957f\u5ea6\n      // console.log(\"newDataList:\", newDataList);\n\n      let newDataList = this.dataList.concat([\"\u4e03\u4e09\"]); // \u975e\u53d8\u66f4\u65b9\u6cd5-&gt;\u6e90\u6570\u636e\u4e0d\u4f1a\u66f4\u6539\uff0c\u8fd4\u56de\u5f53\u524d\u6570\u7ec4\u5408\u5e76\u4e4b\u540e\u7684\u6570\u7ec4\n      console.log(\"dataList:\", this.dataList);\n      console.log(\"newDataList:\", newDataList);\n    },\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#computed","title":"\u5341\u4e00\u3001\u8ba1\u7b97\u5c5e\u6027(computed)","text":"<pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      testData: {\n        name: \"cenhongchang\",\n        content: [1, 2, 3],\n      },\n    };\n  },\n  computed: {\n    //\u8ba1\u7b97\u5c5e\u6027 -&gt; \u6709\u7f13\u5b58 \u4ee3\u7801\u6ca1\u66f4\u6539\u53ea\u4f1a\u8ba1\u7b97\u4e00\u6b21\n    getName() {\n      return this.testData.content.length &gt; 0 ? \"Yes\" : \"No\";\n    },\n  },\n  methods: {\n    //\u51fd\u6570 -&gt; \u65e0\u7f13\u5b58 \u6bcf\u6b21\u90fd\u4f1a\u8ba1\u7b97\u4e00\u6b21\n    getNameFunc() {\n      return this.testData.content.length &gt; 0 ? \"Yes\" : \"No\";\n    },\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;p&gt;{{ getName }}&lt;/p&gt;\n  &lt;p&gt;{{ getNameFunc() }}&lt;/p&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_3","title":"\u5341\u4e8c\u3001\u6837\u5f0f\u7ed1\u5b9a","text":"<p>\u6570\u636e\u7ed1\u5b9a\u7684\u4e00\u4e2a\u5e38\u89c1\u9700\u6c42\u573a\u666f\u662f\u64cd\u7eb5\u5143\u7d20\u7684CSS style\u5217\u8868\uff0c\u56e0\u4e3a style \u662fattribute\uff0c\u6211\u4eec\u53ef\u4ee5\u548c\u5176\u4ed6attribute\u4e00\u6837\u4f7f\u7528 v-bind \u5c06\u5b83\u4eec\u548c\u52a8\u6001\u7684\u5b57\u7b26\u4e32\u7ed1\u5b9a\u3002\u4f46\u662f\uff0c\u5728\u5904\u7406\u6bd4\u8f83\u590d\u6742\u7684\u7ed1\u5b9a\u65f6\uff0c\u901a\u8fc7\u62fc\u63a5\u751f\u6210\u5b57\u7b26\u4e32\u662f\u9ebb\u70e6\u4e14\u6613\u51fa\u9519\u7684\u3002\u56e0\u6b64\uff0cVue\u4e13\u95e8\u4e3a style\u7684 v-bind\u7528\u6cd5\u63d0\u4f9b\u4e86\u7279\u6b8a\u7684\u529f\u80fd\u589e\u5f3a\u3002\u9664\u4e86\u5b57\u7b26\u4e32\u5916\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u4e5f\u53ef\u4ee5\u662f\u5bf9\u8c61\u6216\u8005\u6570\u7ec4\u3002</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      //\u5355\u4e2a\u7ed1\u5b9a\n      isActive: true, //\u5e03\u5c14\u503c\u8868\u793a\u663e\u793a\u6216\u4e0d\u663e\u793a\n      isError: false,\n\n      //\u652f\u6301\u7ed1\u5b9a\u591a\u4e2a\u5bf9\u8c61-\u952e\u4e3a\u7c7b\u9009\u62e9\u5668\u540d\n      classObject: {\n        active: true,\n        error: true,\n      },\n\n      //\u63d2\u5165\u6570\u7ec4\n      arrisActive: \"active\",\n      arrisError: \"error\",\n\n      arrList: [\"active\", \"error\"],\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h1 :class=\"{ active: isActive, error: isError }\"&gt;class\u6837\u5f0f\u7ed1\u5b9aA&lt;/h1&gt;\n  &lt;h2 :class=\"classObject\"&gt;class\u6837\u5f0f\u7ed1\u5b9aB&lt;/h2&gt;\n  &lt;h3 :class=\"[arrisActive, arrisError]\"&gt;class\u6837\u5f0f\u7ed1\u5b9aC&lt;/h3&gt;\n  &lt;h4 :class=\"arrList\"&gt;class\u6837\u5f0f\u7ed1\u5b9aD&lt;/h4&gt;\n&lt;/template&gt;\n\n&lt;style&gt;\n.error {\n  color: red;\n}\n\n.active {\n  background: #97dcdc;\n}\n&lt;/style&gt;\n</code></pre> <p> \u6ce8\u610f\uff1a\u7279\u522b\u60c5\u51b5-&gt; \u6570\u7ec4\u4e0e\u5bf9\u8c61\u8fde\u7528\uff0c\u53ea\u80fd\u662f\u6570\u7ec4\u5305\u542b\u5bf9\u8c61\uff0c\u4e0d\u80fd\u5728\u5bf9\u8c61\u91cc\u9762\u5b9a\u4e49\u6570\u7ec4\u3002</p> <pre><code>//export\nclassObject2: {\n        active: false,\n        error: true,\n      },\n\n//style\n&lt;h5 :class=\"[this.classObject2]\"&gt;class\u6837\u5f0f\u7ed1\u5b9aE&lt;/h5&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#watch","title":"\u5341\u4e09\u3001\u4fa6\u542c\u5668(watch)","text":"<p><code>watch</code> \u4e3b\u8981\u7528\u4e8e * *\u4fa6\u542c\u6570\u636e\u7684\u53d8\u5316 **</p> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <p>- \u76d1\u63a7\u4e00\u4e2a <code>data</code> \u6216 <code>props</code> \u7684\u53d8\u5316\uff0c\u505a\u4e00\u4e9b\u54cd\u5e94\u64cd\u4f5c\uff08\u6bd4\u5982\u53d1\u8bf7\u6c42\u3001\u6821\u9a8c\u3001\u6253\u5370\u65e5\u5fd7\uff09\u3002</p> <p>- \u76d1\u542c\u590d\u6742\u5bf9\u8c61\u6216\u6570\u7ec4\u7684\u53d8\u5316\u3002</p> <p>- \u5728\u503c\u53d8\u5316\u524d\u540e\u505a\u5bf9\u6bd4\u3002</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return { message: \"Tom\" };\n  },\n  methods: {\n    updateName(name) {\n      this.message = name;\n    },\n  },\n  watch: {\n    // \u51fd\u6570\u540d\u5fc5\u987b\u4e0ereturn\u6570\u636e\u5b57\u6bb5\u4e00\u81f4\n    message(newValue, oldValue) {\n      this.message = newValue;\n      console.log(`message\u5df2\u7ecf\u7531\u3010${oldValue}\u3011\u6539\u4e3a\u3010${newValue}\u3011`);\n    },\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;p&gt;{{ message }}&lt;/p&gt;\n  &lt;button @click=\"updateName('\u963f\u897f\u5427')\"&gt;\u70b9\u51fb\u4fee\u6539\u540d\u5b57&lt;/button&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n&lt;/template&gt;\n\n&lt;style&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#v-model","title":"\u5341\u56db\u3001\u8868\u5355\u6570\u636e\u7ed1\u5b9a(v-model)","text":"<p>\u5728\u524d\u7aef\u5904\u7406\u8868\u5355\u65f6\uff0c\u6211\u4eec\u5e38\u5e38\u9700\u8981\u5c06\u8868\u5355\u8f93\u5165\u6846\u7684\u5185\u5bb9\u540c\u6b65\u7ed9JavaScript\u4e2d\u76f8\u5e94\u7684\u53d8\u91cf\u3002\u624b\u52a8\u8fde\u63a5\u503c\u7ed1\u5b9a\u548c\u66f4\u6539\u4e8b\u4ef6\u76d1\u542c\u5668\u53ef\u80fd\u4f1a\u5f88\u9ebb\u70e6\uff0cv-model \u6307\u4ee4\u5e2e\u6211\u4eec\u7b80\u5316\u4e86\u8fd9\u4e00\u6b65\u9aa4\u3002</p> <p>v-model\u6709\u4e09\u79cd\u6a21\u5f0f\uff1a</p> <p>- \u5931\u53bb\u7126\u70b9\u89e6\u53d1\uff08.lazy\uff09 - \u53ea\u80fd\u4e3a\u6570\u5b57\uff08.number\uff09 - \u53bb\u9664\u524d\u540e\u7a7a\u683c\uff08.trim\uff09</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      message: \"\",\n      checked: false,\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;!--\n  v-model\u6709\u4e09\u79cd\u6a21\u5f0f\uff1a\n    \u5931\u53bb\u7126\u70b9\u89e6\u53d1\uff08.lazy\uff09\uff1b\n    \u53ea\u80fd\u4e3a\u6570\u5b57\uff08.number\uff09\uff1b\n    \u53bb\u9664\u524d\u540e\u7a7a\u683c\uff08.trim\uff09\n  --&gt;\n  &lt;input type=\"text\" v-model.lazy=\"message\" /&gt;\n  &lt;p&gt;{{ message }}&lt;/p&gt;\n\n  &lt;input type=\"checkbox\" id=\"checkbox\" v-model=\"checked\" /&gt;\n  &lt;label for=\"checkbox\"&gt;{{ checked }}&lt;/label&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#ref-thisrefs","title":"\u5341\u4e94\u3001\u6a21\u677f\u5f15\u7528(ref + this.$refs...)","text":"<p>\u4f7f\u7528\u65b9\u5f0f\uff1a * *\u8bbe\u7f6eref\u5c5e\u6027 + this.$refs.<code>refName</code> .innerHTML **</p> <p>\u867d\u7136Vue \u7684\u58f0\u660e\u6027\u6e32\u67d3\u6a21\u578b\u4e3a\u4f60\u62bd\u8c61\u4e86\u5927\u90e8\u5206\u5bf9DOM\u7684\u76f4\u63a5\u64cd\u4f5c\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u76f4\u63a5\u8bbf\u95ee\u5e95\u5c42DOM\u5143\u7d20\u3002</p> <p>\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u7684 ref attribute\u6302\u8f7d\u7ed3\u675f\u540e\u5f15\u7528\u90fd\u4f1a\u88ab\u66b4\u9732\u5728 this.$refs \u4e4b\u4e0a</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      message: \"\u6d4b\u8bd5REF\",\n    };\n  },\n  methods: {\n    getData: function () {\n      console.log(this.$refs.container.innerHTML);\n    },\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n  &lt;div ref=\"container\"&gt;\n    &lt;span&gt;{{ message }}&lt;/span&gt;\n    &lt;button @click=\"getData\"&gt;\u70b9\u51fb\u6d4b\u8bd5\u83b7\u53d6DOM&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_4","title":"\u5341\u516d\u3001\u7ec4\u4ef6\u7ec4\u6210","text":"<p>\u7ec4\u4ef6\u6700\u5927\u7684\u4f18\u52bf\u5c31\u662f\u53ef\u590d\u7528\u6027\u5f53\u4f7f\u7528\u6784\u5efa\u6b65\u9aa4\u65f6\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u5c06Vue \u7ec4\u4ef6\u5b9a\u4e49\u5728\u4e00\u4e2a\u5355\u72ec\u7684Lvue \u6587\u4ef6\u4e2d\uff0c\u8fd9\u88ab\u53eb\u505a\u5355\u6587\u4ef6\u7ec4\u4ef6\uff08\u7b80\u79f0SFC\uff09</p> <pre><code>&lt;template&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {};\n  }\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n&lt;/style&gt;\n</code></pre> <p>\u7ec4\u4ef6\u5f15\u7528\uff08App.vue\u4e2d\u5f15\u5165\u5176\u4ed6\u7ec4\u4ef6\uff09\uff1a</p> <p>\u5206\u4e09\u6b65\uff1a * *\u5f15\u5165\u7ec4\u4ef6 -&gt; \u6ce8\u5165\u7ec4\u4ef6 -&gt; \u663e\u793a\u7ec4\u4ef6 **</p> <pre><code>&lt;template&gt;\n&lt;ModelDemo /&gt;\n&lt;model-demo /&gt;  &lt;-- \u9a7c\u5cf0\u5bf9\u5e94\u5c0f\u5199+\u201c-\u201d\u8fd9\u79cd\u5199\u6cd5\u4e5f\u652f\u6301\uff0c\u4f46\u4e0d\u5efa\u8bae \u7b2c\u4e8c\u6b65 --&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ModelDemo from \"@/components/ModelDemo.vue\";  // \u7b2c\u4e00\u6b65\n\nexport default {\n  components() {\n    ModelDemo  // \u7b2c\u4e09\u6b65\n  }\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n&lt;/style&gt;\n</code></pre> <p>\u53e6\u5916\uff1a * *\u6837\u5f0f scoped \u5173\u952e\u5b57 \u8868\u793a\u8be5\u7ec4\u4ef6\u6837\u5f0f\u662f\u5426\u5168\u5c40\u751f\u6548 **</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_5","title":"\u5341\u4e03\u3001\u7ec4\u4ef6\u5d4c\u5957\u5173\u7cfb","text":""},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_5","title":"1 \u7ec4\u4ef6\u5d4c\u5957","text":"<p>\u7ec4\u4ef6\u5141\u8bb8\u6211\u4eec\u5c06UL\u5212\u5206\u4e3a\u72ec\u7acb\u7684\u3001\u53ef\u91cd\u7528\u7684\u90e8\u5206\uff0c\u5e76\u4e14\u53ef\u4ee5\u5bf9\u6bcf\u4e2a\u90e8\u5206\u8fdb\u884c\u5355\u72ec\u7684\u601d\u8003\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u7ec4\u4ef6\u5e38\u5e38\u88ab\u7ec4\u7ec7\u6210\u5c42\u5c42\u5d4c\u5957\u7684\u6811\u72b6\u7ed3\u6784\u8fd9\u548c\u6211\u4eec\u5d4c\u5957HTML\u5143\u7d20\u7684\u65b9\u5f0f\u7c7b\u4f3c\uff0cVue\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u7ec4\u4ef6\u6a21\u578b\uff0c\u4f7f\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u4e2a\u7ec4\u4ef6\u5185\u5c01\u88c5\u81ea\u5b9a\u4e49\u5185\u5bb9\u4e0e\u903b\u8f91</p> <p>\u7ec4\u4ef6\u5316\u5f00\u53d1\u7684\u597d\u5904\uff1a</p> <p>- * *\u590d\u7528\u6027 ** \uff1a\u4e0d\u540c\u9875\u9762\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a\u7ec4\u4ef6</p> <p>- * *\u6a21\u5757\u5316 ** \uff1a\u6bcf\u4e2a\u7ec4\u4ef6\u8d1f\u8d23\u4e00\u90e8\u5206\u903b\u8f91\uff0c\u7ed3\u6784\u66f4\u6e05\u6670</p> <p>- * *\u53ef\u7ef4\u62a4\u6027 ** \uff1a\u5d4c\u5957\u6e05\u695a\uff0c\u804c\u8d23\u5355\u4e00</p> <p>\u5728 Vue \u4e2d\uff0c * \u4e00\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u91cc\u88ab\u4f7f\u7528 ** \uff0c\u5c31\u5f62\u6210\u4e86\u201c\u7236\u7ec4\u4ef6\u201d\u548c\u201c\u5b50\u7ec4\u4ef6\u201d\u7684\u5173\u7cfb\u3002 \u8fd9\u5c31\u662f\u7ec4\u4ef6\u5d4c\u5957\u5173\u7cfb\uff1a * \u7236 \u2192 \u5b50 \u2192 \u5b59 **\u3002</p> <pre><code>&lt;!-- App.vue (\u7236\u7ec4\u4ef6) --&gt;\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;h1&gt;\n      \u6211\u662f\u7236\u7ec4\u4ef6&lt;/h1&gt;\n    &lt;ChildComp/&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import ChildComp\n    from './ChildComp.vue'\n\n  export default {\n    components: {ChildComp}\n  }\n&lt;/script&gt;\n</code></pre> <pre><code>&lt;!-- ChildComp.vue (\u5b50\u7ec4\u4ef6) --&gt;\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;h2&gt;\u6211\u662f\u5b50\u7ec4\u4ef6&lt;/h2&gt;\n    &lt;GrandChildComp /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport GrandChildComp from './GrandChildComp.vue'\n\nexport default {\n  components: { GrandChildComp }\n}\n&lt;/script&gt;\n</code></pre> <pre><code>&lt;!-- GrandChildComp.vue (\u5b59\u7ec4\u4ef6) --&gt;\n&lt;template&gt;\n  &lt;p&gt;\u6211\u662f\u5b59\u7ec4\u4ef6&lt;/p&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2_3","title":"2 \u7ec4\u4ef6\u901a\u4fe1","text":"<p>\u7ec4\u4ef6\u5d4c\u5957\u7684\u6838\u5fc3\u5c31\u662f * \u6570\u636e\u548c\u4e8b\u4ef6\u600e\u4e48\u4f20\u9012 *\u3002</p> <p>- * \u7236 \u2192 \u5b50 ** \uff1a\u7528 <code>props</code> - * \u5b50 \u2192 \u7236 ** \uff1a\u7528 <code>$emit</code> - * *\u8de8\u5c42\u7ea7 ** \uff1a\u7528 <code>provide / inject</code> \u6216\u72b6\u6001\u7ba1\u7406\uff08\u6bd4\u5982 Pinia\uff09</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#21-props","title":"2.1 \u7236\u4f20\u5b50\uff08props\uff09","text":"<pre><code>&lt;!-- \u7236\u7ec4\u4ef6 --&gt;\n&lt;ChildComp :msg=\"parentMsg\" /&gt;\n&lt;!-- \u5b50\u7ec4\u4ef6 --&gt;\n&lt;template&gt;\n  &lt;p&gt;\u63a5\u6536\u5230\u7236\u7684\u6570\u636e\uff1a{{ msg }}&lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  props: {\n    msg: String  // \u7c7b\u578b\u9650\u5236\n  }\n\n  props: {\n    msg: {\n      type: String,  // \u7c7b\u578b\u9650\u5236 \u4e5f\u652f\u6301\u6570\u7ec4\uff1a[String, Number, Array, Object]\n      required: true,  // \u6807\u8bc6\u4e3a\u7236\u7ec4\u4ef6\u5fc5\u987b\u4f20\u7684\u5b57\u6bb5\n      default: \"\u4eca\u665a\u6253\u8001\u864e\"  // \u9ed8\u8ba4\u503c\uff0cString, Number\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1b\u4f46\u662fArray, Object\u9700\u8981\u4f7f\u7528\u5de5\u5382\u51fd\u6570\u8fd4\u56de\n    }\n  }\n\n  // props: [msg]  // \u4e0d\u505a\u7c7b\u578b\u9650\u5236\n}\n&lt;/script&gt;\n</code></pre> <p>\u901a\u8fc7 props \u4f20\u9012\u6570\u636e\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u4f20\u9012\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u636e\uff0c\u8fd8\u53ef\u4ee5\u662f\u5176\u4ed6\u7c7b\u578b\uff0c\u4f8b\u5982\u6570\u5b57\u3001\u5bf9\u8c61\u3001\u6570\u7ec4\u7b49\u4f46\u5b9e\u9645\u4e0a\u4efb\u4f55\u7c7b\u578b\u7684\u503c\u90fd\u53ef\u4ee5\u4f5c\u4e3a props \u7684\u503c\u88ab\u4f20\u9012</p> <p>props - \u4f20\u9012\u6570\u636e\u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u53ef\u4ee5\u4fee\u6539</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#22-emit","title":"2.2 \u5b50\u4f20\u7236-\u7ec4\u4ef6\u4e8b\u4ef6\uff08$emit\uff09","text":"<pre><code>&lt;!-- \u5b50\u7ec4\u4ef6 --&gt;\n&lt;template&gt;\n  &lt;button @click=\"$emit('child-click', 'Hello \u7236\u7ec4\u4ef6')\"&gt;\u70b9\u6211&lt;/button&gt;\n&lt;/template&gt;\n&lt;!-- \u7236\u7ec4\u4ef6 --&gt;\n&lt;ChildComp @child-click=\"handleChildClick\" /&gt;\n\n&lt;script&gt;\nexport default {\n  methods: {\n    handleChildClick(val) {\n      console.log('\u5b50\u7ec4\u4ef6\u4f20\u8fc7\u6765\uff1a', val)\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a\u5b50\u7ec4\u4ef6\u8f93\u5165\u6846\u8f93\u5165\u6570\u636e\uff0c\u5c06\u8f93\u5165\u7684\u6570\u636e\u5b9e\u65f6\u663e\u793a\u5230\u7236\u7ec4\u4ef6</p> <p>\u7236\u7ec4\u4ef6\uff1a\u8c03\u7528\u5b50\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff08\u9ed8\u8ba4\u4f1a\u4f20\u5165data\uff09=methods\u51fd\u6570\uff0c\u51fd\u6570\u4e2d\u5c06\u6570\u636e\u8bbe\u7f6e\u5230\u7236\u7ec4\u4ef6\u5b9a\u4e49\u7684\u5b57\u6bb5</p> <pre><code>&lt;script&gt;\nimport Child from \"@/components/DataSend3/Child.vue\";\n\nexport default {\n  components: {\n    Child,\n  },\n  data() {\n    return {\n      childData: \"\",\n    };\n  },\n  methods: {\n    getSearchText: function (data) {\n      console.log(data);\n      this.childData = data;\n    },\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h5&gt;\u5b50\u7ec4\u4ef6\u641c\u7d22\u5185\u5bb9\uff1a{{ childData }}&lt;/h5&gt;\n  &lt;Child @searchEvent=\"getSearchText\" /&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_6","title":"\u5341\u516b\u3001\u7ec4\u4ef6\u6ce8\u518c\u65b9\u5f0f","text":"<p>\u4e00\u4e2a Vue \u7ec4\u4ef6\u5728\u4f7f\u7528\u524d\u9700\u8981\u5148\u88ab\u201c\u6ce8\u518c\u201d\uff0c\u8fd9\u6837 Vue \u624d\u80fd\u5728\u6e32\u67d3\u6a21\u677f\u65f6\u627e\u5230\u5176\u5bf9\u5e94\u7684\u5b9e\u73b0\u3002\u7ec4\u4ef6\u6ce8\u518c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u5168\u5c40\u6ce8\u518c\u548c\u5c40\u90e8\u6ce8\u518c</p> <p>* *\u4e0a\u9762\u7684\u65b9\u5f0f\u90fd\u5c5e\u4e8e\u5c40\u90e8\u6ce8\u518c\uff0c\u53ea\u5728\u5355\u4e2a\u7ec4\u4ef6\u5185\u751f\u6548\uff1b **</p> <p>* *\u5168\u5c40\u6ce8\u518c\uff1a\u9700\u8981\u5728main.ts \u5f15\u5165\u548c\u6ce8\u5165\uff0c\u7136\u540e\u5728\u9700\u8981\u7528\u5230\u7684\u591a\u4e2a\u9875\u9762\u663e\u793a\u5373\u53ef **</p> <p>\u5168\u5c40\u6ce8\u518cmain.js\u4fee\u6539\uff1a</p> <pre><code>import {\n  createApp\n} from \"vue\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap\";\nimport App\n  from \"./App.vue\";\n\nconst app = createApp(App);\napp.components(\"GlobalComponent\", GlobalComponent)  // \u5168\u5c40\u6ce8\u518c\napp.mount(\"#app\");\n</code></pre> <p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c * *\u66f4\u63a8\u8350\u5c40\u90e8\u6ce8\u518c **</p> <p>\u5168\u5c40\u6ce8\u518c\u867d\u7136\u5f88\u65b9\u4fbf\uff0c\u4f46\u6709\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff1a * *\u5168\u5c40\u6ce8\u518c\u6ca1\u6709\u88ab\u4f7f\u7528\u7684\u7ec4\u4ef6\u65e0\u6cd5\u5728\u751f\u4ea7\u6253\u5305\u65f6\u88ab\u81ea\u52a8\u79fb\u9664 \uff08\u4e5f\u53eb\u201ctree-shaking\u201d\uff09 ** \u3002\u5982\u679c\u4f60\u5168\u5c40\u6ce8\u518c\u4e86\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5373\u4f7f\u5b83\u5e76\u6ca1\u6709\u88ab\u5b9e\u9645\u4f7f\u7528\uff0c\u5b83\u4ecd\u7136\u4f1a\u51fa\u73b0\u5728\u6253\u5305\u540e\u7684JS\u6587\u4ef6\u4e2d</p> <p>\u5168\u5c40\u6ce8\u518c\u5728\u5927\u578b\u9879\u76ee\u4e2d\u4f7f\u9879\u76ee\u7684\u4f9d\u8d56\u5173\u7cfb\u53d8\u5f97\u4e0d\u90a3\u4e48\u660e\u786e\u3002\u5728\u7236\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u5b50\u7ec4\u4ef6\u65f6\uff0c\u4e0d\u592a\u5bb9\u6613\u5b9a\u4f4d\u5b50\u7ec4\u4ef6\u7684\u5b9e\u73b0\u3002\u548c\u4f7f\u7528\u8fc7\u591a\u7684\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f71\u54cd\u5e94\u7528\u957f\u671f\u7684\u53ef\u7ef4\u62a4\u6027</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_7","title":"\u5341\u4e5d\u3001\u900f\u4f20\u5c5e\u6027","text":"<p>\u8be5\u7279\u6027\u51e0\u4e4e\u4e0d\u4f1a\u4f7f\u7528\u5230\uff01</p> <p>\u201c\u900f\u4f20attribute\u201d\u6307\u7684\u662f\u4f20\u9012\u7ed9\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5374\u6ca1\u6709\u88ab\u8be5\u7ec4\u4ef6\u58f0\u660e\u4e3a * props ** \u6216 * emits ** \u7684attribute \u6216\u8005 v-on \u4e8b\u4ef6\u76d1\u542c\u5668\u3002</p> <p>\u6700\u5e38\u89c1\u7684\u4f8b\u5b50\u5c31\u662fclass\u3001style\u548c * \u5f53\u4e00\u4e2a\u7ec4\u4ef6\u4ee5\u5355\u4e2a\u5143\u7d20\u4e3a\u6839\u4f5c\u6e32\u67d3\u65f6\uff0c\u900f\u4f20\u7684 attribute \u4f1a\u81ea\u52a8\u88ab\u6dfb\u52a0\u5230\u6839\u5143\u7d20\u4e0a *\u3002</p> <p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>import Child from \"@/components/DataSend3/Child.vue\";\n\n&lt;template&gt;\n&lt;Child class=\"attr-container\" /&gt;\n&lt;/template&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n&lt;h3&gt;\u6211\u662f\u5b50\u7ec4\u4ef6&lt;/h3&gt;  &lt;-- \u8fd9\u91cc\u53ea\u6709\u5355\u4e00\u6839\u5143\u7d20\uff0c\u4f1a\u81ea\u52a8\u4ece\u7236\u7ec4\u4ef6\u900f\u4f20\u83b7\u5f97\u5c5e\u6027\uff1aclass=\"attr-container\" --&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#slot","title":"\u4e8c\u5341\u3001\u63d2\u69fd(slot)","text":"<p>\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u5230\u7ec4\u4ef6\u80fd\u591f\u63a5\u6536\u4efb\u610f\u7c7b\u578b\u7684JavaScript \u503c\u4f5c\u4e3a props\uff0c\u4f46\u7ec4\u4ef6\u8981\u5982\u4f55\u63a5\u6536\u6a21\u677f\u5185\u5bb9\u5462?\u5728\u67d0\u4e9b\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u60f3\u8981\u4e3a\u5b50\u7ec4\u4ef6\u4f20\u9012\u4e00\u4e9b\u6a21\u677f\u7247\u6bb5\uff0c\u8ba9\u5b50\u7ec4\u4ef6\u5728\u5b83\u4eec\u7684\u7ec4\u4ef6\u4e2d\u6e32\u67d3\u8fd9\u4e9b\u7247\u6bb5</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_6","title":"1 \u57fa\u672c\u4f7f\u7528","text":"<p>\u7236\u7ec4\u4ef6\uff1ahtml\u7ed3\u6784\u6587\u672c</p> <pre><code>&lt;template&gt;\n    &lt;SlotDemo&gt;\n        --------------------------------------------------\n        &lt;h3&gt;Father Component&lt;/h3&gt;\n        &lt;p&gt;\u7236\u7ec4\u4ef6\u63d2\u5165\u5185\u5bb9 &lt;- \u66ff\u6362\u540e&lt;/p&gt;\n        --------------------------------------------------\n    &lt;/SlotDemo&gt;\n&lt;/template&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a\u63d2\u69fd\u51fa\u53e3</p> <pre><code>&lt;template&gt;\n    &lt;slot&gt;&lt;/slot&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2_4","title":"2 \u52a8\u6001\u6570\u636e\u652f\u6301","text":"<p>\u6e32\u67d3\u4f5c\u7528\u57df\u63d2\u69fd\u5185\u5bb9\u53ea\u80fd\u8bbf\u95ee\u7236\u7ec4\u4ef6\u7684\u6570\u636e\u4f5c\u7528\u57df\uff0c\u56e0\u4e3a\u63d2\u69fd\u5185\u5bb9\u672c\u8eab\u662f\u5728\u7236\u7ec4\u4ef6\u6a21\u677f\u4e2d\u5b9a\u4e49\u7684\uff1b</p> <p>\u6240\u4ee5 * \u52a8\u6001\u6570\u636e\u9700\u8981\u5728\u7236\u5143\u7d20\u5b9a\u4e49 *\uff1a</p> <pre><code>&lt;template&gt;\n    &lt;SlotDemo&gt;\n        --------------------------------------------------\n        &lt;h3&gt;{{ message }}&lt;/h3&gt;\n        --------------------------------------------------\n    &lt;/SlotDemo&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      message: \"\u63d2\u69fd\u52a8\u6001\u6570\u636e\u5199\u5728\u7236\u7ec4\u4ef6\u5b9a\u4e49\",\n    };\n  },\n};\n&lt;/script&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#3","title":"3 \u63d2\u69fd\u9ed8\u8ba4\u503c","text":"<p>\u63d2\u69fd\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u5728\u5b50\u7ec4\u4ef6\uff0c\u7236\u7ec4\u4ef6\u6ca1\u6709\u4f20\u6570\u636e\uff0c\u9ed8\u8ba4\u4f1a\u7528\u5b50\u7ec4\u4ef6\u9ed8\u8ba4\u63d2\u69fd\u5185\u5bb9</p> <pre><code>&lt;template&gt;\n    &lt;slot&gt;\u9ed8\u8ba4\u63d2\u69fd\u5185\u5bb9&lt;/slot&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#4_1","title":"4 \u5177\u540d\u63d2\u69fd(\u591a\u63d2\u69fd)","text":"<p>\u7236\u7ec4\u4ef6\uff1ahtml\u7ed3\u6784\u6587\u672c</p> <pre><code>&lt;template&gt;\n    &lt;SlotDemo&gt;\n        &lt;template v-slot:header&gt;\n        --------------------------------------------------\n        &lt;h3&gt;header&lt;/h3&gt;\n        --------------------------------------------------\n        &lt;/template&gt;\n\n        &lt;template v-slot:main&gt;\n        --------------------------------------------------\n        &lt;h3&gt;header&lt;/h3&gt;\n        --------------------------------------------------\n        &lt;/template&gt;\n    &lt;/SlotDemo&gt;\n&lt;/template&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a\u63d2\u69fd\u51fa\u53e3</p> <pre><code>&lt;template&gt;\n    &lt;slot name=\"main\"&gt;&lt;/slot&gt;\n&lt;/template&gt;\n</code></pre> <p>\u5177\u540d\u63d2\u69fd\u53ef\u4ee5\u6307\u5b9a\u4f7f\u7528\u90a3\u4e2a\u63d2\u69fd\u663e\u793a\u5728\u5b50\u7ec4\u4ef6\uff1a</p> <p>\u7236\u7ec4\u4ef6\u5173\u952e\uff1a<code>&lt;template v-slot:\u540d\u79f0&gt; &lt;/template&gt;</code></p> <p>\u5b50\u7ec4\u4ef6\u5173\u952e\uff1a<code>&lt;slot name=\"\u540d\u79f0\"&gt;&lt;/slot&gt;</code></p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#5","title":"5 \u7236\u3001\u5b50\u7ec4\u4ef6\u4f5c\u7528\u57df\u540c\u65f6\u5e94\u7528","text":"<p>\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u63d2\u69fd\u7684\u5185\u5bb9\u53ef\u80fd\u60f3\u8981\u540c\u65f6\u4f7f\u7528\u7236\u7ec4\u4ef6\u57df\u5185\u548c\u5b50\u7ec4\u4ef6\u57df\u5185\u7684\u6570\u636e\u3002</p> <p>\u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\u6765\u8ba9\u5b50\u7ec4\u4ef6\u5728\u6e32\u67d3\u65f6\u5c06\u4e00\u90e8\u5206\u6570\u636e\u63d0\u4f9b\u7ed9\u63d2\u69fd\u6211\u4eec\u4e5f\u786e\u5b9e\u6709\u529e\u6cd5\u8fd9\u4e48\u505a! \u53ef\u4ee5\u50cf\u5bf9\u7ec4\u4ef6\u4f20\u9012props\u90a3\u6837\uff0c\u5411\u4e00\u4e2a\u63d2\u69fd\u7684\u51fa\u53e3\u4e0a\u4f20\u9012attributes\u3002</p> <p>\u5173\u952e\u70b9\uff1a\u6e32\u67d3\u63d2\u69fd\u6a21\u677f\u90fd\u662f\u5728\u7236\u7ec4\u4ef6\u8fdb\u884c</p> <p>\u6d41\u7a0b\uff1a\u5b50\u7ec4\u4ef6\u60f3\u4f7f\u7528\u6570\u636e\u5e94\u7528\u5230\u63d2\u69fd\uff0c\u5c31\u9700\u8981\u5148\u5c06\u6570\u636e\u4f20\u7ed9\u7236\u7ec4\u4ef6\uff0c\u7236\u7ec4\u4ef6\u518d\u5e94\u7528\u6570\u636e\u6e32\u67d3\u6a21\u677f\uff0c\u6700\u540e\u518d\u5c06\u6e32\u67d3\u540e\u5f97\u63d2\u69fd\u6a21\u677f\u4f20\u7ed9\u5b50\u7ec4\u4ef6\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#51","title":"5.1 \u533f\u540d\u63d2\u69fd\u573a\u666f","text":"<p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script&gt;\nimport Child from \"@/components/DataSend4/Child.vue\";\n\nexport default {\n  components: {\n    Child,\n  },\n  data() {\n    return {\n      textMsg: \"\u6d4b\u8bd5\u5185\u5bb9\",\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h3&gt;\u7236\u7ec4\u4ef6&lt;/h3&gt;\n  &lt;Child v-slot=\"slotProps\"&gt;  &lt;-- \u6ce8\u610f\u8fd9\u91cc\u662f\u5b50\u7ec4\u4ef6\u6807\u7b7e\u5185\u8bbe\u7f6e\u5c5e\u6027\uff0c\u53ea\u6709\u5177\u540d\u63d2\u69fd\u624d\u4f7f\u7528template\u6807\u7b7e --&gt;\n    &lt;h3&gt;{{ textMsg }} - {{ slotProps.msg }}&lt;/h3&gt;\n  &lt;/Child&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      message: \"Hello Vue!\",\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;slot :msg=\"message\"&gt;&lt;/slot&gt;  &lt;-- \u8fd9\u662f\u4f7f\u7528props\u4e66\u5199\u65b9\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u91cc\u5148\u88ab\u7236\u7ec4\u4ef6\u5f15\u5165\uff0c\u518d\u4ece\u7236\u4f20\u7ed9\u5b50 --&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#52","title":"5.2 \u5177\u540d\u63d2\u69fd\u573a\u666f","text":"<p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script&gt;\nimport Child from \"@/components/DataSend4/Child.vue\";\n\nexport default {\n  components: {\n    Child,\n  },\n  data() {\n    return {\n      textMsg: \"\u6d4b\u8bd5\u5185\u5bb9\",\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h3&gt;\u7236\u7ec4\u4ef6&lt;/h3&gt;\n  &lt;Child&gt;\n      &lt;template v-slot:header=\"slotProps\"&gt;\n          &lt;h3&gt;{{ textMsg }} - {{ slotProps.msg }}&lt;/h3&gt;\n      &lt;/template&gt;\n\n      &lt;template #headerx=\"slotProps\"&gt; &lt;!-- \u7b80\u5199\u5f62\u5f0f v-slot: \u7b80\u5199\u4e3a # --&gt;\n          &lt;h3&gt;{{ textMsg }} - {{ slotProps.msg }}&lt;/h3&gt;\n      &lt;/template&gt;\n\n  &lt;/Child&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  data() {\n    return {\n      message: \"Hello Vue!\",\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;slot name=\"header\" :msg=\"message\"&gt;&lt;/slot&gt;  &lt;-- \u8fd9\u662f\u4f7f\u7528props\u4e66\u5199\u65b9\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u91cc\u5148\u88ab\u7236\u7ec4\u4ef6\u5f15\u5165\uff0c\u518d\u4ece\u7236\u4f20\u7ed9\u5b50 --&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_8","title":"\u4e8c\u5341\u4e00\u3001\u7ec4\u4ef6\u751f\u547d\u5468\u671f","text":"<p>\u6bcf\u4e2aVue\u7ec4\u4ef6\u5b9e\u4f8b\u5728\u521b\u5efa\u65f6\u90fd\u9700\u8981\u7ecf\u5386\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u6b65\u9aa4\uff0c\u6bd4\u5982\u8bbe\u7f6e\u597d\u6570\u636e\u4fa6\u542c\uff0c\u7f16\u8bd1\u6a21\u677f\uff0c\u6302\u8f7d\u5b9e\u4f8b\u5230DOM\uff0c\u4ee5\u53ca\u5728\u6570\u636e\u6539\u53d8\u65f6\u66f4\u65b0DOM\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5b83\u4e5f\u4f1a\u8fd0\u884c\u88ab\u79f0\u4e3a\u751f\u547d\u5468\u671f\u94a9\u5b50\u7684\u51fd\u6570\uff0c\u8ba9\u5f00\u53d1\u8005\u6709\u673a\u4f1a\u5728\u7279\u5b9a\u9636\u6bb5\u8fd0\u884c\u81ea\u5df1\u7684\u4ee3\u7801\u3002</p> <p></p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1_7","title":"1 \u7ec4\u4ef6\u751f\u547d\u5468\u671f\u5212\u5206","text":"<pre><code>\u521b\u5efa\u9636\u6bb5\uff1a\n  beforeCreate \u2192 created\n\u6302\u8f7d\u9636\u6bb5\uff1a\n  beforeMount \u2192 mounted\n\u66f4\u65b0\u9636\u6bb5\uff1a\n  beforeUpdate \u2192 updated\n\u5378\u8f7d\u9636\u6bb5\uff1a\n  beforeUnmount \u2192 unmounted\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2_5","title":"2 \u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u5bf9\u7167\u8868","text":"\u9636\u6bb5 Options API \u94a9\u5b50 Composition API \u94a9\u5b50 \u6838\u5fc3\u52a8\u4f5c \u521b\u5efa\u524d <code>beforeCreate</code> \uff08\u65e0\uff09 \u521d\u59cb\u5316\u4e8b\u4ef6\u3001\u4f9d\u8d56\u6ce8\u5165\uff0c\u4f46\u8fd8\u672a\u5efa\u7acb\u54cd\u5e94\u5f0f \u521b\u5efa\u540e <code>created</code> <code>setup()</code>\uff08\u903b\u8f91\u5165\u53e3\uff09 \u54cd\u5e94\u5f0f\u7cfb\u7edf\u5efa\u7acb\uff0c<code>data</code>\u3001<code>props</code>\u3001<code>methods</code> \u53ef\u7528 \u6302\u8f7d\u524d <code>beforeMount</code> <code>onBeforeMount</code> \u6a21\u677f\u7f16\u8bd1\u6210 render \u51fd\u6570\uff0cDOM \u5c1a\u672a\u6e32\u67d3 \u6302\u8f7d\u540e <code>mounted</code> <code>onMounted</code> \u865a\u62df DOM \u5df2\u751f\u6210\u5e76\u6302\u8f7d\u5230\u771f\u5b9e DOM \u66f4\u65b0\u524d <code>beforeUpdate</code> <code>onBeforeUpdate</code> \u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u5316\u89e6\u53d1\u865a\u62df DOM diff \u4f46\u5c1a\u672a\u91cd\u65b0\u6e32\u67d3 \u66f4\u65b0\u540e <code>updated</code> <code>onUpdated</code> DOM \u5df2\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001 \u5378\u8f7d\u524d <code>beforeUnmount</code> <code>onBeforeUnmount</code> \u7ec4\u4ef6\u5373\u5c06\u9500\u6bc1\uff0c\u53ef\u6e05\u7406\u4e8b\u4ef6/\u5b9a\u65f6\u5668 \u5378\u8f7d\u540e <code>unmounted</code> <code>onUnmounted</code> \u5b9e\u4f8b\u5b8c\u5168\u9500\u6bc1\uff0c\u54cd\u5e94\u5f0f\u89e3\u7ed1"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#3_1","title":"3 \u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\u5185\u90e8\u52a8\u4f5c","text":""},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#1-beforecreate","title":"1\ufe0f\u20e3 beforeCreate\uff08\u521b\u5efa\u524d\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- Vue \u5b9e\u4f8b\u8fd8\u6ca1\u5f00\u59cb\u54cd\u5e94\u5f0f\u5316\u3002 - <code>data</code>\u3001<code>props</code>\u3001<code>computed</code>\u3001<code>methods</code>   \u90fd\u8fd8\u6ca1\u521d\u59cb\u5316\u3002   -   \u4ec5\u521b\u5efa\u4e86\u7a7a\u58f3\u7684\u7ec4\u4ef6\u5b9e\u4f8b\uff08<code>proxy</code>\u3001<code>options</code>\u3001<code>appContext</code>\uff09\u3002   -   \u4e8b\u4ef6\u7cfb\u7edf\uff08<code>emits</code>   \uff09\u5df2\u51c6\u5907\uff0c\u4f46\u4e0d\u80fd\u8bbf\u95ee   this.data\u3002</p> <p>* *\u6240\u4ee5\u6b64\u65f6\uff1a **</p> <pre><code>console.log(this.$data) // undefined\nconsole.log(this.title) // undefined\n</code></pre> <p>\ud83d\udc49 \u901a\u5e38\u4e0d\u5728\u8fd9\u91cc\u505a\u4efb\u4f55\u903b\u8f91\u64cd\u4f5c\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#2-created","title":"2\ufe0f\u20e3 created\uff08\u521b\u5efa\u5b8c\u6210\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- \u521d\u59cb\u5316 * \u4f9d\u8d56\u6ce8\u5165\uff08provide/inject\uff09 \u3002 - \u521d\u59cb\u5316 * \u54cd\u5e94\u5f0f\u7cfb\u7edf \uff08<code>reactivity</code>\uff09\uff1a<code>data</code>\u3001<code>props</code>\u3001<code>computed</code>\u3001<code>watcher</code> \u5168\u90e8\u7ed1\u5b9a\u3002 - \u5efa\u7acb\u7ec4\u4ef6\u5185\u4e8b\u4ef6\u7cfb\u7edf\u3001methods \u7ed1\u5b9a\u3002 - \u7ec4\u4ef6\u5df2\u201c\u53ef\u4ea4\u4e92\u201d\uff0c\u4f46 * *\u8fd8\u6ca1\u6e32\u67d3\u4efb\u4f55 DOM \u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u5f02\u6b65\u8bf7\u6c42\uff08\u5982\u52a0\u8f7d\u521d\u59cb\u6570\u636e\uff09 - \u521d\u59cb\u5316\u672c\u5730\u72b6\u6001 - \u542f\u52a8\u5b9a\u65f6\u5668\u3001\u76d1\u542c\u4e8b\u4ef6</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#3-beforemount","title":"3\ufe0f\u20e3 beforeMount\uff08\u6302\u8f7d\u524d\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- \u6a21\u677f (<code>template</code> \u6216 <code>render</code>) \u5f00\u59cb\u7f16\u8bd1\u6210\u865a\u62df DOM\uff08<code>VNode tree</code>\uff09\u3002 - \u5efa\u7acb <code>render effect</code> \uff08\u54cd\u5e94\u5f0f\u526f\u4f5c\u7528\uff09\uff0c\u7528\u4e8e\u8ffd\u8e2a\u4f9d\u8d56\u3001\u66f4\u65b0 UI\u3002 - \u8fd8\u6ca1\u6709\u5c06 VNode \u6302\u8f7d\u5230\u771f\u5b9e DOM\u3002</p> <p>Vue \u5185\u90e8\u4f1a\u521b\u5efa <code>effect(() =&gt; renderComponentSubTree())</code> \u7528\u4e8e\u8ddf\u8e2a\u54cd\u5e94\u5f0f\u4f9d\u8d56\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#4-mounted","title":"4\ufe0f\u20e3 mounted\uff08\u6302\u8f7d\u5b8c\u6210\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- \u865a\u62df DOM \u6811\u6302\u8f7d\u5230\u771f\u5b9e DOM\u3002 - \u7ec4\u4ef6\u7684\u771f\u5b9e DOM \u8282\u70b9\u53ef\u88ab\u8bbf\u95ee\uff08<code>this.$el</code> \u53ef\u7528\uff09\u3002 - \u6240\u6709\u5b50\u7ec4\u4ef6\u4e5f\u5b8c\u6210\u6302\u8f7d\u3002 - \u81ea\u5b9a\u4e49\u6307\u4ee4\uff08<code>v-directive</code> \uff09\u7684 <code>mounted</code> \u94a9\u5b50\u4e5f\u88ab\u6267\u884c\u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u64cd\u4f5c DOM\u3001\u521d\u59cb\u5316\u7b2c\u4e09\u65b9\u5e93\uff08\u5982\u56fe\u8868\u3001\u52a8\u753b\uff09 - \u6ce8\u518c\u5168\u5c40\u4e8b\u4ef6\u76d1\u542c\uff08window resize \u7b49\uff09</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#5-beforeupdate","title":"5\ufe0f\u20e3 beforeUpdate\uff08\u66f4\u65b0\u524d\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- \u54cd\u5e94\u5f0f\u6570\u636e\u66f4\u65b0 \u2192 \u89e6\u53d1 <code>render effect</code>\u3002 - \u4f46 Vue \u8fd8\u6ca1\u6267\u884c <code>diff</code> \u548c <code>patch</code>\u3002 - \u4f60\u4ecd\u53ef\u4ee5\u8bbf\u95ee\u201c\u65e7\u7684 DOM \u72b6\u6001\u201d\u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u5728\u6570\u636e\u53d8\u52a8\u524d\u624b\u52a8\u4fdd\u5b58\u65e7\u503c\u6216 DOM \u72b6\u6001\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#6-updated","title":"6\ufe0f\u20e3 updated\uff08\u66f4\u65b0\u5b8c\u6210\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- Vue \u5b8c\u6210\u865a\u62df DOM diff \u548c DOM patch\u3002 - \u771f\u5b9e DOM \u5df2\u53cd\u6620\u6700\u65b0\u6570\u636e\u3002 - \u6240\u6709\u4f9d\u8d56\u66f4\u65b0\u5df2\u5e94\u7528\u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u5728\u6570\u636e\u53d8\u66f4\u540e\u64cd\u4f5c\u66f4\u65b0\u540e\u7684 DOM\u3002 - \u901a\u5e38\u7528\u4e8e\uff1a\u8868\u683c\u6eda\u52a8\u6761\u91cd\u7f6e\u3001\u52a8\u753b\u540c\u6b65\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#7-beforeunmount","title":"7\ufe0f\u20e3 beforeUnmount\uff08\u5378\u8f7d\u524d\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- Vue \u89e6\u53d1\u7ec4\u4ef6\u5378\u8f7d\u6d41\u7a0b\uff0c\u4f46\u8fd8\u6ca1\u9500\u6bc1\u3002 - \u54cd\u5e94\u5f0f\u7cfb\u7edf\u3001\u4e8b\u4ef6\u76d1\u542c\u5668\u4ecd\u5728\u3002 - \u5b50\u7ec4\u4ef6\u4e5f\u4f1a\u9012\u5f52\u8c03\u7528\u6b64\u94a9\u5b50\u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u6e05\u9664\u5b9a\u65f6\u5668\u3001\u53d6\u6d88\u8ba2\u9605\u4e8b\u4ef6\u3001\u505c\u6b62\u7f51\u7edc\u8bf7\u6c42\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#8-unmounted","title":"8\ufe0f\u20e3 unmounted\uff08\u5378\u8f7d\u5b8c\u6210\uff09","text":"<p>* *\u5185\u90e8\u4e3b\u8981\u52a8\u4f5c\uff1a **</p> <p>- \u54cd\u5e94\u5f0f\u7cfb\u7edf\u89e3\u7ed1\uff08<code>reactive</code> \u65ad\u5f00\u4f9d\u8d56\uff09\u3002 - \u4e8b\u4ef6\u76d1\u542c\u79fb\u9664\u3002 - DOM \u8282\u70b9\u9500\u6bc1\u3002 - \u5185\u5b58\u91ca\u653e\u3002</p> <p>* *\u9002\u5408\u505a\uff1a **</p> <p>- \u786e\u8ba4\u8d44\u6e90\u6e05\u7406\uff08\u65e5\u5fd7\u3001\u6027\u80fd\u8bb0\u5f55\uff09</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_9","title":"\u4e8c\u5341\u4e8c\u3001\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u5e94\u7528\u793a\u4f8b","text":"<p>\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u4f1a\u968f\u7740\u6211\u4eec\u5bf9vue\u7684\u4e86\u89e3\u8d8a\u591a\uff0c\u4e5f\u4f1a\u8d8a\u6765\u8d8a\u91cd\u8981\uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u8bb2\u4e24\u4e2a\u5e38\u7528\u7684\u5e94\u7528\u5e38\u89c1\uff1a</p> <p>- \u901a\u8fc7ref\u83b7\u53d6\u5143\u7d20DOM\u7ed3\u6784 - \u4f7f\u7528 mounted \u51fd\u6570\uff08DOM\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\uff09</p> <pre><code>&lt;template&gt;\n  &lt;h3&gt;\u751f\u547d\u5468\u671f\u51fd\u6570\u83b7\u53d6DOM&lt;/h3&gt;\n  &lt;p ref=\"myname\"&gt;ccplayer&lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  beforeMount() {\n    console.log(this.$refs.myname); // undefined\n  },\n  mounted() {\n    console.log(this.$refs.myname);\n  },\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>- \u6a21\u62df\u7f51\u7edc\u8bf7\u6c42\u6e32\u67d3\u6570\u636e - \u4f7f\u7528 mounted \u51fd\u6570\uff08UI\u6e32\u67d3\u5b8c\u6210\u4e4b\u540e\uff09</p> <pre><code>&lt;template&gt;\n  &lt;h3&gt;\u751f\u547d\u5468\u671f\u51fd\u6570\u83b7\u53d6DOM\u6d4b\u8bd5&lt;/h3&gt;\n\n  &lt;p ref=\"myname\"&gt;ccplayer&lt;/p&gt;\n\n  &lt;ul&gt;\n    &lt;li v-for=\"(item, index) of dataList\" :key=\"index\"&gt;\n      &lt;h3&gt;{{ item.title }}&lt;/h3&gt;\n      &lt;p&gt;{{ item.content }}&lt;/p&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      dataList: [\n        { title: \"\u6807\u98981\", content: \"\u5185\u5bb91\" },\n        { title: \"\u6807\u98982\", content: \"\u5185\u5bb92\" },\n        { title: \"\u6807\u98983\", content: \"\u5185\u5bb93\" },\n      ],\n    };\n  },\n  beforeMount() {\n    console.log(this.$refs.myname); // undefined\n  },\n  mounted() {\n    console.log(this.$refs.myname);\n  },\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_10","title":"\u4e8c\u5341\u4e09\u3001\u52a8\u6001\u7ec4\u4ef6","text":"<p>\u6709\u4e9b\u9875\u9762\u6709\u65f6\u5019\u9700\u8981\u4e24\u4e2a\u7ec4\u4ef6\u6765\u56de\u5207\u6362\uff0c\u4f8b\u5982Tab\u754c\u9762\uff0c\u8fd9\u65f6\u5019\u8003\u8651\u4f7f\u7528\u52a8\u6001\u7ec4\u4ef6\u89e3\u51b3\u8be5\u95ee\u9898\u3002</p> <p>- \u4e3b\u7ec4\u4ef6\u4f7f\u7528vue\u81ea\u5e26\u7684\u627f\u8f7d\u7ec4\u4ef6\u6807\u7b7e\uff1a<code>&lt;component :is=\"tabComponent\"&gt;&lt;/component&gt;</code> - \u4e00\u822c\u9700\u8981\u4e00\u4e2a\u6309\u94ae\uff1a<code>&lt;button @click=\"changeHandler\"&gt;\u5207\u6362\u7ec4\u4ef6&lt;/button&gt;</code></p> <p>- \u6ce8\u610f\u7ec4\u4ef6\u540d\u79f0\u5207\u6362\u5224\u65ad\u9700\u8981\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\uff1a<code>this.tabComponent = \"TAB1\" === this.tabComponent ? \"TAB2\" : \"TAB1\";</code></p> <p>\u6240\u4ee5\uff0c\u5b8c\u6574\u793a\u4f8b\uff1a</p> <p>\u4e3b\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;component :is=\"tabComponent\"&gt;&lt;/component&gt;\n  &lt;button @click=\"changeHandler\"&gt;\u5207\u6362\u7ec4\u4ef6&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport TAB1 from \"@/components/TAB/TAB1.vue\";\nimport TAB2 from \"@/components/TAB/TAB2.vue\";\n\nexport default {\n  components: {\n    TAB1,\n    TAB2,\n  },\n  data() {\n    return {\n      tabComponent: \"TAB1\",\n    };\n  },\n  methods: {\n    changeHandler() {\n      console.log(\"changeHandler\");\n      this.tabComponent = \"TAB1\" === this.tabComponent ? \"TAB2\" : \"TAB1\";\n    },\n  },\n};\n&lt;/script&gt;\n</code></pre> <p>\u7ec4\u4ef6\uff1aTAB1</p> <pre><code>&lt;template&gt;\n  &lt;h3&gt;TAB1&lt;/h3&gt;\n&lt;/template&gt;\n\n&lt;script&gt;&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u7ec4\u4ef6\uff1aTAB2</p> <pre><code>&lt;template&gt;\n  &lt;h3&gt;TAB2&lt;/h3&gt;\n&lt;/template&gt;\n\n&lt;script&gt;&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#_11","title":"\u4e8c\u5341\u56db\u3001\u52a8\u6001\u88ab\u5207\u6362\u7ec4\u4ef6\u4fdd\u6301\u5b58\u6d3b(\u4e0d\u5378\u8f7d)","text":"<p>\u52a8\u6001\u7ec4\u4ef6\u4e2d\u5c5e\u4e8e\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5207\u6362\u7ec4\u4ef6\u65f6\uff0c\u76f8\u5f53\u4e8e\u5378\u8f7d\u7ec4\u4ef6\uff0c\u4f1a\u81ea\u52a8\u89e6\u53d1\u751f\u547d\u5468\u671f\u51fd\u6570\uff1abeforeUnmount -&gt; unmounted</p> <p>\u5f53\u4f7f\u7528<code>&lt;component :is=\"...\"&gt;</code> \u6765\u5728\u591a\u4e2a\u7ec4\u4ef6\u95f4\u4f5c\u5207\u6362\u65f6\uff0c\u88ab\u5207\u6362\u6389\u7684\u7ec4\u4ef6\u4f1a\u88ab\u5378\u8f7d\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 <code>&lt;keep-alive&gt;</code> \u7ec4\u4ef6\u5f3a\u5236\u88ab\u5207\u6362\u6389\u7684\u7ec4\u4ef6\u4ecd\u7136\u4fdd\u6301\u201c\u5b58\u6d3b\u201d\u7684\u72b6\u6001</p> <p>\u7ec4\u4ef6\uff1aTAB1 \u6539\u4e3a \u5176\u4e2d\u6709\u6570\u636e\u53d8\u6362\u7684\u5185\u5bb9</p> <pre><code>&lt;template&gt;\n  &lt;h3&gt;TAB1&lt;/h3&gt;\n  &lt;p&gt;{{ message }}&lt;/p&gt;\n  &lt;button @click=\"message = '\u65b0\u6570\u636e'\"&gt;\u66f4\u65b0\u6570\u636e&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  beforeUnmount() {\n    console.log(\"beforeUnmount\");\n  },\n  unmounted() {\n    console.log(\"unmounted\");\n  },\n  data() {\n    return {\n      message: \"\u8001\u6570\u636e\",\n    };\n  },\n  methods: {\n    // updateMessageHandler() {\n    //   this.message = \"\u65b0\u6570\u636e\";\n    // },\n  },\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u6b64\u65f6\u5f53\u6211\u5148\u70b9\u51fbTAB1\u4e2d\u7684 \u66f4\u65b0\u6570\u636e \u4e4b\u540e\uff0c\u518d\u5207\u6362\u81f3TAB2\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1 \u751f\u547d\u5468\u671f\u5378\u8f7d\u9636\u6bb5 \u4e24\u4e2a\u51fd\u6570\uff1b</p> <p>\u7136\u540e\u5f53\u6211\u53c8\u4eceTAB2\u5207\u6362\u56de TAB1\uff0c\u53d1\u73b0\u5e76\u672a\u4fdd\u6301 \u66f4\u65b0\u6570\u636e\u4e4b\u540e\u7684\u503c\uff1b\u5982\u679c\u6211\u4eec\u9700\u8981\u4fdd\u6301\u8fd9\u79cd\u66f4\u65b0\u4e4b\u540e\u7684\u9875\u9762\u72b6\u6001\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528:<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> \u6807\u7b7e\u5305\u88f9\uff0c\u4e0a\u9762\u793a\u4f8b * *\u4e3b\u7ec4\u4ef6 ** \u4fee\u6539\u5982\u4e0b\uff1a</p> <pre><code>&lt;keep-alive&gt;\n    &lt;component :is=\"tabComponent\"&gt;&lt;/component&gt;  &lt;!-- \u6ce8\u610f\u5305\u88f9\u7684\u662f\uff1acomponent \u8fd9\u4e2a\u5185\u7f6e\u6807\u7b7e --&gt;\n&lt;/keep-alive&gt;\n&lt;button @click=\"changeHandler\"&gt;\u5207\u6362\u7ec4\u4ef6&lt;/button&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#defineasynccomponent","title":"\u4e8c\u5341\u4e94\u3001\u5f02\u6b65\u7ec4\u4ef6(defineAsyncComponent)","text":"<p>\u5728\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u62c6\u5206\u5e94\u7528\u4e3a\u66f4\u5c0f\u7684\u5757\uff0c\u5e76 * *\u4ec5\u5728\u9700\u8981\u65f6\u518d\u4ece\u670d\u52a1\u5668\u52a0\u8f7d\u76f8\u5173\u7ec4\u4ef6 ** \uff1bVue \u63d0\u4f9b\u4e86<code>defineAsyncComponent</code> \u65b9\u6cd5\u6765\u5b9e\u73b0\u6b64\u529f\u80fd\u3002</p> <pre><code>&lt;script&gt;\n// \u5f02\u6b65\u7ec4\u4ef6 - \u4f7f\u7528\u65f6\u624d\u4f1a\u52a0\u8f7d\nconst TAB2 = defineAsyncComponent(() =&gt; import(\"@/components/TAB/TAB2.vue\"));\n&lt;/script&gt;\n</code></pre> <p>\u8fd9\u6837\u5199\u4e4b\u540e\uff0c\u5f53\u5207\u6362\u81f3TAB2\u9875\u9762\u65f6\uff0c\u624d\u4f1a\u89e6\u53d1\u7ec4\u4ef6\u52a0\u8f7d\uff1b\u4e00\u5f00\u59cb\u5e76\u4e0d\u4f1a\u76f4\u63a5\u52a0\u8f7d\uff0c\u8fd9\u5728\u5927\u578b\u9879\u76ee\u79cd\u975e\u5e38\u6709\u7528\uff01</p>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#provide-inject","title":"\u4e8c\u5341\u516d\u3001\u4f9d\u8d56\u6ce8\u5165(provide-inject)","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u6211\u4eec\u9700\u8981\u4ece\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u65f6\uff0c\u4f1a\u4f7f\u7528 props\uff1b</p> <p>\u60f3\u8c61\u4e00\u4e0b\u8fd9\u6837\u7684\u7ed3\u6784\uff1a\u6709\u4e00\u4e9b\u591a\u5c42\u7ea7\u5d4c\u5957\u7684\u7ec4\u4ef6\uff0c\u5f62\u6210\u4e86\u4e00\u9897\u5de8\u5927\u7684\u7ec4\u4ef6\u6811\uff0c\u800c\u67d0\u4e2a\u6df1\u5c42\u7684\u5b50\u7ec4\u4ef6\u9700\u8981\u4e00\u4e2a\u8f83\u8fdc\u7684\u7956\u5148\u7ec4\u4ef6\u4e2d\u7684\u90e8\u5206\u6570\u636e\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4ec5\u4f7f\u7528 props \u5219\u5fc5\u987b\u5c06\u5176\u6cbf\u7740\u7ec4\u4ef6\u94fe\u9010\u7ea7\u4f20\u9012\u4e0b\u53bb\uff0c\u8fd9\u4f1a\u975e\u5e38\u9ebb\u70e6\u3002</p> <p>\u8be5\u95ee\u9898\u79f0\u4e3a\uff1aprops \u9010\u7ea7\u900f\u4f20</p> <p><code>provide</code> \u548c <code>inject</code> \u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002\u4e00\u4e2a\u7236\u7ec4\u4ef6\u76f8\u5bf9\u4e8e\u5176\u6240\u6709\u7684\u540e\u4ee3\u7ec4\u4ef6\uff0c\u4f1a\u4f5c\u4e3a\u4f9d\u8d56\u63d0\u4f9b\u8005\u3002\u4efb\u4f55\u540e\u4ee3\u7684\u7ec4\u4ef6\u6811\uff0c\u65e0\u8bba\u5c42\u7ea7\u6709\u591a\u6df1\uff0c\u90fd\u53ef\u4ee5\u6ce8\u5165\u7531\u7236\u7ec4\u4ef6\u63d0\u4f9b\u7ed9\u6574\u6761\u94fe\u8def\u7684\u4f9d\u8d56\u3002</p> <p>\u7237\u7237\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      grandFatherData: [],\n    };\n  },\n\n  // provide: {\n  //   message: \"Hello Vue3\",\n  //   grandFatherData: \"\u7237\u7237\u7684\u8d22\u4ea7\uff01\uff01\uff01\",  // \u56fa\u5b9a\u6570\u636e\n  // },\n\n  provide() {\n    return {\n      message: \"Hello Vue3\",\n      grandFatherData: this.grandFatherData, // \u82e5\u8981\u7528\u52a8\u6001\u6570\u636e\uff0c\u5219\u4f7f\u7528provide\u51fd\u6570\u5f62\u5f0f\uff0c\u624d\u53ef\u4ee5\u4f7f\u7528 this.xxx\n    };\n  },\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b59\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;p&gt;{{ message }}&lt;/p&gt;\n  &lt;p&gt;{{ fullMessage }}&lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  inject: [\"message\"],  // \u76f4\u63a5\u63a5\u6536, \u8fd9\u4e2a\u5b57\u6bb5\u6267\u884c\u65e9\u4e8edata()\u51fd\u6570\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u8be5\u6570\u636e\u5b58\u5165 data() \u51fd\u6570\u8fd4\u56de\n  data(){\n      return {\n          fullMessage: this.messsage\n      }\n  }\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u9664\u4e86\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u63d0\u4f9b\u4f9d\u8d56\uff0c\u6211\u4eec\u8fd8 * \u53ef\u4ee5\u5728\u6574\u4e2a\u5e94\u7528\u5c42\u9762\u63d0\u4f9b\u4f9d\u8d56 *\uff1a</p> <p>main.js</p> <pre><code>import {\n  createApp\n} from \"vue\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap\";\nimport App from \"./App.vue\";\n\nconst app = createApp(App);\napp.provide(\"globalData\", [\"\u5168\u5c40\u6570\u636e1\", \"\u5168\u5c40\u6570\u636e2\", \"\u5168\u5c40\u6570\u636e3\"]);\napp.mount(\"#app\");\n</code></pre> <p>\u7ec4\u4ef6\u4ee3\u7801\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;ul&gt;\n    &lt;li v-for=\"(item, index) of globalData\" :key=\"index\"&gt;{{ item }}&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  inject: [\"globalData\"],\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E5%85%A5%E9%97%A8/#vue","title":"\u4e8c\u5341\u4e03\u3001Vue\u5e94\u7528","text":"<p>\u6bcf\u4e2aVue\u5e94\u7528\u90fd\u662f\u901a\u8fc7 createApp\u51fd\u6570 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5e94\u7528\u5b9e\u4f8b</p> <p>main.js \u4f5c\u4e3a\u5e94\u7528\u7684\u5165\u53e3\uff0c\u6240\u6709vue\u9879\u76ee\u7684\u5f00\u59cb\u5c31\u662f\u4ece\u8fd9\u91cc\u5f00\u59cb...</p> <pre><code>import {\n  createApp\n} from \"vue\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap\";\nimport App\n  from \"./App.vue\";\n\nconst app = createApp(App);\napp.provide(\"globalData\", [\"\u5168\u5c40\u6570\u636e1\", \"\u5168\u5c40\u6570\u636e2\", \"\u5168\u5c40\u6570\u636e3\"]);\napp.mount(\"#app\"); // \u6302\u8f7d\u5230\u9875\u9762 index.html \u4e2d id\u4e3aapp\u7684\u5143\u7d20\u4e0a(\u5bb9\u5668)\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/","title":"vue3-\u7ec4\u5408\u5f0fAPI","text":"<p>vue3\u9879\u76ee\u652f\u6301\u7ec4\u5408\u5f0f\u4e0e\u9009\u9879\u5f0fAPI\uff0c\u66f4\u591a\u4eba\u63a8\u8350\u7ec4\u5408\u5f0fAPI\u8bed\u6cd5\uff0c\u5b83\u80fd\u66f4\u597d\u7684\u89c4\u5212\u4ee3\u7801\u7ed3\u6784\uff0c\u6309\u529f\u80fd\u5757\u5212\u5206\u66f4\u6613\u7ef4\u62a4\u3002</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-setup","title":"\u4e00\u3001\u7ec4\u5408\u5f0fAPI--\u5165\u53e3-setup\u51fd\u6570","text":""},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#1","title":"1 \u975e\u8bed\u6cd5\u7cd6\u5199\u6cd5","text":"<pre><code>&lt;template&gt;&lt;/template&gt;\n\n&lt;script&gt;\n// \u7ec4\u5408\u5f0fAPI\u5b66\u4e60 -- \u975e\u8bed\u6cd5\u7cd6\u5199\u6cd5\nexport default {\n  // \u6700\u5148\u6267\u884c\u7684\u51fd\u6570\n  setup() {\n    console.log(\"setup\");\n\n    const message = \"hello\";\n    const printMessage = (someValue = message) =&gt; {\n      console.log(someValue);\n    };\n\n    return {\n      message,\n      printMessage,\n    };\n  },\n\n  // \u751f\u547d\u5468\u671f\u51fd\u6570\n  beforeCreate() {\n    console.log(\"beforeCreate\");\n    this.printMessage(\"this is in beforeCreate message\");\n  },\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#2","title":"2 \u8bed\u6cd5\u7cd6\u5199\u6cd5(\u63a8\u8350)","text":"<pre><code>&lt;template&gt;&lt;/template&gt;\n\n&lt;script setup&gt;\n// \u7ec4\u5408\u5f0fAPI\u5b66\u4e60 -- \u8bed\u6cd5\u7cd6\u5199\u6cd5\nimport { onBeforeMount } from \"vue\";  // \u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u7ec4\u5408\u5f0fAPI\u751f\u547d\u5468\u671f\u51fd\u6570\u4e0d\u4f1a\u6709\uff1aonBeforeCreate -&gt; onCreate\uff0csetup\u51fd\u6570\u9636\u6bb5\u5728\u4ed6\u4eec\u4e4b\u524d\n\nconsole.log(\"setup\");\n\nconst message = \"hello\";\nconst printMessage = (someValue = message) =&gt; {\n  console.log(someValue);\n};\n\nonBeforeMount(() =&gt; {\n  console.log(\"onBeforeMount\");\n  printMessage(\"this is in beforeCreate message\");\n});\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#3","title":"3 \u603b\u7ed3","text":"<ol> <li>setup\u9009\u9879\u7684\u6267\u884c\u65f6\u673a?</li> </ol> <p>beforeCreate\u94a9\u5b50\u4e4b\u524d \u81ea\u52a8\u6267\u884c</p> <ol> <li>setup\u5199\u4ee3\u7801\u7684\u7279\u70b9\u662f\u4ec0\u4e48?</li> </ol> <p>\u5b9a\u4e49\u6570\u636e+\u51fd\u6570 \u7136\u540e\u4ee5\u5bf9\u8c61\u65b9\u5f0freturn</p> <ol> <li><code>&lt;script setup&gt;</code>\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898?</li> </ol> <p>\u7ecf\u8fc7\u8bed\u6cd5\u7cd6\u7684\u5c01\u88c5\u66f4\u7b80\u5355\u7684\u4f7f\u7528\u7ec4\u5408\u5f0fAPI;</p> <p>\u6b64\u65f6\u7684\u53d8\u91cf\u4e0d\u518d\u9700\u8981return\uff0c\u5b9a\u4e49\u5373\u53ef\u4f7f\u7528</p> <ol> <li>setup\u4e2d\u7684this\u8fd8\u6307\u5411\u7ec4\u4ef6\u5b9e\u4f8b\u5417?</li> </ol> <p>\u4e0d\u662f\uff0c\u5b83\u6307\u5411undefined</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-reactiveref","title":"\u4e8c\u3001\u7ec4\u5408\u5f0fAPI--reactive\u548cref\u51fd\u6570","text":""},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#1-reactive","title":"1 reactive \u54cd\u5e94\u5f0f\u5bf9\u8c61","text":"<p>\u4f5c\u7528\uff1a\u63a5\u53d7\u5bf9\u8c61\u7c7b\u578b\u6570\u636e\u7684\u53c2\u6570\u4f20\u5165\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u5bf9\u8c61</p> <pre><code>&lt;script setup&gt;\nimport { reactive } from 'vue'\n\n// \u63a8\u5bfc\u5f97\u5230\u7684\u7c7b\u578b\uff1a{ title: string }\nconst book = reactive({ title: 'Vue 3 \u6307\u5f15' })\n&lt;/script&gt;\n</code></pre> <p>\u793a\u4f8b\uff1a\u8ba1\u6570\u5668\u81ea\u589e\u663e\u793a</p> <pre><code>&lt;template&gt;\n  &lt;h4&gt;{{ stateData.count }}&lt;/h4&gt;\n  &lt;button @click=\"addCount\"&gt;addCount&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { reactive } from \"vue\";\n\nconst stateData = reactive({\n  count: 0,\n});\n\nconst addCount = () =&gt; {\n  stateData.count++;\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#2-ref","title":"2 ref \u54cd\u5e94\u5f0f\u5bf9\u8c61","text":"<p>\u4f5c\u7528\uff1a\u63a5\u53d7\u5bf9\u8c61\u7c7b\u578b\u6216\u7b80\u5355\u7c7b\u578b\u6570\u636e\u7684\u53c2\u6570\u4f20\u5165\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u5bf9\u8c61</p> <p>\u6ce8\u610f\uff1aref\u4fee\u6539\u503c\u9700\u8981\u901a\u8fc7 \u53d8\u91cf.value \u5c5e\u6027\u5904\u7406</p> <pre><code>&lt;template&gt;\n  &lt;h4&gt;{{ count }}&lt;/h4&gt;\n  &lt;button @click=\"addCount\"&gt;addCount&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { ref } from \"vue\";\n\nconst count = ref(0);\n\nconst addCount = () =&gt; {\n  console.log(\"count:\", count);\n  count.value++;  // \u6ce8\u610f\uff1aref\u4fee\u6539\u503c\u9700\u8981\u901a\u8fc7.value\u5c5e\u6027\u5904\u7406\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#3_1","title":"3 \u603b\u7ed3","text":"<ol> <li>reactive\u548cref\u51fd\u6570\u7684\u5171\u540c\u4f5c\u7528\u662f\u4ec0\u4e48?</li> </ol> <p>\u7528\u51fd\u6570\u8c03\u7528\u7684\u65b9\u5f0f\u751f\u6210\u54cd\u5e94\u5f0f\u6570\u636e</p> <ol> <li>reactive vs ref ?</li> </ol> <p>1\uff09reactive\u4e0d\u80fd\u5904\u7406\u7b80\u5355\u7c7b\u578b\u7684\u6570\u636e</p> <p>2\uff09ref\u53c2\u6570\u7c7b\u578b\u652f\u6301\u66f4\u597d\u4f46\u662f\u5fc5\u987b\u901a\u8fc7,value\u8bbf\u95ee\u4fee\u6539</p> <p>3\uff09ref\u51fd\u6570\u7684\u5185\u90e8\u5b9e\u73b0\u4f9d\u8d56\u4e8ereactive\u51fd\u6570</p> <ol> <li>\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\u63a8\u8350\u4f7f\u7528\u54ea\u4e2a?</li> </ol> <p>\u63a8\u8350\u4f7f\u7528ref\u51fd\u6570\uff0c\u66f4\u52a0\u7075\u6d3b</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-computed","title":"\u4e09\u3001\u7ec4\u5408\u5f0fAPI--computed\u51fd\u6570","text":"<pre><code>&lt;template&gt;\n  &lt;h4&gt;\n    computed -\n    \u52a8\u6001\u8ba1\u7b97\u5c5e\u6027\uff08\u6ce8\u610f\uff1a\u53ea\u80fd\u505a\u8ba1\u7b97\uff0c\u4e0d\u8981\u5e72\u5176\u4ed6\u4e8b\uff1b\u5982\u679c\u9700\u8981\u526f\u4f5c\u7528\uff0c\u53ef\u4ee5\u4ea4\u7ed9watch\u51fd\u6570\uff09\n  &lt;/h4&gt;\n  &lt;p&gt;\u539f\u59cb\u6570\u636e\uff1a{{ srcList }}&lt;/p&gt;\n  &lt;p&gt;\u8ba1\u7b97\u6570\u636e\uff1a{{ tarList }}&lt;/p&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { computed, ref } from \"vue\"; // \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\n\n// \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\nconst srcList = ref([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n// \u5b9a\u4e49\u8ba1\u7b97\u51fd\u6570\u5bf9\u8c61 - \u6ce8\u610f\uff1a\u4e0d\u8981\u6709\u5176\u4ed6\u201d\u526f\u4f5c\u7528\u201c\u529f\u80fd\u4ee3\u7801\uff0c\u8fd9\u91cc\u53ea\u80fd\u6709\u8ba1\u7b97\u903b\u8f91\nconst tarFunc = () =&gt; {\n  return srcList.value.filter((item) =&gt; item &gt; 5);\n};\n\n// \u4f7f\u7528computed\u7ed1\u5b9a\u5bf9\u5e94\u8ba1\u7b97\u51fd\u6570\uff08\u5165\u53c2\u5fc5\u987b\u4e3a\u51fd\u6570\u6709\u8fd4\u56de\u503c\u51fd\u6570\u5bf9\u8c61\uff09\nconst tarList = computed(tarFunc);\n\n// \u5ef6\u65f6\u8bbe\u7f6e\u539f\u59cb\u6570\u636e\u53d8\u5316\uff0c\u8ba1\u7b97\u503c\u4e5f\u4f1a\u53d8\u5316\nsetTimeout(() =&gt; {\n  srcList.value.push(11, 12, 13, 14, 15);\n}, 3000);\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u6700\u4f73\u5b9e\u8df5\uff1a</p> <ol> <li>\u8ba1\u7b97\u5c5e\u6027\u51fd\u6570\u4e2d\u4e0d\u5e94\u8be5\u6709\u201c\u526f\u4f5c\u7528\u201d</li> </ol> <p>\u6bd4\u5982\u5f02\u6b65\u8bf7\u6c42\u3001\u4fee\u6539dom</p> <ol> <li>\u907f\u514d\u76f4\u63a5\u4fee\u6539\u8ba1\u7b97\u5c5e\u6027\u7684\u503c</li> </ol> <p>\u8ba1\u7b97\u5c5e\u6027\u5e94\u8be5\u662f\u53ea\u8bfb\u7684</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-watch","title":"\u56db\u3001\u7ec4\u5408\u5f0fAPI--watch\u51fd\u6570","text":"<p>\u4fa6\u542c\u5668\uff1awatch\u51fd\u6570</p> <p>\u4f5c\u7528\uff1a\u4fa6\u542c\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6570\u636e\u7684\u53d8\u5316\uff0c\u6570\u636e\u53d8\u5316\u65f6\u6267\u884c\u56de\u8c03\u51fd\u6570</p> <p>\u4e24\u4e2a\u989d\u5916\u53c2\u6570\uff1aimmediate\uff08\u7acb\u5373\u6267\u884c\uff09\u3001deep\uff08\u6df1\u5ea6\u4fa6\u542c\uff09</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#1_1","title":"1 \u4fa6\u542c\u6570\u636e\u5bf9\u8c61\uff08\u5355\u4e2a/\u591a\u4e2a\uff09","text":"<ol> <li>\u5bfc\u5165watch\u51fd\u6570</li> <li>\u6267\u884cwatch\u51fd\u6570\u4f20\u5165 \u8981\u4fa6\u542c\u7684\u54cd\u5e94\u5f0f\u6570\u636e(\u6ce8\u610f\uff1aref\u5bf9\u8c61\u672c\u8eab\uff0c\u4e0d\u9700\u8981.value) \u548c \u56de\u8c03\u51fd\u6570</li> </ol> <pre><code>&lt;template&gt;\n  &lt;h4&gt;watch - \u4fa6\u542c\u5668&lt;/h4&gt;\n\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u5355\u4e2a\u6570\u636e\u5bf9\u8c61\uff1a{{ count }}&lt;/p&gt;\n  &lt;button @click=\"count++\"&gt;changeValue&lt;/button&gt;\n\n  &lt;hr /&gt;\n\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u591a\u4e2a\u6570\u636e\u5bf9\u8c611\uff1a{{ number }}&lt;/p&gt;\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u591a\u4e2a\u6570\u636e\u5bf9\u8c612\uff1a{{ name }}&lt;/p&gt;\n  &lt;button @click=\"changeMultiple1\"&gt;changeMultiple1&lt;/button&gt;\n  &lt;button @click=\"changeMultiple2\"&gt;changeMultiple2&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { ref, watch } from \"vue\"; // \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\n\n// \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\nconst count = ref(0);\nconst number = ref(0);\nconst name = ref(\"chc\");\n\n// \u4f20\u5165\u5355\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\u672c\u8eab+\u56de\u8c03\u51fd\u6570\nwatch(count, (newVal, oldVal) =&gt; {\n  console.log(\"count \u5df2\u53d1\u751f\u53d8\u5316\", count.value, newVal, oldVal);\n});\n\nconst changeMultiple1 = () =&gt; {\n  number.value++;\n};\nconst changeMultiple2 = () =&gt; {\n  name.value = \"cenhongchang\";\n};\n\n// \u4f20\u5165\u591a\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\u672c\u8eab+\u56de\u8c03\u51fd\u6570\nwatch(\n  [number, name],\n  ([newNumberVal, newNameVal], [oldNumberVal, oldNameVal]) =&gt; {\n    console.log(\n      \"number \u6216 name \u5df2\u53d1\u751f\u53d8\u5316\",\n      newNumberVal,\n      newNameVal,\n      oldNumberVal,\n      oldNameVal,\n    );\n  },\n);\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#2-immediate","title":"2 immediate\uff08\u7acb\u5373\u6267\u884c)\uff09","text":"<p>\u5b9e\u73b0\u8f93\u5165\u6846\uff0c\u6839\u636e\u8f93\u5165\u5185\u5bb9\u663e\u793a\u4e0b\u62c9\u9009\u62e9\u9879\u7684\u9700\u6c42\uff0c\u5e38\u5e38\u4e00\u5f00\u59cb\u4e0a\u6765\u6ca1\u6709\u8f93\u5165\u662f\uff0c\u9ed8\u8ba4\u6267\u884c\u4e00\u6b21\u4ece\u540e\u7aef\u83b7\u53d6\u53ef\u9009\u9879\uff0c\u8fd9\u65f6\u7528\u5230\uff1aimmediate</p> <p>\u6ce8\u610f\uff1a\u7acb\u5373\u6267\u884c\u65f6\uff0c\u53d8\u91cf\u8fd8\u672a\u521b\u5efa\uff0c\u6240\u4ee5oldVal = undefined\uff1b\u4f46 newVal = 0</p> <pre><code>&lt;template&gt;\n  &lt;h4&gt;watch - \u4fa6\u542c\u5668&lt;/h4&gt;\n\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u5355\u4e2a\u6570\u636e\u5bf9\u8c61\uff1a{{ count }}&lt;/p&gt;\n  &lt;button @click=\"count++\"&gt;changeValue&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { ref, watch } from \"vue\"; // \u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\u5bf9\u8c61\n\nconst count = ref(0);\n\n// immediate - \u7acb\u5373\u6267\u884c\u6d4b\u8bd5\nwatch(\n  count,\n  (newVal, oldVal) =&gt; {\n    console.log(\"count \u5df2\u53d1\u751f\u53d8\u5316\", count.value, newVal, oldVal);\n  },\n  { immediate: true }, // \u5f00\u542f\u7acb\u5373\u6267\u884c\n);\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#3-deep","title":"3 deep\uff08\u6df1\u5ea6\u4fa6\u542c\uff09\u4e0e\u7cbe\u786e\u4fa6\u542c\uff08\u5bf9\u8c61\u6570\u636e\uff09","text":"<p>\u9ed8\u8ba4\u673a\u5236\uff1a\u901a\u8fc7watch\u76d1\u542c\u7684ref\u5bf9\u8c61\u9ed8\u8ba4\u662f\u6d45\u5c42\u4fa6\u542c\u7684\uff0c\u76f4\u63a5\u4fee\u6539\u5d4c\u5957\u7684\u5bf9\u8c61\u5c5e\u6027\u4e0d\u4f1a\u89e6\u53d1\u56de\u8c03\u6267\u884c\uff0c\u9700\u8981\u5f00\u542fdeep\u9009\u9879</p> <pre><code>&lt;template&gt;\n  &lt;h4&gt;watch - \u4fa6\u542c\u5668&lt;/h4&gt;\n\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u5bf9\u8c61\uff1a{{ data }}&lt;/p&gt;\n  &lt;button @click=\"data.count++\"&gt;changeCountValue&lt;/button&gt;\n  &lt;button @click=\"changeNameValue\"&gt;changeNameValue&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { ref, watch } from \"vue\";\n\nconst data = ref({\n  name: \"chc\",\n  age: 18,\n  count: 0,\n});\n\n// \u7cbe\u786e\u4fa6\u542c - \u53ea\u4fa6\u542ccount\u6570\u636e\u53d8\u5316 - \u7b2c\u4e00\u4e2a\u53c2\u6570\u6539\u4e3a\u4f20\u5165 \u83b7\u53d6\u5bf9\u5e94\u5b57\u6bb5\u7684\u56de\u8c03\u51fd\u6570\nwatch(\n  () =&gt; {\n    return data.value.count;\n  },\n  (newVal, oldValue) =&gt; {\n    console.log(\"count \u5df2\u53d1\u751f\u53d8\u5316\", data.value, newVal, oldValue);\n  },\n);\n\nconst changeNameValue = () =&gt; {\n  data.value.name += \"A\";\n};\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#4-oldval","title":"4 \u6df1\u5ea6\u4fa6\u542coldVal\u503c\u5904\u7406","text":"<p>\u6ce8\u610f\uff1a\u6df1\u5ea6\u4fa6\u542c\u65f6\uff0coldVal\u503c\u5c06\u4e0d\u4f1a\u88ab\u4fdd\u5b58\uff0c\u9700\u8981\u81ea\u884c\u5904\u7406</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;h4&gt;watch - \u4fa6\u542c\u5668&lt;/h4&gt;\n\n  &lt;p&gt;\u7b80\u5355\u7c7b\u578b - \u6570\u7ec4\uff1a{{ dataList }}&lt;/p&gt;\n  &lt;button @click=\"dataList.pop()\"&gt;changeValue&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { ref, watch } from \"vue\";\n\nconst dataList = ref([1, 2, 3, 4, 5]);\nlet previousValue = [...dataList.value]; // \u4fdd\u5b58\u521d\u59cb\u503c\u7684\u526f\u672c\n\nwatch(\n  dataList,\n  (newVal) =&gt; {\n    console.log(\"count \u5df2\u53d1\u751f\u53d8\u5316\", dataList.value, newVal, previousValue);\n    previousValue = [...newVal];\n  },\n  { deep: true },\n);\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>tips:  \u6709\u8fd4\u56de\u503c\u51fd\u6570\u7b49\u4ef7\u5199\u6cd5</p> <pre><code>() =&gt; {\n    return data.value.count;\n}\n\n() =&gt; data.value.count\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#5","title":"5 \u603b\u7ed3","text":"<ol> <li>\u4f5c\u4e3awatch\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cref\u5bf9\u8c61\u9700\u8981\u6dfb\u52a0.value\u5417?</li> </ol> <p>\u4e0d\u9700\u8981\uff0cwatch\u4f1a\u81ea\u52a8\u8bfb\u53d6</p> <ol> <li>watch\u53ea\u80fd\u4fa6\u542c\u5355\u4e2a\u6570\u636e\u5417?</li> </ol> <p>\u5355\u4e2a\u6216\u8005\u591a\u4e2a</p> <ol> <li>\u4e0d\u5f00\u542fdeep\uff0c\u76f4\u63a5\u4fee\u6539\u5d4c\u5957\u5c5e\u6027\u80fd\u89e6\u53d1\u56de\u8c03\u5417?</li> </ol> <p>\u4e0d\u80fd\uff0c\u9ed8\u8ba4\u662f\u6d45\u5c42\u4fa6\u542c</p> <ol> <li>\u4e0d\u5f00\u542fdeep\uff0c\u60f3\u5728\u67d0\u4e2a\u5c42\u6b21\u6bd4\u8f83\u6df1\u7684\u5c5e\u6027\u53d8\u5316\u65f6\u6267\u884c\u56de\u8c03\u600e\u4e48\u505a?</li> </ol> <p>\u53ef\u4ee5\u628a\u7b2c\u4e00\u4e2a\u53c2\u6570\u5199\u6210\u51fd\u6570\u7684\u5199\u6cd5\uff0c\u8fd4\u56de\u8981\u76d1\u542c\u7684\u5177\u4f53\u5c5e\u6027</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#6-watch","title":"6 \u6269\u5c55 - watch\u76f8\u5173\u51fd\u6570","text":"<ul> <li>\ud83d\udd0d <code>watch</code>\uff1a\u6307\u5b9a\u76d1\u542c\u8c01\uff08\u7cbe\u51c6\u4fa6\u542c\uff09</li> </ul> <pre><code>import { ref, watch } from 'vue'\n\nconst count = ref(0)\n\nwatch(count, (newVal, oldVal) =&gt; {\n  console.log('count \u53d8\u5316:', oldVal, '-&gt;', newVal)\n})\n</code></pre> <ul> <li>\u2699\ufe0f <code>watchEffect</code>\uff1a\u81ea\u52a8\u4fa6\u542c\u4e00\u5207\u4f9d\u8d56</li> </ul> <pre><code>import { ref, watchEffect } from 'vue'\n\nconst count = ref(0)\nconst double = ref(0)\n\nwatchEffect(() =&gt; {\n  double.value = count.value * 2\n  console.log('\u81ea\u52a8\u76d1\u542c\u5230 count \u53d8\u5316:', count.value)\n})\n</code></pre> <ul> <li>\ud83d\udd52 <code>watchSyncEffect</code>\uff1a\u540c\u6b65\u6267\u884c\uff08DOM \u66f4\u65b0\u524d\uff09</li> </ul> <pre><code>import { ref, watchSyncEffect } from 'vue'\n\nconst message = ref('Hello')\n\nwatchSyncEffect(() =&gt; {\n  console.log('\u540c\u6b65\u6267\u884c\uff1a', message.value)\n})\n</code></pre> <ul> <li>\ud83d\udd5e <code>watchPostEffect</code>\uff1a\u5f02\u6b65\u6267\u884c\uff08DOM \u66f4\u65b0\u540e\uff09</li> </ul> <pre><code>import { ref, watchPostEffect } from 'vue'\n\nconst text = ref('Hi')\n\nwatchPostEffect(() =&gt; {\n  console.log('DOM \u66f4\u65b0\u540e\u6267\u884c:', text.value)\n})\n</code></pre> \u51fd\u6570\u540d \u662f\u5426\u81ea\u52a8\u6536\u96c6\u4f9d\u8d56 \u6267\u884c\u65f6\u673a \u662f\u5426\u7acb\u5373\u6267\u884c \u5e38\u89c1\u7528\u9014 <code>watch</code> \u5426\uff08\u9700\u624b\u52a8\u6307\u5b9a\uff09 \u5f02\u6b65\uff08\u66f4\u65b0\u540e\uff09 \u5426\uff08\u53ef\u8bbe immediate\uff09 \u7cbe\u786e\u76d1\u542c\u6307\u5b9a\u53d8\u91cf <code>watchEffect</code> \u2705 \u81ea\u52a8\u6536\u96c6 \u6e32\u67d3\u524d \u2705 \u662f \u5e38\u89c4\u526f\u4f5c\u7528\u3001\u6253\u5370\u3001\u8bf7\u6c42 <code>watchSyncEffect</code> \u2705 \u81ea\u52a8\u6536\u96c6 \u6e32\u67d3\u524d\uff08\u540c\u6b65\uff09 \u2705 \u662f \u540c\u6b65\u66f4\u65b0\u903b\u8f91 <code>watchPostEffect</code> \u2705 \u81ea\u52a8\u6536\u96c6 \u6e32\u67d3\u540e\uff08\u5f02\u6b65\uff09 \u2705 \u662f DOM \u64cd\u4f5c\u3001\u52a8\u753b\u3001UI \u5e93\u66f4\u65b0"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-","title":"\u4e94\u3001\u7ec4\u5408\u5f0fAPI--\u751f\u547d\u5468\u671f\u51fd\u6570","text":""},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#1_2","title":"1 \u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u5bf9\u7167\u8868","text":"\u9636\u6bb5 Options API \u94a9\u5b50 Composition API \u94a9\u5b50 \u6838\u5fc3\u52a8\u4f5c \u521b\u5efa\u524d <code>beforeCreate</code> \uff08\u65e0\uff09 \u521d\u59cb\u5316\u4e8b\u4ef6\u3001\u4f9d\u8d56\u6ce8\u5165\uff0c\u4f46\u8fd8\u672a\u5efa\u7acb\u54cd\u5e94\u5f0f \u521b\u5efa\u540e <code>created</code> <code>setup()</code>\uff08\u903b\u8f91\u5165\u53e3\uff09 \u54cd\u5e94\u5f0f\u7cfb\u7edf\u5efa\u7acb\uff0c<code>data</code>\u3001<code>props</code>\u3001<code>methods</code> \u53ef\u7528 \u6302\u8f7d\u524d <code>beforeMount</code> <code>onBeforeMount</code> \u6a21\u677f\u7f16\u8bd1\u6210 render \u51fd\u6570\uff0cDOM \u5c1a\u672a\u6e32\u67d3 \u6302\u8f7d\u540e <code>mounted</code> <code>onMounted</code> \u865a\u62df DOM \u5df2\u751f\u6210\u5e76\u6302\u8f7d\u5230\u771f\u5b9e DOM \u66f4\u65b0\u524d <code>beforeUpdate</code> <code>onBeforeUpdate</code> \u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u5316\u89e6\u53d1\u865a\u62df DOM diff \u4f46\u5c1a\u672a\u91cd\u65b0\u6e32\u67d3 \u66f4\u65b0\u540e <code>updated</code> <code>onUpdated</code> DOM \u5df2\u66f4\u65b0\u5230\u6700\u65b0\u72b6\u6001 \u5378\u8f7d\u524d <code>beforeUnmount</code> <code>onBeforeUnmount</code> \u7ec4\u4ef6\u5373\u5c06\u9500\u6bc1\uff0c\u53ef\u6e05\u7406\u4e8b\u4ef6/\u5b9a\u65f6\u5668 \u5378\u8f7d\u540e <code>unmounted</code> <code>onUnmounted</code> \u5b9e\u4f8b\u5b8c\u5168\u9500\u6bc1\uff0c\u54cd\u5e94\u5f0f\u89e3\u7ed1"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#2_1","title":"2 \u94a9\u5b50\u51fd\u6570\u53ef\u4ee5\u6267\u884c\u591a\u6b21","text":"<p>\u9002\u7528\u573a\u666f\u793a\u4f8b\uff1a\u63a5\u624b\u522b\u4eba\u7684\u4ee3\u7801\uff0c\u4e0d\u8981\u52a8\u522b\u4eba\u7684 onMounted \u51fd\u6570\uff0c\u7ee7\u7eed\u5199\u81ea\u5df1\u7684\u903b\u8f91</p> <pre><code>&lt;template&gt;&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { onMounted } from \"vue\";\n\nonMounted(() =&gt; {\n  console.log(\"mounted-1\");\n});\n\nonMounted(() =&gt; {\n  console.log(\"mounted-2\");\n});\n\nonMounted(() =&gt; {\n  console.log(\"mounted-3\");\n});\n&lt;/script&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#3_2","title":"3 \u603b\u7ed3","text":"<ol> <li>\u7ec4\u5408\u5f0fAPI\u4e2d\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u683c\u5f0f\u662f\u4ec0\u4e48?</li> </ol> <p>on+ \u751f\u547d\u5468\u671f\u540d\u5b57</p> <ol> <li>\u7ec4\u5408\u5f0fAPI\u4e2d\u53ef\u4ee5\u4f7f\u7528onCreated\u5417?</li> </ol> <p>\u6ca1\u6709\u8fd9\u4e2a\u94a9\u5b50\u51fd\u6570\uff0c\u76f4\u63a5\u5199\u5230setup\u4e2d</p> <ol> <li>\u7ec4\u5408\u5f0fAPI\u4e2d\u7ec4\u4ef6\u5378\u8f7d\u5b8c\u6bd5\u65f6\u6267\u884c\u54ea\u4e2a\u51fd\u6570?</li> </ol> <p>onUnmounted</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-_1","title":"\u4e94\u3001\u7ec4\u5408\u5f0fAPI--\u7236\u5b50\u901a\u4fe1-\u7236\u4f20\u5b50","text":"<p>\u57fa\u672c\u601d\u60f3\uff1a</p> <ol> <li> <p>\u7236\u7ec4\u4ef6\u4e2d\u7ed9\u5b50\u7ec4\u4ef6\u7ed1\u5b9a\u5c5e\u6027</p> </li> <li> <p>\u5b50\u7ec4\u4ef6\u5185\u90e8\u901a\u8fc7props\u9009\u9879\u63a5\u6536</p> </li> </ol> <p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\nimport { ref } from \"vue\";\nimport Child from \"@/components/DataSend1/Child.vue\";\n\nconst name = ref(\"CCPLAYER(\u7236\u7ec4\u4ef6\u5b9a\u4e491)\");\nconst personCount = ref(0);\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;p&gt;\u7236\u7ec4\u4ef6\uff1a&lt;/p&gt;\n  &lt;p&gt;name\uff1a{{ name }}&lt;/p&gt;\n  &lt;p&gt;personCount\uff1a{{ personCount }}&lt;/p&gt;\n  &lt;button @click=\"personCount++\"&gt;addPersonCount&lt;/button&gt;\n  &lt;Child :name=\"name\" :personCount=\"personCount\" /&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\n// \u63a5\u6536\u7236\u7ec4\u4ef6\u6570\u636e - defineProps\uff1a\u7f16\u8bd1\u5668\u5b8f\u51fd\u6570\uff0c\u65e0\u9700\u5bfc\u5165\uff0c\u4f1a\u5c06\u5bf9\u5e94\u4ee3\u7801\u7f16\u8bd1\nconst props = defineProps({\n  name: String,\n  personCount: Number,\n});\n\nconsole.log(props.name);\nconsole.log(props.personCount);\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-header bg-info\"&gt;BOOTSTRAP-CARD&lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n      &lt;p&gt;\u5b50\u7ec4\u4ef6\uff1a&lt;/p&gt;\n      &lt;p&gt;name\uff1a{{ name }} &lt;- \u7236\u4f20\u5b50\u6570\u636e&lt;/p&gt;\n      &lt;p&gt;personCount={{ personCount }} &lt;- \u7236\u4f20\u5b50\u6570\u636e&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-_2","title":"\u516d\u3001\u7ec4\u5408\u5f0fAPI--\u7236\u5b50\u901a\u4fe1-\u5b50\u4f20\u7236","text":"<p>\u57fa\u672c\u601d\u60f3</p> <ol> <li> <p>\u7236\u7ec4\u4ef6\u4e2d\u7ed9\u5b50\u7ec4\u4ef6\u6807\u7b7e\u901a\u8fc7@\u7ed1\u5b9a\u4e8b\u4ef6</p> </li> <li> <p>\u5b50\u7ec4\u4ef6\u5185\u90e8\u901a\u8fc7 $emit \u65b9\u6cd5\u89e6\u53d1\u4e8b\u4ef6</p> </li> </ol> <p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\nimport { ref } from \"vue\";\nimport Child from \"@/components/DataSend2/Child.vue\";\n\nconst name = ref(\"CCPLAYER(\u7236\u7ec4\u4ef6\u5b9a\u4e492)\");\nconst childData = ref(\"\");\n\n// \u7236\u7ec4\u4ef6\u4f5c\u7528\u57df\u51fd\u6570\nconst getMessage = (data) =&gt; {\n  childData.value = data;\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;p&gt;\u7236\u7ec4\u4ef6&lt;/p&gt;\n  &lt;p&gt;name\uff1a{{ name }}&lt;/p&gt;\n  &lt;p&gt;data\uff1a{{ childData }} &lt;- \u5b50\u4f20\u7236\u6570\u636e&lt;/p&gt;\n  &lt;Child @get-message=\"getMessage\" /&gt;\n  &lt;!-- get-message \u5bf9\u5e94\u5b50\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6 --&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\n// \u7f16\u8bd1\u5668\u5b8f\u51fd\u6570\u7f16\u8bd1\u83b7\u53d6emit\u65b9\u6cd5\nconst emit = defineEmits([\"get-message\"]);\n\nconst getChildData = () =&gt; {\n  // \u70b9\u51fb\u89e6\u53d1\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u540c\u65f6\u4f7f\u7528emit\u65b9\u6cd5\u4f20\u9012\u6570\u636e\u7ed9\u7236\u7ec4\u4ef6 \u81ea\u5b9a\u4e49\u4e8b\u4ef6 get-message\n  emit(\"get-message\", \"CHILD-\u5b50\u7ec4\u4ef6\u6570\u636e\");\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-header bg-info\"&gt;BOOTSTRAP-CARD&lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n      &lt;p&gt;\u5b50\u7ec4\u4ef6\uff1a&lt;/p&gt;\n      &lt;button @click=\"getChildData\"&gt;\u53d1\u9001\u6570\u636e\u7ed9\u7236\u7ec4\u4ef6&lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <p>\u7236\u4f20\u5b50</p> <ol> <li>\u7236\u4f20\u5b50\u7684\u8fc7\u7a0b\u4e2d\u901a\u8fc7\u4ec0\u4e48\u65b9\u5f0f\u63a5\u6536props?</li> </ol> <p>defineProps({\u5c5e\u6027\u540d\uff1a\u7c7b\u578b})</p> <ol> <li>setup\u8bed\u6cd5\u7cd6\u4e2d\u5982\u4f55\u4f7f\u7528\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684\u6570\u636e?</li> </ol> <p>constprops=defineProps({\u5c5e\u6027\u540d\uff1a\u7c7b\u578b})</p> <p>\u5b50\u4f20\u7236</p> <ol> <li>\u5b50\u4f20\u7236\u7684\u8fc7\u7a0b\u4e2d\u901a\u8fc7\u4ec0\u4e48\u65b9\u5f0f\u5f97\u5230emit\u65b9\u6cd5?</li> </ol> <p>defineEmits([\u2018\u4e8b\u4ef6\u540d\u79f0])</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-ref","title":"\u4e03\u3001\u7ec4\u5408\u5f0fAPI--\u6a21\u677f\u5f15\u7528(ref)","text":"<p>\u901a\u8fc7ref\u6807\u8bc6\u83b7\u53d6\u771f\u5b9e\u7684dom\u5bf9\u8c61\u6216\u8005\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61</p> <p>\u5b9e\u73b0\u6b65\u9aa4\uff1a</p> <ol> <li>\u8c03\u7528ref\u51fd\u6570\u751f\u6210\u4e00\u4e2aref\u5bf9\u8c61</li> <li>\u901a\u8fc7ref\u6807\u8bc6\u7ed1\u5b9aref\u5bf9\u8c61\u5230\u6807\u7b7e</li> </ol> <p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\nimport RefChildDemo from \"./RefChildDemo.vue\";\nimport { onMounted, ref } from \"vue\";\n\n// \u54cd\u5e94\u5f0f\u6570\u636e\nconst message = ref(\"\u6d4b\u8bd5REF\");\n\n// \u6a21\u677f\u5f15\u7528\nconst cRef = ref();\nconst zRef = ref();\n\n// \u7ec4\u4ef6\u6302\u8f7d\u5b8c\u6bd5\u81ea\u52a8\u83b7\u53d6\u6253\u5370\nonMounted(() =&gt; {\n  console.log(\"cRef.value:\", cRef.value); // \u83b7\u53d6DOM\u5143\u7d20\n  console.log(\"zRef.value:\", zRef.value); // \u83b7\u53d6\u5b50\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61\n  console.log(\"zRef.value.name:\", zRef.value.name); // \u83b7\u53d6\u5b50\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61name\u5c5e\u6027\n  zRef.value.setName(\"\u5f20\u4e09\");  // \u8c03\u7528\u5b50\u7ec4\u4ef6setName\u51fd\u6570\n  console.log(\"zRef.value.name:\", zRef.value.name); // \u5728\u6b64\u83b7\u53d6\u5b50\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61name\u5c5e\u6027\uff08\u5df2\u4fee\u6539\uff09\n});\n\n// \u65b9\u6cd5\nconst getData = () =&gt; {\n  console.log(cRef.value.innerHTML);\n};\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n  &lt;div ref=\"cRef\"&gt;\n    &lt;span&gt;{{ message }}&lt;/span&gt;\n    &lt;button @click=\"getData\"&gt;\u70b9\u51fb\u6d4b\u8bd5\u83b7\u53d6DOM&lt;/button&gt;\n  &lt;/div&gt;\n  &lt;hr /&gt;\n  &lt;hr /&gt;\n  &lt;RefChildDemo ref=\"zRef\" /&gt;\n  &lt;hr /&gt;\n  &lt;hr /&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\nimport { ref } from \"vue\";\n\nconst name = ref(\"\");\n\nconst setName = (tarName) =&gt; {\n  name.value = tarName;\n};\n\n// \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5728&lt;script setup&gt;\u8bed\u6cd5\u7cd6\u4e0b\u7ec4\u4ef6\u5185\u90e8\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u662f\u4e0d\u5f00\u653e\u7ed9\u7236\u7ec4\u4ef6\u8bbf\u95ee\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7defineExpose\u7f16\u8bd1\u5b8f\u6307\u5b9a\u54ea\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\n// \u7f16\u8bd1\u5668\u5b8f\u51fd\u6570\u4e3b\u52a8\u66b4\u9732\u53d8\u91cf\u7ed9\u7236\u7ec4\u4ef6\u7684\u6a21\u677f\u5f15\u7528\ndefineExpose({\n  name,\n  setName,\n});\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;h4&gt;{{ name }}\uff1a\u6211\u662f\u7ec4\u4ef6-&gt;RefChildDemo&lt;/h4&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#api-_3","title":"\u4e03\u3001\u7ec4\u5408\u5f0fAPI--\u8de8\u5c42\u7ec4\u4ef6\u901a\u4fe1(\u4f9d\u8d56\u6ce8\u5165)","text":"<p>\u4f5c\u7528\u548c\u573a\u666f\uff1a\u9876\u5c42\u7ec4\u4ef6\u5411\u4efb\u610f\u7684\u5e95\u5c42\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u548c\u65b9\u6cd5\uff0c\u5b9e\u73b0\u8de8\u5c42\u7ec4\u4ef6\u901a\u4fe1</p> <p>\u8de8\u5c42\u4f20\u9012\u666e\u901a\u6570\u636e\uff1a</p> <ol> <li> <p>\u9876\u5c42\u7ec4\u4ef6\u901a\u8fc7provide\u51fd\u6570\u63d0\u4f9b\u6570\u636e --&gt; <code>provide(\"key\", \u9876\u5c42\u7ec4\u4ef6\u6570\u636e-\u53ef\u4ee5\u662f\u54cd\u5e94\u5f0f\u6570\u636eref\u5bf9\u8c61)</code></p> </li> <li> <p>\u5e95\u5c42\u7ec4\u4ef6\u901a\u8fc7inject\u51fd\u6570\u83b7\u53d6\u6570\u636e --&gt; <code>const message inject(\"key\")</code></p> </li> </ol>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#1_3","title":"1 \u9876\u5c42\u7ec4\u4ef6","text":"<pre><code>&lt;script setup&gt;\nimport { onMounted, onUnmounted, provide, ref } from \"vue\";\nimport RoomMsgItem from \"./RoomMsgItem.vue\";\n\n// \u7ec4\u4ef6\u5d4c\u5957\u5173\u7cfb\uff1aRoomPage -&gt; RoomMsgItem -&gt; RoomMsgComment\n\n// \u9876\u5c42\u7ec4\u4ef6\u63d0\u4f9b\u6570\u636e\nprovide(\"data-key\", 'This is \"RoomPage\" data');\n\n// \u4f20\u9012\u54cd\u5e94\u5f0f\u6570\u636e\nconst count = ref(0);\nprovide(\"count-key\", count);\n\nlet timeCount = ref(3);\nlet timer = null;\n\nconst isTimerCompleted = ref(false); // \u5b9a\u65f6\u5668\u662f\u5426\u5b8c\u6210\u72b6\u6001\nprovide(\"isTimerCompleted-key\", isTimerCompleted);\n\nconst setCount = (value) =&gt; {\n  if (isTimerCompleted.value) {\n    count.value = value;\n  } else {\n    alert(\"\u8bf7\u7b49\u5f85\u5b9a\u65f6\u5668\u5b8c\u6210\uff01\");\n  }\n};\nprovide(\"setCount-key\", setCount); // \u4f20\u9012\u7684\u4e0d\u6b62\u53ef\u4ee5\u662f\u6570\u636e\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u5bf9\u8c61\n\nonMounted(() =&gt; {\n  timer = setInterval(() =&gt; {\n    if (timeCount.value &gt; 0) {\n      timeCount.value--;\n      if (timeCount.value === 0) {\n        count.value = 10000;\n        isTimerCompleted.value = true; // \u5b9a\u65f6\u5668\u5df2\u6267\u884c\u5b8c\u6210\n      }\n    } else {\n      clearInterval(timer);\n    }\n  }, 1000);\n});\n\nonUnmounted(() =&gt; {\n  if (timer) {\n    clearInterval(timer);\n  }\n});\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"h4\"&gt;\n    \u9876\u5c42\u7ec4\u4ef6 -&gt; \u6570\u636e\u4f20\u9001\u5012\u8ba1\u65f6\uff1a{{ timeCount }}\n    &lt;span v-if=\"isTimerCompleted\" class=\"text-success ms-2\"\n      &gt;\u2713 \u5b9a\u65f6\u5668\u5df2\u5b8c\u6210&lt;/span\n    &gt;\n    &lt;RoomMsgItem class=\"ms-4 mt-4\" /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#2_2","title":"2 \u4e2d\u95f4\u7ec4\u4ef6","text":"<pre><code>&lt;script setup&gt;\nimport RoomMsgComment from \"./RoomMsgComment.vue\";\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"h5 ms-4 mt-4\"&gt;\n    \u4e2d\u95f4\u7ec4\u4ef6\n    &lt;RoomMsgComment /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#3_3","title":"3 \u5e95\u5c42\u7ec4\u4ef6","text":"<pre><code>&lt;script setup&gt;\n// \u5e95\u5c42\u7ec4\u4ef6\u63a5\u6536\u6570\u636e\nimport { inject } from \"vue\";\n\nconst data = inject(\"data-key\");\nconst count = inject(\"count-key\");\nconst isTimerCompleted = inject(\"isTimerCompleted-key\");\nconst setCount = inject(\"setCount-key\");\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"h6 ms-4 mt-4\"&gt;\n    \u5e95\u5c42\u7ec4\u4ef6\n    &lt;br /&gt;\n    &lt;span&gt;\u6765\u81ea\u9876\u5c42\u7ec4\u4ef6\u7684\u56fa\u5b9a\u6570\u636e\uff1a{{ data }}&lt;/span&gt;\n    &lt;br /&gt;\n    &lt;span&gt;\u6765\u81ea\u9876\u5c42\u7ec4\u4ef6\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff1a{{ count }}&lt;/span&gt;\n    &lt;br /&gt;\n    &lt;span&gt;\u70b9\u51fb\u4fee\u6539\u9876\u5c42\u7ec4\u4ef6\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff1a&lt;/span&gt;\n    &lt;button @click=\"setCount(88888)\"&gt;DoIt&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#4","title":"4 \u603b\u7ed3","text":"<ol> <li>provide\u548cinject\u7684\u4f5c\u7528\u662f\u4ec0\u4e48?</li> </ol> <p>\u8de8\u5c42\u7ec4\u4ef6\u901a\u4fe1</p> <ol> <li>\u5982\u4f55\u5728\u4f20\u9012\u7684\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u6570\u636e\u54cd\u5e94\u5f0f?</li> </ol> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u9012ref\u5bf9\u8c61</p> <ol> <li>\u5e95\u5c42\u7ec4\u4ef6\u60f3\u8981\u901a\u77e5\u9876\u5c42\u7ec4\u4ef6\u505a\u4fee\u6539\uff0c\u5982\u4f55\u505a?</li> </ol> <p>\u4f20\u9012\u65b9\u6cd5\uff0c\u5e95\u5c42\u7ec4\u4ef6\u8c03\u7528\u65b9\u6cd5</p> <ol> <li>\u4e00\u9897\u7ec4\u4ef6\u6811\u4e2d\u53ea\u6709\u4e00\u4e2a\u9876\u5c42\u6216\u5e95\u5c42\u7ec4\u4ef6\u5417?</li> </ol> <p>\u76f8\u5bf9\u6982\u5ff5\uff0c\u5b58\u5728\u591a\u4e2a\u9876\u5c42\u548c\u5e95\u5c42\u7684\u5173\u7cfb</p>"},{"location":"mds/Vue3-Note/vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI/#axios","title":"\u516b\u3001axios(\u7f51\u7edc\u8bf7\u6c42\u63d2\u4ef6)","text":"<p>\u5b98\u65b9\u7f51\u7ad9\uff1ahttps://axios-http.com/zh/docs/intro</p> <p>\u5b89\u88c5\u547d\u4ee4\uff1a</p> <pre><code>npm install axios\n# \u6216\npnpm add axios\n</code></pre> <p>pnpm\u64cd\u4f5c\uff1a</p> <pre><code># \u5220\u9664 node_modules \u76ee\u5f55\nrm -rf node_modules\n\n# \u5220\u9664 pnpm \u9501\u6587\u4ef6\nrm -rf pnpm-lock.yaml\n\n# \u6e05\u7406 pnpm \u7f13\u5b58\uff08\u53ef\u9009\u4f46\u63a8\u8350\uff09\npnpm store prune\n</code></pre> <p>get\u8bf7\u6c42\u793a\u4f8b\uff1a</p> <pre><code>&lt;script lang=\"ts\" setup&gt;\nimport { ref } from \"vue\";\nimport axios, { AxiosResponse } from \"axios\"; // \u5b9a\u4e49\u8fd4\u56de\u6570\u636e\u63a5\u53e3\n\n// \u5b9a\u4e49\u8fd4\u56de\u6570\u636e\u63a5\u53e3\ninterface ApiResponse {\n  projects: string[];\n  versions: string[];\n}\n\nconst versions = ref([]);\nsetTimeout(() =&gt; {\n  axios\n    .get(\n      \"http://localhost:9777/api/get-projects-and-versions?platform=MTK6993\",\n    )\n    .then((res: AxiosResponse&lt;ApiResponse&gt;) =&gt; {\n      console.log(\"data\", res.data.versions); // \u5b9a\u4e49\u63a5\u53e3\u4e4b\u540e\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4f1a\u63d0\u793a\u6ca1\u6709\u8be5\u5b57\u6bb5\n      versions.value = res.data.versions;\n    });\n}, 3000);\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-header\"&gt;\u6d4b\u8bd5\u7f51\u7edc\u8bf7\u6c42\u83b7\u53d6\u6570\u636e&lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n      &lt;ul&gt;\n        &lt;li v-for=\"(item, index) in versions\" :key=\"index\"&gt;\n          {{ item }}\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;&lt;/style&gt;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/","title":"MongoDBStudy","text":"<p>MongoDB\u662f\u4e00\u4e2a\u57fa\u4e8e\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8\u7684\u6570\u636e\u5e93\u3002\u7531C++\u8bed\u8a00\u7f16\u5199\u3002\u65e8\u5728\u4e3aWEB\u5e94\u7528\u63d0\u4f9b\u53ef\u6269\u5c55\u7684\u9ad8\u6027\u80fd\u6570\u636e\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u3002</p> <p>MongoDB\u662f\u4e00\u4e2a\u4ecb\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea7\u54c1\uff0c\u662f\u975e\u5173\u7cfb\u6570\u636e\u5e93\u5f53\u4e2d\u529f\u80fd\u6700\u4e30\u5bcc\uff0c\u6700\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u7684\u3002</p> <p>\u5b83\u652f\u6301\u7684\u6570\u636e\u7ed3\u6784\u975e\u5e38\u677e\u6563\uff0c\u662f\u7c7b\u4f3cjson\u7684bson\u683c\u5f0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b58\u50a8\u6bd4\u8f83\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u3002Mongo\u6700\u5927\u7684\u7279\u70b9\u662f\u5b83\u652f\u6301\u7684\u67e5\u8be2\u8bed\u8a00\u975e\u5e38\u5f3a\u5927\uff0c\u5176\u8bed\u6cd5\u6709\u70b9\u7c7b\u4f3c\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u67e5\u8be2\u8bed\u8a00\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u5173\u7cfb\u6570\u636e\u5e93\u5355\u8868\u67e5\u8be2\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd\uff0c\u800c\u4e14\u8fd8\u652f\u6301\u5bf9\u6570\u636e\u5efa\u7acb\u7d22\u5f15\u3002</p> <p>MongoDB\u670d\u52a1\u7aef\u53ef\u8fd0\u884c\u5728Linux\u3001Windows\u5e73\u53f0\uff0c\u652f\u630132\u4f4d\u548c64\u4f4d\u5e94\u7528\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a27017\u3002 \u63a8\u8350\u8fd0\u884c\u572864\u4f4d\u5e73\u53f0\uff0c\u56e0\u4e3aMongoDB\u572832\u4f4d\u6a21\u5f0f\u8fd0\u884c\u65f6\u652f\u6301\u7684\u6700\u5927\u6587\u4ef6\u5c3a\u5bf8\u4e3a2GB\u3002</p> <p>\u5b98\u65b9\u7f51\u7ad9\uff1ahttps://www.mongodb.com</p> <p>\u793e\u533a\u7248\u672c\u4e0b\u8f7d\uff1ahttps://www.mongodb.com/try/download/communityCSDN</p> <p>CSDN\u5b66\u4e60\u6587\u6863\uff1ahttps://blog.csdn.net/weixin_42039228/article/details/123657641</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#1-mongodb","title":"1. MongoDB\u4e3b\u8981\u7279\u70b9","text":"<pre><code>{\n    name: \"sue\",  //\u6ce8\u610f\uff1a\u8fd9\u91cc\u7684key\u6ca1\u6709\u5f15\u53f7\n    age: 26,\n    status: \"False\",\n    groups:[\"news\", \"sports\"]\n}\n</code></pre> <p>MongoDB\u4e2d\u7684\u8bb0\u5f55\u662f\u4e00\u4e2a\u6587\u6863\uff0c\u5b83\u662f\u7531\u5b57\u6bb5\u548c\u503c\u5bf9\u7ec4\u6210\u7684\u6570\u636e\u7ed3\u6784\u3002 \u591a\u4e2a\u952e\u53ca\u5176\u5173\u8054\u7684\u503c\u6709\u5e8f\u5730\u653e\u5728\u4e00\u8d77\u5c31\u6784\u6210\u4e86\u6587\u6863\u3002 MongoDB\u6587\u6863\u7c7b\u4f3c\u4e8eJSON\u5bf9\u8c61\u3002\u5b57\u6bb5\u7684\u503c\u53ef\u4ee5\u5305\u62ec\u5176\u4ed6\u6587\u6863\uff0c\u6570\u7ec4\u548c\u6587\u6863\u6570\u7ec4\u3002 {\u201cgreeting\u201d:\u201chello,world\u201d}\u8fd9\u4e2a\u6587\u6863\u53ea\u6709\u4e00\u4e2a\u952e\u201cgreeting\u201d\uff0c\u5bf9\u5e94\u7684\u503c\u4e3a\u201chello,world\u201d\u3002\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6587\u6863\u6bd4\u8fd9\u4e2a\u66f4\u590d\u6742\uff0c\u5b83\u5305\u542b\u591a\u4e2a\u952e/\u503c\u5bf9\u3002</p> <p>\u4f8b\u5982\uff1a{\u201cgreeting\u201d:\u201chello,world\u201d,\u201cfoo\u201d: 3} \u6587\u6863\u4e2d\u7684\u952e/\u503c\u5bf9\u662f\u6709\u5e8f\u7684\uff0c\u4e0b\u9762\u7684\u6587\u6863\u4e0e\u4e0a\u9762\u7684\u6587\u6863\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u4e24\u4e2a\u6587\u6863\u3002{\u201cfoo\u201d: 3 ,\u201cgreeting\u201d:\u201chello,world\u201d}</p> <p>\u6587\u6863\u4e2d\u7684\u503c\u4e0d\u4ec5\u53ef\u4ee5\u662f\u53cc\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f8b\u5982\uff0c\u6574\u578b\u3001\u5e03\u5c14\u578b\u7b49\uff0c\u4e5f\u53ef\u4ee5\u662f\u53e6\u5916\u4e00\u4e2a\u6587\u6863\uff0c\u5373\u6587\u6863\u53ef\u4ee5\u5d4c\u5957\u3002\u6587\u6863\u4e2d\u7684\u952e\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u3002</p> <p>\u4f7f\u7528\u6587\u6863\u7684\u4f18\u70b9\u662f\uff1a</p> <ul> <li>\u6587\u6863\uff08\u5373\u5bf9\u8c61\uff09\u5bf9\u5e94\u4e8e\u8bb8\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u672c\u673a\u6570\u636e\u7c7b\u578b</li> <li>\u5d4c\u5165\u5f0f\u6587\u6863\u548c\u6570\u7ec4\u51cf\u5c11\u4e86\u5bf9\u6602\u8d35\u8fde\u63a5\u7684\u9700\u6c42</li> <li>\u52a8\u6001\u6a21\u5f0f\u652f\u6301\u6d41\u7545\u7684\u591a\u6001\u6027</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#2-linuxmongodb","title":"2. Linux\u5b89\u88c5MongoDB","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#21-usrlocal","title":"2.1 \u4e0b\u8f7d\u81f3/usr/local\u76ee\u5f55\uff0c\u89e3\u538b\u6587\u4ef6","text":"<pre><code>tar -zxvf mongodb-linux-x86_64-4.0.6.tgz;mv mongodb-linux-x86_64-4.0.6 mongo\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#22","title":"2.2 \u521b\u5efa\u76f8\u5173\u6587\u4ef6\u5939","text":"<pre><code>mkdir -p /usr/local/mongo/data/db        #\u6570\u636e\u5e93\u76ee\u5f55\nmkdir -p /usr/local/mongo/logs           #\u65e5\u5fd7\u76ee\u5f55\nmkdir -p /usr/local/mongo/conf           #\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\nmkdir -p /usr/local/mongo/pids           #\u8fdb\u7a0b\u63cf\u8ff0\u6587\u4ef6\u76ee\u5f55\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#23-mongoconf","title":"2.3 \u589e\u52a0\u914d\u7f6e\u6587\u4ef6mongo.conf","text":"<pre><code>vim /usr/local/mongo/conf/mongo.conf\n</code></pre> <pre><code>#\u6570\u636e\u4fdd\u5b58\u8def\u5f84\ndbpath=/usr/local/mongo/data/db/\n#\u65e5\u5fd7\u4fdd\u5b58\u8def\u5f84\nlogpath=/usr/local/mongo/logs/mongo.log\n#\u8fdb\u7a0b\u63cf\u8ff0\u6587\u4ef6\npidfilepath=/usr/local/mongo/pids/mongo.pid\n#\u65e5\u5fd7\u8ffd\u52a0\u5199\u5165\nlogappend=true\nbind_ip_all=true\n#mongo\u9ed8\u8ba4\u7aef\u53e3\nport=27017\n#\u64cd\u4f5c\u65e5\u5fd7\u5bb9\u91cf\noplogSize=10000\n#\u5f00\u542f\u5b50\u8fdb\u7a0b\nfork=true\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#24","title":"2.4 \u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\u670d\u52a1\u7aef","text":"<p>--auth : \u5f00\u542f\u8fde\u63a5\u9a8c\u8bc1\uff08\u4e0d\u52a0\u8be5\u53c2\u6570\u9ed8\u8ba4\u4e0d\u5f00\u542f\uff09</p> <pre><code>pgrep -u $USER -f mongod | xargs kill -9\n/usr/local/mongo/bin/mongod -f /usr/local/mongo/conf/mongo.conf --auth\n</code></pre> <p>\u200b   \u6dfb\u52a0\u73af\u5883\u53d8\u91cf\u65b9\u4fbf\u4f7f\u7528\uff1a</p> <pre><code># \u7f16\u8f91\u6587\u4ef6\nvim /etc/profile\n# \u6700\u540e\u4e00\u884c\u6dfb\u52a0\nexport PATH=$PATH:/usr/local/mongo/bin\n# \u4f7f\u5f97\u73af\u5883\u53d8\u91cf\u751f\u6548\nsource /etc/profile\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#25","title":"2.5 \u542f\u52a8\u5ba2\u6237\u7aef\u8fde\u63a5\u64cd\u4f5c\u6570\u636e\u5e93","text":"<pre><code># \u672a\u8bbe\u7f6eadmin\u7528\u6237\u8fde\u63a5\nmongo 127.0.0.1:27017\n# \u53cd\u4e4b\nmongo 127.0.0.1:27017/admin -u admin -p admin12#$%\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#26","title":"2.6 \u914d\u7f6e\u6570\u636e\u5e93\u8d85\u7ea7\u7ba1\u7406\u5458","text":"<pre><code>mongo\n\nshow databases;\n\n// \u521b\u5efa\u8d85\u7ea7\u7ba1\u7406\u5458\nuse admin;\n\ndb.createUser({\n  user: 'admin',  // \u7528\u6237\u540d\n  pwd: 'admin12#$%',  // \u5bc6\u7801\n  roles:[{\n    role: 'root',  // \u89d2\u8272\n    db: 'admin'  // \u6570\u636e\u5e93\n  }]\n})\n\n// \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u67e5\u770b\nshow uses;\n\n{\n    \"_id\" : \"admin.admin\",\n    \"user\" : \"admin\",\n    \"db\" : \"admin\",\n    \"roles\" : [\n        {\n            \"role\" : \"root\",\n            \"db\" : \"admin\"\n        }\n    ],\n    \"mechanisms\" : [\n        \"SCRAM-SHA-1\",\n        \"SCRAM-SHA-256\"\n    ]\n}\n</code></pre> <p>\u200b   \u521b\u5efaenvmanage\u6570\u636e\u5e93</p> <pre><code>use envmanage;\n\ndb.createUser({\n  user: 'cc',\n  pwd: 'cc12#$%',\n  roles: [\n    {\n      role: 'readWrite',\n      db: 'envmanage'\n    }\n  ]\n})\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#27","title":"2.7 \u5bc6\u7801\u8fde\u63a5\u6570\u636e\u5e93","text":"<pre><code># \u65b9\u5f0f\u4e00\nxxx.db('mongodb://your name: your pwd@ ip :27017/envmanage');\nyour name\uff1a\u4e3a\u7528\u6237\u540d\nyour pwd:  \u5bc6\u7801\n\n# \u65b9\u5f0f\u4e8c\nmongo envmanage -u cc -p cc12#$%\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#28","title":"2.8 \u5bc6\u7801\u91cd\u7f6e","text":"<pre><code># admin\u7528\u6237\u767b\u5f55\nmongo 127.0.0.1:27017/admin -u admin -p admin12#$%\n\n# \u5207\u6362\u6570\u636e\u5e93\nuse test;\ndb.changeUserPassword('cc','cc12#$%');\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#29","title":"2.9 \u4fee\u6539\u6570\u636e\u5e93\u540d\u79f0","text":"<pre><code>db.copyDatabase('test', 'envmanage'); \nuse test;\ndb.dropDatabase();\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#3mongodb","title":"3.MongoDB\u5185\u7f6e\u89d2\u8272\u8bf4\u660e","text":"<ul> <li>root \u6700\u9ad8\u6743\u9650\u7528\u6237</li> <li>dbAdminAnyDatabase \u4efb\u610f\u6570\u636e\u5e93\u7ba1\u7406\u5458\u89d2\u8272</li> <li>userAdminAnyDatabase \u4efb\u610f\u6570\u636e\u5e93\u7528\u6237\u7ba1\u7406\u89d2\u8272</li> <li>readWriteAnyDatabase \u4efb\u610f\u6570\u636e\u5e93\u8bfb\u5199\u89d2\u8272</li> <li>readAnyDatabase \u4efb\u610f\u6570\u636e\u5e93\u8bfb\u53d6\u89d2\u8272</li> <li>dbOwner \u7279\u5b9a\u6570\u636e\u5e93\u4e3b\u89d2\u8272\uff0c\u6570\u636e\u5e93\u6700\u9ad8\u6743\u9650\uff0c\u662fdbAdmin,userAdmin,readWrite\u5408\u4f53</li> <li>dbAdmin \u7279\u5b9a\u6570\u636e\u5e93\u7ba1\u7406\u5458\u89d2\u8272\uff0c\u67e5\u6e05\u64cd\u4f5c</li> <li>userAdmin \u7279\u5b9a\u6570\u636e\u5e93\u7528\u6237\u7ba1\u7406\u89d2\u8272</li> <li>readWrite \u7279\u5b9a\u6570\u636e\u5e93\u8bfb\u5199\u89d2\u8272\uff0c\u5efa\u5220\u6539\u67e5\u64cd\u4f5c</li> <li>read \u7279\u5b9a\u6570\u636e\u5e93\u8bfb\u89d2\u8272\uff0c\u8bfb\u53d6\u64cd\u4f5c</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#4mongodbdjango","title":"4.MongoDB\u5728Django\u9879\u76ee\u4f7f\u7528","text":"<p>\u8981\u4f7f\u7528ORM\uff0cDjango\u672c\u8eab\u6ca1\u6709\u652f\u6301MongoDB\u7684\u6570\u636e\u5e93\u5c01\u88c5\u5f15\u64ce\uff0c\u6240\u4ee5\u9700\u8981\u501f\u52a9\u7b2c\u4e09\u65b9\u6a21\u5757\uff1aDjongo</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#41","title":"4.1 \u4f9d\u8d56\u8981\u6c42","text":"<pre><code>asgiref==3.5.0\nDjango==4.0.3\ndjongo==1.3.6\ndnspython==2.2.1\npymongo==3.12.1\npython-snappy==0.6.1\npytz==2022.1\nsqlparse==0.2.4\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#42-settingspy","title":"4.2 settings.py\u914d\u7f6e","text":"<pre><code>DATABASES = {\n  'default': {\n    'ENGINE': 'djongo',\n    'NAME': 'envmanage',\n    'ENFORCE_SCHEMA': False,\n    'CLIENT': {\n      'host': 'ip',\n      'port': 27017,\n      'username': 'cc',\n      'password': 'cc12#$%',\n      'authSource': 'envmanage',\n      'authMechanism': 'SCRAM-SHA-1'\n    }\n  }\n}\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#43","title":"4.3 \u6570\u636e\u8fc1\u79fb","text":"<pre><code>python manage.py makemigrations appweb\npython manage.py migrate\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/MongoDBStudy/#5-mongodb","title":"5. MongoDB\u589e\u5220\u6539\u67e5","text":"<p>\u5b66\u4e60\u94fe\u63a5\uff1ahttps://www.runoob.com/mongodb/mongodb-tutorial.html</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/","title":"SqlAlchemyStudy","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/#1rpm","title":"1.rpm\u5b89\u88c5","text":"<pre><code>#!/bin/bash\n\n# rpm -e mysql-community*\n\nrpm -ivh mysql-community-common-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-libs-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-client-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-server-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-devel-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-embedded-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-embedded-devel-5.7.42-1.sles12.x86_64.rpm\nrpm -ivh mysql-community-test-5.7.42-1.sles12.x86_64.rpm\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/#2","title":"2.\u5bc6\u7801\u8bbe\u7f6e","text":"<pre><code>vim /etc/my.cnf\n#\u65e0\u5bc6\u7801\u767b\u5f55\n#skip-grant-tables\n#\u542f\u52a8\u670d\u52a1\nsystemctl start mysql\n#\u4fee\u6539\u5bc6\u7801\nmysql\nuse mysql;\nupdate user set authentication_string='123456' where user='root';\nflush privileges;\n#\u91cd\u542f\u670d\u52a1\nsystemctl restart mysql\n#\u518d\u6b21\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\nmysql -uroot -p \n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/#3","title":"3.\u8fdc\u7a0b\u767b\u5f55","text":"<pre><code>mysql -uroot -p\n\nuse mysql;\nselect host,user from user;\nupdate user set Host='%' where User='root';\nflush privileges;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/#4sqlalchemy","title":"4.sqlalchemy\u64cd\u4f5c\u6570\u636e\u5e93","text":"<pre><code>pip3 install sqlalchemy alembic pymysql sqlacodegen \n</code></pre> <p>\u200b   oprate_mysql.py</p> <pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u64cd\u4f5c\u6570\u636e\u5e93\n\"\"\"\n\nimport contextlib\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\nfrom config import Config\nfrom models.model import User\n\nengine = create_engine(\n    Config.SQLALCHEMY_DATABASE_URI,  # SQLAlchemy \u6570\u636e\u5e93\u8fde\u63a5\u4e32\n    echo=bool(Config.SQLALCHEMY_ECHO),  # \u662f\u4e0d\u662f\u8981\u628a\u6240\u6267\u884c\u7684SQL\u6253\u5370\u51fa\u6765\uff0c\u7528\u4e8e\u8c03\u8bd5\n    pool_size=int(Config.SQLALCHEMY_POOL_SIZE),  # \u8fde\u63a5\u6c60\u5927\u5c0f\n    max_overflow=int(Config.SQLALCHEMY_POOL_MAX_SIZE),  # \u8fde\u63a5\u6c60\u6700\u5927\u7684\u5927\u5c0f\n    pool_recycle=int(Config.SQLALCHEMY_POOL_RECYCLE),  # \u591a\u4e45\u65f6\u95f4\u4e3b\u52a8\u56de\u6536\u8fde\u63a5\n)\nSession = sessionmaker(bind=engine)\n\n\n@contextlib.contextmanager\ndef get_session():\n    sess = Session()\n    try:\n        yield sess\n        sess.commit()\n    except Exception as err:\n        sess.rollback()\n        raise err\n    finally:\n        sess.close()\n\n\ntry:\n    with get_session() as sess:\n        user = User(\"json\", \"123@123.com\", \"00000000000\")\n        sess.add(user)\n        sess.commit()\nexcept:\n    pass\n\nwith get_session() as sess:\n    for item in sess.query(User).all():\n        print(item.__dict__)\n</code></pre> <p>\u200b   config.py</p> <pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u914d\u7f6e\u6587\u4ef6\n\"\"\"\n\nURI = \"mysql+pymysql://root:Cc158854%40@192.168.127.140/learn_sqlalchemy?charset=utf8mb4\"\n\n\nclass Config:\n    \"\"\"Config\"\"\"\n    SQLALCHEMY_DATABASE_URI = URI\n    SQLALCHEMY_ECHO = True\n    SQLALCHEMY_POOL_SIZE = 6\n    SQLALCHEMY_POOL_MAX_SIZE = 8\n    SQLALCHEMY_POOL_RECYCLE = 60 * 30\n</code></pre> <p>\u200b   models/model.py</p> <pre><code># _*_ coding: utf-8 _*_\n\n\"\"\"\n\u6570\u636e\u6a21\u578b\n\"\"\"\n\nimport datetime\n\nfrom sqlalchemy import Column, Integer, DateTime, String\nfrom sqlalchemy.ext.declarative import declarative_base\n\nBase = declarative_base()\n\n\nclass BaseMixin:\n    \"\"\"model\u7684\u57fa\u7c7b,\u6240\u6709model\u90fd\u5fc5\u987b\u7ee7\u627f\"\"\"\n    id = Column(Integer, primary_key=True)\n    created_at = Column(DateTime, nullable=False, default=datetime.datetime.now)\n    updated_at = Column(DateTime, nullable=False, default=datetime.datetime.now,\n                        onupdate=datetime.datetime.now, index=True)\n    deleted_at = Column(DateTime)  # \u53ef\u4ee5\u4e3a\u7a7a, \u5982\u679c\u975e\u7a7a, \u5219\u4e3a\u8f6f\u5220\n\n\nclass User(Base, BaseMixin):\n    __tablename__ = \"user\"\n\n    name = Column(String(64), unique=True)\n    email = Column(String(64))\n    phone = Column(String(11), nullable=False, unique=True)\n\n    def __init__(self, name, email, phone):\n        self.name = name\n        self.email = email\n        self.phone = phone\n</code></pre> <p>\u4f7f\u7528alembic\u64cd\u4f5c\u6570\u636e\u5e93\u8fc1\u79fb</p> <p>\u53c2\u8003\u6587\u6863\uff1a</p> <p>\u200b   https://blog.csdn.net/chichu261/article/details/87307773</p> <p>\u200b   https://hellowac.github.io/technology/python/sqlalchemy/</p> <pre><code># \u5efa\u7acb\u6587\u4ef6\npython -m alembic init alembic\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1aalembic.ini\nsqlalchemy.url = mysql+pymysql://root:Cc158854%%40@192.168.127.140/learn_sqlalchemy\n\n# env.py\nfrom ..models.model import Base\ntarget_metadata = Base.metadata\n\n# \u63d0\u4ea4\u8fc1\u79fb\uff08\u6ce8\u610f\u8fd0\u884c\u8def\u5f84\uff09\npython -m alembic revision --autogenerate -m \"initdb\"\npython -m alembic upgrade head  # \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/SqlAlchemyStudy/#5sqlacodegen","title":"5.\u6a21\u578b\u9006\u5411\u5de5\u5177\uff1asqlacodegen","text":"<p>\u6570\u636e\u5e93 -&gt; tables.py</p> <pre><code>sqlacodegen --tables alembic_version,user mysql+pymysql://root:Cc158854%40@192.168.127.140:3306/learn_sqlalchemy --outfile tables.py\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/","title":"mysql\u4f18\u5316\u5b9e\u8df5","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#mysql57","title":"\u4e00\u3001mysql5.7\u4e0b\u8f7d","text":"<p>https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.38-winx64.zip</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#_1","title":"\u4e8c\u3001\u5b89\u88c5\u53ca\u914d\u7f6e","text":"<ol> <li>\u89e3\u538b\u540e\u76ee\u5f55\u4e0b\u914d\u7f6emy.ini</li> </ol> <pre><code>[client]\n# \u8bbe\u7f6emysql\u5ba2\u6237\u7aef\u9ed8\u8ba4\u5b57\u7b26\u96c6\ndefault-character-set=utf8\n\n[mysqld]\n# \u8bbe\u7f6e3306\u7aef\u53e3\nport = 3306\n\n# \u8bbe\u7f6emysql\u7684\u5b89\u88c5\u76ee\u5f55\nbasedir=D:/software/mysql-5.7.38-winx64\n\n# \u8bbe\u7f6e mysql\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u5b58\u653e\u76ee\u5f55\ndatadir=D:/software/mysql-5.7.38-winx64/data\n\n# \u5141\u8bb8\u6700\u5927\u8fde\u63a5\u6570\nmax_connections=100\n\n# \u670d\u52a1\u7aef\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u9ed8\u8ba4\u4e3a8\u6bd4\u7279\u7f16\u7801\u7684latin1\u5b57\u7b26\u96c6\ncharacter-set-server=utf8\n\n# \u521b\u5efa\u65b0\u8868\u65f6\u5c06\u4f7f\u7528\u7684\u9ed8\u8ba4\u5b58\u50a8\u5f15\u64ce\ndefault-storage-engine=INNODB\n\n# \u5728Mysql5.7\u4e4b\u540e\uff0cMysql\u4f7f\u7528\u7684\u662f\u4e25\u683c\u6a21\u5f0f\n# sql_mode\u9ed8\u8ba4\u914d\u7f6e\u4e3a:ONLY_FULL_GROUP_BY, STRICT_TRANS_TABLES, NO_ZERO_IN_DATE, NO_ZERO_DATE, ERROR_FOR_DIVISION_BY_ZERO, NO_AUTO_CREATE_USER, NO_ENGINE_SUBSTITUTION\n# \u4e3a\u5ffd\u7565\u5bfc\u5165\u65f6\u95f4\u6233\u9519\u8bef[ERR] 1067 - Invalid default value for \u2018update_time\u2018\uff0c\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n</code></pre> <ol> <li> <p>bin\u76ee\u5f55\u52a0\u5165\u73af\u5883\u53d8\u91cf</p> </li> <li> <p>\u5b89\u88c5mysqld</p> </li> </ol> <pre><code>mysqld --install\n</code></pre> <p>\u82e5\u51fa\u73b0\u9519\u8bef\uff1a\u53ef\u4ee5 mysqll --remove, \u518d\u5b89\u88c5</p> <ol> <li>\u521d\u59cb\u5316mysql\uff08\u8fd9\u91cc\u63a7\u5236\u53f0\u4f1a\u7ed9\u51fa\u9ed8\u8ba4\u5bc6\u7801\u6ce8\u610f\u590d\u5236\u4f7f\u7528\u767b\u5f55\u540e\u81ea\u884c\u4fee\u6539\uff09</li> </ol> <pre><code>mysqld --initialize --user=root --console\n</code></pre> <ol> <li>\u4fee\u6539\u5bc6\u7801\uff1a</li> </ol> <pre><code>mysqladmin -u root -p rK,od8fwgtCp password 123456\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#mysql_1","title":"\u4e09\u3001mysql\u767b\u5f55","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#1-utf-8","title":"1. \u521b\u5efa\u9ed8\u8ba4\u5b57\u7b26\u96c6utf-8\u7684\u6570\u636e\u5e93","text":"<pre><code>CREATE DATABASE IF NOT EXISTS saas DEFAULT CHARSET utf8 COLLATE utf8_general_ci;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#2","title":"2.\u67e5\u770b\u6570\u636e\u5e93\u5217\u8868","text":"<pre><code>show databases;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#3","title":"3.\u5e38\u7528\u547d\u4ee4\u8bed\u53e5","text":"<pre><code>use test\ndesc test\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#mysql_2","title":"\u56db\u3001mysql\u4f18\u5316\u5b9e\u8df5","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#1","title":"1.\u76ee\u7684","text":"<p>\u4e3a\u4e86\u67e5\u8be2\u6027\u80fd\u7684\u63d0\u5347\uff0c\u66f4\u5feb\u901f\u8fd4\u56de\u67e5\u8be2\u7684\u6570\u636e\u4fe1\u606f\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#2_1","title":"2. \u6570\u636e\u5e93\u8bbf\u95ee\u6f0f\u6597\u6cd5\u5219","text":"<p>\u7531\u6700\u5e38\u7528\u81f3\u6700\u4e0d\u5e38\u7528</p> <pre><code>1. \u51cf\u5c11\u6570\u636e\u8bbf\u95ee \n2. \u8fd4\u56de\u66f4\u5c11\u7684\u6570\u636e\uff1b\n3. \u51cf\u5c11\u4ea4\u4e92\u6b21\u6570\uff1b\n4. \u51cf\u5c11cpu\u5f00\u9500\uff1b\n5. \u8d44\u6e90\u66f4\u591a\u7684\u4f8b\u7528\n</code></pre> <p> </p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#3_1","title":"3.\u6570\u636e\u5e93\u67e5\u8be2\u5e38\u7528\u4f18\u5316\u624b\u6bb5","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#31","title":"3.1 \u4f7f\u7528\u5408\u9002\u7684\u5b57\u6bb5\u3001\u5b57\u6bb5\u957f\u5ea6\u548c\u7c7b\u578b","text":"<pre><code>1) \u589e\u52a0\u4e00\u5c42redis\u7f13\u5b58\uff1b\n2) \u7981\u6b62\u4f7f\u7528 SELECT * \u67e5\u8be2\uff0c\u907f\u514d\u6d41\u91cf\u51b2\u51fb\uff1b\n3) \u4e0d\u9700\u8981\u8ba4\u4e3a\u9605\u8bfb\u7684\u5b57\u6bb5\uff0c\u5efa\u8bae\u4f7f\u7528\u538b\u7f29\u5b58\u50a8\uff0c30%\u5927\u5c0f\uff1b\n4) \u4e00\u5b9a\u8981\u5927\u5b57\u6bb5\uff0c\u5c3d\u91cf\u72ec\u7acb\u4e3a\u4e00\u5f20\u8868\uff0c\u63d0\u5347\u5176\u4ed6\u5b57\u6bb5\u66f4\u65b0\u901f\u5ea6\uff1b\n5) \u9002\u914d\u4e1a\u52a1\u4e0a\u505a\u4f18\u5316\u8c03\u6574\uff0c\u6298\u6210\u591a\u4e2a\u5b57\u6bb5\u6216\u901a\u8fc7\u5173\u8054\u5173\u7cfb\uff1b\n6) \u9009\u62e9\u5408\u9002\u7684\u5b58\u50a8\u6570\u636e\u7c7b\u578b\uff0c\u5c3d\u91cf\u6570\u503c\u578b\uff0c\u5b57\u7b26\u4e32\u662f\u9010\u4e2a\u6bd4\u8f83\u3002\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#32-sql","title":"3.2 SQL\u6267\u884c\u8ba1\u5212\u5173\u952e\u6307\u6807\u4f18\u5316","text":"<p>desc select * from tablename</p> <p>type\u5b57\u6bb5\uff1a</p> <p>\u200b    system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</p> <p>\u200b    \u4f18\u79c0\u503c\uff1asystem\u3001const\u3001eq_ref</p> <p>\u200b    \u7cdf\u7cd5\u503c\uff1aindex, ALL\u9700\u8981\u91cd\u70b9\u5173\u6ce8\uff0cindex\u8868\u793a\u5168\u7d22\u5f15\u626b\u63cf\uff0c\u540e\u8005\u8868\u793a\u5168\u8868\u626b\u63cf</p> <p>\u200b    \u5176\u4ed6\u503c\uff1arange\u3001ref\uff0c\u5982\u679c\u5bf9\u5e94\u7684rows\u5f88\u5927\uff0c\u90a3\u5c31\u662f\u975e\u5e38\u7cdf\u7cd5</p> <p>key\u5b57\u6bb5\uff1a</p> <p>\u200b    \u8868\u793aSQL\u8d70\u7684\u54ea\u4e2a\u7d22\u5f15\uff0c\u82e5\u4e3a\u7a7a\u7684\u8bdd\uff0c\u4e00\u822c\u5c31\u662fALL</p> <p>rows\u5b57\u6bb5\uff1a</p> <p>\u200b    \u6839\u636e\u8868\u7edf\u8ba1\u4fe1\u606f\u6216\u8005\u7d22\u5f15\u9009\u7528\u60c5\u51b5\uff0c\u4f30\u7b97\u627e\u5230\u8981\u67e5\u8be2\u7684\u8bb0\u5f55\u9700\u8981\u626b\u63cf\u7684\u884c\u6570</p> <p>filtered\u5b57\u6bb5\uff1a</p> <p>\u200b    \u8868\u793a\u8fd4\u56de\u7684\u7ed3\u679c\u884c\u6570\u5360\u626b\u63cf\u884c\u6570\u7684\u767e\u5206\u6bd4\uff0c\u8be5\u503c\u8d8a\u5927\u8d8a\u597d\uff0c\u6ee1\u5206100</p> <p>\u4ece\u6267\u884c\u8ba1\u5212\u6307\u6807\u9700\u8981\u4f18\u5316\u60c5\u51b5\uff1a</p> <p>type\uff1aindex, ALL</p> <p>key\uff1a\u4e3a\u7a7a</p> <p>rows\uff1a\u4e0a\u4e07</p> <p>filtered\uff1a\u5c0f\u4e8e50</p> <p>Extra\uff1aUsing filesort\u3001Using temporary</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#33","title":"3.3 \u7d22\u5f15\u8bbe\u8ba1\u4f18\u5316","text":"<pre><code>1) \u7528\u4e00\u4e2a\u7d22\u5f15\u53ef\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u4e0d\u7528\u591a\u4e2a\u7d22\u5f15\uff1b\n2) \u51cf\u5c11\u7d22\u5f15\u5927\u5c0f\uff0c1\u4e2a\u7d22\u5f15\u4e0d\u7528\u8fc7\u591a\u7684\u5b57\u6bb5\uff1b\n3) \u5145\u5206\u4f8b\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\uff0c\u907f\u514dfilesort\n4) \u5408\u9002\u7684\u9009\u62e9\u6027\uff0c\u4e0d\u9700\u8981\u6240\u6709\u7684\u67e5\u8be2\u5b57\u6bb5\u90fd\u5728\u7d22\u5f15\u91cc\u9762\n5) \u7d22\u5f15\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u4f46\u662f\u964d\u4f4e\u4e86\u63d2\u5165\u66f4\u65b0\u6570\u636e\u7684\u901f\u5ea6\n</code></pre> <p>\u95ee\u9898\uff1a\u4ee5\u4e0b\u95ee\u9898\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff1f</p> <p>\u8868\u4e2d\u5047\u8bbe\u6709100\u4e07\u6761\u8bb0\u5f55\uff0c\u5e38\u7528\u67e5\u8be2\u8bed\u53e5\u5982\u4e0b\uff1a</p> <pre><code>select x frome t where c1=1 and c2=2 and c3=3;\nselect x frome t where c1=1 and c2=2;\nselect x frome t where c1=1 and c2=2 and c4=4;\n</code></pre> <p>\u9009\u62e9\u5efa\u7acb\u7d22\u5f15\u65b9\u6848\u6709\uff1a</p> <pre><code>\u8054\u5408\u7d22\u5f15\uff1a\n1. key `idx_c1_c2_c3` (`c1`,`c2`,`c3`)\n2. key `idx_c1_c2_c4` (`c1`,`c2`,`c4`)\n3. key `idx_c1_c2` (`c1`,`c2`)\n4. key `idx_c1` (`c1`)\n5. key `idx_c2` (`c2`)\n6. key `idx_c3` (`c3`)\n7. key `idx_c4` (`c4`)\n8. key `idx_c1_c2_c3_c4` (`c1`,`c2`,`c3`,`c4`)  -&gt; \u8fd9\u4e2a\u6700\u597d\n</code></pre> <p>\u7d22\u5f15\u4f7f\u7528\u53c2\u8003\u7ed3\u8bba\uff1a</p> <p>\u91cd\u70b9\uff1a\u591a\u4e2a\u5355\u5217\u7d22\u5f15\u5728\u591a\u6761\u4ef6\u67e5\u8be2\u65f6\u4f18\u5316\u5668\u4f1a\u9009\u62e9\u6700\u4f18\u7d22\u5f15\u7b56\u7565\uff0c\u53ef\u80fd\u53ea\u7528\u4e00\u4e2a\u7d22\u5f15\uff0c\u4e5f\u53ef\u80fd\u5168\u90e8\u90fd\u7528\u4e0a\uff01\u4f46\u591a\u4e2a\u5355\u5217\u7d22\u5f15\u4f1a\u5728\u5e95\u5c42\u5efa\u7acb\u591a\u4e2aB+\u7d22\u5f15\u6811\uff0c\u4f1a\u5360\u7528\u66f4\u591a\u7684\u7a7a\u95f4\u3002\u4e5f\u4f1a\u6d6a\u8d39\u4e00\u5b9a\u7684\u641c\u7d22\u6548\u7387\uff0c\u6545\u5982\u679c\u53ea\u6709\u591a\u6761\u4ef6\u67e5\u8be2\u65f6\uff0c\u6700\u597d\u5efa\u7acb\u8054\u5408\u7d22\u5f15\uff01</p> <p>\u8054\u5408\u7d22\u5f15\u7684\u672c\u8d28\uff1a</p> <p>\u5f53\u521b\u5efa\u8054\u5408\u7d22\u5f15(a, b, c)\uff0c\u76f8\u5f53\u4e8e\u521b\u5efa\u4e86(a)\u3001(a,  b)\u3001 (a, b, c)\u4e09\u79cd\u7ec4\u5408\u8054\u5408\u7d22\u5f15\uff0c\u7ecf\u8fc7\u6d4b\u8bd5a, c \u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u5b9e\u9645\u53ea\u7528\u5230\u4e86a\u7684\u7d22\u5f15\uff0cc\u7684\u5e76\u6ca1\u7528\u5230\u3002</p> <p>\u987a\u4fbf\u63d0\u4e00\u4e0b\uff1aB+\u6811\u641c\u7d22\u89c4\u5219</p> <p>1\u3001\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u3002\u5c06k\u4e0e\u6839\u8282\u70b9\u7684\u952e\u8fdb\u884c\u6bd4\u8f83[k1,k2,k3,......k(m-1)]</p> <p>2\u3001\u5982\u679ck&lt;k1\uff0c\u5230\u6839\u8282\u70b9\u7684\u5de6\u5b50\u8282\u70b9\uff1b</p> <p>3\u3001\u5982\u679ck==k1\uff0c\u518d\u548c\u01372\u6bd4\u8f83.\uff0c\u5982\u679ck&lt;k2,k\u4ecb\u4e8e\u01371\u548c\u01372\u4e4b\u95f4\uff0c\u5728\u5de6\u5b50\u8282\u70b9\u4e2d\u641c\u7d22\u01372</p> <p>4\u3001\u5982\u679ck&gt;k2\uff0c\u7ee7\u7eed\u548ck3,k4,...k(m-1)\u6bd4\u8f83\uff0c\u91cd\u590d\u5982\u7b2c2\u6b65\u548c\u7b2c3\u6b65</p> <p>5\u3001\u76f4\u5230\u8282\u70b9\u4e2d\u5b58\u5728k\uff0c\u5219\u8fd4\u56detrue\uff0c\u5426\u5219\u8fd4\u56defalse\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/mysql%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/#34-mysq","title":"3.4 mysq\u4f18\u5316\u5668\u4f1a\u81ea\u52a8\u9009\u62e9\u6700\u4f18\u7d22\u5f15\uff08\u4f1a\u51fa\u9519\u4e48\uff1f\uff09","text":"<p>\u6700\u5de6\u539f\u5219\uff1a&gt;mysql\u4f1a\u4ece\u7d22\u5f15\u7684\u4ece\u7b2c\u4e00\u4e2a\u952e\u503c\u4e00\u76f4\u5f80\u53f3\u5339\u914d\uff0c\u76f4\u5230\u9047\u89c1\uff08&lt;\u3001&gt;\u3001&lt;&gt;\u3001OR\u3001LIKE[%\u524d\u7f00]\uff09\u6216\u8005\u7d22\u5f15\u952e\u6ca1\u6709\u51fa\u73b0\u5728where\u6761\u4ef6\u4e2d\uff0c\u5219\u505c\u6b62\u5339\u914d\u3002</p> <p>\u7d22\u5f15\u9009\u62e9\u6027\u5e94\u7528\u573a\u666f\uff1a</p> <p>\u95ee\u9898\uff1a\u4ee5\u4e0b\u95ee\u9898\u5982\u4f55\u5efa\u7acb\u7d22\u5f15\uff1f</p> <p>5000\u4e07\u6761\u8bb0\u5f55</p> <p>count(distinct current_day) = 8</p> <p>count(distinct kdt_id) = 1115852</p> <p>\u200b   \u5176\u4e2d\uff1acurrent_day &gt;= 20161001 and current_day &lt;= 20170101 \u8bb0\u5f55\u6570\uff1a8237217\u6761</p> <p>\u200b               kdt_id=104493 \u8bb0\u5f55\u6570\uff1a41\u6761</p> <p>\u8bf7\u6839\u636e\u6761\u4ef6\u5efa\u7acb\u7d22\u5f15\uff1acurrent_day &gt;= 20161001 and current_day &lt;= 20170101 and kdt_id=104493;</p> <p>A. idx_cday_kid (current_day, kdt_id)</p> <p>B. idx_kid_cday (kdt_id, current_day)</p> <p>\u6b63\u786e\u9009\u62e9\uff1aB --&gt; \u56e0\u4e3a\u5148\u67e5\u76f8\u6bd4\u5f88\u5c11\u7684\u8bb0\u5f55\u518d\u5339\u914d\u591a\u7684\u8bb0\u5f55\u6548\u7387\u4f1a\u66f4\u5feb\uff0c\u5c24\u5176\u662f\u793a\u4f8b\u8fd9\u79cd\u6570\u636e\u6761\u6570\u5dee\u5f02\u5f88\u5927\u7684\u60c5\u51b5\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/","title":"PyMySQLStudy","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/#pymysqlstudy","title":"pymysqlStudy","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/#_1","title":"\u4e00\u3001\u6570\u636e\u5e93\u8fde\u63a5\u53ca\u57fa\u672c\u64cd\u4f5c","text":"<pre><code>import pymysql\n\n# \uff08socket\u65b9\u5f0f\u5b9e\u73b0\u8fde\u63a5\uff09\nconn = pymysql.connect(\n    host='192.168.127.140',  # ip\n    port=3306,  # \u6574\u578b\u6570\u636e\n    user='root',  # \u7528\u6237\n    password='Cc158854@',  # \u5bc6\u7801\n    charset='utf8',  # \u7f16\u7801\u683c\u5f0f\n)\n# \u83b7\u53d6\u6e38\u6807\u5bf9\u8c61\ncursor = conn.cursor()\n# print(cursor)  # &lt;pymysql.cursors.Cursor object at 0x00000126883FEA90&gt;\n\n# \u53d1\u9001\u6307\u4ee4\ncursor.execute(\"show databases\")\n# \u8fd4\u56de\u6570\u636e\nresult = cursor.fetchall()  # \u83b7\u53d6\u67e5\u770b\u6570\u636e\u9700\u8981\u4f7f\u7528\n# \u8fd4\u56de\u5b58\u5728\u7684\u6570\u636e\u5e93\nprint(result)\n# \u521b\u5efa\u6570\u636e\u5e93\ncursor.execute(\"create database dbname default charset utf8 collate utf8_general_ci\")\nconn.commit()  # \u4fee\u6539\u3001\u5220\u9664\u3001\u65b0\u589e\u6570\u636e\u9700\u8981\u4f7f\u7528\n\n# \u5220\u9664\u6570\u636e\u5e93\ncursor.execute(\"drop database dbname\")\nconn.commit()\n\n# \u8fdb\u5165\u6570\u636e\u5e93\u67e5\u770b\u8868\ncursor.execute(\"use mysql\")\ncursor.execute(\"show tables\")\nresult = cursor.fetchall()\nprint(result)\n\n# \u5173\u95ed\u6e38\u6807\nconn.close()\ncursor.close()\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/#_2","title":"\u4e8c\u3001\u7528\u6237\u7ba1\u7406\u7cfb\u7edf\u767b\u9646\u6ce8\u518c\u8868\u7ed3\u6784\u8bbe\u8ba1","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/#1","title":"1.\u521b\u5efa\u6570\u636e\u5e93","text":"<pre><code>create database userdb default charset utf8 collate utf8_general_ci\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/pymysqlStudy/#2pymysql","title":"2.\u521b\u5efa\u8868\u7ed3\u6784(pymysql)","text":"<pre><code>create table user_info(\n    id int primary key auto_increment not null,\n    username varchar(32),\n    password varchar(64)\n) default charset=utf8;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/","title":"redisStudy","text":"<p>\u5b66\u4e60\u94fe\u63a5: </p> <p>http://www.yuan316.com/post/redis/</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redis","title":"\u4e00\u3001Redis\u662f\u4ec0\u4e48\uff1f","text":"<p>\u25cf Redis \u662f\u5b8c\u5168\u5f00\u6e90\u7684\u3001C\u8bed\u8a00\u5b9e\u73b0\u7684\uff0c\u9075\u5b88 BSD \u534f\u8bae\uff0c\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 \u975e\u5173\u7cfb\u578b key-value \u6570\u636e\u5e93\uff1b</p> <p>\u25cf Redis\u652f\u6301\u591a\u79cd\u8bed\u8a00\uff08c\u3001c++\u3001python\u3001java\u3001php\uff09\uff1b</p> <p>\u25cf \u5355\u7ebf\u7a0b\u5355\u8fdb\u7a0b\uff1b</p> <p>\u25cf Redis \u4e0e\u5176\u4ed6 key - value \u7f13\u5b58\u4ea7\u54c1\u6709\u4ee5\u4e0b\u4e09\u4e2a\u7279\u70b9\uff1a</p> <pre><code>1. Redis\u652f\u6301\u6570\u636e\u7684\u6301\u4e45\u5316\uff0c\u53ef\u4ee5\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4fdd\u5b58\u5728\u78c1\u76d8\u4e2d\uff0c\u91cd\u542f\u7684\u65f6\u5019\u53ef\u4ee5\u518d\u6b21\u52a0\u8f7d\u8fdb\u884c\u4f7f\u7528\u3002\n2. Redis\u4e0d\u4ec5\u4ec5\u652f\u6301\u7b80\u5355\u7684key-value\u7c7b\u578b\u7684\u6570\u636e\uff0c\u540c\u65f6\u8fd8\u63d0\u4f9blist\uff0cset\uff0czset\uff0chash\u7b49\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\u3002\n3. Redis\u652f\u6301\u6570\u636e\u7684\u5907\u4efd\uff0c\u5373master-slave\u6a21\u5f0f\u7684\u6570\u636e\u5907\u4efd\u3002\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redis_1","title":"\u4e8c\u3001Redis\u4eae\u70b9\u529f\u80fd","text":"<p>\u25cf \u6301\u4e45\u5316</p> <p>\u652f\u6301\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u4fdd\u5b58\u5230\u78c1\u76d8\u4e2d\uff0c\u4fdd\u8bc1\u6570\u636e\u5b89\u5168\uff0c\u65b9\u4fbf\u8fdb\u884c\u5907\u4efd\u548c\u6062\u590d\u3002</p> <p>\u25cf \u8fc7\u671f\u952e\u529f\u80fd</p> <p>\u4e3a\u952e\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\uff0c\u5230\u671f\u81ea\u52a8\u5220\u9664 &lt;\u8282\u7701\u5185\u5b58\u5f00\u9500&gt;</p> <p>\u25cf \u4e8b\u52a1\u529f\u80fd</p> <p>\u5f31\u4e8b\u52a1\u578b\u6570\u636e\u5e93\uff0c\u53ea\u5177\u5907\u7b80\u5355\u7684\u4e8b\u52a1\u529f\u80fd\u3002</p> <p>\u25cf \u4e3b\u4ece\u590d\u5236</p> <p>\u5982\u4f55\u8ba9Redis\u4fdd\u6301\u9ad8\u53ef\u7528\u7684\u72b6\u6001\uff0c\u5b98\u65b9\u63a8\u8350\u63d0\u4f9b\u4e3b\u4ece\u65b9\u6848</p> <p>\u25cf \u54e8\u5175</p> <p>\u642d\u914d\u57fa\u7840\u7684\u4e3b\u4ece\u7ed3\u6784\u540e\uff0c\u54e8\u5175\u53ef\u505a\u5230\u81ea\u52a8\u6545\u969c\u8f6c\u79fb</p> <p>\u6d4b\u8bd5\u547d\u4ee4\uff1a</p> <pre><code>redis-benchmark -q -n 10000  -- -q\u8868\u793a\u5feb\u901f\u8f93\u51fa\u7ed3\u679c\uff0c-n\u8868\u793a10000\u4e2a\u8bf7\u6c42\uff0c\u8fd8\u6709\u4e2a\u53c2\u6570\u6a21\u62df\u5ba2\u6237\u7aef\u540c\u65f6\u53d1\u8bf7\u6c42\u9ed8\u8ba450\u4e2a\n</code></pre> <p>\u5bf9\u6bd4\u5176\u4ed6\u6570\u636e\u5e93\u533a\u522b\uff1a</p> <ol> <li>mysql\uff1a\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u8868\u683c\uff0c\u57fa\u4e8e\u78c1\u76d8\uff0c\u6162\uff1b</li> <li>mangoDB\uff1a\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u952e\u503c\u5bf9\u6587\u6863\u578b\u6570\u636e\u5e93\uff0c\u7c7b\u4f3cJSON\u6587\u6863\uff0c\u6570\u636e\u7ed3\u6784\u5355\u4e00\uff1b</li> <li>Redis\u8bde\u751f\u662f\u4e3a\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\uff1f \u7b54\uff1a \u4e3a\u89e3\u51b3\u786c\u76d8IO\u6027\u80fd\u7684\u74f6\u9888\uff1b</li> </ol> <p>\u25cf Redis\u5e94\u7528\u573a\u666f</p> <pre><code>1. \u7f13\u5b58\uff1a\u505a\u4e3a\u7f13\u5b58\u5b58\u50a8\u4ecb\u8d28\uff0c\u6b64\u4e1a\u52a1\u573a\u666f\u6700\u4e3a\u5e38\u89c1;\u67e5\u8be2\u4f18\u5148\u8d70redis,\u6ca1\u6709\u5219\u8d70mysql;\u53ef\u6709\u6548\u7684\u964d\u4f4emysql\u67e5\u8be2\u538b\u529b\uff1b\n2. \u5e76\u53d1\u8ba1\u6570\uff1a\u7531\u4e8eredis\u662f\u5355\u8fdb\u7a0b\u5355\u7ebf\u7a0b\u7684\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u5e76\u53d1\u8bf7\u6c42\u8ba1\u6570\u573a\u666f\uff0c\u4f8b\u5982\u5fae\u535a\u70b9\u8d5e\uff1b\n3. \u6392\u884c\u699c\uff1a\u5404\u5927\u5b9e\u65f6\u6392\u884c\u699c\uff0c\u4f8b\u5982\u6e38\u620f\u6392\u540d\u3001\u7535\u5546\u6392\u540d\uff1b\n4. \u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u578b\uff1a\u5145\u5f53\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u578b\u7684\u4e2d\u95f4\u5c42;\u751f\u4ea7\u8005\u53ef\u5c06\u4efb\u52a1\u5206\u53d1\u7ed9redis,\u6d88\u8d39\u8005\u4eceredis\u4e2d\u83b7\u53d6\u4efb\u52a1\u3002\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redislinux","title":"\u4e09\u3001Redis\u5b89\u88c5\uff08linux\uff09","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_1","title":"\u25cf \u4e0b\u8f7d\u5b89\u88c5","text":"<pre><code>cd /usr/local/\nwget http://download.redis.io/releases/redis-7.2.5.tar.gz\ntar xzf redis-7.2.5.tar.gz\ncd redis-7.2.5\n\n# centos\u5b89\u88c5\u547d\u4ee4\nyum install gcc \nyum -y install centos-release-scl\nyum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils \nscl enable devtoolset-9 bash\n\n# \u6ce8\u610f\uff1ascl\u547d\u4ee4\u542f\u7528\u53ea\u662f\u4e34\u65f6\u7684\uff0c\u9000\u51faxshell\u6216\u8005\u91cd\u542f\u865a\u62df\u673a\u5c31\u4f1a\u6062\u590d\u5230\u539f\u6765\u7684gcc\u7248\u672c\u3002\n# \u5982\u679c\u8981\u957f\u671f\u751f\u6548\u7684\u8bdd\uff0c\u6267\u884c\u5982\u4e0b\uff1a\necho \"source /opt/rh/devtoolset-9/enable\" &gt;&gt;/etc/profile\n# \u5047\u8bbe\u62a5\u9519\uff1a... .../deps/lua/src/liblua.\n# \u89e3\u51b3\u65b9\u6cd5\uff1a\u8fdb\u5165\u6e90\u7801\u5305\u76ee\u5f55\u4e0b\u7684deps\u76ee\u5f55\u4e2d\u6267\u884c\nmake lua hiredis linenoise\n\n# ubuntu\u5b89\u88c5\u547d\u4ee4\napt update\napt upgrade\napt install make gcc pkg-config\nmake PREFIX=/usr/local/redis install\ncd /usr/local/\ncp -r ./redis-7.2.5/src ./redis/\nmkdir -p ./redis/conf\ncp ./redis-7.2.5/redis.conf ./redis/conf/\necho -n 'export PATH=$PATH:/usr/local/redis/src' &gt;&gt; /etc/profile\necho -n 'export PATH=$PATH:/usr/local/redis/bin' &gt;&gt; /etc/profile\nsource /etc/profile\n\n# \u914d\u7f6e\u6587\u4ef6\u4fee\u6539-\u8fdc\u7a0b\u8fde\u63a5\u914d\u7f6e\nprotected-mode no  # \u5173\u95ed\u4fdd\u62a4\u6a21\u5f0f\uff0c\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\ndaemonize yes  # \u540e\u53f0\u542f\u52a8\nport 6379  # \u8bbe\u7f6e\u4f7f\u7528\u7aef\u53e3 -- \u9700\u8981\u653e\u884c\nbind 0.0.0.0 -::1  # \u6ce8\u91ca\u6389bind 127.0.0.1 \u6539\u4e3a\u5c40\u57df\u7f51\u5185\u53ef\u8fde\u63a5 bind 0.0.0.0\nrequirepass cc123456  # requirepass foobared\u6539\u4e3arequirepass cc123456\uff0ccc123456\u4e3a\u8bbe\u7f6e\u7684\u5bc6\u7801\uff0c\u8fd9\u4e2a\u5bc6\u7801\u5c3d\u91cf\u8bbe\u7f6e\u590d\u6742\u4e9b\u3002\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6bd5\u7684\u914d\u7f6e\uff1ahttps://blog.csdn.net/M_y_y/article/details/106211042</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_2","title":"\u25cf \u6d4b\u8bd5\u542f\u52a8\u670d\u52a1\uff08\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff09","text":"<pre><code>redis-server /usr/local/redis/conf/redis.conf\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_3","title":"\u25cf \u6d4b\u8bd5\u5ba2\u6237\u7aef\u8fde\u63a5","text":"<pre><code># \u65e0\u5bc6\u7801\u8fde\u63a5\nredis-cli\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_4","title":"\u25cf \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u8f6f\u4ef6\u6a21\u5757\u4ecb\u7ecd","text":"\u6a21\u5757\u540d\u79f0 \u6a21\u5757\u529f\u80fd\u4ecb\u7ecd redis-server Redis\u670d\u52a1\u5668 redis-cli Redis\u547d\u4ee4\u884c\u5ba2\u6237\u7aef redis-benchmark Redis\u6027\u80fd\u6d4b\u8bd5 redis-check-aof AOF\u6587\u4ef6\u4fee\u590d\u5de5\u5177 redis-check-rdb RDB\u6587\u4ef6\u4fee\u590d\u5de5\u5177 redis-sentinel Sentinel\u670d\u52a1\u5668(2.8\u4ee5\u540e)\uff0cRedis\u96c6\u7fa4\u4f7f\u7528"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_5","title":"\u25cf \u672c\u5730\u5ba2\u6237\u7aef\u8fde\u63a5\u6d4b\u8bd5","text":"<pre><code># \u9ed8\u8ba4\u7aef\u53e36379\uff0c\u65e0\u5bc6\u7801\uff1a\nredis-cli\n\n# \u6709\u7aef\u53e3\uff0c\u65e0\u5bc6\u7801\uff1a\nredis-cli -h 127.0.0.1 -p 6379\n\n# \u6709\u7aef\u53e3\uff0c\u6709\u5bc6\u7801\uff1a\nredis-cli -h 127.0.0.1 -p 6379 -a cc123456\n\n# \u4f7f\u7528\u6709\u7aef\u53e3\u6709\u5bc6\u7801\u7684\u65b9\u5f0f\u624d\u80fd\u6b63\u5e38\u8fde\u63a5\n\n# \u8fde\u63a5\u6210\u529f\u4f7f\u7528ping\u547d\u4ee4\u8fdb\u884c\u6d4b\u8bd5\uff0c\u8fd4\u56dePONG\u5219\u6210\u529f\nping\n</code></pre> <p>\u6709\u5bc6\u7801\u4e14\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff1a</p> <p> </p> <p>\u6b63\u786e\u8fde\u63a5\uff1a</p> <p> </p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#_6","title":"\u25cf \u6e90\u7801\u5b89\u88c5\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#systemd","title":"\u65b9\u5f0f\u4e00\uff1a\u914d\u7f6eSystemd","text":"<p>\u5f00\u673a\u81ea\u542f\u52a8redis\uff08\u5176\u4ed6\u670d\u52a1\u7c7b\u4f3c\uff09 </p> <p>CentOS7\u4ee5\u4e0a\u662f\u7528Systemd\u8fdb\u884c\u7cfb\u7edf\u521d\u59cb\u5316\u7684\uff0cSystemd \u662f Linux \u7cfb\u7edf\u4e2d\u6700\u65b0\u7684\u521d\u59cb\u5316\u7cfb\u7edf\uff08init\uff09\uff0c\u5b83\u4e3b\u8981\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u514b\u670d sysvinit \u56fa\u6709\u7684\u7f3a\u70b9\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u542f\u52a8\u901f\u5ea6\u3002</p> <p>Systemd\u670d\u52a1\u6587\u4ef6\u4ee5.service\u7ed3\u5c3e\uff0c\u6bd4\u5982\u73b0\u5728\u8981\u5efa\u7acbredis\u4e3a\u5f00\u673a\u542f\u52a8\uff0c\u5982\u679c\u7528yum install\u547d\u4ee4\u5b89\u88c5\u7684\uff0cyum\u547d\u4ee4\u4f1a\u81ea\u52a8\u521b\u5efaredis.service\u6587\u4ef6\uff0c\u76f4\u63a5\u7528\u547d\u4ee4systemcel enable redis.service\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\u5373\u53ef\u3002</p> <p>\u4e0b\u9762\u4e3a\u6e90\u7801\u5b89\u88c5\u7684redis-server\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8\u6b65\u9aa4\uff1b</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1","title":"1\u3001\u914d\u7f6e\u6587\u4ef6\u8def\u5f84","text":"<p>\u6211\u7f16\u8bd1\u5b89\u88c5\u7684\u76ee\u5f55\u662f\uff1a/usr/local/redis/bin \uff0c\u6240\u4ee5\u914d\u7f6e\u2f42\u4ef6\u2f6c\u5f55\u4e3a\uff1a/usr/local/redis/bin/redis.conf</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2redisservice","title":"2\u3001\u5728\u7cfb\u7edf\u670d\u52a1\u76ee\u5f55\u91cc\u521b\u5efaredis.service\u6587\u4ef6","text":"<pre><code>vim /etc/systemd/system/redis.service\n\n# \u6216\uff08\u4e00\u822c\u4e0a\u9762\u4e3acentos\u7684\u914d\u7f6e\uff09\n\nvim /lib/systemd/system/redis.service\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#3-execstart","title":"3\u3001\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9 (ExecStart\u8def\u5f84\u4e3a\u81ea\u5df1\u5b89\u88c5\u8def\u5f84)","text":"<pre><code>[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/src/redis-server /usr/local/redis/redis.conf\nPrivateTmp=true\n\n[Install]\nwantedBy=multi-user.target\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#4","title":"4\u3001\u914d\u7f6e\u63cf\u8ff0\uff1a","text":"<pre><code>Description:\u63cf\u8ff0\u670d\u52a1\nAfter:\u63cf\u8ff0\u670d\u52a1\u7c7b\u522b\n[Service]\u670d\u52a1\u8fd0\u884c\u53c2\u6570\u7684\u8bbe\u7f6e\nType=forking\u662f\u540e\u53f0\u8fd0\u884c\u7684\u5f62\u5f0f\nExecStart\u4e3a\u670d\u52a1\u7684\u5177\u4f53\u8fd0\u884c\u547d\u4ee4\nExecReload\u4e3a\u91cd\u542f\u547d\u4ee4\nExecStop\u4e3a\u505c\u6b62\u547d\u4ee4\nPrivateTmp=True\u8868\u793a\u7ed9\u670d\u52a1\u5206\u914d\u72ec\u7acb\u7684\u4e34\u65f6\u7a7a\u95f4\n\u6ce8\u610f\uff1a[Service]\u7684\u542f\u52a8\u3001\u91cd\u542f\u3001\u505c\u6b62\u547d\u4ee4\u5168\u90e8\u8981\u6c42\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\n[Install]\u8fd0\u884c\u7ea7\u522b\u4e0b\u670d\u52a1\u5b89\u88c5\u7684\u76f8\u5173\u8bbe\u7f6e\uff0c\u53ef\u8bbe\u7f6e\u4e3a\u591a\u7528\u6237\uff0c\u5373\u7cfb\u7edf\u8fd0\u884c\u7ea7\u522b\u4e3a3\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#5systemctl","title":"5\u3001systemctl\u76f8\u5173\u547d\u4ee4","text":"<pre><code># \u52a0\u8f7d\u914d\u7f6e\nsystemctl daemon-reload\n#  \u542f\u52a8\nsystemctl start redis \n#  \u5f00\u673a\u542f\u52a8\uff08\u672a\u751f\u6548\uff09\nsystemctl enable redis\n# \u542f\u52a8redis\u670d\u52a1\nsystemctl start redis.service\n# \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\u52a8\nsystemctl enable redis.service\n# \u505c\u6b62\u5f00\u673a\u81ea\u542f\u52a8\nsystemctl disable redis.service\n# \u67e5\u770b\u670d\u52a1\u5f53\u524d\u72b6\u6001\nsystemctl status redis.service\n# \u91cd\u65b0\u542f\u52a8\u670d\u52a1\nsystemctl restart redis.service\n# \u67e5\u770b\u6240\u6709\u5df2\u542f\u52a8\u7684\u670d\u52a1\nsystemctl list-units --type=service\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#6","title":"6\u3001\u91cd\u542f\u670d\u52a1\u5668\u9a8c\u8bc1\u662f\u5426\u5f00\u673a\u81ea\u52a8\u542f\u52a8","text":"<pre><code>shutdown -r now \n# \u6216\nreboot\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#etcinitd-","title":"\u65b9\u5f0f\u4e8c\uff1a/etc/init.d/\uff09-&gt; \u63a8\u8350","text":"<pre><code>#  \u5728/etc\u76ee\u5f55\u4e0b\u65b0\u5efaredis\u76ee\u5f55\nmkdir /etc/redis\n\n#  \u590d\u5236\u914d\u7f6e\u6587\u4ef6\n\n#  \u5c06redis.conf\u6587\u4ef6\u590d\u5236\u5230/etc/redis\u76ee\u5f55\ncp /usr/local/redis/redis.conf /etc/redis/\n\n#  \u590d\u5236\u542f\u52a8\u811a\u672c\ncp /usr/local/redis/utils/redis_init_script /etc/init.d/redis\ncat /etc/init.d/redis\n\n#  \u901a\u8fc7\u67e5\u770b\u542f\u52a8\u811a\u672c\uff0c\u786e\u5b9a\u5404\u4e2a\u8def\u5f84\u662f\u5426\u6b63\u786e\nREDISPORT=6379\nEXEC=/usr/local/bin/redis-server\nCLIEXEC=/usr/local/bin/redis-cli\n#  \u6539\u4e3a\uff1a\nREDISPORT=6399\nEXEC=/usr/local/redis/src/redis-server\nCLIEXEC=/usr/local/soft/redis/bin/redis-cli\n\n\n# \u6267\u884c\u81ea\u542f\u547d\u4ee4\ncd /etc/init.d/\nchkconfig redis on\n\n# \u5982\u679c\u8fd0\u884c\u7ed3\u679c\u63d0\u793a\uff1aservice redisd does not support chkconfig\uff0c\n# \u89e3\u51b3\u65b9\u6cd5\uff1a \u4f7f\u7528vim\u7f16\u8f91redisd\u6587\u4ef6\uff0c\u5728\u7b2c\u4e00\u884c\u52a0\u5165\u5982\u4e0b\u4e24\u884c\u6ce8\u91ca\uff0c\u4fdd\u5b58\u9000\u51fa\uff0c\u518d\u6b21\u6267\u884c\u81ea\u542f\u547d\u4ee4\u5373\u53ef\n# chkconfig: 2345 90 10\n# description: Redis is a persistent key-value database\n# \u6ce8\u91ca\u7684\u610f\u601d\u662f\uff0credis\u670d\u52a1\u5fc5\u987b\u5728\u8fd0\u884c\u7ea72\uff0c3\uff0c4\uff0c5\u4e0b\u88ab\u542f\u52a8\u6216\u5173\u95ed\uff0c\u542f\u52a8\u7684\u4f18\u5148\u7ea7\u662f90\uff0c\u5173\u95ed\u7684\u4f18\u5148\u7ea7\u662f10\u3002\n\n\n# \u542f\u52a8Redis\u547d\u4ee4\nservice redis start\n\n\n# \u5173\u95edredis\u547d\u4ee4\nservice redis stop\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#pythonredis","title":"\u56db\u3001Python\u8fde\u63a5redis","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1pythonredis","title":"1.\u5b89\u88c5python\u64cd\u4f5credis\u6a21\u5757","text":"<pre><code>pip3 install redis\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2pythonredis","title":"2.\u901a\u8fc7python\u64cd\u4f5credis\u6570\u636e","text":"<pre><code>#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n\nimport redis\n\n# \u76f4\u63a5\u8fde\u63a5redis\nconn = redis.Redis(host='10.211.55.28', port=6379, password='foobared', encoding='utf-8')\n\n# \u8bbe\u7f6e\u952e\u503c\uff1a15131255089=\"9999\" \u4e14\u8d85\u65f6\u65f6\u95f4\u4e3a10\u79d2\uff08\u503c\u5199\u5165\u5230redis\u65f6\u4f1a\u81ea\u52a8\u8f6c\u5b57\u7b26\u4e32\uff09\nconn.set('15131255089', 9999, ex=10)\n\n# \u6839\u636e\u952e\u83b7\u53d6\u503c\uff1a\u5982\u679c\u5b58\u5728\u83b7\u53d6\u503c\uff08\u83b7\u53d6\u5230\u7684\u662f\u5b57\u8282\u7c7b\u578b\uff09\uff1b\u4e0d\u5b58\u5728\u5219\u8fd4\u56deNone\nvalue = conn.get('15131255089')\nprint(value)\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#3redis","title":"3.Redis\u8fde\u63a5\u6c60\u63d0\u5347\u64cd\u4f5c\u6548\u7387","text":"<p>\u4e0a\u9762python\u64cd\u4f5credis\u7684\u793a\u4f8b\u662f\u4ee5\u76f4\u63a5\u521b\u5efa\u8fde\u63a5\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u6bcf\u6b21\u64cd\u4f5credis\u5982\u679c\u90fd\u91cd\u65b0\u8fde\u63a5\u4e00\u6b21\u6548\u7387\u4f1a\u6bd4\u8f83\u4f4e\uff0c\u5efa\u8bae\u4f7f\u7528redis\u8fde\u63a5\u6c60\u6765\u66ff\u6362\uff0c\u4f8b\u5982\uff1a</p> <pre><code>import redis\n\n# \u521b\u5efaredis\u8fde\u63a5\u6c60\uff08\u9ed8\u8ba4\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\uff09\npool = redis.ConnectionPool(host='10.211.55.28', port=6379, password='foobared', encoding='utf-8', max_connections=1000)\n\n# \u53bb\u8fde\u63a5\u6c60\u4e2d\u83b7\u53d6\u4e00\u4e2a\u8fde\u63a5\nconn = redis.Redis(connection_pool=pool)\n\n# \u8bbe\u7f6e\u952e\u503c\uff1a15131255089=\"9999\" \u4e14\u8d85\u65f6\u65f6\u95f4\u4e3a10\u79d2\uff08\u503c\u5199\u5165\u5230redis\u65f6\u4f1a\u81ea\u52a8\u8f6c\u5b57\u7b26\u4e32\uff09\nconn.set('name', \"\u8bf8\u845b\u4eae\", ex=10)\n\n# \u6839\u636e\u952e\u83b7\u53d6\u503c\uff1a\u5982\u679c\u5b58\u5728\u83b7\u53d6\u503c\uff08\u83b7\u53d6\u5230\u7684\u662f\u5b57\u8282\u7c7b\u578b\uff09\uff1b\u4e0d\u5b58\u5728\u5219\u8fd4\u56deNone\nvalue = conn.get('name')\n\nprint(value)\n</code></pre> <p>\u6309\u7406\u8bf4\u641e\u5b9a\u4e0a\u4e00\u6b65python\u4ee3\u7801\u64cd\u4f5credis\u4e4b\u540e\uff0c\u5728django\u4e2d\u5e94\u7528\u53ea\u9700\u8981\u628a\u4e0a\u9762\u7684\u4ee3\u7801\u5199\u5230django\u5c31\u53ef\u4ee5\u3002\u4f8b\u5982\uff1adjango\u7684\u89c6\u56fe\u51fd\u6570\u4e2d\u64cd\u4f5credis:</p> <pre><code>import redis\nfrom django.shortcuts import HttpResponse\n\n# \u521b\u5efaredis\u8fde\u63a5\u6c60\nPOOL = redis.ConnectionPool(host='10.211.55.28', port=6379, password='foobared', encoding='utf-8', max_connections=1000)\n\ndef index(request):\n\n    # \u53bb\u8fde\u63a5\u6c60\u4e2d\u83b7\u53d6\u4e00\u4e2a\u8fde\u63a5\n    conn = redis.Redis(connection_pool=POOL)\n\n    conn.set('name', \"\u8bf8\u845b\u4eae\", ex=10)\n    value = conn.get('name')\n    print(value)\n    return HttpResponse(\"ok\")\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#djangoredis","title":"\u4e94\u3001Django\u4f9d\u8d56\u6a21\u5757\u8fde\u63a5redis","text":"<p>\u4e0a\u8ff0\u53ef\u4ee5\u5b9e\u73b0\u5728django\u4e2d\u64cd\u4f5credis\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u79cd\u5f62\u5f0f\u6709\u70b9\u975e\u4e3b\u6d41\uff0c\u56e0\u4e3a\u5728django\u4e2d\u4e00\u822c\u4e0d\u8fd9\u4e48\u5e72\uff0c\u800c\u662f\u7528\u53e6\u4e00\u79cd\u66f4\u52a0\u7b80\u4fbf\u7684\u7684\u65b9\u5f0f\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1django-redisredis","title":"1.\u5b89\u88c5django-redis\u6a21\u5757\uff08\u5185\u90e8\u4f9d\u8d56redis\u6a21\u5757\uff09","text":"<pre><code>pip3 install django-redis\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2djangosettingspy","title":"2.\u5728django\u9879\u76ee\u7684settings.py\u4e2d\u6dfb\u52a0\u76f8\u5173\u914d\u7f6e","text":"<pre><code>... ...\n\nCACHES = {\n    \"default\": {\n        \"BACKEND\": \"django_redis.cache.RedisCache\",\n        \"LOCATION\": \"redis://10.211.55.28:6379\", # \u5b89\u88c5redis\u7684\u4e3b\u673a\u7684 IP \u548c \u7aef\u53e3\n        \"OPTIONS\": {\n            \"CLIENT_CLASS\": \"django_redis.client.DefaultClient\",\n            \"CONNECTION_POOL_KWARGS\": {\n                \"max_connections\": 1000,\n                \"encoding\": 'utf-8'\n            },\n            \"PASSWORD\": \"foobared\" # redis\u5bc6\u7801\n        }\n    }\n}\n\n... ...\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#3djangoredis","title":"3.\u5728django\u7684\u89c6\u56fe\u4e2d\u64cd\u4f5credis","text":"<pre><code>from django.shortcuts import HttpResponse\nfrom django_redis import get_redis_connection\ndef index(request):\n    # \u53bb\u8fde\u63a5\u6c60\u4e2d\u83b7\u53d6\u4e00\u4e2a\u8fde\u63a5\n    conn = get_redis_connection(\"default\")\n    conn.set('nickname', \"\u8bf8\u845b\u4eae\", ex=10)\n    value = conn.get('nickname')\n    print(value)\n    return HttpResponse(\"OK\")\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redis_2","title":"\u516d\u3001Redis\u5176\u4ed6\u9ad8\u7ea7\u7528\u6cd5","text":"<p>\u25cf http://www.yuan316.com/post/redis/</p> <p>\u25cf https://www.cnblogs.com/wupeiqi/articles/5132791.html</p> <p>\u25cf http://www.redis.cn/</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redis_3","title":"\u4e03\u3001Redis\u57fa\u7840\u547d\u4ee4","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1_1","title":"1.\u903b\u8f91\u6570\u636e\u5e93\u4f7f\u7528","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\uff0credis\u5185\u7f6e16\u4e2a\u903b\u8f91\u5e93\uff080-15\uff09\uff0c\u9009\u62e9\u54ea\u4e2a\u6570\u636e\u5e93\uff1a</p> <pre><code>127.0.0.1:6379&gt; select 0\nOK\n127.0.0.1:6379&gt; set city dongguan\nOK\n127.0.0.1:6379&gt; get city\n\"dongguan\"\n127.0.0.1:6379&gt;\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2redisubuntu","title":"2.Redis\u670d\u52a1\u52a0\u5165\u5f00\u673a\u542f\u52a8\u811a\u672c\uff08ubuntu\uff09","text":"<pre><code># \u590d\u5236\u6587\u4ef6\nif ! [ -f \"/etc/systemd/system/rc-local.service\" ];then\n    cat /lib/systemd/system/rc-local.service\n    cp /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service\nfi\n\nvim /etc/systemd/system/rc-local.service\n\ncat &lt;&lt; EOF &gt;&gt; /etc/systemd/system/rc-local.service\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl daemon-reload\n\n# \u5199\u5165\u8981\u8fd0\u884c\u7684\u811a\u672c\u8def\u5f84\ncat &lt;&lt; EOF &gt;&gt; /etc/rc.local\n#!/bin/bash\nsh /root/RedisLen/env_start.sh\nEOF\n# \u5199\u5165\u8981\u8fd0\u884c\u7684\u811a\u672c\u5185\u5bb9\ncat &lt;&lt; EOF &gt; /root/RedisLen/env_start.sh\n#!/bin/bash\npgrep -f redis | xargs kill -9 &gt;/dev/nul 2&gt;&amp;1\n/usr/local/redis/bin/redis-server /usr/local/redis/conf/redis.conf\nEOF\n\nchmod 755 /etc/rc.local\nchmod 755 /root/RedisLen/env_start.sh\n\nsystemctl start rc-local.service\n# \u5047\u8bbe\u62a5\u9519\n# Job for rc-local.service failed because the control process exited with error code.\n# See \"systemctl status rc-local.service\" and \"journalctl -xeu rc-local.service\" for details.\n# \u89e3\u51b3\u53c2\u8003\u6587\u6863\uff1ahttps://blog.csdn.net/djstavav/article/details/88166805\n\nsystemctl status rc-local.service\nsystemctl enable rc-local.service\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#rdbaof","title":"\u516b\u3001\u652f\u6301\u6570\u636e\u6301\u4e45\u5316\u65b9\u6848\uff08RDB/AOF\uff09","text":""},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#rdb","title":"\u25cf RDB","text":"<p>RDB\u662f\u4e00\u79cd\u5feb\u7167\u5b58\u50a8\u6301\u4e45\u5316\u65b9\u5f0f\uff0c\u5177\u4f53\u5c31\u662f\u5c06Redis\u67d0\u4e00\u65f6\u523b\u7684\u5185\u5b58\u6570\u636e\u4fdd\u5b58\u5230\u786c\u76d8\u7684\u6587\u4ef6\u5f53\u4e2d\uff0c\u9ed8\u8ba4\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u4e3adump.rdb\uff0c\u800c\u5728Redis\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u4f1a\u91cd\u65b0\u52a0\u8f7ddump.rdb\u6587\u4ef6\u7684\u6570\u636e\u5230\u5185\u5b58\u5f53\u4e2d\u6062\u590d\u6570\u636e\u3002</p> <p>\u5f00\u542fRDB\u6301\u4e45\u5316\u65b9\u5f0f\uff1a\u5f00\u542fRDB\u6301\u4e45\u5316\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5411Redis\u670d\u52a1\u5668\u53d1\u9001save\u6216bgsave\u547d\u4ee4\u8ba9\u670d\u52a1\u5668\u751f\u6210rdb\u6587\u4ef6\uff0c\u6216\u8005\u901a\u8fc7\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u6307\u5b9a\u89e6\u53d1RDB\u6761\u4ef6\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1save","title":"1.save\u547d\u4ee4","text":"<pre><code>#\u00a0\u540c\u6b65\u6570\u636e\u5230\u78c1\u76d8\u4e0a\n&gt; save\n</code></pre> <p>\u5f53\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001save\u547d\u4ee4\u8bf7\u6c42\u8fdb\u884c\u6301\u4e45\u5316\u65f6\uff0c\u670d\u52a1\u5668\u4f1a\u963b\u585esave\u547d\u4ee4\u4e4b\u540e\u7684\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u76f4\u5230\u6570\u636e\u540c\u6b65\u5b8c\u6210\u3002</p> <p>\u5982\u679c\u6570\u636e\u91cf\u592a\u5927\uff0c\u540c\u6b65\u6570\u636e\u4f1a\u6267\u884c\u5f88\u4e45\uff0c\u800c\u8fd9\u671f\u95f4Redis\u670d\u52a1\u5668\u4e5f\u65e0\u6cd5\u63a5\u6536\u5176\u4ed6\u8bf7\u6c42\uff0c\u6240\u4ee5\uff0c\u6700\u597d\u4e0d\u8981\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528save\u547d\u4ee4\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2bgsave","title":"2.bgsave\u547d\u4ee4","text":"<pre><code>\u4e0esave\u547d\u4ee4\u4e0d\u540c\uff0cbgsave\u547d\u4ee4\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u3002\n# \u5f02\u6b65\u4fdd\u5b58\u6570\u636e\u96c6\u5230\u78c1\u76d8\n&gt; bgsave\n</code></pre> <p>\u5f53\u5ba2\u6237\u7aef\u53d1\u670d\u52a1\u53d1\u51fabgsave\u547d\u4ee4\u65f6\uff0cRedis\u670d\u52a1\u5668\u4e3b\u8fdb\u7a0b\u4f1aforks\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u6570\u636e\u540c\u6b65\u95ee\u9898\uff0c\u5728\u5c06\u6570\u636e\u4fdd\u5b58\u5230rdb\u6587\u4ef6\u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u9000\u51fa\u3002</p> <p>\u6240\u4ee5\uff0c\u4e0esave\u547d\u4ee4\u76f8\u6bd4\uff0cRedis\u670d\u52a1\u5668\u5728\u5904\u7406bgsave\u91c7\u7528\u5b50\u7ebf\u7a0b\u8fdb\u884cIO\u5199\u5165\uff0c\u800c\u4e3b\u8fdb\u7a0b\u4ecd\u7136\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6\u8bf7\u6c42\uff0c\u4f46forks\u5b50\u8fdb\u7a0b\u662f\u540c\u6b65\u7684\uff0c\u6240\u4ee5forks\u5b50\u8fdb\u7a0b\u65f6\uff0c\u4e00\u6837\u4e0d\u80fd\u63a5\u6536\u5176\u4ed6\u8bf7\u6c42\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679cforks\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u82b1\u8d39\u7684\u65f6\u95f4\u592a\u4e45(\u4e00\u822c\u662f\u5f88\u5feb\u7684)\uff0cbgsave\u547d\u4ee4\u4ecd\u7136\u6709\u963b\u585e\u5176\u4ed6\u5ba2\u6237\u7684\u8bf7\u6c42\u7684\u60c5\u51b5\u53d1\u751f\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#3","title":"3. \u670d\u52a1\u5668\u914d\u7f6e\u81ea\u52a8\u89e6\u53d1","text":"<p>\u9664\u4e86\u901a\u8fc7\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u5916\uff0c\u8fd8\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u5c31\u662f\u5728Redis\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684save\u6307\u5b9a\u5230\u8fbe\u89e6\u53d1RDB\u6301\u4e45\u5316\u7684\u6761\u4ef6\uff0c\u6bd4\u5982\u3010\u591a\u5c11\u79d2\u5185\u81f3\u5c11\u8fbe\u5230\u591a\u5c11\u5199\u64cd\u4f5c\u3011\u5c31\u5f00\u542fRDB\u6570\u636e\u540c\u6b65\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6redis.conf\u6307\u5b9a\u5982\u4e0b\u7684\u9009\u9879\uff1a</p> <pre><code># \u542f\u52a8\u670d\u52a1\u5668\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 \nvim /usr/local/redis/conf/redis.conf\n</code></pre> <pre><code>#\u00a0900s\u5185\u81f3\u5c11\u8fbe\u5230\u4e00\u6761\u5199\u547d\u4ee4\nsave\u00a0900\u00a01\n#\u00a0300s\u5185\u81f3\u5c11\u8fbe\u81f310\u6761\u5199\u547d\u4ee4\nsave\u00a0300\u00a010\n#\u00a060s\u5185\u81f3\u5c11\u8fbe\u523010000\u6761\u5199\u547d\u4ee4\nsave\u00a060\u00a010000\n</code></pre> <pre><code># \u542f\u52a8\u670d\u52a1\u5668\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 \nredis-server /usr/local/redis/conf/redis.conf\n</code></pre> <p>\u8fd9\u79cd\u901a\u8fc7\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u89e6\u53d1RDB\u7684\u65b9\u5f0f\uff0c\u4e0ebgsave\u547d\u4ee4\u7c7b\u4f3c\uff0c\u8fbe\u5230\u89e6\u53d1\u6761\u4ef6\u65f6\uff0c\u4f1aforks\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u4e0d\u8fc7\u6700\u597d\u4e0d\u8981\u901a\u8fc7\u8fd9\u65b9\u5f0f\u6765\u89e6\u53d1RDB\u6301\u4e45\u5316\uff0c\u56e0\u4e3a\u8bbe\u7f6e\u89e6\u53d1\u7684\u65f6\u95f4\u592a\u77ed\uff0c\u5219\u5bb9\u6613\u9891\u7e41\u5199\u5165rdb\u6587\u4ef6\uff0c\u5f71\u54cd\u670d\u52a1\u5668\u6027\u80fd\uff0c\u65f6\u95f4\u8bbe\u7f6e\u592a\u957f\u5219\u4f1a\u9020\u6210\u6570\u636e\u4e22\u5931\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#4rdb","title":"4.rdb\u6587\u4ef6","text":"<p>\u524d\u9762\u4ecb\u7ecd\u4e86\u4e09\u79cd\u8ba9\u670d\u52a1\u5668\u751f\u6210rdb\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u65e0\u8bba\u662f\u7531\u4e3b\u8fdb\u7a0b\u751f\u6210\u8fd8\u662f\u5b50\u8fdb\u7a0b\u6765\u751f\u6210\uff0c\u5176\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>\u751f\u6210\u4e34\u65f6rdb\u6587\u4ef6\uff0c\u5e76\u5199\u5165\u6570\u636e\u3002</li> <li>\u5b8c\u6210\u6570\u636e\u5199\u5165\uff0c\u7528\u4e34\u65f6\u6587\u4ee3\u66ff\u4ee3\u6b63\u5f0frdb\u6587\u4ef6\u3002</li> <li>\u5220\u9664\u539f\u6765\u7684db\u6587\u4ef6\u3002</li> </ul> <p>RDB\u9ed8\u8ba4\u751f\u6210\u7684\u6587\u4ef6\u540d\u4e3adump.rdb\uff0c\u5f53\u7136\uff0c\u6211\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u66f4\u52a0\u8be6\u7ec6\u914d\u7f6e\uff0c\u6bd4\u5982\u5728\u5355\u673a\u4e0b\u542f\u52a8\u591a\u4e2aredis\u670d\u52a1\u5668\u8fdb\u7a0b\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u7aef\u53e3\u53f7\u914d\u7f6e\u4e0d\u540c\u7684rdb\u540d\u79f0\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code># \u662f\u5426\u538b\u7f29rdb\u6587\u4ef6\nrdbcompression yes\n\n# rdb\u6587\u4ef6\u7684\u540d\u79f0\ndbfilename redis-6379.rdb\n\n# rdb\u6587\u4ef6\u4fdd\u5b58\u76ee\u5f55\ndir ~/redis/\n</code></pre> <p>RDB\u7684\u51e0\u4e2a\u4f18\u70b9</p> <ul> <li>\u4e0eAOF\u65b9\u5f0f\u76f8\u6bd4\uff0c\u901a\u8fc7rdb\u6587\u4ef6\u6062\u590d\u6570\u636e\u6bd4\u8f83\u5feb\u3002</li> <li>rdb\u6587\u4ef6\u975e\u5e38\u7d27\u51d1\uff0c\u9002\u5408\u4e8e\u6570\u636e\u5907\u4efd\u3002</li> <li>\u901a\u8fc7RDB\u8fdb\u884c\u6570\u636e\u5907\uff0c\u7531\u4e8e\u4f7f\u7528\u5b50\u8fdb\u7a0b\u751f\u6210\uff0c\u6240\u4ee5\u5bf9Redis\u670d\u52a1\u5668\u6027\u80fd\u5f71\u54cd\u8f83\u5c0f\u3002</li> </ul> <p>RDB\u7684\u51e0\u4e2a\u7f3a\u70b9</p> <ul> <li>\u5982\u679c\u670d\u52a1\u5668\u5b95\u673a\u7684\u8bdd\uff0c\u91c7\u7528RDB\u7684\u65b9\u5f0f\u4f1a\u9020\u6210\u67d0\u4e2a\u65f6\u6bb5\u5185\u6570\u636e\u7684\u4e22\u5931\uff0c\u6bd4\u5982\u6211\u4eec\u8bbe\u7f6e10\u5206\u949f\u540c\u6b65\u4e00\u6b21\u62165\u5206\u949f\u8fbe\u52301000\u6b21\u5199\u5165\u5c31\u540c\u6b65\u4e00\u6b21\uff0c\u90a3\u4e48\u5982\u679c\u8fd8\u6ca1\u8fbe\u5230\u89e6\u53d1\u6761\u4ef6\u670d\u52a1\u5668\u5c31\u6b7b\u673a\u4e86\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u7684\u6570\u636e\u4f1a\u4e22\u5931\u3002</li> <li>\u4f7f\u7528save\u547d\u4ee4\u4f1a\u9020\u6210\u670d\u52a1\u5668\u963b\u585e\uff0c\u76f4\u63a5\u6570\u636e\u540c\u6b65\u5b8c\u6210\u624d\u80fd\u63a5\u6536\u540e\u7eed\u8bf7\u6c42\u3002</li> <li>\u4f7f\u7528bgsave\u547d\u4ee4\u5728forks\u5b50\u8fdb\u7a0b\u65f6\uff0c\u5982\u679c\u6570\u636e\u91cf\u592a\u5927\uff0cforks\u7684\u8fc7\u7a0b\u4e5f\u4f1a\u53d1\u751f\u963b\u585e\uff0c\u53e6\u5916\uff0cforks\u5b50\u8fdb\u7a0b\u4f1a\u8017\u8d39\u5185\u5b58\u3002</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#aof","title":"\u25cf AOF","text":"<p>\u4e0eRDB\u5b58\u50a8\u67d0\u4e2a\u65f6\u523b\u7684\u5feb\u7167\u4e0d\u540c\uff0cAOF\u6301\u4e45\u5316\u65b9\u5f0f\u4f1a\u8bb0\u5f55\u5ba2\u6237\u7aef\u5bf9\u670d\u52a1\u5668\u7684\u6bcf\u4e00\u6b21\u5199\u64cd\u4f5c\u547d\u4ee4\uff0c\u5e76\u5c06\u8fd9\u4e9b\u5199\u64cd\u4f5c\u4ee5Redis\u534f\u8bae\u8ffd\u52a0\u4fdd\u5b58\u5230\u4ee5\u540e\u7f00\u4e3aaof\u6587\u4ef6\u672b\u5c3e\uff0c\u5728Redis\u670d\u52a1\u5668\u91cd\u542f\u65f6\uff0c\u4f1a\u52a0\u8f7d\u5e76\u8fd0\u884caof\u6587\u4ef6\u7684\u547d\u4ee4\uff0c\u4ee5\u8fbe\u5230\u6062\u590d\u6570\u636e\u7684\u76ee\u7684\u3002</p> <p>\u5f00\u542fAOF\u6301\u4e45\u5316\u65b9\u5f0f</p> <p>Redis\u9ed8\u8ba4\u4e0d\u5f00\u542fAOF\u6301\u4e45\u5316\u65b9\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f\u5e76\u8fdb\u884c\u66f4\u52a0\u8be6\u7ec6\u7684\u914d\u7f6e\uff0c\u5982\u4e0b\u9762\u7684redis.conf\u6587\u4ef6\uff1a</p> <pre><code># \u5f00\u542faof\u673a\u5236\nappendonly yes\n\n# aof\u6587\u4ef6\u540d\nappendfilename \"appendonly.aof\"\n\n# \u5199\u5165\u7b56\u7565,always\u8868\u793a\u6bcf\u4e2a\u5199\u64cd\u4f5c\u90fd\u4fdd\u5b58\u5230aof\u6587\u4ef6\u4e2d,\u4e5f\u53ef\u4ee5\u662feverysec\u6216no\nappendfsync always\n\n# \u9ed8\u8ba4\u4e0d\u91cd\u5199aof\u6587\u4ef6\nno-appendfsync-on-rewrite no\n\n# \u4fdd\u5b58\u76ee\u5f55\ndir ~/redis/\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#1_2","title":"1.\u4e09\u79cd\u5199\u5165\u7b56\u7565","text":"<p>\u5728\u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7appendfsync\u9009\u9879\u6307\u5b9a\u5199\u5165\u7b56\u7565,\u6709\u4e09\u4e2a\u9009\u9879</p> <pre><code>appendfsync always\n# appendfsync everysec\n# appendfsync no\n</code></pre>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#11-always","title":"1.1 always","text":"<p>\u5ba2\u6237\u7aef\u7684\u6bcf\u4e00\u4e2a\u5199\u64cd\u4f5c\u90fd\u4fdd\u5b58\u5230aof\u6587\u4ef6\u5f53\uff0c\u8fd9\u79cd\u7b56\u7565\u5f88\u5b89\u5168\uff0c\u4f46\u662f\u6bcf\u4e2a\u5199\u8bf7\u6ce8\u90fd\u6709IO\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e5f\u5f88\u6162\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#12-everysec","title":"1.2 everysec","text":"<p>appendfsync\u7684\u9ed8\u8ba4\u5199\u5165\u7b56\u7565\uff0c\u6bcf\u79d2\u5199\u5165\u4e00\u6b21aof\u6587\u4ef6\uff0c\u56e0\u6b64\uff0c\u6700\u591a\u53ef\u80fd\u4f1a\u4e22\u59311s\u7684\u6570\u636e\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#13-no","title":"1.3 no","text":"<p>Redis\u670d\u52a1\u5668\u4e0d\u8d1f\u8d23\u5199\u5165aof\uff0c\u800c\u662f\u4ea4\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u5904\u7406\u4ec0\u4e48\u65f6\u5019\u5199\u5165aof\u6587\u4ef6\u3002\u66f4\u5feb\uff0c\u4f46\u4e5f\u662f\u6700\u4e0d\u5b89\u5168\u7684\u9009\u62e9\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#2aof","title":"2.AOF\u6587\u4ef6\u91cd\u5199","text":"<p>AOF\u5c06\u5ba2\u6237\u7aef\u7684\u6bcf\u4e00\u4e2a\u5199\u64cd\u4f5c\u90fd\u8ffd\u52a0\u5230aof\u6587\u4ef6\u672b\u5c3e\uff0c\u6bd4\u5982\u5bf9\u4e00\u4e2akey\u591a\u6b21\u6267\u884cincr\u547d\u4ee4\uff0c\u8fd9\u65f6\u5019\uff0caof\u4fdd\u5b58\u6bcf\u4e00\u6b21\u547d\u4ee4\u5230aof\u6587\u4ef6\u4e2d\uff0caof\u6587\u4ef6\u4f1a\u53d8\u5f97\u975e\u5e38\u5927\u3002</p> <pre><code>incr num 1\nincr num 2\nincr num 3\nincr num 4\nincr num 5\nincr num 6\n...\nincr num 100000\n</code></pre> <p>aof\u6587\u4ef6\u592a\u5927\uff0c\u52a0\u8f7daof\u6587\u4ef6\u6062\u590d\u6570\u636e\u65f6\uff0c\u5c31\u4f1a\u975e\u5e38\u6162\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis\u652f\u6301aof\u6587\u4ef6\u91cd\u5199\uff0c\u901a\u8fc7\u91cd\u5199aof\uff0c\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u6062\u590d\u5f53\u524d\u6570\u636e\u7684\u6700\u5c11\u547d\u4ee4\u96c6\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u90a3\u4e48\u591a\u6761\u547d\u4ee4\uff0c\u53ef\u4ee5\u91cd\u5199\u4e3a\uff1a</p> <pre><code>set num 100000\n</code></pre> <p>aof\u6587\u4ef6\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5e76\u4e0d\u662f\u50cf\u4e0a\u9762\u7684\u4f8b\u5b50\u4e00\u6837\uff0c\u76f4\u63a5\u4fdd\u5b58\u6bcf\u4e2a\u547d\u4ee4\uff0c\u800c\u4f7f\u7528Redis\u81ea\u5df1\u7684\u683c\u5f0f\uff0c\u4e0a\u9762\u53ea\u662f\u65b9\u4fbf\u6f14\u793a\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#3_1","title":"3.\u4e24\u79cd\u91cd\u5199\u65b9\u5f0f","text":"<p>\u901a\u8fc7\u5728redis.conf\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u9009\u9879no-appendfsync-on-rewrite\u53ef\u4ee5\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u91cd\u5199\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u5728\u6bcf\u6b21fsync\u65f6\u90fd\u91cd\u5199\uff0c\u5f71\u54cd\u670d\u52a1\u5668\u6027\u4ee5\uff0c\u56e0\u6b64\u9ed8\u8ba4\u503c\u4e3ano\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\u3002</p> <pre><code># \u9ed8\u8ba4\u4e0d\u91cd\u5199aof\u6587\u4ef6\nno-appendfsync-on-rewrite no\n</code></pre> <p>\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001bgrewriteaof\u547d\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u8ba9\u670d\u52a1\u5668\u8fdb\u884cAOF\u91cd\u5199\u3002</p> <pre><code># \u8ba9\u670d\u52a1\u5668\u5f02\u6b65\u91cd\u5199\u8ffd\u52a0aof\u6587\u4ef6\u547d\u4ee4\n&gt; bgrewriteaof\n</code></pre> <p>AOF\u91cd\u5199\u65b9\u5f0f\u4e5f\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u5373\u5982\u679c\u8981\u5199\u5165aof\u6587\u4ef6\uff0c\u5219Redis\u4e3b\u8fdb\u7a0b\u4f1aforks\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u5904\u7406\u3002</p> <p>\u91cd\u5199aof\u6587\u4ef6\u7684\u597d\u5904</p> <ul> <li>\u538b\u7f29aof\u6587\u4ef6\uff0c\u51cf\u5c11\u78c1\u76d8\u5360\u7528\u91cf\u3002</li> <li>\u5c06aof\u7684\u547d\u4ee4\u538b\u7f29\u4e3a\u6700\u5c0f\u547d\u4ee4\u96c6\uff0c\u52a0\u5feb\u4e86\u6570\u636e\u6062\u590d\u7684\u901f\u5ea6\u3002</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#4aof","title":"4.AOF\u6587\u4ef6\u635f\u574f","text":"<p>\u5728\u5199\u5165aof\u65e5\u5fd7\u6587\u4ef6\u65f6\uff0c\u5982\u679cRedis\u670d\u52a1\u5668\u5b95\u673a\uff0c\u5219aof\u65e5\u5fd7\u6587\u4ef6\u6587\u4ef6\u4f1a\u51fa\u683c\u5f0f\u9519\u8bef\uff0c\u5728\u91cd\u542fRedis\u670d\u52a1\u5668\u65f6\uff0cRedis\u670d\u52a1\u5668\u4f1a\u62d2\u7edd\u8f7d\u5165\u8fd9\u4e2aaof\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u4fee\u590daof\u5e76\u6062\u590d\u6570\u636e\u3002</p> <p>1\u3001\u5907\u4efd\u73b0\u5728aof\u6587\u4ef6\uff0c\u4ee5\u9632\u4e07\u4e00\u3002</p> <p>2\u3001\u4f7f\u7528redis-check-aof\u547d\u4ee4\u4fee\u590daof\u6587\u4ef6\uff0c\u8be5\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code># \u4fee\u590daof\u65e5\u5fd7\u6587\u4ef6\n$ redis-check-aof -fix file.aof\n</code></pre> <p>3\u3001\u91cd\u542fRedis\u670d\u52a1\u5668\uff0c\u52a0\u8f7d\u5df2\u7ecf\u4fee\u590d\u7684aof\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#5aof","title":"5.AOF\u7684\u4f18\u70b9","text":"<ul> <li>AOF\u53ea\u662f\u8ffd\u52a0\u65e5\u5fd7\u6587\u4ef6\uff0c\u56e0\u6b64\u5bf9\u670d\u52a1\u5668\u6027\u80fd\u5f71\u54cd\u8f83\u5c0f\uff0c\u901f\u5ea6\u6bd4RDB\u8981\u5feb\uff0c\u6d88\u8017\u7684\u5185\u5b58\u8f83\u5c11\u3002</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#6aof","title":"6.AOF\u7684\u7f3a\u70b9","text":"<ul> <li>AOF\u65b9\u5f0f\u751f\u6210\u7684\u65e5\u5fd7\u6587\u4ef6\u592a\u5927\uff0c\u5373\u4f7f\u901a\u8fc7AFO\u91cd\u5199\uff0c\u6587\u4ef6\u4f53\u79ef\u4ecd\u7136\u5f88\u5927\u3002</li> <li>\u6062\u590d\u6570\u636e\u7684\u901f\u5ea6\u6bd4RDB\u6162</li> </ul>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#rdbaof_1","title":"\u25cf \u9009\u62e9RDB\u8fd8\u662fAOF\u5462\uff1f","text":"<p>\u901a\u8fc7\u4e0a\u9762\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u4e86\u89e3\u4e86RDB\u4e0eAOF\u5404\u81ea\u7684\u4f18\u70b9\u4e0e\u7f3a\u70b9\uff0c\u5230\u5e95\u8981\u5982\u4f55\u9009\u62e9\u5462\uff1f</p> <p>\u901a\u8fc7\u4e0b\u9762\u7684\u8868\u793a\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u51e0\u4e2a\u65b9\u9762\u5bf9\u6bd4\u4e00\u4e0bRDB\u4e0eAOF\uff1a</p> <p>\u200b       \u5728\u5e94\u7528\u65f6\uff0c\u8981\u6839\u672c\u81ea\u5df1\u7684\u5b9e\u9645\u9700\u6c42\uff0c\u9009\u62e9RDB\u6216\u8005AOF\uff0c\u5176\u5b9e\uff0c\u5982\u679c\u60f3\u8981\u6570\u636e\u8db3\u591f\u5b89\u5168\uff0c\u53ef\u4ee5\u4e24\u79cd\u65b9\u5f0f\u90fd\u5f00\u542f\uff0c\u4f46\u4e24\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\u540c\u65f6\u8fdb\u884cIO\u64cd\u4f5c\uff0c\u4f1a\u4e25\u91cd\u5f71\u54cd\u670d\u52a1\u5668\u6027\u80fd\uff0c\u56e0\u6b64\u6709\u65f6\u5019\u4e0d\u5f97\u4e0d\u505a\u51fa\u9009\u62e9\u3002</p> <p>\u5f53RDB\u4e0eAOF\u4e24\u79cd\u65b9\u5f0f\u90fd\u5f00\u542f\u65f6\uff0cRedis\u4f1a\u4f18\u5148\u4f7f\u7528AOF\u65e5\u5fd7\u6765\u6062\u590d\u6570\u636e\uff0c\u56e0\u4e3aAOF\u4fdd\u5b58\u7684\u6587\u4ef6\u6bd4RDB\u6587\u4ef6\u66f4\u5b8c\u6574\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#rdbaof_2","title":"\u25cf RDB/AOF\u5c0f\u7ed3","text":"<p>Redis\u7684\u6301\u4e45\u5316\u673a\u5236\u7684\u77e5\u8bc6\uff0c\u5176\u5b9e\uff0c\u5982\u679c\u4f60\u53ea\u662f\u5355\u7eaf\u628aRedis\u4f5c\u4e3a\u7f13\u5b58\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u53ef\u4ee5\u5b8c\u5168\u4e0d\u7528\u8003\u8651\u6301\u4e45\u5316\uff1b</p> <p>\u4f46\u662f\uff0c\u5728\u5982\u4eca\u7684\u5927\u591a\u6570\u670d\u52a1\u5668\u67b6\u6784\u4e2d\uff0cRedis\u53ea\u662f\u626e\u6f14\u4e00\u4e2a\u7f13\u5b58\u670d\u52a1\u5668\u7684\u89d2\u8272\uff0c\u8fd8\u53ef\u4ee5\u4f5c\u4e3a\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u6211\u4eec\u7684\u4e1a\u52a1\u6570\u636e\uff0c\u6b64\u65f6\uff0c\u6211\u4eec\u5219\u9700\u8981\u597d\u597d\u4e86\u89e3\u6709\u5173Redis\u6301\u4e45\u5316\u7b56\u7565\u7684\u533a\u522b\u4e0e\u9009\u62e9\u3002</p>"},{"location":"mds/%E6%95%B0%E6%8D%AE%E5%BA%93-Note/redisStdudy/#redis_4","title":"\u4e5d\u3001Redis\u914d\u7f6e\u53c2\u6570","text":"<p>\u53c2\u8003\u94fe\u63a5\uff1ahttps://blog.csdn.net/admans/article/details/101981770</p> \u5e8f\u53f7 \u914d\u7f6e\u9879 \u8bf4\u660e 1 daemonize no Redis  \u9ed8\u8ba4\u4e0d\u662f\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u914d\u7f6e\u9879\u4fee\u6539\uff0c\u4f7f\u7528 yes \u542f\u7528\u5b88\u62a4\u8fdb\u7a0b\uff08Windows \u4e0d\u652f\u6301\u5b88\u62a4\u7ebf\u7a0b\u7684\u914d\u7f6e\u4e3a no \uff09 2 pidfile  /var/run/redis.pid \u5f53 Redis  \u4ee5\u5b88\u62a4\u8fdb\u7a0b\u65b9\u5f0f\u8fd0\u884c\u65f6\uff0cRedis \u9ed8\u8ba4\u4f1a\u628a pid \u5199\u5165 /var/run/redis.pid \u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7 pidfile \u6307\u5b9a 3 port 6379 \u6307\u5b9a Redis \u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a  6379\uff0c\u4f5c\u8005\u5728\u81ea\u5df1\u7684\u4e00\u7bc7\u535a\u6587\u4e2d\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u9009\u7528 6379 \u4f5c\u4e3a\u9ed8\u8ba4\u7aef\u53e3\uff0c\u56e0\u4e3a 6379 \u5728\u624b\u673a\u6309\u952e\u4e0a MERZ \u5bf9\u5e94\u7684\u53f7\u7801\uff0c\u800c MERZ \u53d6\u81ea\u610f\u5927\u5229\u6b4c\u5973  Alessia Merz \u7684\u540d\u5b57 4 bind 127.0.0.1 \u7ed1\u5b9a\u7684\u4e3b\u673a\u5730\u5740 5 timeout 300 \u5f53\u5ba2\u6237\u7aef\u95f2\u7f6e\u591a\u957f\u65f6\u95f4\u540e\u5173\u95ed\u8fde\u63a5\uff0c\u5982\u679c\u6307\u5b9a\u4e3a  0\uff0c\u8868\u793a\u5173\u95ed\u8be5\u529f\u80fd 6 loglevel notice \u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b\uff0cRedis  \u603b\u5171\u652f\u6301\u56db\u4e2a\u7ea7\u522b\uff1adebug\u3001verbose\u3001notice\u3001warning\uff0c\u9ed8\u8ba4\u4e3a notice 7 logfile stdout \u65e5\u5fd7\u8bb0\u5f55\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u4e3a\u6807\u51c6\u8f93\u51fa\uff0c\u5982\u679c\u914d\u7f6e  Redis \u4e3a\u5b88\u62a4\u8fdb\u7a0b\u65b9\u5f0f\u8fd0\u884c\uff0c\u800c\u8fd9\u91cc\u53c8\u914d\u7f6e\u4e3a\u65e5\u5fd7\u8bb0\u5f55\u65b9\u5f0f\u4e3a\u6807\u51c6\u8f93\u51fa\uff0c\u5219\u65e5\u5fd7\u5c06\u4f1a\u53d1\u9001\u7ed9 /dev/null 8 databases 16 \u8bbe\u7f6e\u6570\u636e\u5e93\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e3a0\uff0c\u53ef\u4ee5\u4f7f\u7528SELECT  \u547d\u4ee4\u5728\u8fde\u63a5\u4e0a\u6307\u5b9a\u6570\u636e\u5e93id 9 save  \u6307\u5b9a\u5728\u591a\u957f\u65f6\u95f4\u5185\uff0c\u6709\u591a\u5c11\u6b21\u66f4\u65b0\u64cd\u4f5c\uff0c\u5c31\u5c06\u6570\u636e\u540c\u6b65\u5230\u6570\u636e\u6587\u4ef6\uff0c\u53ef\u4ee5\u591a\u4e2a\u6761\u4ef6\u914d\u5408 Redis  \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4e2d\u63d0\u4f9b\u4e86\u4e09\u4e2a\u6761\u4ef6\uff1a save 900 1 save 300 10 save 60 10000 \u5206\u522b\u8868\u793a 900 \u79d2\uff0815  \u5206\u949f\uff09\u5185\u6709 1 \u4e2a\u66f4\u6539\uff0c300 \u79d2\uff085 \u5206\u949f\uff09\u5185\u6709 10 \u4e2a\u66f4\u6539\u4ee5\u53ca 60 \u79d2\u5185\u6709 10000 \u4e2a\u66f4\u6539\u3002 10 rdbcompression yes \u6307\u5b9a\u5b58\u50a8\u81f3\u672c\u5730\u6570\u636e\u5e93\u65f6\u662f\u5426\u538b\u7f29\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a  yes\uff0cRedis \u91c7\u7528 LZF \u538b\u7f29\uff0c\u5982\u679c\u4e3a\u4e86\u8282\u7701 CPU \u65f6\u95f4\uff0c\u53ef\u4ee5\u5173\u95ed\u8be5\u9009\u9879\uff0c\u4f46\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u6587\u4ef6\u53d8\u7684\u5de8\u5927 11 dbfilename dump.rdb \u6307\u5b9a\u672c\u5730\u6570\u636e\u5e93\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u503c\u4e3a  dump.rdb 12 dir ./ \u6307\u5b9a\u672c\u5730\u6570\u636e\u5e93\u5b58\u653e\u76ee\u5f55 13 slaveof   \u8bbe\u7f6e\u5f53\u672c\u673a\u4e3a slav \u670d\u52a1\u65f6\uff0c\u8bbe\u7f6e  master \u670d\u52a1\u7684 IP \u5730\u5740\u53ca\u7aef\u53e3\uff0c\u5728 Redis \u542f\u52a8\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u4ece master \u8fdb\u884c\u6570\u636e\u540c\u6b65 14 masterauth   \u5f53 master  \u670d\u52a1\u8bbe\u7f6e\u4e86\u5bc6\u7801\u4fdd\u62a4\u65f6\uff0cslav \u670d\u52a1\u8fde\u63a5 master \u7684\u5bc6\u7801 15 requirepass foobared \u8bbe\u7f6e Redis  \u8fde\u63a5\u5bc6\u7801\uff0c\u5982\u679c\u914d\u7f6e\u4e86\u8fde\u63a5\u5bc6\u7801\uff0c\u5ba2\u6237\u7aef\u5728\u8fde\u63a5 Redis \u65f6\u9700\u8981\u901a\u8fc7 AUTH  \u547d\u4ee4\u63d0\u4f9b\u5bc6\u7801\uff0c\u9ed8\u8ba4\u5173\u95ed 16 maxclients 128 \u8bbe\u7f6e\u540c\u4e00\u65f6\u95f4\u6700\u5927\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\uff0c\u9ed8\u8ba4\u65e0\u9650\u5236\uff0cRedis  \u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u4e3a Redis \u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6700\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\uff0c\u5982\u679c\u8bbe\u7f6e maxclients  0\uff0c\u8868\u793a\u4e0d\u4f5c\u9650\u5236\u3002\u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u5230\u8fbe\u9650\u5236\u65f6\uff0cRedis \u4f1a\u5173\u95ed\u65b0\u7684\u8fde\u63a5\u5e76\u5411\u5ba2\u6237\u7aef\u8fd4\u56de max number of clients reached \u9519\u8bef\u4fe1\u606f 17 maxmemory   \u6307\u5b9a Redis \u6700\u5927\u5185\u5b58\u9650\u5236\uff0cRedis  \u5728\u542f\u52a8\u65f6\u4f1a\u628a\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u8fbe\u5230\u6700\u5927\u5185\u5b58\u540e\uff0cRedis \u4f1a\u5148\u5c1d\u8bd5\u6e05\u9664\u5df2\u5230\u671f\u6216\u5373\u5c06\u5230\u671f\u7684 Key\uff0c\u5f53\u6b64\u65b9\u6cd5\u5904\u7406  \u540e\uff0c\u4ecd\u7136\u5230\u8fbe\u6700\u5927\u5185\u5b58\u8bbe\u7f6e\uff0c\u5c06\u65e0\u6cd5\u518d\u8fdb\u884c\u5199\u5165\u64cd\u4f5c\uff0c\u4f46\u4ecd\u7136\u53ef\u4ee5\u8fdb\u884c\u8bfb\u53d6\u64cd\u4f5c\u3002Redis \u65b0\u7684 vm \u673a\u5236\uff0c\u4f1a\u628a Key \u5b58\u653e\u5185\u5b58\uff0cValue \u4f1a\u5b58\u653e\u5728  swap \u533a 18 appendonly no \u6307\u5b9a\u662f\u5426\u5728\u6bcf\u6b21\u66f4\u65b0\u64cd\u4f5c\u540e\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\uff0cRedis  \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5f02\u6b65\u7684\u628a\u6570\u636e\u5199\u5165\u78c1\u76d8\uff0c\u5982\u679c\u4e0d\u5f00\u542f\uff0c\u53ef\u80fd\u4f1a\u5728\u65ad\u7535\u65f6\u5bfc\u81f4\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u6570\u636e\u4e22\u5931\u3002\u56e0\u4e3a redis \u672c\u8eab\u540c\u6b65\u6570\u636e\u6587\u4ef6\u662f\u6309\u4e0a\u9762 save  \u6761\u4ef6\u6765\u540c\u6b65\u7684\uff0c\u6240\u4ee5\u6709\u7684\u6570\u636e\u4f1a\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u53ea\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\u3002\u9ed8\u8ba4\u4e3a no 19 appendfilename  appendonly.aof \u6307\u5b9a\u66f4\u65b0\u65e5\u5fd7\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u4e3a  appendonly.aof 20 appendfsync everysec \u6307\u5b9a\u66f4\u65b0\u65e5\u5fd7\u6761\u4ef6\uff0c\u5171\u6709 3 \u4e2a\u53ef\u9009\u503c\uff1a no\uff1a\u8868\u793a\u7b49\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u6570\u636e\u7f13\u5b58\u540c\u6b65\u5230\u78c1\u76d8\uff08\u5feb\uff09 always\uff1a\u8868\u793a\u6bcf\u6b21\u66f4\u65b0\u64cd\u4f5c\u540e\u624b\u52a8\u8c03\u7528  fsync() \u5c06\u6570\u636e\u5199\u5230\u78c1\u76d8\uff08\u6162\uff0c\u5b89\u5168\uff09 everysec\uff1a\u8868\u793a\u6bcf\u79d2\u540c\u6b65\u4e00\u6b21\uff08\u6298\u4e2d\uff0c\u9ed8\u8ba4\u503c\uff09 21 vm-enabled no \u6307\u5b9a\u662f\u5426\u542f\u7528\u865a\u62df\u5185\u5b58\u673a\u5236\uff0c\u9ed8\u8ba4\u503c\u4e3a  no\uff0c\u7b80\u5355\u7684\u4ecb\u7ecd\u4e00\u4e0b\uff0cVM \u673a\u5236\u5c06\u6570\u636e\u5206\u9875\u5b58\u653e\uff0c\u7531 Redis \u5c06\u8bbf\u95ee\u91cf\u8f83\u5c11\u7684\u9875\u5373\u51b7\u6570\u636e swap  \u5230\u78c1\u76d8\u4e0a\uff0c\u8bbf\u95ee\u591a\u7684\u9875\u9762\u7531\u78c1\u76d8\u81ea\u52a8\u6362\u51fa\u5230\u5185\u5b58\u4e2d\uff08\u5728\u540e\u9762\u7684\u6587\u7ae0\u6211\u4f1a\u4ed4\u7ec6\u5206\u6790 Redis \u7684 VM \u673a\u5236\uff09 22 vm-swap-file  /tmp/redis.swap \u865a\u62df\u5185\u5b58\u6587\u4ef6\u8def\u5f84\uff0c\u9ed8\u8ba4\u503c\u4e3a  /tmp/redis.swap\uff0c\u4e0d\u53ef\u591a\u4e2a Redis \u5b9e\u4f8b\u5171\u4eab 23 vm-max-memory 0 \u5c06\u6240\u6709\u5927\u4e8e vm-max-memory  \u7684\u6570\u636e\u5b58\u5165\u865a\u62df\u5185\u5b58\uff0c\u65e0\u8bba vm-max-memory \u8bbe\u7f6e\u591a\u5c0f\uff0c\u6240\u6709\u7d22\u5f15\u6570\u636e\u90fd\u662f\u5185\u5b58\u5b58\u50a8\u7684(Redis \u7684\u7d22\u5f15\u6570\u636e \u5c31\u662f keys)\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53  vm-max-memory \u8bbe\u7f6e\u4e3a 0 \u7684\u65f6\u5019\uff0c\u5176\u5b9e\u662f\u6240\u6709 value \u90fd\u5b58\u5728\u4e8e\u78c1\u76d8\u3002\u9ed8\u8ba4\u503c\u4e3a 0 24 vm-page-size 32 Redis swap \u6587\u4ef6\u5206\u6210\u4e86\u5f88\u591a\u7684  page\uff0c\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u4fdd\u5b58\u5728\u591a\u4e2a page \u4e0a\u9762\uff0c\u4f46\u4e00\u4e2a page \u4e0a\u4e0d\u80fd\u88ab\u591a\u4e2a\u5bf9\u8c61\u5171\u4eab\uff0cvm-page-size \u662f\u8981\u6839\u636e\u5b58\u50a8\u7684  \u6570\u636e\u5927\u5c0f\u6765\u8bbe\u5b9a\u7684\uff0c\u4f5c\u8005\u5efa\u8bae\u5982\u679c\u5b58\u50a8\u5f88\u591a\u5c0f\u5bf9\u8c61\uff0cpage \u5927\u5c0f\u6700\u597d\u8bbe\u7f6e\u4e3a 32 \u6216\u8005 64bytes\uff1b\u5982\u679c\u5b58\u50a8\u5f88\u5927\u5927\u5bf9\u8c61\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684  page\uff0c\u5982\u679c\u4e0d\u786e\u5b9a\uff0c\u5c31\u4f7f\u7528\u9ed8\u8ba4\u503c 25 vm-pages 134217728 \u8bbe\u7f6e swap \u6587\u4ef6\u4e2d\u7684 page  \u6570\u91cf\uff0c\u7531\u4e8e\u9875\u8868\uff08\u4e00\u79cd\u8868\u793a\u9875\u9762\u7a7a\u95f2\u6216\u4f7f\u7528\u7684 bitmap\uff09\u662f\u5728\u653e\u5728\u5185\u5b58\u4e2d\u7684\uff0c\uff0c\u5728\u78c1\u76d8\u4e0a\u6bcf 8 \u4e2a pages \u5c06\u6d88\u8017 1byte \u7684\u5185\u5b58\u3002 26 vm-max-threads 4 \u8bbe\u7f6e\u8bbf\u95eeswap\u6587\u4ef6\u7684\u7ebf\u7a0b\u6570,\u6700\u597d\u4e0d\u8981\u8d85\u8fc7\u673a\u5668\u7684\u6838\u6570,\u5982\u679c\u8bbe\u7f6e\u4e3a0,\u90a3\u4e48\u6240\u6709\u5bf9swap\u6587\u4ef6\u7684\u64cd\u4f5c\u90fd\u662f\u4e32\u884c\u7684\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u6bd4\u8f83\u957f\u65f6\u95f4\u7684\u5ef6\u8fdf\u3002\u9ed8\u8ba4\u503c\u4e3a4 27 glueoutputbuf yes \u8bbe\u7f6e\u5728\u5411\u5ba2\u6237\u7aef\u5e94\u7b54\u65f6\uff0c\u662f\u5426\u628a\u8f83\u5c0f\u7684\u5305\u5408\u5e76\u4e3a\u4e00\u4e2a\u5305\u53d1\u9001\uff0c\u9ed8\u8ba4\u4e3a\u5f00\u542f 28 hash-max-zipmap-entries  64 \u6307\u5b9a\u5728\u8d85\u8fc7\u4e00\u5b9a\u7684\u6570\u91cf\u6216\u8005\u6700\u5927\u7684\u5143\u7d20\u8d85\u8fc7\u67d0\u4e00\u4e34\u754c\u503c\u65f6\uff0c\u91c7\u7528\u4e00\u79cd\u7279\u6b8a\u7684\u54c8\u5e0c\u7b97\u6cd5 hash-max-zipmap-value  512 29 activerehashing yes \u6307\u5b9a\u662f\u5426\u6fc0\u6d3b\u91cd\u7f6e\u54c8\u5e0c\uff0c\u9ed8\u8ba4\u4e3a\u5f00\u542f\uff08\u540e\u9762\u5728\u4ecb\u7ecd  Redis \u7684\u54c8\u5e0c\u7b97\u6cd5\u65f6\u5177\u4f53\u4ecb\u7ecd\uff09 30 include  /path/to/local.conf \u6307\u5b9a\u5305\u542b\u5176\u5b83\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e3b\u673a\u4e0a\u591a\u4e2aRedis\u5b9e\u4f8b\u4e4b\u95f4\u4f7f\u7528\u540c\u4e00\u4efd\u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u540c\u65f6\u5404\u4e2a\u5b9e\u4f8b\u53c8\u62e5\u6709\u5404\u81ea\u72ec\u7acb\u7684\u914d\u7f6e"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/","title":"HTTP\u534f\u8bae\u5256\u6790","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_1","title":"\u4e00\u3001\u524d\u4e16\u4eca\u751f","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http11","title":"HTTP/1.1","text":"<p>1989\u5e74\uff0c\u4efb\u804c\u4e8e\u6b27\u6d32\u6838\u5b50\u7814\u7a76\u4e2d\u5fc3\uff08CERN\uff09\u7684\u8482\u59c6\u00b7\u4f2f\u7eb3\u65af-\u674e\uff08Tim Berners-Lee\uff09\u53d1\u8868\u4e86\u4e00\u7bc7\u8bba\u6587\uff0c\u63d0\u51fa\u4e86\u5728\u4e92\u8054\u7f51\u4e0a\u6784\u5efa\u8d85\u94fe\u63a5\u6587\u6863\u7cfb\u7edf\u7684\u6784\u60f3\u3002</p> <p>\u8fd9\u7bc7\u8bba\u6587\u4e2d\u4ed6\u786e\u7acb\u4e86\u4e09\u9879\u5173\u952e\u6280\u672f\u3002</p> <p>URI\uff1a\u5373\u7edf\u4e00\u8d44\u6e90\u6807\u8bc6\u7b26\uff0c\u4f5c\u4e3a\u4e92\u8054\u7f51\u4e0a\u8d44\u6e90\u7684\u552f\u4e00\u8eab\u4efd\uff1b HTML\uff1a\u5373\u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00\uff0c\u63cf\u8ff0\u8d85\u6587\u672c\u6587\u6863\uff1b HTTP\uff1a\u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\uff0c\u7528\u6765\u4f20\u8f93\u8d85\u6587\u672c\u3002</p> <p>\u8fd9\u4e09\u9879\u6280\u672f\u5728\u5982\u4eca\u7684\u6211\u4eec\u770b\u6765\u5df2\u7ecf\u662f\u7a00\u677e\u5e73\u5e38\uff0c\u4f46\u5728\u5f53\u65f6\u5374\u662f\u4e86\u4e0d\u5f97\u7684\u5927\u53d1\u660e\u3002\u57fa\u4e8e\u5b83\u4eec\uff0c\u5c31\u53ef\u4ee5\u628a\u8d85\u6587\u672c\u7cfb\u7edf\u5b8c\u7f8e\u5730\u8fd0\u884c\u5728\u4e92\u8054\u7f51\u4e0a\uff0c\u8ba9\u5404\u5730\u7684\u4eba\u4eec\u80fd\u591f\u81ea\u7531\u5730\u5171\u4eab\u4fe1\u606f\uff0c\u8482\u59c6\u628a\u8fd9\u4e2a\u7cfb\u7edf\u79f0\u4e3a\u201c\u4e07\u7ef4\u7f51\u201d\uff08World Wide Web\uff09\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u73b0\u5728\u6240\u719f\u77e5\u7684Web\u3002</p> <p>\u6240\u4ee5\u5728\u8fd9\u4e00\u5e74\uff0c\u6211\u4eec\u7684\u82f1\u96c4\u201cHTTP\u201d\u8bde\u751f\u4e86\uff0c\u4ece\u6b64\u5f00\u59cb\u4e86\u5b83\u4f1f\u5927\u7684\u5f81\u9014\u3002</p> <p>HTTP/1.0\u7248\u672c\u57281996\u5e74\u6b63\u5f0f\u53d1\u5e03\u3002\u5b83\u5728\u591a\u65b9\u9762\u589e\u5f3a\u4e860.9\u7248\uff0c\u5f62\u5f0f\u4e0a\u5df2\u7ecf\u548c\u6211\u4eec\u73b0\u5728\u7684HTTP\u5dee\u522b\u4e0d\u5927\u4e86\uff0c\u4f8b\u5982\uff1a</p> <p>\u589e\u52a0\u4e86HEAD\u3001POST\u7b49\u65b0\u65b9\u6cd5\uff1b \u589e\u52a0\u4e86\u54cd\u5e94\u72b6\u6001\u7801\uff0c\u6807\u8bb0\u53ef\u80fd\u7684\u9519\u8bef\u539f\u56e0\uff1b \u5f15\u5165\u4e86\u534f\u8bae\u7248\u672c\u53f7\u6982\u5ff5\uff1b \u5f15\u5165\u4e86HTTP Header\uff08\u5934\u90e8\uff09\u7684\u6982\u5ff5\uff0c\u8ba9HTTP\u5904\u7406\u8bf7\u6c42\u548c\u54cd\u5e94\u66f4\u52a0\u7075\u6d3b\uff1b \u4f20\u8f93\u7684\u6570\u636e\u4e0d\u518d\u4ec5\u9650\u4e8e\u6587\u672c\u3002</p> <p>\u4f46HTTP/1.0\u5e76\u4e0d\u662f\u4e00\u4e2a\u201c\u6807\u51c6\u201d\uff0c\u53ea\u662f\u8bb0\u5f55\u5df2\u6709\u5b9e\u8df5\u548c\u6a21\u5f0f\u7684\u4e00\u4efd\u53c2\u8003\u6587\u6863\uff0c\u4e0d\u5177\u6709\u5b9e\u9645\u7684\u7ea6\u675f\u529b\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2a\u201c\u5907\u5fd8\u5f55\u201d\u3002</p> <p>\u6240\u4ee5HTTP/1.0\u7684\u53d1\u5e03\u5bf9\u4e8e\u5f53\u65f6\u6b63\u5728\u84ec\u52c3\u53d1\u5c55\u7684\u4e92\u8054\u7f51\u6765\u8bf4\u5e76\u6ca1\u6709\u592a\u5927\u7684\u5b9e\u9645\u610f\u4e49\uff0c\u5404\u65b9\u52bf\u529b\u4ecd\u7136\u6309\u7167\u81ea\u5df1\u7684\u610f\u56fe\u7ee7\u7eed\u5728\u5e02\u573a\u4e0a\u594b\u529b\u62fc\u6740\u3002</p> <p>\u5728\u201c\u6d4f\u89c8\u5668\u5927\u6218\u201d\u7ed3\u675f\u4e4b\u540e\u76841999\u5e74\uff0cHTTP/1.1\u53d1\u5e03\u4e86RFC\u6587\u6863\uff0c\u7f16\u53f7\u4e3a2616\uff0c\u6b63\u5f0f\u786e\u7acb\u4e86\u5ef6\u7eed\u5341\u4f59\u5e74\u7684\u4f20\u5947\u3002</p> <p>\u4ece\u7248\u672c\u53f7\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\uff0cHTTP/1.1\u662f\u5bf9HTTP/1.0\u7684\u5c0f\u5e45\u5ea6\u4fee\u6b63\u3002\u4f46\u4e00\u4e2a\u91cd\u8981\u7684\u533a\u522b\u662f\uff1a\u5b83\u662f\u4e00\u4e2a\u201c\u6b63\u5f0f\u7684\u6807\u51c6\u201d\uff0c\u800c\u4e0d\u662f\u4e00\u4efd\u53ef\u6709\u53ef\u65e0\u7684\u201c\u53c2\u8003\u6587\u6863\u201d\u3002\u8fd9\u610f\u5473\u7740\u4eca\u540e\u4e92\u8054\u7f51\u4e0a\u6240\u6709\u7684\u6d4f\u89c8\u5668\u3001\u670d\u52a1\u5668\u3001\u7f51\u5173\u3001\u4ee3\u7406\u7b49\u7b49\uff0c\u53ea\u8981\u7528\u5230HTTP\u534f\u8bae\uff0c\u5c31\u5fc5\u987b\u4e25\u683c\u9075\u5b88\u8fd9\u4e2a\u6807\u51c6\uff0c\u76f8\u5f53\u4e8e\u662f\u4e92\u8054\u7f51\u4e16\u754c\u7684\u4e00\u4e2a\u201c\u7acb\u6cd5\u201d\u3002</p> <p>\u4e0d\u8fc7\uff0c\u8bf4HTTP/1.1\u662f\u201c\u5c0f\u5e45\u5ea6\u4fee\u6b63\u201d\u4e5f\u4e0d\u592a\u786e\u5207\uff0c\u5b83\u8fd8\u662f\u6709\u5f88\u591a\u5b9e\u8d28\u6027\u8fdb\u6b65\u7684\u3002\u6bd5\u7adf\u7ecf\u8fc7\u4e86\u591a\u5e74\u7684\u5b9e\u6218\u68c0\u9a8c\uff0c\u6bd4\u8d770.9/1.0\u5c11\u4e86\u201c\u5b66\u672f\u6c14\u201d\uff0c\u66f4\u52a0\u201c\u63a5\u5730\u6c14\u201d\uff0c\u540c\u65f6\u8868\u8ff0\u4e5f\u66f4\u52a0\u4e25\u8c28\u3002HTTP/1.1\u4e3b\u8981\u7684\u53d8\u66f4\u70b9\u6709\uff1a</p> <p>\u589e\u52a0\u4e86PUT\u3001DELETE\u7b49\u65b0\u7684\u65b9\u6cd5\uff1b \u589e\u52a0\u4e86\u7f13\u5b58\u7ba1\u7406\u548c\u63a7\u5236\uff1b \u660e\u786e\u4e86\u8fde\u63a5\u7ba1\u7406\uff0c\u5141\u8bb8\u6301\u4e45\u8fde\u63a5\uff1b \u5141\u8bb8\u54cd\u5e94\u6570\u636e\u5206\u5757\uff08chunked\uff09\uff0c\u5229\u4e8e\u4f20\u8f93\u5927\u6587\u4ef6\uff1b \u5f3a\u5236\u8981\u6c42Host\u5934\uff0c\u8ba9\u4e92\u8054\u7f51\u4e3b\u673a\u6258\u7ba1\u6210\u4e3a\u53ef\u80fd\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http2","title":"HTTP/2","text":"<p>\u6709\u4e00\u5929\uff0c\u641c\u7d22\u5de8\u5934Google\u5fcd\u4e0d\u4f4f\u4e86\uff0c\u51b3\u5b9a\u201c\u63ed\u7aff\u800c\u8d77\u201d\uff0c\u5c31\u50cf\u9a6c\u4e91\u8bf4\u7684\u201c\u5982\u679c\u94f6\u884c\u4e0d\u6539\u53d8\uff0c\u6211\u4eec\u5c31\u6539\u53d8\u94f6\u884c\u201d\u3002\u90a3\u4e48\uff0c\u5b83\u662f\u600e\u4e48\u201c\u9020\u53cd\u201d\u7684\u5462\uff1f</p> <p>Google\u9996\u5148\u5f00\u53d1\u4e86\u81ea\u5df1\u7684\u6d4f\u89c8\u5668Chrome\uff0c\u7136\u540e\u63a8\u51fa\u4e86\u65b0\u7684SPDY\u534f\u8bae\uff0c\u5e76\u5728Chrome\u91cc\u5e94\u7528\u4e8e\u81ea\u5bb6\u7684\u670d\u52a1\u5668\uff0c\u5982\u540c\u5341\u591a\u5e74\u524d\u7684\u7f51\u666f\u4e0e\u5fae\u8f6f\u4e00\u6837\uff0c\u4ece\u5b9e\u9645\u7684\u7528\u6237\u65b9\u6765\u201c\u5012\u903c\u201dHTTP\u534f\u8bae\u7684\u53d8\u9769\uff0c\u8fd9\u4e5f\u5f00\u542f\u4e86\u7b2c\u4e8c\u6b21\u7684\u201c\u6d4f\u89c8\u5668\u5927\u6218\u201d\u3002</p> <p>\u5386\u53f2\u518d\u6b21\u91cd\u6f14\uff0c\u4e0d\u8fc7\u8fd9\u6b21\u7684\u80dc\u5229\u8005\u662fGoogle\uff0cChrome\u76ee\u524d\u7684\u5168\u7403\u7684\u5360\u6709\u7387\u8d85\u8fc7\u4e8660%\u3002\u201c\u631f\u7528\u6237\u4ee5\u53f7\u4ee4\u5929\u4e0b\u201d\uff0cGoogle\u501f\u6b64\u987a\u52bf\u628aSPDY\u63a8\u4e0a\u4e86\u6807\u51c6\u7684\u5b9d\u5ea7\uff0c\u4e92\u8054\u7f51\u6807\u51c6\u5316\u7ec4\u7ec7\u4ee5SPDY\u4e3a\u57fa\u7840\u5f00\u59cb\u5236\u5b9a\u65b0\u7248\u672c\u7684HTTP\u534f\u8bae\uff0c\u6700\u7ec8\u57282015\u5e74\u53d1\u5e03\u4e86HTTP/2\uff0cRFC\u7f16\u53f77540\u3002</p> <p>HTTP/2\u7684\u5236\u5b9a\u5145\u5206\u8003\u8651\u4e86\u73b0\u4eca\u4e92\u8054\u7f51\u7684\u73b0\u72b6\uff1a\u5bbd\u5e26\u3001\u79fb\u52a8\u3001\u4e0d\u5b89\u5168\uff0c\u5728\u9ad8\u5ea6\u517c\u5bb9HTTP/1.1\u7684\u540c\u65f6\u5728\u6027\u80fd\u6539\u5584\u65b9\u9762\u505a\u4e86\u5f88\u5927\u52aa\u529b\uff0c\u4e3b\u8981\u7684\u7279\u70b9\u6709\uff1a</p> <p>\u4e8c\u8fdb\u5236\u534f\u8bae\uff0c\u4e0d\u518d\u662f\u7eaf\u6587\u672c\uff1b \u53ef\u53d1\u8d77\u591a\u4e2a\u8bf7\u6c42\uff0c\u5e9f\u5f03\u4e861.1\u91cc\u7684\u7ba1\u9053\uff1b \u4f7f\u7528\u4e13\u7528\u7b97\u6cd5\u538b\u7f29\u5934\u90e8\uff0c\u51cf\u5c11\u6570\u636e\u4f20\u8f93\u91cf\uff1b \u5141\u8bb8\u670d\u52a1\u5668\u4e3b\u52a8\u5411\u5ba2\u6237\u7aef\u63a8\u9001\u6570\u636e\uff1b \u589e\u5f3a\u4e86\u5b89\u5168\u6027\uff0c\u201c\u4e8b\u5b9e\u4e0a\u201d\u8981\u6c42\u52a0\u5bc6\u901a\u4fe1\u3002</p> <p>\u867d\u7136HTTP/2\u5230\u4eca\u5929\u5df2\u7ecf\u56db\u5c81\uff0c\u4e5f\u884d\u751f\u51fa\u4e86gRPC\u7b49\u65b0\u534f\u8bae\uff0c\u4f46\u7531\u4e8eHTTP/1.1\u5b9e\u5728\u662f\u592a\u8fc7\u7ecf\u5178\u548c\u5f3a\u52bf\uff0c\u76ee\u524d\u5b83\u7684\u666e\u53ca\u7387\u8fd8\u6bd4\u8f83\u4f4e\uff0c\u5927\u591a\u6570\u7f51\u7ad9\u4f7f\u7528\u7684\u4ecd\u7136\u8fd8\u662f20\u5e74\u524d\u7684HTTP/1.1\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http3","title":"HTTP/3","text":"<p>\u5728HTTP/2\u8fd8\u5904\u4e8e\u8349\u6848\u4e4b\u65f6\uff0cGoogle\u53c8\u53d1\u660e\u4e86\u4e00\u4e2a\u65b0\u7684\u534f\u8bae\uff0c\u53eb\u505aQUIC\uff0c\u800c\u4e14\u8fd8\u662f\u76f8\u540c\u7684\u201c\u5957\u8def\u201d\uff0c\u7ee7\u7eed\u5728Chrome\u548c\u81ea\u5bb6\u670d\u52a1\u5668\u91cc\u8bd5\u9a8c\u7740\u201c\u73a9\u201d\uff0c\u4f9d\u6258\u5b83\u7684\u5e9e\u5927\u7528\u6237\u91cf\u548c\u6570\u636e\u91cf\uff0c\u6301\u7eed\u5730\u63a8\u52a8QUIC\u534f\u8bae\u6210\u4e3a\u4e92\u8054\u7f51\u4e0a\u7684\u201c\u65e2\u6210\u4e8b\u5b9e\u201d\u3002</p> <p>\u201c\u529f\u592b\u4e0d\u8d1f\u6709\u5fc3\u4eba\u201d\uff0c\u5f53\u7136\u4e5f\u662f\u56e0\u4e3aQUIC\u786e\u5b9e\u81ea\u8eab\u7d20\u8d28\u8fc7\u786c\u3002</p> <p>\u5728\u53bb\u5e74\uff0c\u4e5f\u5c31\u662f2018\u5e74\uff0c\u4e92\u8054\u7f51\u6807\u51c6\u5316\u7ec4\u7ec7IETF\u63d0\u8bae\u5c06\u201cHTTP over QUIC\u201d\u66f4\u540d\u4e3a\u201cHTTP/3\u201d\u5e76\u83b7\u5f97\u6279\u51c6\uff0cHTTP/3\u6b63\u5f0f\u8fdb\u5165\u4e86\u6807\u51c6\u5316\u5236\u8ba2\u9636\u6bb5\uff0c\u4e5f\u8bb8\u4e24\u4e09\u5e74\u540e\u5c31\u4f1a\u6b63\u5f0f\u53d1\u5e03\uff0c\u5230\u65f6\u5019\u6211\u4eec\u5f88\u53ef\u80fd\u4f1a\u8df3\u8fc7HTTP/2\u76f4\u63a5\u8fdb\u5165HTTP/3\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cdn","title":"CDN","text":"<p>\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u662fHTTP\u534f\u8bae\u7684\u4e24\u4e2a\u7aef\u70b9\uff0c\u90a3\u4e48\uff0c\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u8fd8\u6709\u522b\u7684\u4ec0\u4e48\u4e1c\u897f\u5417\uff1f</p> <p>\u5f53\u7136\u6709\u4e86\u3002\u6d4f\u89c8\u5668\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u8fde\u5230\u670d\u52a1\u5668\uff0c\u4e2d\u95f4\u4f1a\u7ecf\u8fc7\u201c\u91cd\u91cd\u5173\u5361\u201d\uff0c\u5176\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u89d2\u8272\u5c31\u53eb\u505aCDN\u3002</p> <p>CDN\uff0c\u5168\u79f0\u662f\u201cContent Delivery Network\u201d\uff0c\u7ffb\u8bd1\u8fc7\u6765\u5c31\u662f\u201c\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u201d\u3002\u5b83\u5e94\u7528\u4e86HTTP\u534f\u8bae\u91cc\u7684\u7f13\u5b58\u548c\u4ee3\u7406\u6280\u672f\uff0c\u4ee3\u66ff\u6e90\u7ad9\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002</p> <p>CDN\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5b83\u53ef\u4ee5\u7f13\u5b58\u6e90\u7ad9\u7684\u6570\u636e\uff0c\u8ba9\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\u4e0d\u7528\u201c\u5343\u91cc\u8fe2\u8fe2\u201d\u5730\u5230\u8fbe\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u76f4\u63a5\u5728\u201c\u534a\u8def\u201d\u5c31\u53ef\u4ee5\u83b7\u53d6\u54cd\u5e94\u3002\u5982\u679cCDN\u7684\u8c03\u5ea6\u7b97\u6cd5\u5f88\u4f18\u79c0\uff0c\u66f4\u53ef\u4ee5\u627e\u5230\u79bb\u7528\u6237\u6700\u8fd1\u7684\u8282\u70b9\uff0c\u5927\u5e45\u5ea6\u7f29\u77ed\u54cd\u5e94\u65f6\u95f4\u3002</p> <p>\u6253\u4e2a\u6bd4\u65b9\uff0c\u5c31\u597d\u50cf\u5510\u50e7\u897f\u5929\u53d6\u7ecf\uff0c\u521a\u51fa\u957f\u5b89\u57ce\uff0c\u5c31\u770b\u5230\u963f\u96be\u4e0e\u8fe6\u53f6\u628a\u4f5b\u7956\u7684\u771f\u7ecf\u9012\u8fc7\u6765\u4e86\uff0c\u662f\u4e0d\u662f\u5f88\u7701\u4e8b\uff1f</p> <p>CDN\u4e5f\u662f\u73b0\u5728\u4e92\u8054\u7f51\u4e2d\u7684\u4e00\u9879\u91cd\u8981\u57fa\u7840\u8bbe\u65bd\uff0c\u9664\u4e86\u57fa\u672c\u7684\u7f51\u7edc\u52a0\u901f\u5916\uff0c\u8fd8\u63d0\u4f9b\u8d1f\u8f7d\u5747\u8861\u3001\u5b89\u5168\u9632\u62a4\u3001\u8fb9\u7f18\u8ba1\u7b97\u3001\u8de8\u8fd0\u8425\u5546\u7f51\u7edc\u7b49\u529f\u80fd\uff0c\u80fd\u591f\u6210\u500d\u5730\u201c\u653e\u5927\u201d\u6e90\u7ad9\u670d\u52a1\u5668\u7684\u670d\u52a1\u80fd\u529b\uff0c\u5f88\u591a\u4e91\u670d\u52a1\u5546\u90fd\u628aCDN\u4f5c\u4e3a\u4ea7\u54c1\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4e5f\u4f1a\u5728\u540e\u9762\u7528\u4e00\u8bb2\u7684\u7bc7\u5e45\u6765\u4e13\u95e8\u8bb2\u89e3CDN\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_2","title":"\u5c0f\u7ed3","text":"<p>\u56de\u987eHTTP\u534f\u8bae\u7684\u6574\u4e2a\u53d1\u5c55\u8fc7\u7a0b\uff1a</p> <p>HTTP\u534f\u8bae\u59cb\u4e8e\u4e09\u5341\u5e74\u524d\u8482\u59c6\u00b7\u4f2f\u7eb3\u65af-\u674e\u7684\u4e00\u7bc7\u8bba\u6587\uff1b HTTP/0.9\u662f\u4e2a\u7b80\u5355\u7684\u6587\u672c\u534f\u8bae\uff0c\u53ea\u80fd\u83b7\u53d6\u6587\u672c\u8d44\u6e90\uff1b HTTP/1.0\u786e\u7acb\u4e86\u5927\u90e8\u5206\u73b0\u5728\u4f7f\u7528\u7684\u6280\u672f\uff0c\u4f46\u5b83\u4e0d\u662f\u6b63\u5f0f\u6807\u51c6\uff1b HTTP/1.1\u662f\u76ee\u524d\u4e92\u8054\u7f51\u4e0a\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u534f\u8bae\uff0c\u529f\u80fd\u4e5f\u975e\u5e38\u5b8c\u5584\uff1b HTTP/2\u57fa\u4e8eGoogle\u7684SPDY\u534f\u8bae\uff0c\u6ce8\u91cd\u6027\u80fd\u6539\u5584\uff0c\u4f46\u8fd8\u672a\u666e\u53ca\uff1b HTTP/3\u57fa\u4e8eGoogle\u7684QUIC\u534f\u8bae\uff0c\u662f\u5c06\u6765\u7684\u53d1\u5c55\u65b9\u5411\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_3","title":"\u8bfe\u4e0b\u4f5c\u4e1a","text":"<ol> <li>\u4f60\u89c9\u5f97CDN\u5728\u5bf9\u5f85\u6d4f\u89c8\u5668\u548c\u722c\u866b\u65f6\u4f1a\u6709\u5dee\u5f02\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f</li> </ol> <pre><code>\u6ca1\u6709\uff0c\u5e94\u4e3a\u722c\u866b\u672c\u8eab\u5c31\u662f\u6a21\u62df\u7528\u6237\u6d4f\u89c8\u5668\u8bbf\u95ee\n</code></pre> <ol> <li>\u4f60\u600e\u4e48\u7406\u89e3WebService\u4e0eWeb Server\u8fd9\u4e24\u4e2a\u975e\u5e38\u76f8\u4f3c\u7684\u8bcd\uff1f</li> </ol> <pre><code>web service\u662f\u4e00\u79cd\u63a5\u53e3\u670d\u52a1\uff0c\u66f4\u8c61\u662f\u4e00\u79cd\u51fd\u6570\uff0c\u53ea\u8981\u652f\u6301web service\uff0c\u90fd\u53ef\u4ee5\u8c03\u7528\uff08\u53ef\u4ee5\u8de8\u7f51\u7ad9\uff09\uff0c\u5982\u67d0\u4e2a\u4e2a\u4eba\u7f51\u7ad9\uff0c\u8c03\u7528\u67d0\u4e2a\u670d\u52a1\u5546\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7684\u5929\u6c14\u9884\u62a5\u7684web service\uff0c\u5c06\u7ed3\u679c\u663e\u793a\u5728\u81ea\u5df1\u7684\u7f51\u9875\u4e0a\u3002\u4e00\u822c\u4f7f\u7528XML\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u80fd\u901a\u8fc7GET\u6216POST\u65b9\u5f0f\uff0c\u5411\u67d0\u4e2aURL\u63d0\u4ea4\u6570\u636e\uff0c\u5e76\u8fd4\u56de\u8bf7\u6c42\u7684\u7ed3\u679c\u3002\n\nweb server\u662fWEB\u5e94\u7528\u7684\u5e73\u53f0\uff0c\u5982IIS\uff0capach\n</code></pre>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_1","title":"\u4e8c\u3001HTTP\u534f\u8bae","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_2","title":"HTTP\u662f\u4e00\u4e2a\u534f\u8bae\u3002","text":"<p>HTTP\u662f\u4e00\u4e2a\u201c\u4f20\u8f93\u534f\u8bae\u201d\uff0c\u6240\u8c13\u7684\u201c\u4f20\u8f93\u201d\uff08Transfer\uff09\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u628a\u4e00\u5806\u4e1c\u897f\u4eceA\u70b9\u642c\u5230B\u70b9\uff0c\u6216\u8005\u4eceB\u70b9\u642c\u5230A\u70b9\uff0c\u5373\u201cA&lt;===&gt;B\u201d\u3002 HTTP\u534f\u8bae\u662f\u4e00\u4e2a\u201c\u53cc\u5411\u534f\u8bae\u201d \u6570\u636e\u867d\u7136\u662f\u5728A\u548cB\u4e4b\u95f4\u4f20\u8f93\uff0c\u4f46\u5e76\u6ca1\u6709\u9650\u5236\u53ea\u6709A\u548cB\u8fd9\u4e24\u4e2a\u89d2\u8272\uff0c\u5141\u8bb8\u4e2d\u95f4\u6709\u201c\u4e2d\u8f6c\u201d\u6216\u8005\u201c\u63a5\u529b\u201d\u3002 HTTP\u662f\u4e00\u4e2a\u5728\u8ba1\u7b97\u673a\u4e16\u754c\u91cc\u4e13\u95e8\u7528\u6765\u5728\u4e24\u70b9\u4e4b\u95f4\u4f20\u8f93\u6570\u636e\u7684\u7ea6\u5b9a\u548c\u89c4\u8303\u3002</p> <p>\u6240\u8c13\u201c\u8d85\u6587\u672c\u201d\uff0c\u5c31\u662f\u201c\u8d85\u8d8a\u4e86\u666e\u901a\u6587\u672c\u7684\u6587\u672c\u201d\uff0c\u5b83\u662f\u6587\u5b57\u3001\u56fe\u7247\u3001\u97f3\u9891\u548c\u89c6\u9891\u7b49\u7684\u6df7\u5408\u4f53\uff0c\u6700\u5173\u952e\u7684\u662f\u542b\u6709\u201c\u8d85\u94fe\u63a5\u201d\uff0c\u80fd\u591f\u4ece\u4e00\u4e2a\u201c\u8d85\u6587\u672c\u201d\u8df3\u8dc3\u5230\u53e6\u4e00\u4e2a\u201c\u8d85\u6587\u672c\u201d\uff0c\u5f62\u6210\u590d\u6742\u7684\u975e\u7ebf\u6027\u3001\u7f51\u72b6\u7684\u7ed3\u6784\u5173\u7cfb\u3002</p> <p>HTTP\u662f\u4ec0\u4e48\uff1f HTTP\u662f\u4e00\u4e2a\u5728\u8ba1\u7b97\u673a\u4e16\u754c\u91cc\u4e13\u95e8\u5728\u4e24\u70b9\u4e4b\u95f4\u4f20\u8f93\u6587\u5b57\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u7b49\u8d85\u6587\u672c\u6570\u636e\u7684\u7ea6\u5b9a\u548c\u89c4\u8303\u3002</p> <p>\u5728\u4e92\u8054\u7f51\u4e16\u754c\u91cc\uff0cHTTP\u901a\u5e38\u8dd1\u5728TCP/IP\u534f\u8bae\u6808\u4e4b\u4e0a\uff0c\u4f9d\u9760IP\u534f\u8bae\u5b9e\u73b0\u5bfb\u5740\u548c\u8def\u7531\u3001TCP\u534f\u8bae\u5b9e\u73b0\u53ef\u9760\u6570\u636e\u4f20\u8f93\u3001DNS\u534f\u8bae\u5b9e\u73b0\u57df\u540d\u67e5\u627e\u3001SSL/TLS\u534f\u8bae\u5b9e\u73b0\u5b89\u5168\u901a\u4fe1\u3002\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u534f\u8bae\u4f9d\u8d56\u4e8eHTTP\uff0c\u4f8b\u5982WebSocket\u3001HTTPDNS\u7b49\u3002\u8fd9\u4e9b\u534f\u8bae\u76f8\u4e92\u4ea4\u7ec7\uff0c\u6784\u6210\u4e86\u4e00\u4e2a\u534f\u8bae\u7f51\uff0c\u800cHTTP\u5219\u5904\u4e8e\u4e2d\u5fc3\u5730\u4f4d\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_4","title":"\u5c0f\u7ed3","text":"<p>HTTP\u662f\u4e00\u4e2a\u7528\u5728\u8ba1\u7b97\u673a\u4e16\u754c\u91cc\u7684\u534f\u8bae\uff0c\u5b83\u786e\u7acb\u4e86\u4e00\u79cd\u8ba1\u7b97\u673a\u4e4b\u95f4\u4ea4\u6d41\u901a\u4fe1\u7684\u89c4\u8303\uff0c\u4ee5\u53ca\u76f8\u5173\u7684\u5404\u79cd\u63a7\u5236\u548c\u9519\u8bef\u5904\u7406\u65b9\u5f0f\u3002 HTTP\u4e13\u95e8\u7528\u6765\u5728\u4e24\u70b9\u4e4b\u95f4\u4f20\u8f93\u6570\u636e\uff0c\u4e0d\u80fd\u7528\u4e8e\u5e7f\u64ad\u3001\u5bfb\u5740\u6216\u8def\u7531\u3002 HTTP\u4f20\u8f93\u7684\u662f\u6587\u5b57\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u7b49\u8d85\u6587\u672c\u6570\u636e\u3002 HTTP\u662f\u6784\u5efa\u4e92\u8054\u7f51\u7684\u91cd\u8981\u57fa\u7840\u6280\u672f\uff0c\u5b83\u6ca1\u6709\u5b9e\u4f53\uff0c\u4f9d\u8d56\u8bb8\u591a\u5176\u4ed6\u7684\u6280\u672f\u6765\u5b9e\u73b0\uff0c\u4f46\u540c\u65f6\u8bb8\u591a\u6280\u672f\u4e5f\u90fd\u4f9d\u8d56\u4e8e\u5b83\u3002</p> <p>\u628a\u8fd9\u4e9b\u7efc\u5408\u8d77\u6765\uff0c\u4f7f\u7528\u9012\u5f52\u7f29\u5199\u65b9\u5f0f\uff08\u6a21\u4effPHP\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u628aHTTP\u5b9a\u4e49\u4e3a\u201c\u4e0eHTTP\u534f\u8bae\u76f8\u5173\u7684\u6240\u6709\u5e94\u7528\u5c42\u6280\u672f\u7684\u603b\u548c\u201d\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_3","title":"\u4e09\u3001\u4e0eHTTP\u76f8\u5173\u7684\u5404\u79cd\u534f\u8bae","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#tcpip","title":"TCP/IP\u534f\u8bae","text":"<p>TCP/IP\u534f\u8bae\u662f\u76ee\u524d\u7f51\u7edc\u4e16\u754c\u201c\u4e8b\u5b9e\u4e0a\u201d\u7684\u6807\u51c6\u901a\u4fe1\u534f\u8bae\uff0c\u5373\u4f7f\u4f60\u6ca1\u6709\u7528\u8fc7\u4e5f\u4e00\u5b9a\u542c\u8bf4\u8fc7\uff0c\u56e0\u4e3a\u5b83\u592a\u8457\u540d\u4e86\u3002</p> <p>TCP/IP\u534f\u8bae\u5b9e\u9645\u4e0a\u662f\u4e00\u7cfb\u5217\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\u7684\u7edf\u79f0\uff0c\u5176\u4e2d\u6700\u6838\u5fc3\u7684\u4e24\u4e2a\u534f\u8bae\u662fTCP\u548cIP\uff0c\u5176\u4ed6\u7684\u8fd8\u6709UDP\u3001ICMP\u3001ARP\u7b49\u7b49\uff0c\u5171\u540c\u6784\u6210\u4e86\u4e00\u4e2a\u590d\u6742\u4f46\u6709\u5c42\u6b21\u7684\u534f\u8bae\u6808\u3002</p> <p>\u8fd9\u4e2a\u534f\u8bae\u6808\u6709\u56db\u5c42\uff0c\u6700\u4e0a\u5c42\u662f\u201c\u5e94\u7528\u5c42\u201d\uff0c\u6700\u4e0b\u5c42\u662f\u201c\u94fe\u63a5\u5c42\u201d\uff0cTCP\u548cIP\u5219\u5728\u4e2d\u95f4\uff1aTCP\u5c5e\u4e8e\u201c\u4f20\u8f93\u5c42\u201d\uff0cIP\u5c5e\u4e8e\u201c\u7f51\u9645\u5c42\u201d\u3002</p> <p>IP\u534f\u8bae\u662f\u201cInternet Protocol\u201d\u7684\u7f29\u5199\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u89e3\u51b3\u5bfb\u5740\u548c\u8def\u7531\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u4e24\u70b9\u95f4\u4f20\u9001\u6570\u636e\u5305\u3002IP\u534f\u8bae\u4f7f\u7528\u201cIP\u5730\u5740\u201d\u7684\u6982\u5ff5\u6765\u5b9a\u4f4d\u4e92\u8054\u7f51\u4e0a\u7684\u6bcf\u4e00\u53f0\u8ba1\u7b97\u673a\u3002</p> <p>TCP\u534f\u8bae\u662f\u201cTransmission Control Protocol\u201d\u7684\u7f29\u5199\uff0c\u610f\u601d\u662f\u201c\u4f20\u8f93\u63a7\u5236\u534f\u8bae\u201d\uff0c\u5b83\u4f4d\u4e8eIP\u534f\u8bae\u4e4b\u4e0a\uff0c\u57fa\u4e8eIP\u534f\u8bae\u63d0\u4f9b\u53ef\u9760\u7684\u3001\u5b57\u8282\u6d41\u5f62\u5f0f\u7684\u901a\u4fe1\uff0c\u662fHTTP\u534f\u8bae\u5f97\u4ee5\u5b9e\u73b0\u7684\u57fa\u7840\u3002</p> <p>\u7ed3\u5408tcp/ip\u534f\u8bae\uff0cHTTP\u4e5f\u5c31\u53ef\u4ee5\u66f4\u51c6\u786e\u5730\u79f0\u4e3a\u201cHTTP over TCP/IP\u201d</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#dns","title":"DNS","text":"<p>\u5728TCP/IP\u534f\u8bae\u4e2d\u4f7f\u7528IP\u5730\u5740\u6765\u6807\u8bc6\u8ba1\u7b97\u673a\uff0c\u6570\u5b57\u5f62\u5f0f\u7684\u5730\u5740\u5bf9\u4e8e\u8ba1\u7b97\u673a\u6765\u8bf4\u662f\u65b9\u4fbf\u4e86\uff0c\u4f46\u5bf9\u4e8e\u4eba\u7c7b\u6765\u8bf4\u5374\u65e2\u96be\u4ee5\u8bb0\u5fc6\u53c8\u96be\u4ee5\u8f93\u5165\u3002</p> <p>\u4e8e\u662f\u201c\u57df\u540d\u7cfb\u7edf\u201d\uff08Domain Name System\uff09\u51fa\u73b0\u4e86\uff0c\u7528\u6709\u610f\u4e49\u7684\u540d\u5b57\u6765\u4f5c\u4e3aIP\u5730\u5740\u7684\u7b49\u4ef7\u66ff\u4ee3\u3002\u8bbe\u60f3\u4e00\u4e0b\uff0c\u4f60\u662f\u613f\u610f\u8bb0\u201c95.211.80.227\u201d\u8fd9\u6837\u67af\u71e5\u7684\u6570\u5b57\uff0c\u8fd8\u662f\u201cnginx.org\u201d\u8fd9\u6837\u7684\u8bcd\u7ec4\u5462\uff1f</p> <p>\u5728DNS\u4e2d\uff0c\u201c\u57df\u540d\u201d\uff08Domain Name\uff09\u53c8\u79f0\u4e3a\u201c\u4e3b\u673a\u540d\u201d\uff08Host\uff09\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u6807\u8bb0\u4e0d\u540c\u56fd\u5bb6\u6216\u7ec4\u7ec7\u7684\u4e3b\u673a\uff0c\u8ba9\u540d\u5b57\u66f4\u597d\u8bb0\uff0c\u6240\u4ee5\u88ab\u8bbe\u8ba1\u6210\u4e86\u4e00\u4e2a\u6709\u5c42\u6b21\u7684\u7ed3\u6784\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uriurl","title":"URI/URL","text":"<p>URI\uff08Uniform Resource Identifier\uff09\uff0c\u4e2d\u6587\u540d\u79f0\u662f \u7edf\u4e00\u8d44\u6e90\u6807\u8bc6\u7b26\uff0c\u4f7f\u7528\u5b83\u5c31\u80fd\u591f\u552f\u4e00\u5730\u6807\u8bb0\u4e92\u8054\u7f51\u4e0a\u8d44\u6e90\u3002</p> <p>URI\u53e6\u4e00\u4e2a\u66f4\u5e38\u7528\u7684\u8868\u73b0\u5f62\u5f0f\u662fURL\uff08Uniform Resource Locator\uff09\uff0c \u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u4fd7\u79f0\u7684\u201c\u7f51\u5740\u201d\uff0c\u5b83\u5b9e\u9645\u4e0a\u662fURI\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u8fd9\u4e24\u8005\u51e0\u4e4e\u662f\u76f8\u540c\u7684\uff0c\u5dee\u5f02\u4e0d\u5927\uff0c\u6240\u4ee5\u901a\u5e38\u4e0d\u4f1a\u505a\u4e25\u683c\u7684\u533a\u5206\u3002</p> <p>URI\u4e3b\u8981\u6709\u4e09\u4e2a\u57fa\u672c\u7684\u90e8\u5206\u6784\u6210\uff1a</p> <ol> <li>\u534f\u8bae\u540d\uff1a\u5373\u8bbf\u95ee\u8be5\u8d44\u6e90\u5e94\u5f53\u4f7f\u7528\u7684\u534f\u8bae\uff0c\u5728\u8fd9\u91cc\u662f\u201chttp\u201d\uff1b</li> <li>\u4e3b\u673a\u540d\uff1a\u5373\u4e92\u8054\u7f51\u4e0a\u4e3b\u673a\u7684\u6807\u8bb0\uff0c\u53ef\u4ee5\u662f\u57df\u540d\u6216IP\u5730\u5740\uff0c\u5728\u8fd9\u91cc\u662f\u201cnginx.org\u201d\uff1b</li> <li>\u8def\u5f84\uff1a\u5373\u8d44\u6e90\u5728\u4e3b\u673a\u4e0a\u7684\u4f4d\u7f6e\uff0c\u4f7f\u7528\u201c/\u201d\u5206\u9694\u591a\u7ea7\u76ee\u5f55\uff0c\u5728\u8fd9\u91cc\u662f\u201c/en/download.html\u201d\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#https","title":"HTTPS","text":"<p>HTTPS\u5168\u79f0\u662f\u201cHTTP over SSL/TLS\u201d\uff0c\u8fd0\u884c\u5728SSL/TLS\u534f\u8bae\u4e0a\u7684HTTP\u3002</p> <p>SSL/TLS\uff0c\u662f\u4e00\u4e2a\u8d1f\u8d23\u52a0\u5bc6\u901a\u4fe1\u7684\u5b89\u5168\u534f\u8bae\uff0c\u5efa\u7acb\u5728TCP/IP\u4e4b\u4e0a\uff0c\u6240\u4ee5\u4e5f\u662f\u4e2a\u53ef\u9760\u7684\u4f20\u8f93\u534f\u8bae\uff0c\u53ef\u4ee5\u88ab\u7528\u4f5cHTTP\u7684\u4e0b\u5c42\u3002</p> <p>HTTPS\u76f8\u5f53\u4e8e\u201cHTTP+SSL/TLS+TCP/IP\u201d\u3002</p> <p>SSL\u7684\u5168\u79f0\u662f\u201cSecure Socket Layer\u201d\uff0c\u7531\u7f51\u666f\u516c\u53f8\u53d1\u660e\uff0c\u5f53\u53d1\u5c55\u52303.0\u65f6\u88ab\u6807\u51c6\u5316\uff0c\u6539\u540d\u4e3aTLS\uff0c\u5373\u201cTransport Layer Security\u201d\uff0c\u4f46\u7531\u4e8e\u5386\u53f2\u7684\u539f\u56e0\u8fd8\u662f\u6709\u5f88\u591a\u4eba\u79f0\u4e4b\u4e3aSSL/TLS\uff0c\u6216\u8005\u76f4\u63a5\u7b80\u79f0\u4e3aSSL\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_5","title":"\u4ee3\u7406","text":"<p>\u4ee3\u7406\uff08Proxy\uff09\u662fHTTP\u534f\u8bae\u4e2d\u8bf7\u6c42\u65b9\u548c\u5e94\u7b54\u65b9\u4e2d\u95f4\u7684\u4e00\u4e2a\u73af\u8282\uff0c\u4f5c\u4e3a\u201c\u4e2d\u8f6c\u7ad9\u201d\uff0c\u65e2\u53ef\u4ee5\u8f6c\u53d1\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u53d1\u670d\u52a1\u5668\u7684\u5e94\u7b54\u3002</p> <p>\u4ee3\u7406\u6709\u5f88\u591a\u7684\u79cd\u7c7b\uff0c\u5e38\u89c1\u7684\u6709\uff1a</p> <ol> <li>\u533f\u540d\u4ee3\u7406\uff1a\u5b8c\u5168\u201c\u9690\u533f\u201d\u4e86\u88ab\u4ee3\u7406\u7684\u673a\u5668\uff0c\u5916\u754c\u770b\u5230\u7684\u53ea\u662f\u4ee3\u7406\u670d\u52a1\u5668\uff1b</li> <li>\u900f\u660e\u4ee3\u7406\uff1a\u987e\u540d\u601d\u4e49\uff0c\u5b83\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u201c\u900f\u660e\u5f00\u653e\u201d\u7684\uff0c\u5916\u754c\u65e2\u77e5\u9053\u4ee3\u7406\uff0c\u4e5f\u77e5\u9053\u5ba2\u6237\u7aef\uff1b</li> <li>\u6b63\u5411\u4ee3\u7406\uff1a\u9760\u8fd1\u5ba2\u6237\u7aef\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff1b</li> <li>\u53cd\u5411\u4ee3\u7406\uff1a\u9760\u8fd1\u670d\u52a1\u5668\u7aef\uff0c\u4ee3\u8868\u670d\u52a1\u5668\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff1b</li> </ol> <p>CDN\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u79cd\u4ee3\u7406\uff0c\u5b83\u4ee3\u66ff\u6e90\u7ad9\u670d\u52a1\u5668\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u901a\u5e38\u626e\u6f14\u7740\u900f\u660e\u4ee3\u7406\u548c\u53cd\u5411\u4ee3\u7406\u7684\u89d2\u8272\u3002</p> <p>\u7531\u4e8e\u4ee3\u7406\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u63d2\u5165\u4e86\u4e00\u4e2a\u201c\u4e2d\u95f4\u5c42\u201d\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728\u8fd9\u4e2a\u73af\u8282\u505a\u5f88\u591a\u6709\u610f\u601d\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\uff1a</p> <ol> <li>\u8d1f\u8f7d\u5747\u8861\uff1a\u628a\u8bbf\u95ee\u8bf7\u6c42\u5747\u5300\u5206\u6563\u5230\u591a\u53f0\u673a\u5668\uff0c\u5b9e\u73b0\u8bbf\u95ee\u96c6\u7fa4\u5316\uff1b</li> <li>\u5185\u5bb9\u7f13\u5b58\uff1a\u6682\u5b58\u4e0a\u4e0b\u884c\u7684\u6570\u636e\uff0c\u51cf\u8f7b\u540e\u7aef\u7684\u538b\u529b\uff1b</li> <li>\u5b89\u5168\u9632\u62a4\uff1a\u9690\u533fIP,\u4f7f\u7528WAF\u7b49\u5de5\u5177\u62b5\u5fa1\u7f51\u7edc\u653b\u51fb\uff0c\u4fdd\u62a4\u88ab\u4ee3\u7406\u7684\u673a\u5668\uff1b</li> <li>\u6570\u636e\u5904\u7406\uff1a\u63d0\u4f9b\u538b\u7f29\u3001\u52a0\u5bc6\u7b49\u989d\u5916\u7684\u529f\u80fd\u3002</li> </ol> <p>\u5173\u4e8eHTTP\u7684\u4ee3\u7406\u8fd8\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u201c\u4ee3\u7406\u534f\u8bae\u201d\uff08proxy protocol\uff09\uff0c\u5b83\u7531\u77e5\u540d\u7684\u4ee3\u7406\u8f6f\u4ef6HAProxy\u5236\u8ba2\uff0c\u4f46\u5e76\u4e0d\u662fRFC\u6807\u51c6</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_6","title":"\u5c0f\u7ed3","text":"<p>\u8fd9\u6b21\u6211\u4ecb\u7ecd\u4e86\u4e0eHTTP\u76f8\u5173\u7684\u5404\u79cd\u534f\u8bae\uff0c\u5728\u8fd9\u91cc\u7b80\u5355\u5c0f\u7ed3\u4e00\u4e0b\u4eca\u5929\u7684\u5185\u5bb9\u3002</p> <ol> <li>TCP/IP\u662f\u7f51\u7edc\u4e16\u754c\u6700\u5e38\u7528\u7684\u534f\u8bae\uff0cHTTP\u901a\u5e38\u8fd0\u884c\u5728TCP/IP\u63d0\u4f9b\u7684\u53ef\u9760\u4f20\u8f93\u57fa\u7840\u4e0a\uff1b</li> <li>DNS\u57df\u540d\u662fIP\u5730\u5740\u7684\u7b49\u4ef7\u66ff\u4ee3\uff0c\u9700\u8981\u7528\u57df\u540d\u89e3\u6790\u5b9e\u73b0\u5230IP\u5730\u5740\u7684\u6620\u5c04\uff1b</li> <li>URI\u662f\u7528\u6765\u6807\u8bb0\u4e92\u8054\u7f51\u4e0a\u8d44\u6e90\u7684\u4e00\u4e2a\u540d\u5b57\uff0c\u7531\u201c\u534f\u8bae\u540d+\u4e3b\u673a\u540d+\u8def\u5f84\u201d\u6784\u6210\uff0c\u4fd7\u79f0URL\uff1b</li> <li>HTTPS\u76f8\u5f53\u4e8e\u201cHTTP+SSL/TLS+TCP/IP\u201d\uff0c\u4e3aHTTP\u5957\u4e86\u4e00\u4e2a\u5b89\u5168\u7684\u5916\u58f3\uff1b</li> <li>\u4ee3\u7406\u662fHTTP\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u201c\u4e2d\u8f6c\u7ad9\u201d\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7f13\u5b58\u52a0\u901f\u3001\u8d1f\u8f7d\u5747\u8861\u7b49\u529f\u80fd\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_7","title":"\u56db\u3001\u56db\u5c42\u4e0e\u4e03\u5c42\u6a21\u578b","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#tcpip_1","title":"TCP/IP\u7f51\u7edc\u5206\u5c42\u6a21\u578b","text":"<p>\u4eceTCP/IP\u534f\u8bae\u5f00\u59cb\u8bb2\u8d77\uff0c\u4e00\u662f\u56e0\u4e3a\u5b83\u975e\u5e38\u7ecf\u5178\uff0c\u4e8c\u662f\u56e0\u4e3a\u5b83\u662f\u76ee\u524d\u4e8b\u5b9e\u4e0a\u7684\u7f51\u7edc\u901a\u4fe1\u6807\u51c6\uff0c\u7814\u7a76\u5b83\u7684\u5b9e\u7528\u4ef7\u503c\u6700\u5927\u3002</p> <p>TCP/IP\u5f53\u521d\u7684\u8bbe\u8ba1\u8005\u771f\u7684\u662f\u975e\u5e38\u806a\u660e\uff0c\u521b\u9020\u6027\u5730\u63d0\u51fa\u4e86\u201c\u5206\u5c42\u201d\u7684\u6982\u5ff5\uff0c\u628a\u590d\u6742\u7684\u7f51\u7edc\u901a\u4fe1\u5212\u5206\u51fa\u591a\u4e2a\u5c42\u6b21\uff0c\u518d\u7ed9\u6bcf\u4e00\u4e2a\u5c42\u6b21\u5206\u914d\u4e0d\u540c\u7684\u804c\u8d23\uff0c\u5c42\u6b21\u5185\u53ea\u4e13\u5fc3\u505a\u81ea\u5df1\u7684\u4e8b\u60c5\u5c31\u597d\uff0c\u7528\u201c\u5206\u800c\u6cbb\u4e4b\u201d\u7684\u601d\u60f3\u628a\u4e00\u4e2a\u201c\u5927\u9ebb\u70e6\u201d\u62c6\u5206\u6210\u4e86\u6570\u4e2a\u201c\u5c0f\u9ebb\u70e6\u201d\uff0c\u4ece\u800c\u89e3\u51b3\u4e86\u7f51\u7edc\u901a\u4fe1\u7684\u96be\u9898\u3002</p> <p>TCP/IP\u7684\u534f\u8bae\u6808\u56fe\u793a\uff1a</p> <p> </p> <p>TCP/IP\u534f\u8bae\u603b\u5171\u6709\u56db\u5c42\uff0c\u5c31\u50cf\u642d\u79ef\u6728\u4e00\u6837\uff0c\u6bcf\u4e00\u5c42\u9700\u8981\u4e0b\u5c42\u7684\u652f\u6491\uff0c\u540c\u65f6\u53c8\u652f\u6491\u7740\u4e0a\u5c42\uff0c\u4efb\u4f55\u4e00\u5c42\u88ab\u62bd\u6389\u90fd\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6574\u4e2a\u534f\u8bae\u6808\u574d\u584c\u3002</p> <p>\u5b83\u7684\u5c42\u6b21\u987a\u5e8f\u662f\u201c\u4ece\u4e0b\u5f80\u4e0a\u201d\u6570\u7684\uff0c\u6240\u4ee5\u7b2c\u4e00\u5c42\u5c31\u662f\u6700\u4e0b\u9762\u7684\u4e00\u5c42\u3002</p> <p>\u7b2c\u4e00\u5c42\u53eb\u201c\u94fe\u63a5\u5c42\u201d\uff08link layer\uff09\uff0c\u8d1f\u8d23\u5728\u4ee5\u592a\u7f51\u3001WiFi\u8fd9\u6837\u7684\u5e95\u5c42\u7f51\u7edc\u4e0a\u53d1\u9001\u539f\u59cb\u6570\u636e\u5305\uff0c\u5de5\u4f5c\u5728\u7f51\u5361\u8fd9\u4e2a\u5c42\u6b21\uff0c\u4f7f\u7528MAC\u5730\u5740\u6765\u6807\u8bb0\u7f51\u7edc\u4e0a\u7684\u8bbe\u5907\uff0c\u6240\u4ee5\u6709\u65f6\u5019\u4e5f\u53ebMAC\u5c42\u3002</p> <p>\u7b2c\u4e8c\u5c42\u53eb\u201c\u7f51\u9645\u5c42\u201d\u6216\u8005\u201c\u7f51\u7edc\u4e92\u8fde\u5c42\u201d\uff08internet layer\uff09\uff0cIP\u534f\u8bae\u5c31\u5904\u5728\u8fd9\u4e00\u5c42\u3002\u56e0\u4e3aIP\u534f\u8bae\u5b9a\u4e49\u4e86\u201cIP\u5730\u5740\u201d\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u5728\u201c\u94fe\u63a5\u5c42\u201d\u7684\u57fa\u7840\u4e0a\uff0c\u7528IP\u5730\u5740\u53d6\u4ee3MAC\u5730\u5740\uff0c\u628a\u8bb8\u8bb8\u591a\u591a\u7684\u5c40\u57df\u7f51\u3001\u5e7f\u57df\u7f51\u8fde\u63a5\u6210\u4e00\u4e2a\u865a\u62df\u7684\u5de8\u5927\u7f51\u7edc\uff0c\u5728\u8fd9\u4e2a\u7f51\u7edc\u91cc\u627e\u8bbe\u5907\u65f6\u53ea\u8981\u628aIP\u5730\u5740\u518d\u201c\u7ffb\u8bd1\u201d\u6210MAC\u5730\u5740\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u7b2c\u4e09\u5c42\u53eb\u201c\u4f20\u8f93\u5c42\u201d\uff08transport layer\uff09\uff0c\u8fd9\u4e2a\u5c42\u6b21\u534f\u8bae\u7684\u804c\u8d23\u662f\u4fdd\u8bc1\u6570\u636e\u5728IP\u5730\u5740\u6807\u8bb0\u7684\u4e24\u70b9\u4e4b\u95f4\u201c\u53ef\u9760\u201d\u5730\u4f20\u8f93\uff0c\u662fTCP\u534f\u8bae\u5de5\u4f5c\u7684\u5c42\u6b21\uff0c\u53e6\u5916\u8fd8\u6709\u5b83\u7684\u4e00\u4e2a\u201c\u5c0f\u4f19\u4f34\u201dUDP\u3002</p> <p>TCP\u662f\u4e00\u4e2a\u6709\u72b6\u6001\u7684\u534f\u8bae\uff0c\u9700\u8981\u5148\u4e0e\u5bf9\u65b9\u5efa\u7acb\u8fde\u63a5\u7136\u540e\u624d\u80fd\u53d1\u9001\u6570\u636e\uff0c\u800c\u4e14\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\u4e0d\u91cd\u590d\u3002\u800cUDP\u5219\u6bd4\u8f83\u7b80\u5355\uff0c\u5b83\u65e0\u72b6\u6001\uff0c\u4e0d\u7528\u4e8b\u5148\u5efa\u7acb\u8fde\u63a5\u5c31\u53ef\u4ee5\u4efb\u610f\u53d1\u9001\u6570\u636e\uff0c\u4f46\u4e0d\u4fdd\u8bc1\u6570\u636e\u4e00\u5b9a\u4f1a\u53d1\u5230\u5bf9\u65b9\u3002\u4e24\u4e2a\u534f\u8bae\u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u533a\u522b\u5728\u4e8e\u6570\u636e\u7684\u5f62\u5f0f\u3002TCP\u7684\u6570\u636e\u662f\u8fde\u7eed\u7684\u201c\u5b57\u8282\u6d41\u201d\uff0c\u6709\u5148\u540e\u987a\u5e8f\uff0c\u800cUDP\u5219\u662f\u5206\u6563\u7684\u5c0f\u6570\u636e\u5305\uff0c\u662f\u987a\u5e8f\u53d1\uff0c\u4e71\u5e8f\u6536\u3002</p> <p>\u534f\u8bae\u6808\u7684\u7b2c\u56db\u5c42\u53eb\u201c\u5e94\u7528\u5c42\u201d\uff08application layer\uff09\uff0c\u7531\u4e8e\u4e0b\u9762\u7684\u4e09\u5c42\u628a\u57fa\u7840\u6253\u5f97\u975e\u5e38\u597d\uff0c\u6240\u4ee5\u5728\u8fd9\u4e00\u5c42\u5c31\u201c\u767e\u82b1\u9f50\u653e\u201d\u4e86\uff0c\u6709\u5404\u79cd\u9762\u5411\u5177\u4f53\u5e94\u7528\u7684\u534f\u8bae\u3002\u4f8b\u5982Telnet\u3001SSH\u3001FTP\u3001SMTP\u7b49\u7b49\uff0c\u5f53\u7136\u8fd8\u6709\u6211\u4eec\u7684HTTP\u3002</p> <p>MAC\u5c42\u7684\u4f20\u8f93\u5355\u4f4d\u662f\u5e27\uff08frame\uff09\uff0cIP\u5c42\u7684\u4f20\u8f93\u5355\u4f4d\u662f\u5305\uff08packet\uff09\uff0cTCP\u5c42\u7684\u4f20\u8f93\u5355\u4f4d\u662f\u6bb5\uff08segment\uff09\uff0cHTTP\u7684\u4f20\u8f93\u5355\u4f4d\u5219\u662f\u6d88\u606f\u6216\u62a5\u6587\uff08message\uff09\u3002\u4f46\u8fd9\u4e9b\u540d\u8bcd\u5e76\u6ca1\u6709\u4ec0\u4e48\u672c\u8d28\u7684\u533a\u5206\uff0c\u53ef\u4ee5\u7edf\u79f0\u4e3a\u6570\u636e\u5305\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#osi","title":"OSI\u7f51\u7edc\u5206\u5c42\u6a21\u578b","text":"<p>\u7f51\u7edc\u5206\u5c42\u6a21\u578b\uff1aOSI\uff0c\u5168\u79f0\u662f\u201c\u5f00\u653e\u5f0f\u7cfb\u7edf\u4e92\u8054\u901a\u4fe1\u53c2\u8003\u6a21\u578b\u201d\uff08Open System Interconnection Reference Model\uff09\u3002</p> <p>OSI\u6a21\u578b\u5206\u6210\u4e86\u4e03\u5c42\uff0c\u90e8\u5206\u5c42\u6b21\u4e0eTCP/IP\u5f88\u50cf\uff0c\u4ece\u4e0b\u5230\u4e0a\u5206\u522b\u662f\uff1a</p> <p> </p> <ol> <li>\u7b2c\u4e00\u5c42\uff1a\u7269\u7406\u5c42\uff0c\u7f51\u7edc\u7684\u7269\u7406\u5f62\u5f0f\uff0c\u4f8b\u5982\u7535\u7f06\u3001\u5149\u7ea4\u3001\u7f51\u5361\u3001\u96c6\u7ebf\u5668\u7b49\u7b49\uff1b</li> <li>\u7b2c\u4e8c\u5c42\uff1a\u6570\u636e\u94fe\u8def\u5c42\uff0c\u5b83\u57fa\u672c\u76f8\u5f53\u4e8eTCP/IP\u7684\u94fe\u63a5\u5c42\uff1b</li> <li>\u7b2c\u4e09\u5c42\uff1a\u7f51\u7edc\u5c42\uff0c\u76f8\u5f53\u4e8eTCP/IP\u91cc\u7684\u7f51\u9645\u5c42\uff1b</li> <li>\u7b2c\u56db\u5c42\uff1a\u4f20\u8f93\u5c42\uff0c\u76f8\u5f53\u4e8eTCP/IP\u91cc\u7684\u4f20\u8f93\u5c42\uff1b</li> <li>\u7b2c\u4e94\u5c42\uff1a\u4f1a\u8bdd\u5c42\uff0c\u7ef4\u62a4\u7f51\u7edc\u4e2d\u7684\u8fde\u63a5\u72b6\u6001\uff0c\u5373\u4fdd\u6301\u4f1a\u8bdd\u548c\u540c\u6b65\uff1b</li> <li>\u7b2c\u516d\u5c42\uff1a\u8868\u793a\u5c42\uff0c\u628a\u6570\u636e\u8f6c\u6362\u4e3a\u5408\u9002\u3001\u53ef\u7406\u89e3\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\uff1b</li> <li>\u7b2c\u4e03\u5c42\uff1a\u5e94\u7528\u5c42\uff0c\u9762\u5411\u5177\u4f53\u7684\u5e94\u7528\u4f20\u8f93\u6570\u636e\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_8","title":"\u4e24\u4e2a\u5206\u5c42\u6a21\u578b\u7684\u6620\u5c04\u5173\u7cfb","text":"<p>OSI\u5728\u8bbe\u8ba1\u4e4b\u521d\u5c31\u53c2\u8003\u4e86TCP/IP\u7b49\u591a\u4e2a\u534f\u8bae\uff0c\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u4f46\u4e0d\u662f\u5f88\u7cbe\u786e\u5730\u5b9e\u73b0\u5bf9\u5e94\u5173\u7cfb\u3002</p> <p> </p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#tcpip_2","title":"TCP/IP\u534f\u8bae\u6808\u7684\u5de5\u4f5c\u65b9\u5f0f","text":"<p>HTTP\u534f\u8bae\u7684\u4f20\u8f93\u8fc7\u7a0b\u5c31\u662f\u8fd9\u6837\u901a\u8fc7\u534f\u8bae\u6808\u9010\u5c42\u5411\u4e0b\uff0c\u6bcf\u4e00\u5c42\u90fd\u6dfb\u52a0\u672c\u5c42\u7684\u4e13\u6709\u6570\u636e\uff0c\u5c42\u5c42\u6253\u5305\uff0c\u7136\u540e\u901a\u8fc7\u4e0b\u5c42\u53d1\u9001\u51fa\u53bb\u3002</p> <p>\u63a5\u6536\u6570\u636e\u5219\u662f\u76f8\u53cd\u7684\u64cd\u4f5c\uff0c\u4ece\u4e0b\u5f80\u4e0a\u7a7f\u8fc7\u534f\u8bae\u6808\uff0c\u9010\u5c42\u62c6\u5305\uff0c\u6bcf\u5c42\u53bb\u6389\u672c\u5c42\u7684\u4e13\u6709\u5934\uff0c\u4e0a\u5c42\u5c31\u4f1a\u62ff\u5230\u81ea\u5df1\u7684\u6570\u636e\u3002</p> <p>\u4f46\u4e0b\u5c42\u7684\u4f20\u8f93\u8fc7\u7a0b\u5bf9\u4e8e\u4e0a\u5c42\u662f\u5b8c\u5168\u201c\u900f\u660e\u201d\u7684\uff0c\u4e0a\u5c42\u4e5f\u4e0d\u9700\u8981\u5173\u5fc3\u4e0b\u5c42\u7684\u5177\u4f53\u5b9e\u73b0\u7ec6\u8282\uff0c\u6240\u4ee5\u5c31HTTP\u5c42\u6b21\u6765\u770b\uff0c\u5b83\u4e0d\u7ba1\u4e0b\u5c42\u662f\u4e0d\u662fTCP/IP\u534f\u8bae\uff0c\u770b\u5230\u7684\u53ea\u662f\u4e00\u4e2a\u53ef\u9760\u7684\u4f20\u8f93\u94fe\u8def\uff0c\u53ea\u8981\u628a\u6570\u636e\u52a0\u4e0a\u81ea\u5df1\u7684\u5934\uff0c\u5bf9\u65b9\u5c31\u80fd\u539f\u6837\u6536\u5230\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_9","title":"\u5c0f\u7ed3","text":"<ol> <li>TCP/IP\u5206\u4e3a\u56db\u5c42\uff0c\u6838\u5fc3\u662f\u4e8c\u5c42\u7684IP\u548c\u4e09\u5c42\u7684TCP\uff0cHTTP\u5728\u7b2c\u56db\u5c42\uff1b</li> <li>OSI\u5206\u4e3a\u4e03\u5c42\uff0c\u57fa\u672c\u5bf9\u5e94TCP/IP\uff0cTCP\u5728\u7b2c\u56db\u5c42\uff0cHTTP\u5728\u7b2c\u4e03\u5c42\uff1b</li> <li>OSI\u53ef\u4ee5\u6620\u5c04\u5230TCP/IP\uff0c\u4f46\u8fd9\u671f\u95f4\u4e00\u3001\u4e94\u3001\u516d\u5c42\u6d88\u5931\u4e86\uff1b</li> <li>\u65e5\u5e38\u4ea4\u6d41\u7684\u65f6\u5019\u6211\u4eec\u901a\u5e38\u4f7f\u7528OSI\u6a21\u578b\uff0c\u7528\u56db\u5c42\u3001\u4e03\u5c42\u7b49\u672f\u8bed\uff1b</li> <li>HTTP\u5229\u7528TCP/IP\u534f\u8bae\u6808\u9010\u5c42\u6253\u5305\u518d\u62c6\u5305\uff0c\u5b9e\u73b0\u4e86\u6570\u636e\u4f20\u8f93\uff0c\u4f46\u4e0b\u9762\u7684\u7ec6\u8282\u5e76\u4e0d\u53ef\u89c1\u3002</li> </ol> <p>\u6709\u4e00\u4e2a\u8fa8\u522b\u56db\u5c42\u548c\u4e03\u5c42\u6bd4\u8f83\u597d\u7684\uff08\u4f46\u4e0d\u662f\u7edd\u5bf9\u7684\uff09\u5c0f\u7a8d\u95e8\uff0c\u201c\u4e24\u4e2a\u51e1\u662f\u201d\uff1a\u51e1\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u5904\u7406\u7684\u5c31\u662f\u56db\u5c42\u6216\u56db\u5c42\u4ee5\u4e0b\uff0c\u5426\u5219\uff0c\u51e1\u662f\u9700\u8981\u7531\u5e94\u7528\u7a0b\u5e8f\uff08\u4e5f\u5c31\u662f\u4f60\u81ea\u5df1\u5199\u4ee3\u7801\uff09\u8d1f\u8d23\u5904\u7406\u7684\u5c31\u662f\u4e03\u5c42\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_10","title":"\u8bfe\u4e0b\u4f5c\u4e1a","text":"<ol> <li>\u4f60\u80fd\u7528\u81ea\u5df1\u7684\u8bdd\u89e3\u91ca\u4e00\u4e0b\u201c\u4e8c\u5c42\u8f6c\u53d1\u201d\u201c\u4e09\u5c42\u8def\u7531\u201d\u5417\uff1f</li> </ol> <pre><code>\u4e8c\u5c42\u8f6c\u53d1\uff1a\u4e8c\u5c42\u4ea4\u6362\u6280\u672f\u662f\u53d1\u5c55\u6bd4\u8f83\u6210\u719f\uff0c\u4e8c\u5c42\u4ea4\u6362\u673a\u5c5e\u6570\u636e\u94fe\u8def\u5c42\u8bbe\u5907\uff0c\u53ef\u4ee5\u8bc6\u522b\u6570\u636e\u5305\u4e2d\u7684MAC\u5730\u5740\u4fe1\u606f\uff0c\u6839\u636eMAC\u5730\u5740\u8fdb\u884c\u8f6c\u53d1\uff0c\u5e76\u5c06\u8fd9\u4e9bMAC\u5730\u5740\u4e0e\u5bf9\u5e94\u7684\u7aef\u53e3\u8bb0\u5f55\u5728\u81ea\u5df1\u5185\u90e8\u7684\u4e00\u4e2a\u5730\u5740\u8868\u4e2d\u3002\n\u4e09\u5c42\u8def\u7531\uff1a\u5728\u5bf9\u7b2c\u4e00\u4e2a\u6570\u636e\u6d41\u8fdb\u884c\u8def\u7531\u540e\uff0c\u5b83\u5c06\u4f1a\u4ea7\u751f\u4e00\u4e2aMAC\u5730\u5740\u4e0eIP\u5730\u5740\u7684\u6620\u5c04\u8868\uff0c\u5f53\u540c\u6837\u7684\u6570\u636e\u6d41\u518d\u6b21\u901a\u8fc7\u65f6\uff0c\u5c06\u6839\u636e\u6b64\u8868\u76f4\u63a5\u4ece\u4e8c\u5c42\u901a\u8fc7\u800c\u4e0d\u662f\u518d\u6b21\u8def\u7531\uff0c\u4ece\u800c\u6d88\u9664\u4e86\u8def\u7531\u5668\u8fdb\u884c\u8def\u7531\u9009\u62e9\u800c\u9020\u6210\u7f51\u7edc\u7684\u5ef6\u8fdf\uff0c\u63d0\u9ad8\u4e86\u6570\u636e\u5305\u8f6c\u53d1\u7684\u6548\u7387\u3002\n</code></pre> <ol> <li>\u4f60\u8ba4\u4e3a\u4e0a\u4e00\u8bb2\u4e2d\u7684DNS\u534f\u8bae\u4f4d\u4e8e\u54ea\u4e00\u5c42\u5462\uff1f</li> </ol> <pre><code>\u5e94\u7528\u5c42\n</code></pre> <ol> <li>\u4f60\u8ba4\u4e3aCDN\u5de5\u4f5c\u5728\u54ea\u4e00\u5c42\u5462\uff1f</li> </ol> <pre><code>\u5e94\u7528\u5c42\n</code></pre>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_11","title":"\u4e94\u3001\u57df\u540d\u7cfb\u7edf","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_12","title":"\u57df\u540d\u7684\u5f62\u5f0f","text":"<p>\u57df\u540d\u662f\u4e00\u4e2a\u6709\u5c42\u6b21\u7684\u7ed3\u6784\uff0c\u662f\u4e00\u4e32\u7528\u201c.\u201d\u5206\u9694\u7684\u591a\u4e2a\u5355\u8bcd\uff0c\u6700\u53f3\u8fb9\u7684\u88ab\u79f0\u4e3a\u201c\u9876\u7ea7\u57df\u540d\u201d\uff0c\u7136\u540e\u662f\u201c\u4e8c\u7ea7\u57df\u540d\u201d\uff0c\u5c42\u7ea7\u5173\u7cfb\u5411\u5de6\u4f9d\u6b21\u964d\u4f4e\u3002</p> <p>\u5728Apache\u3001Nginx\u8fd9\u6837\u7684Web\u670d\u52a1\u5668\u91cc\uff0c\u57df\u540d\u53ef\u4ee5\u7528\u6765\u6807\u8bc6\u865a\u62df\u4e3b\u673a\uff0c\u51b3\u5b9a\u7531\u54ea\u4e2a\u865a\u62df\u4e3b\u673a\u6765\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u6bd4\u5982\u5728Nginx\u91cc\u5c31\u4f1a\u4f7f\u7528\u201cserver_name\u201d\u6307\u4ee4\uff1a</p> <pre><code>server {\n    listen 80;                       #\u76d1\u542c80\u7aef\u53e3\n    server_name  time.geekbang.org;  #\u4e3b\u673a\u540d\u662ftime.geekbang.org\n    ...\n}\n</code></pre> <p>\u57df\u540d\u672c\u8d28\u4e0a\u8fd8\u662f\u4e2a\u540d\u5b57\u7a7a\u95f4\u7cfb\u7edf\uff0c\u4f7f\u7528\u591a\u7ea7\u57df\u540d\u5c31\u53ef\u4ee5\u5212\u5206\u51fa\u4e0d\u540c\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u7ec4\u7ec7\u3001\u516c\u53f8\u3001\u90e8\u95e8\uff0c\u6bcf\u4e2a\u57df\u540d\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u79cd\u8eab\u4efd\u7684\u6807\u8bc6\u3002</p> <p>DNS\u7684\u6838\u5fc3\u7cfb\u7edf\u662f\u4e00\u4e2a\u4e09\u5c42\u7684\u6811\u72b6\u3001\u5206\u5e03\u5f0f\u670d\u52a1\uff0c\u57fa\u672c\u5bf9\u5e94\u57df\u540d\u7684\u7ed3\u6784\uff1a</p> <ol> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff08Root DNS Server\uff09\uff1a\u7ba1\u7406\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff0c\u8fd4\u56de\u201ccom\u201d\u201cnet\u201d\u201ccn\u201d\u7b49\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff1b</li> <li>\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff08Top-level DNS Server\uff09\uff1a\u7ba1\u7406\u5404\u81ea\u57df\u540d\u4e0b\u7684\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\uff0c\u6bd4\u5982com\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u53ef\u4ee5\u8fd4\u56deapple.com\u57df\u540d\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff1b</li> <li>\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\uff08Authoritative DNS Server\uff09\uff1a\u7ba1\u7406\u81ea\u5df1\u57df\u540d\u4e0b\u4e3b\u673a\u7684IP\u5730\u5740\uff0c\u6bd4\u5982apple.com\u6743\u5a01\u57df\u540d\u670d\u52a1\u5668\u53ef\u4ee5\u8fd4\u56dewww.apple.com\u7684IP\u5730\u5740\u3002</li> </ol> <p>\u5728Nginx\u91cc\u6709\u8fd9\u4e48\u4e00\u6761\u914d\u7f6e\u6307\u4ee4\u201cresolver\u201d\uff0c\u5b83\u5c31\u662f\u7528\u6765\u914d\u7f6eDNS\u670d\u52a1\u5668\u7684\uff0c\u5982\u679c\u6ca1\u6709\u5b83\uff0c\u90a3\u4e48Nginx\u5c31\u65e0\u6cd5\u67e5\u8be2\u57df\u540d\u5bf9\u5e94\u7684IP\uff0c\u4e5f\u5c31\u65e0\u6cd5\u53cd\u5411\u4ee3\u7406\u5230\u5916\u90e8\u7684\u7f51\u7ad9\u3002</p> <pre><code>resolver 8.8.8.8 valid=30s;  #\u6307\u5b9aGoogle\u7684DNS\uff0c\u7f13\u5b5830\u79d2\n</code></pre>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_13","title":"\u57df\u540d\u7684\u201c\u65b0\u73a9\u6cd5\u201d","text":"<p>\u7b2c\u4e00\u79cd\uff0c\u4e5f\u662f\u6700\u7b80\u5355\u7684\uff0c\u201c\u91cd\u5b9a\u5411\u201d\u3002\u56e0\u4e3a\u57df\u540d\u4ee3\u66ff\u4e86IP\u5730\u5740\uff0c\u6240\u4ee5\u53ef\u4ee5\u8ba9\u5bf9\u5916\u670d\u52a1\u7684\u57df\u540d\u4e0d\u53d8\uff0c\u800c\u4e3b\u673a\u7684IP\u5730\u5740\u4efb\u610f\u53d8\u52a8\u3002\u5f53\u4e3b\u673a\u6709\u60c5\u51b5\u9700\u8981\u4e0b\u7ebf\u3001\u8fc1\u79fb\u65f6\uff0c\u53ef\u4ee5\u66f4\u6539DNS\u8bb0\u5f55\uff0c\u8ba9\u57df\u540d\u6307\u5411\u5176\u4ed6\u7684\u673a\u5668\u3002</p> <p>\u7b2c\u4e8c\u79cd\uff0c\u56e0\u4e3a\u57df\u540d\u662f\u4e00\u4e2a\u540d\u5b57\u7a7a\u95f4\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528bind9\u7b49\u5f00\u6e90\u8f6f\u4ef6\u642d\u5efa\u4e00\u4e2a\u5728\u5185\u90e8\u4f7f\u7528\u7684DNS\uff0c\u4f5c\u4e3a\u540d\u5b57\u670d\u52a1\u5668\u3002\u8fd9\u6837\u6211\u4eec\u5f00\u53d1\u7684\u5404\u79cd\u5185\u90e8\u670d\u52a1\u5c31\u90fd\u7528\u57df\u540d\u6765\u6807\u8bb0\uff0c\u6bd4\u5982\u6570\u636e\u5e93\u670d\u52a1\u90fd\u7528\u57df\u540d\u201cmysql.inner.app\u201d\uff0c\u5546\u54c1\u670d\u52a1\u90fd\u7528\u201cgoods.inner.app\u201d\uff0c\u53d1\u8d77\u7f51\u7edc\u901a\u4fe1\u65f6\u4e5f\u5c31\u4e0d\u5fc5\u518d\u4f7f\u7528\u5199\u6b7b\u7684IP\u5730\u5740\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u57df\u540d\uff0c\u800c\u4e14\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u517c\u5177\u4e86\u7b2c\u4e00\u79cd\u201c\u73a9\u6cd5\u201d\u7684\u4f18\u52bf\u3002</p> <p>\u7b2c\u4e09\u79cd\u201c\u73a9\u6cd5\u201d\u5305\u542b\u4e86\u524d\u4e24\u79cd\uff0c\u4e5f\u5c31\u662f\u57fa\u4e8e\u57df\u540d\u5b9e\u73b0\u7684\u8d1f\u8f7d\u5747\u8861\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_14","title":"\u5c0f\u7ed3","text":"<ol> <li> <p>\u57df\u540d\u4f7f\u7528\u5b57\u7b26\u4e32\u6765\u4ee3\u66ffIP\u5730\u5740\uff0c\u65b9\u4fbf\u7528\u6237\u8bb0\u5fc6\uff0c\u672c\u8d28\u4e0a\u4e00\u4e2a\u540d\u5b57\u7a7a\u95f4\u7cfb\u7edf\uff1b</p> </li> <li> <p>DNS\u5c31\u50cf\u662f\u6211\u4eec\u73b0\u5b9e\u4e16\u754c\u91cc\u7684\u7535\u8bdd\u672c\u3001\u67e5\u53f7\u53f0\uff0c\u7edf\u7ba1\u7740\u4e92\u8054\u7f51\u4e16\u754c\u91cc\u7684\u6240\u6709\u7f51\u7ad9\uff0c\u662f\u4e00\u4e2a\u201c\u8d85\u7ea7\u5927\u7ba1\u5bb6\u201d\uff1b</p> </li> <li> <p>DNS\u662f\u4e00\u4e2a\u6811\u72b6\u7684\u5206\u5e03\u5f0f\u67e5\u8be2\u7cfb\u7edf\uff0c\u4f46\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\uff0c\u5916\u56f4\u6709\u591a\u7ea7\u7684\u7f13\u5b58\uff1b</p> </li> <li> <p>\u4f7f\u7528DNS\u53ef\u4ee5\u5b9e\u73b0\u57fa\u4e8e\u57df\u540d\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u65e2\u53ef\u4ee5\u5728\u5185\u7f51\uff0c\u4e5f\u53ef\u4ee5\u5728\u5916\u7f51\u3002</p> </li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_4","title":"\u516d\u3001http\u8fde\u63a5\u8fc7\u7a0b","text":"<p>\u7b80\u8981\u53d9\u8ff0\u4e00\u4e0b\u8fd9\u6b21\u6700\u7b80\u5355\u7684\u6d4f\u89c8\u5668HTTP\u8bf7\u6c42\u8fc7\u7a0b\uff1a</p> <ol> <li>\u6d4f\u89c8\u5668\u4ece\u5730\u5740\u680f\u7684\u8f93\u5165\u4e2d\u83b7\u5f97\u670d\u52a1\u5668\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7\uff1b</li> <li>\u6d4f\u89c8\u5668\u7528TCP\u7684\u4e09\u6b21\u63e1\u624b\u4e0e\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff1b</li> <li>\u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u53d1\u9001\u62fc\u597d\u7684\u62a5\u6587\uff1b</li> <li>\u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\u5904\u7406\u8bf7\u6c42\uff0c\u540c\u6837\u62fc\u597d\u62a5\u6587\u518d\u53d1\u7ed9\u6d4f\u89c8\u5668\uff1b</li> <li>\u6d4f\u89c8\u5668\u89e3\u6790\u62a5\u6587\uff0c\u6e32\u67d3\u8f93\u51fa\u9875\u9762\u3002</li> </ol> <p>\u5047\u8bbe\u4f60\u8981\u8bbf\u95ee\u7684\u662fApple\u7f51\u7ad9\uff0c\u663e\u7136\u4f60\u662f\u4e0d\u77e5\u9053\u5b83\u7684\u771f\u5b9eIP\u5730\u5740\u7684\uff0c\u5728\u6d4f\u89c8\u5668\u91cc\u53ea\u80fd\u4f7f\u7528\u57df\u540d\u201cwww.apple.com\u201d\u8bbf\u95ee\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u8981\u505a\u7684\u5fc5\u7136\u662f\u57df\u540d\u89e3\u6790\u3002</p> <p>\u8fd9\u5c31\u8981\u7528DNS\u534f\u8bae\u5f00\u59cb\u4ece\u64cd\u4f5c\u7cfb\u7edf\u3001\u672c\u5730DNS\u3001\u6839DNS\u3001\u9876\u7ea7DNS\u3001\u6743\u5a01DNS\u7684\u5c42\u5c42\u89e3\u6790\uff0c\u5f53\u7136\u8fd9\u4e2d\u95f4\u6709\u7f13\u5b58\uff0c\u53ef\u80fd\u4e0d\u4f1a\u8d39\u592a\u591a\u65f6\u95f4\u5c31\u80fd\u62ff\u5230\u7ed3\u679c\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_15","title":"\u5c0f\u7ed3","text":"<ol> <li> <p>HTTP\u534f\u8bae\u57fa\u4e8e\u5e95\u5c42\u7684TCP/IP\u534f\u8bae\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u7528IP\u5730\u5740\u5efa\u7acb\u8fde\u63a5\uff1b</p> </li> <li> <p>\u5982\u679c\u4e0d\u77e5\u9053IP\u5730\u5740\uff0c\u5c31\u8981\u7528DNS\u534f\u8bae\u53bb\u89e3\u6790\u5f97\u5230IP\u5730\u5740\uff0c\u5426\u5219\u5c31\u4f1a\u8fde\u63a5\u5931\u8d25\uff1b</p> </li> <li> <p>\u5efa\u7acbTCP\u8fde\u63a5\u540e\u4f1a\u987a\u5e8f\u6536\u53d1\u6570\u636e\uff0c\u8bf7\u6c42\u65b9\u548c\u5e94\u7b54\u65b9\u90fd\u5fc5\u987b\u4f9d\u636eHTTP\u89c4\u8303\u6784\u5efa\u548c\u89e3\u6790\u62a5\u6587\uff1b</p> </li> <li> <p>\u4e3a\u4e86\u51cf\u5c11\u54cd\u5e94\u65f6\u95f4\uff0c\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u7684\u6bcf\u4e00\u4e2a\u73af\u8282\u90fd\u4f1a\u6709\u7f13\u5b58\uff0c\u80fd\u591f\u5b9e\u73b0\u201c\u77ed\u8def\u201d\u64cd\u4f5c\uff1b</p> </li> <li> <p>\u867d\u7136\u73b0\u5b9e\u4e2d\u7684HTTP\u4f20\u8f93\u8fc7\u7a0b\u975e\u5e38\u590d\u6742\uff0c\u4f46\u7406\u8bba\u4e0a\u4ecd\u7136\u53ef\u4ee5\u7b80\u5316\u6210\u5b9e\u9a8c\u91cc\u7684\u201c\u4e24\u70b9\u201d\u6a21\u578b\u3002</p> </li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_5","title":"\u4e03\u3001http\u7684\u6838\u5fc3\u90e8\u5206","text":"<p>HTTP\u534f\u8bae\u7684\u6838\u5fc3\u90e8\u5206\u662f\u4ec0\u4e48\u5462\uff1f</p> <p>\u7b54\u6848\u5c31\u662f\u5b83\u4f20\u8f93\u7684\u62a5\u6587\u5185\u5bb9\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_16","title":"\u62a5\u6587\u7ed3\u6784","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#tcp","title":"TCP\u62a5\u6587","text":"<p>\u4f60\u4e5f\u8bb8\u5bf9TCP/UDP\u7684\u62a5\u6587\u683c\u5f0f\u6709\u6240\u4e86\u89e3\uff0c\u62ffTCP\u62a5\u6587\u6765\u4e3e\u4f8b\uff0c\u5b83\u5728\u5b9e\u9645\u8981\u4f20\u8f93\u7684\u6570\u636e\u4e4b\u524d\u9644\u52a0\u4e86\u4e00\u4e2a20\u5b57\u8282\u7684\u5934\u90e8\u6570\u636e\uff0c\u5b58\u50a8TCP\u534f\u8bae\u5fc5\u987b\u7684\u989d\u5916\u4fe1\u606f\uff0c\u4f8b\u5982\u53d1\u9001\u65b9\u7684\u7aef\u53e3\u53f7\u3001\u63a5\u6536\u65b9\u7684\u7aef\u53e3\u53f7\u3001\u5305\u5e8f\u53f7\u3001\u6807\u5fd7\u4f4d\u7b49\u7b49\u3002</p> <p>\u6709\u4e86\u8fd9\u4e2a\u9644\u52a0\u7684TCP\u5934\uff0c\u6570\u636e\u5305\u624d\u80fd\u591f\u6b63\u786e\u4f20\u8f93\uff0c\u5230\u4e86\u76ee\u7684\u5730\u540e\u628a\u5934\u90e8\u53bb\u6389\uff0c\u5c31\u53ef\u4ee5\u62ff\u5230\u771f\u6b63\u7684\u6570\u636e\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_6","title":"HTTP\u62a5\u6587","text":"<p>HTTP\u534f\u8bae\u4e5f\u662f\u4e0eTCP/UDP\u7c7b\u4f3c\uff0c\u540c\u6837\u4e5f\u9700\u8981\u5728\u5b9e\u9645\u4f20\u8f93\u7684\u6570\u636e\u524d\u9644\u52a0\u4e00\u4e9b\u5934\u6570\u636e\uff0c\u4e0d\u8fc7\u4e0eTCP/UDP\u4e0d\u540c\u7684\u662f\uff0c\u5b83\u662f\u4e00\u4e2a\u201c\u7eaf\u6587\u672c\u201d\u7684\u534f\u8bae\uff0c\u6240\u4ee5\u5934\u6570\u636e\u90fd\u662fASCII\u7801\u7684\u6587\u672c\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7528\u8089\u773c\u9605\u8bfb\uff0c\u4e0d\u7528\u501f\u52a9\u7a0b\u5e8f\u89e3\u6790\u4e5f\u80fd\u591f\u770b\u61c2\u3002</p> <p>HTTP\u534f\u8bae\u7684\u8bf7\u6c42\u62a5\u6587\u548c\u54cd\u5e94\u62a5\u6587\u7684\u7ed3\u6784\u57fa\u672c\u76f8\u540c\uff0c\u7531\u4e09\u5927\u90e8\u5206\u7ec4\u6210\uff1a</p> <ol> <li>\u8d77\u59cb\u884c\uff08start line\uff09\uff1a\u63cf\u8ff0\u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u57fa\u672c\u4fe1\u606f\uff1b</li> <li>\u5934\u90e8\u5b57\u6bb5\u96c6\u5408\uff08header\uff09\uff1a\u4f7f\u7528key-value\u5f62\u5f0f\u66f4\u8be6\u7ec6\u5730\u8bf4\u660e\u62a5\u6587\uff1b</li> <li>\u6d88\u606f\u6b63\u6587\uff08entity\uff09\uff1a\u5b9e\u9645\u4f20\u8f93\u7684\u6570\u636e\uff0c\u5b83\u4e0d\u4e00\u5b9a\u662f\u7eaf\u6587\u672c\uff0c\u53ef\u4ee5\u662f\u56fe\u7247\u3001\u89c6\u9891\u7b49\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> </ol> <p>\u8fd9\u5176\u4e2d\u524d\u4e24\u90e8\u5206\u8d77\u59cb\u884c\u548c\u5934\u90e8\u5b57\u6bb5\u7ecf\u5e38\u53c8\u5408\u79f0\u4e3a\u201c\u8bf7\u6c42\u5934\u201d\u6216\u201c\u54cd\u5e94\u5934\u201d\uff0c\u6d88\u606f\u6b63\u6587\u53c8\u79f0\u4e3a\u201c\u5b9e\u4f53\u201d\uff0c\u4f46\u4e0e\u201cheader\u201d\u5bf9\u5e94\uff0c\u5f88\u591a\u65f6\u5019\u5c31\u76f4\u63a5\u79f0\u4e3a\u201cbody\u201d\u3002</p> <p>HTTP\u534f\u8bae\u89c4\u5b9a\u62a5\u6587\u5fc5\u987b\u6709header\uff0c\u4f46\u53ef\u4ee5\u6ca1\u6709body\uff0c\u800c\u4e14\u5728header\u4e4b\u540e\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u201c\u7a7a\u884c\u201d\uff0c\u4e5f\u5c31\u662f\u201cCRLF\u201d\uff0c\u5341\u516d\u8fdb\u5236\u7684\u201c0D0A\u201d\u3002</p> <p>\u6240\u4ee5\uff0c\u4e00\u4e2a\u5b8c\u6574\u7684HTTP\u62a5\u6587\u5c31\u50cf\u662f\u4e0b\u56fe\u7684\u8fd9\u4e2a\u6837\u5b50\uff0c\u6ce8\u610f\u5728header\u548cbody\u4e4b\u95f4\u6709\u4e00\u4e2a\u201c\u7a7a\u884c\u201d\u3002</p> <p> </p> <p>\u4e4b\u524d\u7528Wireshark\u6293\u7684\u5305\uff1a</p> <p> </p> <p>\u5206\u6790\uff1a\u5728\u8fd9\u4e2a\u6d4f\u89c8\u5668\u53d1\u51fa\u7684\u8bf7\u6c42\u62a5\u6587\u91cc\uff0c\u7b2c\u4e00\u884c\u201cGET / HTTP/1.1\u201d\u5c31\u662f\u8bf7\u6c42\u884c\uff0c\u800c\u540e\u9762\u7684\u201cHost\u201d\u201cConnection\u201d\u7b49\u7b49\u90fd\u5c5e\u4e8eheader\uff0c\u62a5\u6587\u7684\u6700\u540e\u662f\u4e00\u4e2a\u7a7a\u767d\u884c\u7ed3\u675f\uff0c\u6ca1\u6709body\u3002</p> <p>\u5728\u5f88\u591a\u65f6\u5019\uff0c\u7279\u522b\u662f\u6d4f\u89c8\u5668\u53d1\u9001GET\u8bf7\u6c42\u7684\u65f6\u5019\u90fd\u662f\u8fd9\u6837\uff0cHTTP\u62a5\u6587\u7ecf\u5e38\u662f\u53ea\u6709header\u800c\u6ca1body\uff0c\u76f8\u5f53\u4e8e\u53ea\u53d1\u4e86\u4e00\u4e2a\u8d85\u7ea7\u201c\u5927\u5934\u201d\u8fc7\u6765\uff0c\u4f60\u53ef\u4ee5\u60f3\u8c61\u7684\u51fa\u6765\uff1a\u6bcf\u65f6\u6bcf\u523b\u7f51\u7edc\u4e0a\u90fd\u4f1a\u6709\u6570\u4e0d\u6e05\u7684\u201c\u5927\u5934\u513f\u5b50\u201d\u5728\u8dd1\u6765\u8dd1\u53bb\u3002</p> <p>\u4e0d\u8fc7\u8fd9\u4e2a\u201c\u5927\u5934\u201d\u4e5f\u4e0d\u80fd\u592a\u5927\uff0c\u867d\u7136HTTP\u534f\u8bae\u5bf9header\u7684\u5927\u5c0f\u6ca1\u6709\u505a\u9650\u5236\uff0c\u4f46\u5404\u4e2aWeb\u670d\u52a1\u5668\u90fd\u4e0d\u5141\u8bb8\u8fc7\u5927\u7684\u8bf7\u6c42\u5934\uff0c\u56e0\u4e3a\u5934\u90e8\u592a\u5927\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf\u7684\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u5f71\u54cd\u8fd0\u884c\u6548\u7387\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_17","title":"\u8bf7\u6c42\u884c","text":"<p>\u4e86\u89e3\u4e86HTTP\u62a5\u6587\u7684\u57fa\u672c\u7ed3\u6784\u540e\uff0c\u6211\u4eec\u6765\u770b\u770b\u8bf7\u6c42\u62a5\u6587\u91cc\u7684\u8d77\u59cb\u884c\u4e5f\u5c31\u662f\u8bf7\u6c42\u884c\uff08request line\uff09\uff0c\u5b83\u7b80\u8981\u5730\u63cf\u8ff0\u4e86\u5ba2\u6237\u7aef\u60f3\u8981\u5982\u4f55\u64cd\u4f5c\u670d\u52a1\u5668\u7aef\u7684\u8d44\u6e90\u3002</p> <p>\u8bf7\u6c42\u884c\u7531\u4e09\u90e8\u5206\u6784\u6210\uff1a</p> <ol> <li>\u8bf7\u6c42\u65b9\u6cd5\uff1a\u662f\u4e00\u4e2a\u52a8\u8bcd\uff0c\u5982GET/POST\uff0c\u8868\u793a\u5bf9\u8d44\u6e90\u7684\u64cd\u4f5c\uff1b</li> <li>\u8bf7\u6c42\u76ee\u6807\uff1a\u901a\u5e38\u662f\u4e00\u4e2aURI\uff0c\u6807\u8bb0\u4e86\u8bf7\u6c42\u65b9\u6cd5\u8981\u64cd\u4f5c\u7684\u8d44\u6e90\uff1b</li> <li>\u7248\u672c\u53f7\uff1a\u8868\u793a\u62a5\u6587\u4f7f\u7528\u7684HTTP\u534f\u8bae\u7248\u672c\u3002</li> </ol> <p>\u8fd9\u4e09\u4e2a\u90e8\u5206\u901a\u5e38\u4f7f\u7528\u7a7a\u683c\uff08space\uff09\u6765\u5206\u9694\uff0c\u6700\u540e\u8981\u7528CRLF\u6362\u884c\u8868\u793a\u7ed3\u675f\u3002</p> <p> </p> <p>\u8fd8\u662f\u7528Wireshark\u6293\u5305\u7684\u6570\u636e\u6765\u4e3e\u4f8b\uff1a</p> <pre><code>GET / HTTP/1.1\n</code></pre> <p>\u5728\u8fd9\u4e2a\u8bf7\u6c42\u884c\u91cc\uff0c\u201cGET\u201d\u662f\u8bf7\u6c42\u65b9\u6cd5\uff0c\u201c/\u201d\u662f\u8bf7\u6c42\u76ee\u6807\uff0c\u201cHTTP/1.1\u201d\u662f\u7248\u672c\u53f7\uff0c\u628a\u8fd9\u4e09\u90e8\u5206\u8fde\u8d77\u6765\uff0c\u610f\u601d\u5c31\u662f\u201c\u670d\u52a1\u5668\u4f60\u597d\uff0c\u6211\u60f3\u83b7\u53d6\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b\u7684\u9ed8\u8ba4\u6587\u4ef6\uff0c\u6211\u7528\u7684\u534f\u8bae\u7248\u672c\u53f7\u662f1.1\uff0c\u8bf7\u4e0d\u8981\u75281.0\u6216\u80052.0\u56de\u590d\u6211\u3002\u201d</p> <p>\u522b\u770b\u8bf7\u6c42\u884c\u5c31\u4e00\u884c\uff0c\u8c8c\u4f3c\u5f88\u7b80\u5355\uff0c\u5176\u5b9e\u8fd9\u91cc\u9762\u7684\u201c\u8bb2\u7a76\u201d\u662f\u975e\u5e38\u591a\u7684\uff0c\u5c24\u5176\u662f\u524d\u9762\u7684\u8bf7\u6c42\u65b9\u6cd5\u548c\u8bf7\u6c42\u76ee\u6807\uff0c\u7ec4\u5408\u8d77\u6765\u53d8\u5316\u591a\u7aef\uff0c\u540e\u9762\u6211\u8fd8\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_18","title":"\u72b6\u6001\u884c","text":"<p>\u54cd\u5e94\u62a5\u6587\u91cc\u7684\u8d77\u59cb\u884c\uff0c\u5728\u8fd9\u91cc\u5b83\u4e0d\u53eb\u201c\u54cd\u5e94\u884c\u201d\uff0c\u800c\u662f\u53eb\u201c\u72b6\u6001\u884c\u201d\uff08status line\uff09\uff0c\u610f\u601d\u662f\u670d\u52a1\u5668\u54cd\u5e94\u7684\u72b6\u6001\u3002</p> <p>\u6bd4\u8d77\u8bf7\u6c42\u884c\u6765\u8bf4\uff0c\u72b6\u6001\u884c\u8981\u7b80\u5355\u4e00\u4e9b\uff0c\u540c\u6837\u4e5f\u662f\u7531\u4e09\u90e8\u5206\u6784\u6210\uff1a</p> <ol> <li> <p>\u7248\u672c\u53f7\uff1a\u8868\u793a\u62a5\u6587\u4f7f\u7528\u7684HTTP\u534f\u8bae\u7248\u672c\uff1b</p> </li> <li> <p>\u72b6\u6001\u7801\uff1a\u4e00\u4e2a\u4e09\u4f4d\u6570\uff0c\u7528\u4ee3\u7801\u7684\u5f62\u5f0f\u8868\u793a\u5904\u7406\u7684\u7ed3\u679c\uff0c\u6bd4\u5982200\u662f\u6210\u529f\uff0c500\u662f\u670d\u52a1\u5668\u9519\u8bef\uff1b</p> </li> <li> <p>\u539f\u56e0\uff1a\u4f5c\u4e3a\u6570\u5b57\u72b6\u6001\u7801\u8865\u5145\uff0c\u662f\u66f4\u8be6\u7ec6\u7684\u89e3\u91ca\u6587\u5b57\uff0c\u5e2e\u52a9\u4eba\u7406\u89e3\u539f\u56e0\u3002</p> </li> </ol> <p> </p> <p>\u770b\u4e00\u4e0b\u4e0a\u4e00\u8bb2\u91ccWireshark\u6293\u5305\u91cc\u7684\u54cd\u5e94\u62a5\u6587\uff0c\u72b6\u6001\u884c\u662f\uff1a</p> <pre><code>HTTP/1.1 200 OK\n</code></pre> <p>\u610f\u601d\u5c31\u662f\uff1a\u201c\u6d4f\u89c8\u5668\u4f60\u597d\uff0c\u6211\u5df2\u7ecf\u5904\u7406\u5b8c\u4e86\u4f60\u7684\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u62a5\u6587\u4f7f\u7528\u7684\u534f\u8bae\u7248\u672c\u53f7\u662f1.1\uff0c\u72b6\u6001\u7801\u662f200\uff0c\u4e00\u5207OK\u3002\u201d</p> <p>\u800c\u53e6\u4e00\u4e2a\u201cGET /favicon.ico HTTP/1.1\u201d\u7684\u54cd\u5e94\u62a5\u6587\u72b6\u6001\u884c\u662f\uff1a</p> <pre><code>HTTP/1.1 404 Not Found\n</code></pre> <p>\u7ffb\u8bd1\u6210\u4eba\u8bdd\u5c31\u662f\uff1a\u201c\u62b1\u6b49\u554a\u6d4f\u89c8\u5668\uff0c\u521a\u624d\u4f60\u7684\u8bf7\u6c42\u6536\u5230\u4e86\uff0c\u4f46\u6211\u6ca1\u627e\u5230\u4f60\u8981\u7684\u8d44\u6e90\uff0c\u9519\u8bef\u4ee3\u7801\u662f404\uff0c\u63a5\u4e0b\u6765\u7684\u4e8b\u60c5\u4f60\u5c31\u770b\u7740\u529e\u5427\u3002\u201d</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_19","title":"\u5e38\u7528\u5934\u5b57\u6bb5","text":"<p>HTTP\u534f\u8bae\u89c4\u5b9a\u4e86\u975e\u5e38\u591a\u7684\u5934\u90e8\u5b57\u6bb5\uff0c\u5b9e\u73b0\u5404\u79cd\u5404\u6837\u7684\u529f\u80fd\uff0c\u4f46\u57fa\u672c\u4e0a\u53ef\u4ee5\u5206\u4e3a\u56db\u5927\u7c7b\uff1a</p> <ol> <li>\u901a\u7528\u5b57\u6bb5\uff1a\u5728\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\u91cc\u90fd\u53ef\u4ee5\u51fa\u73b0\uff1b</li> <li>\u8bf7\u6c42\u5b57\u6bb5\uff1a\u4ec5\u80fd\u51fa\u73b0\u5728\u8bf7\u6c42\u5934\u91cc\uff0c\u8fdb\u4e00\u6b65\u8bf4\u660e\u8bf7\u6c42\u4fe1\u606f\u6216\u8005\u989d\u5916\u7684\u9644\u52a0\u6761\u4ef6\uff1b</li> <li>\u54cd\u5e94\u5b57\u6bb5\uff1a\u4ec5\u80fd\u51fa\u73b0\u5728\u54cd\u5e94\u5934\u91cc\uff0c\u8865\u5145\u8bf4\u660e\u54cd\u5e94\u62a5\u6587\u7684\u4fe1\u606f\uff1b</li> <li>\u5b9e\u4f53\u5b57\u6bb5\uff1a\u5b83\u5b9e\u9645\u4e0a\u5c5e\u4e8e\u901a\u7528\u5b57\u6bb5\uff0c\u4f46\u4e13\u95e8\u63cf\u8ff0body\u7684\u989d\u5916\u4fe1\u606f\u3002</li> </ol> <p>\u5bf9HTTP\u62a5\u6587\u7684\u89e3\u6790\u548c\u5904\u7406\u5b9e\u9645\u4e0a\u4e3b\u8981\u5c31\u662f\u5bf9\u5934\u5b57\u6bb5\u7684\u5904\u7406\uff0c\u7406\u89e3\u4e86\u5934\u5b57\u6bb5\u4e5f\u5c31\u7406\u89e3\u4e86HTTP\u62a5\u6587\u3002</p> <p>Host\u5b57\u6bb5\u5c5e\u4e8e\u8bf7\u6c42\u5b57\u6bb5\uff0c\u53ea\u80fd\u51fa\u73b0\u5728\u8bf7\u6c42\u5934\u91cc\uff0c\u5b83\u540c\u65f6\u4e5f\u662f\u552f\u4e00\u4e00\u4e2aHTTP/1.1\u89c4\u8303\u91cc\u8981\u6c42\u5fc5\u987b\u51fa\u73b0\u7684\u5b57\u6bb5\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u8bf7\u6c42\u5934\u91cc\u6ca1\u6709Host\uff0c\u90a3\u8fd9\u5c31\u662f\u4e00\u4e2a\u9519\u8bef\u7684\u62a5\u6587\u3002</p> <p>User-Agent\u5b57\u6bb5\u5c5e\u4e8e\u8bf7\u6c42\u5b57\u6bb5\uff0c\u53ea\u51fa\u73b0\u5728\u8bf7\u6c42\u5934\u91cc\u3002\u5b83\u4f7f\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u6765\u63cf\u8ff0\u53d1\u8d77HTTP\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u4f9d\u636e\u5b83\u6765\u8fd4\u56de\u6700\u5408\u9002\u6b64\u6d4f\u89c8\u5668\u663e\u793a\u7684\u9875\u9762\u3002</p> <p>\u4f46\u7531\u4e8e\u5386\u53f2\u7684\u539f\u56e0\uff0cUser-Agent\u975e\u5e38\u6df7\u4e71\uff0c\u6bcf\u4e2a\u6d4f\u89c8\u5668\u90fd\u81ea\u79f0\u662f\u201cMozilla\u201d\u201cChrome\u201d\u201cSafari\u201d\uff0c\u4f01\u56fe\u4f7f\u7528\u8fd9\u4e2a\u5b57\u6bb5\u6765\u4e92\u76f8\u201c\u4f2a\u88c5\u201d\uff0c\u5bfc\u81f4User-Agent\u53d8\u5f97\u8d8a\u6765\u8d8a\u957f\uff0c\u6700\u7ec8\u53d8\u5f97\u6beb\u65e0\u610f\u4e49\u3002</p> <p>\u4e0d\u8fc7\u6709\u7684\u6bd4\u8f83\u201c\u8bda\u5b9e\u201d\u7684\u722c\u866b\u4f1a\u5728User-Agent\u91cc\u7528\u201cspider\u201d\u6807\u660e\u81ea\u5df1\u662f\u722c\u866b\uff0c\u6240\u4ee5\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u5b57\u6bb5\u5b9e\u73b0\u7b80\u5355\u7684\u53cd\u722c\u866b\u7b56\u7565\u3002</p> <p>Date\u5b57\u6bb5\u662f\u4e00\u4e2a\u901a\u7528\u5b57\u6bb5\uff0c\u4f46\u901a\u5e38\u51fa\u73b0\u5728\u54cd\u5e94\u5934\u91cc\uff0c\u8868\u793aHTTP\u62a5\u6587\u521b\u5efa\u7684\u65f6\u95f4\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65f6\u95f4\u518d\u642d\u914d\u5176\u4ed6\u5b57\u6bb5\u51b3\u5b9a\u7f13\u5b58\u7b56\u7565\u3002</p> <p>Server\u5b57\u6bb5\u662f\u54cd\u5e94\u5b57\u6bb5\uff0c\u53ea\u80fd\u51fa\u73b0\u5728\u54cd\u5e94\u5934\u91cc\u3002\u5b83\u544a\u8bc9\u5ba2\u6237\u7aef\u5f53\u524d\u6b63\u5728\u63d0\u4f9bWeb\u670d\u52a1\u7684\u8f6f\u4ef6\u540d\u79f0\u548c\u7248\u672c\u53f7\uff0c\u4f8b\u5982\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u91cc\u5b83\u5c31\u662f\u201cServer: openresty/1.15.8.1\u201d\uff0c\u5373\u4f7f\u7528\u7684\u662fOpenResty 1.15.8.1\u3002</p> <p>Content-Length\u662f\u4e00\u4e2a\u5b9e\u4f53\u5b57\u6bb5\uff0c\u5b83\u8868\u793a\u62a5\u6587\u91ccbody\u7684\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u8bf7\u6c42\u5934\u6216\u54cd\u5e94\u5934\u7a7a\u884c\u540e\u9762\u6570\u636e\u7684\u957f\u5ea6\u3002\u670d\u52a1\u5668\u770b\u5230\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u5c31\u77e5\u9053\u4e86\u540e\u7eed\u6709\u591a\u5c11\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u63a5\u6536\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u90a3\u4e48body\u5c31\u662f\u4e0d\u5b9a\u957f\u7684\uff0c\u9700\u8981\u4f7f\u7528chunked\u65b9\u5f0f\u5206\u6bb5\u4f20\u8f93\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_20","title":"\u5c0f\u7ed3","text":"<ol> <li>HTTP\u62a5\u6587\u7ed3\u6784\u5c31\u50cf\u662f\u201c\u5927\u5934\u513f\u5b50\u201d\uff0c\u7531\u201c\u8d77\u59cb\u884c+\u5934\u90e8+\u7a7a\u884c+\u5b9e\u4f53\u201d\u7ec4\u6210\uff0c\u7b80\u5355\u5730\u8bf4\u5c31\u662f\u201cheader+body\u201d\uff1b</li> <li>HTTP\u62a5\u6587\u53ef\u4ee5\u6ca1\u6709body\uff0c\u4f46\u5fc5\u987b\u8981\u6709header\uff0c\u800c\u4e14header\u540e\u4e5f\u5fc5\u987b\u8981\u6709\u7a7a\u884c\uff0c\u5f62\u8c61\u5730\u8bf4\u5c31\u662f\u201c\u5927\u5934\u201d\u5fc5\u987b\u8981\u5e26\u7740\u201c\u8116\u5b50\u201d\uff1b</li> <li>\u8bf7\u6c42\u5934\u7531\u201c\u8bf7\u6c42\u884c+\u5934\u90e8\u5b57\u6bb5\u201d\u6784\u6210\uff0c\u54cd\u5e94\u5934\u7531\u201c\u72b6\u6001\u884c+\u5934\u90e8\u5b57\u6bb5\u201d\u6784\u6210\uff1b</li> <li>\u8bf7\u6c42\u884c\u6709\u4e09\u90e8\u5206\uff1a\u8bf7\u6c42\u65b9\u6cd5\uff0c\u8bf7\u6c42\u76ee\u6807\u548c\u7248\u672c\u53f7\uff1b</li> <li>\u72b6\u6001\u884c\u4e5f\u6709\u4e09\u90e8\u5206\uff1a\u7248\u672c\u53f7\uff0c\u72b6\u6001\u7801\u548c\u539f\u56e0\u5b57\u7b26\u4e32\uff1b</li> <li>\u5934\u90e8\u5b57\u6bb5\u662fkey-value\u7684\u5f62\u5f0f\uff0c\u7528\u201c:\u201d\u5206\u9694\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u987a\u5e8f\u4efb\u610f\uff0c\u9664\u4e86\u89c4\u5b9a\u7684\u6807\u51c6\u5934\uff0c\u4e5f\u53ef\u4ee5\u4efb\u610f\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff0c\u5b9e\u73b0\u529f\u80fd\u6269\u5c55\uff1b</li> <li>HTTP/1.1\u91cc\u552f\u4e00\u8981\u6c42\u5fc5\u987b\u63d0\u4f9b\u7684\u5934\u5b57\u6bb5\u662fHost\uff0c\u5b83\u5fc5\u987b\u51fa\u73b0\u5728\u8bf7\u6c42\u5934\u91cc\uff0c\u6807\u8bb0\u865a\u62df\u4e3b\u673a\u540d\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_7","title":"\u516b\u3001http\u534f\u8bae\u6807\u51c6\u8bf7\u6c42\u65b9\u6cd5","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_21","title":"\u6807\u51c6\u8bf7\u6c42\u65b9\u6cd5","text":"<p>HTTP\u534f\u8bae\u91cc\u4e3a\u4ec0\u4e48\u8981\u6709\u201c\u8bf7\u6c42\u65b9\u6cd5\u201d\u8fd9\u4e2a\u4e1c\u897f\u5462\uff1f</p> <p>\u8fd9\u5c31\u8981\u4eceHTTP\u534f\u8bae\u8bbe\u8ba1\u65f6\u7684\u5b9a\u4f4d\u8bf4\u8d77\u4e86\u3002\u8fd8\u8bb0\u5f97\u5417\uff1f\u8482\u59c6\u00b7\u4f2f\u7eb3\u65af-\u674e\u6700\u521d\u8bbe\u60f3\u7684\u662f\u8981\u7528HTTP\u534f\u8bae\u6784\u5efa\u4e00\u4e2a\u8d85\u94fe\u63a5\u6587\u6863\u7cfb\u7edf\uff0c\u4f7f\u7528URI\u6765\u5b9a\u4f4d\u8fd9\u4e9b\u6587\u6863\uff0c\u4e5f\u5c31\u662f\u8d44\u6e90\u3002\u90a3\u4e48\uff0c\u8be5\u600e\u4e48\u5728\u534f\u8bae\u91cc\u64cd\u4f5c\u8fd9\u4e9b\u8d44\u6e90\u5462\uff1f</p> <p>\u5f88\u663e\u7136\uff0c\u9700\u8981\u6709\u67d0\u79cd\u201c\u52a8\u4f5c\u7684\u6307\u793a\u201d\uff0c\u544a\u8bc9\u64cd\u4f5c\u8fd9\u4e9b\u8d44\u6e90\u7684\u65b9\u5f0f\u3002\u6240\u4ee5\uff0c\u5c31\u8fd9\u4e48\u51fa\u73b0\u4e86\u201c\u8bf7\u6c42\u65b9\u6cd5\u201d\u3002\u5b83\u7684\u5b9e\u9645\u542b\u4e49\u5c31\u662f\u5ba2\u6237\u7aef\u53d1\u51fa\u4e86\u4e00\u4e2a\u201c\u52a8\u4f5c\u6307\u4ee4\u201d\uff0c\u8981\u6c42\u670d\u52a1\u5668\u7aef\u5bf9URI\u5b9a\u4f4d\u7684\u8d44\u6e90\u6267\u884c\u8fd9\u4e2a\u52a8\u4f5c\u3002</p> <p>\u76ee\u524dHTTP/1.1\u89c4\u5b9a\u4e86\u516b\u79cd\u65b9\u6cd5\uff0c\u5355\u8bcd\u90fd\u5fc5\u987b\u662f\u5927\u5199\u7684\u5f62\u5f0f\uff0c\u6211\u5148\u7b80\u5355\u5730\u5217\u628a\u5b83\u4eec\u5217\u51fa\u6765\uff0c\u540e\u9762\u518d\u8be6\u7ec6\u8bb2\u89e3\u3002</p> <ol> <li>GET\uff1a\u83b7\u53d6\u8d44\u6e90\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8bfb\u53d6\u6216\u8005\u4e0b\u8f7d\u6570\u636e\uff1b</li> <li>HEAD\uff1a\u83b7\u53d6\u8d44\u6e90\u7684\u5143\u4fe1\u606f\uff1b</li> <li>POST\uff1a\u5411\u8d44\u6e90\u63d0\u4ea4\u6570\u636e\uff0c\u76f8\u5f53\u4e8e\u5199\u5165\u6216\u4e0a\u4f20\u6570\u636e\uff1b</li> <li>PUT\uff1a\u7c7b\u4f3cPOST\uff1b</li> <li>DELETE\uff1a\u5220\u9664\u8d44\u6e90\uff1b</li> <li>CONNECT\uff1a\u5efa\u7acb\u7279\u6b8a\u7684\u8fde\u63a5\u96a7\u9053\uff1b</li> <li>OPTIONS\uff1a\u5217\u51fa\u53ef\u5bf9\u8d44\u6e90\u5b9e\u884c\u7684\u65b9\u6cd5\uff1b</li> <li>TRACE\uff1a\u8ffd\u8e2a\u8bf7\u6c42-\u54cd\u5e94\u7684\u4f20\u8f93\u8def\u5f84\u3002</li> </ol> <p> </p> <p>\u5ba2\u6237\u7aef\u81ea\u7136\u5c31\u6ca1\u6709\u51b3\u5b9a\u6743\uff0c\u670d\u52a1\u5668\u638c\u63a7\u7740\u6240\u6709\u8d44\u6e90\uff0c\u4e5f\u5c31\u6709\u7edd\u5bf9\u7684\u51b3\u7b56\u6743\u529b\u3002\u5b83\u6536\u5230HTTP\u8bf7\u6c42\u62a5\u6587\u540e\uff0c\u770b\u5230\u91cc\u9762\u7684\u8bf7\u6c42\u65b9\u6cd5\uff0c\u53ef\u4ee5\u6267\u884c\u4e5f\u53ef\u4ee5\u62d2\u7edd\uff0c\u6216\u8005\u6539\u53d8\u52a8\u4f5c\u7684\u542b\u4e49\uff0c\u6bd5\u7adfHTTP\u662f\u4e00\u4e2a\u201c\u534f\u8bae\u201d\uff0c\u4e24\u8fb9\u90fd\u8981\u201c\u5546\u91cf\u7740\u6765\u201d\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u53d1\u8d77\u4e86\u4e00\u4e2aGET\u8bf7\u6c42\uff0c\u60f3\u83b7\u53d6\u201c/orders\u201d\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f46\u8fd9\u4e2a\u6587\u4ef6\u4fdd\u5bc6\u7ea7\u522b\u6bd4\u8f83\u9ad8\uff0c\u4e0d\u662f\u8c01\u90fd\u80fd\u770b\u7684\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u6709\u5982\u4e0b\u7684\u51e0\u79cd\u54cd\u5e94\u65b9\u5f0f\uff1a</p> <ol> <li>\u5047\u88c5\u8fd9\u4e2a\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a404 Not found\u62a5\u6587\uff1b</li> <li>\u7a0d\u5fae\u53cb\u597d\u4e00\u70b9\uff0c\u660e\u786e\u544a\u8bc9\u4f60\u6709\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f46\u4e0d\u5141\u8bb8\u8bbf\u95ee\uff0c\u8fd4\u56de\u4e00\u4e2a403 Forbidden\uff1b</li> <li>\u518d\u5bbd\u677e\u4e00\u4e9b\uff0c\u8fd4\u56de405 Method Not Allowed\uff0c\u7136\u540e\u7528Allow\u5934\u544a\u8bc9\u4f60\u53ef\u4ee5\u7528HEAD\u65b9\u6cd5\u83b7\u53d6\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#gethead","title":"GET/HEAD","text":"<p>GET\u65b9\u6cd5\u542b\u4e49\u662f\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90\uff0c\u8fd9\u4e2a\u8d44\u6e90\u65e2\u53ef\u4ee5\u662f\u9759\u6001\u7684\u6587\u672c\u3001\u9875\u9762\u3001\u56fe\u7247\u3001\u89c6\u9891\uff0c\u4e5f\u53ef\u4ee5\u662f\u7531PHP\u3001Java\u52a8\u6001\u751f\u6210\u7684\u9875\u9762\u6216\u8005\u5176\u4ed6\u683c\u5f0f\u7684\u6570\u636e\u3002</p> <p>GET\u65b9\u6cd5\u867d\u7136\u57fa\u672c\u52a8\u4f5c\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u642d\u914dURI\u548c\u5176\u4ed6\u5934\u5b57\u6bb5\u5c31\u80fd\u5b9e\u73b0\u5bf9\u8d44\u6e90\u66f4\u7cbe\u7ec6\u7684\u64cd\u4f5c\u3002</p> <p>\u4f8b\u5982\uff0c\u5728URI\u540e\u4f7f\u7528\u201c#\u201d\uff0c\u5c31\u53ef\u4ee5\u5728\u83b7\u53d6\u9875\u9762\u540e\u76f4\u63a5\u5b9a\u4f4d\u5230\u67d0\u4e2a\u6807\u7b7e\u6240\u5728\u7684\u4f4d\u7f6e\uff1b\u4f7f\u7528If-Modified-Since\u5b57\u6bb5\u5c31\u53d8\u6210\u4e86\u201c\u6709\u6761\u4ef6\u7684\u8bf7\u6c42\u201d\uff0c\u4ec5\u5f53\u8d44\u6e90\u88ab\u4fee\u6539\u65f6\u624d\u4f1a\u6267\u884c\u83b7\u53d6\u52a8\u4f5c\uff1b\u4f7f\u7528Range\u5b57\u6bb5\u5c31\u662f\u201c\u8303\u56f4\u8bf7\u6c42\u201d\uff0c\u53ea\u83b7\u53d6\u8d44\u6e90\u7684\u4e00\u90e8\u5206\u6570\u636e\u3002</p> <p>HEAD\u65b9\u6cd5\u4e0eGET\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4e5f\u662f\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90\uff0c\u670d\u52a1\u5668\u7684\u5904\u7406\u673a\u5236\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u4f46\u670d\u52a1\u5668\u4e0d\u4f1a\u8fd4\u56de\u8bf7\u6c42\u7684\u5b9e\u4f53\u6570\u636e\uff0c\u53ea\u4f1a\u4f20\u56de\u54cd\u5e94\u5934\uff0c\u4e5f\u5c31\u662f\u8d44\u6e90\u7684\u201c\u5143\u4fe1\u606f\u201d\u3002</p> <p>HEAD\u65b9\u6cd5\u53ef\u4ee5\u770b\u505a\u662fGET\u65b9\u6cd5\u7684\u4e00\u4e2a\u201c\u7b80\u5316\u7248\u201d\u6216\u8005\u201c\u8f7b\u91cf\u7248\u201d\u3002\u56e0\u4e3a\u5b83\u7684\u54cd\u5e94\u5934\u4e0eGET\u5b8c\u5168\u76f8\u540c\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u5728\u5f88\u591a\u5e76\u4e0d\u771f\u6b63\u9700\u8981\u8d44\u6e90\u7684\u573a\u5408\uff0c\u907f\u514d\u4f20\u8f93body\u6570\u636e\u7684\u6d6a\u8d39\u3002</p> <p>\u6bd4\u5982\uff0c\u60f3\u8981\u68c0\u67e5\u4e00\u4e2a\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c\u53ea\u8981\u53d1\u4e2aHEAD\u8bf7\u6c42\u5c31\u53ef\u4ee5\u4e86\uff0c\u6ca1\u6709\u5fc5\u8981\u7528GET\u628a\u6574\u4e2a\u6587\u4ef6\u90fd\u53d6\u4e0b\u6765\u3002\u518d\u6bd4\u5982\uff0c\u8981\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6709\u6700\u65b0\u7248\u672c\uff0c\u540c\u6837\u4e5f\u5e94\u8be5\u7528HEAD\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u54cd\u5e94\u5934\u91cc\u628a\u6587\u4ef6\u7684\u4fee\u6539\u65f6\u95f4\u4f20\u56de\u6765\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#postput","title":"POST/PUT","text":"<p>GET\u548cHEAD\u65b9\u6cd5\u662f\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\uff0c\u800cPOST\u548cPUT\u65b9\u6cd5\u5219\u662f\u76f8\u53cd\u64cd\u4f5c\uff0c\u5411URI\u6307\u5b9a\u7684\u8d44\u6e90\u63d0\u4ea4\u6570\u636e\uff0c\u6570\u636e\u5c31\u653e\u5728\u62a5\u6587\u7684body\u91cc\u3002</p> <p>POST\u4e5f\u662f\u4e00\u4e2a\u7ecf\u5e38\u7528\u5230\u7684\u8bf7\u6c42\u65b9\u6cd5\uff0c\u4f7f\u7528\u9891\u7387\u5e94\u8be5\u662f\u4ec5\u6b21\u4e8eGET\uff0c\u5e94\u7528\u7684\u573a\u666f\u4e5f\u975e\u5e38\u591a\uff0c\u53ea\u8981\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\uff0c\u7528\u7684\u5927\u591a\u6570\u90fd\u662fPOST\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_22","title":"\u5176\u4ed6\u65b9\u6cd5","text":"<p>\u8bb2\u5b8c\u4e86GET/HEAD/POST/PUT\uff0c\u8fd8\u5269\u4e0b\u56db\u4e2a\u6807\u51c6\u8bf7\u6c42\u65b9\u6cd5\uff0c\u5b83\u4eec\u5c5e\u4e8e\u6bd4\u8f83\u201c\u51b7\u50fb\u201d\u7684\u65b9\u6cd5\uff0c\u5e94\u7528\u7684\u4e0d\u662f\u5f88\u591a\u3002</p> <p>DELETE\u65b9\u6cd5\u6307\u793a\u670d\u52a1\u5668\u5220\u9664\u8d44\u6e90\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u52a8\u4f5c\u5371\u9669\u6027\u592a\u5927\uff0c\u6240\u4ee5\u901a\u5e38\u670d\u52a1\u5668\u4e0d\u4f1a\u6267\u884c\u771f\u6b63\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u800c\u662f\u5bf9\u8d44\u6e90\u505a\u4e00\u4e2a\u5220\u9664\u6807\u8bb0\u3002\u5f53\u7136\uff0c\u66f4\u591a\u7684\u65f6\u5019\u670d\u52a1\u5668\u5c31\u76f4\u63a5\u4e0d\u5904\u7406DELETE\u8bf7\u6c42\u3002</p> <p>CONNECT\u662f\u4e00\u4e2a\u6bd4\u8f83\u7279\u6b8a\u7684\u65b9\u6cd5\uff0c\u8981\u6c42\u670d\u52a1\u5668\u4e3a\u5ba2\u6237\u7aef\u548c\u53e6\u4e00\u53f0\u8fdc\u7a0b\u670d\u52a1\u5668\u5efa\u7acb\u4e00\u6761\u7279\u6b8a\u7684\u8fde\u63a5\u96a7\u9053\uff0c\u8fd9\u65f6Web\u670d\u52a1\u5668\u5728\u4e2d\u95f4\u5145\u5f53\u4e86\u4ee3\u7406\u7684\u89d2\u8272\u3002</p> <p>OPTIONS\u65b9\u6cd5\u8981\u6c42\u670d\u52a1\u5668\u5217\u51fa\u53ef\u5bf9\u8d44\u6e90\u5b9e\u884c\u7684\u64cd\u4f5c\u65b9\u6cd5\uff0c\u5728\u54cd\u5e94\u5934\u7684Allow\u5b57\u6bb5\u91cc\u8fd4\u56de\u3002\u5b83\u7684\u529f\u80fd\u5f88\u6709\u9650\uff0c\u7528\u5904\u4e5f\u4e0d\u5927\uff0c\u6709\u7684\u670d\u52a1\u5668\uff08\u4f8b\u5982Nginx\uff09\u5e72\u8106\u5c31\u6ca1\u6709\u5b9e\u73b0\u5bf9\u5b83\u7684\u652f\u6301\u3002</p> <p>TRACE\u65b9\u6cd5\u591a\u7528\u4e8e\u5bf9HTTP\u94fe\u8def\u7684\u6d4b\u8bd5\u6216\u8bca\u65ad\uff0c\u53ef\u4ee5\u663e\u793a\u51fa\u8bf7\u6c42-\u54cd\u5e94\u7684\u4f20\u8f93\u8def\u5f84\u3002\u5b83\u7684\u672c\u610f\u662f\u597d\u7684\uff0c\u4f46\u5b58\u5728\u6f0f\u6d1e\uff0c\u4f1a\u6cc4\u6f0f\u7f51\u7ad9\u7684\u4fe1\u606f\uff0c\u6240\u4ee5Web\u670d\u52a1\u5668\u901a\u5e38\u4e5f\u662f\u7981\u6b62\u4f7f\u7528\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_23","title":"\u5b89\u5168\u4e0e\u5e42\u7b49","text":"<p>\u5173\u4e8e\u8bf7\u6c42\u65b9\u6cd5\u8fd8\u6709\u4e24\u4e2a\u9762\u8bd5\u65f6\u6709\u53ef\u80fd\u4f1a\u95ee\u5230\u3001\u6bd4\u8f83\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u5b89\u5168\u4e0e\u5e42\u7b49\u3002</p> <p>\u5728HTTP\u534f\u8bae\u91cc\uff0c\u6240\u8c13\u7684\u201c\u5b89\u5168\u201d\u662f\u6307\u8bf7\u6c42\u65b9\u6cd5\u4e0d\u4f1a\u201c\u7834\u574f\u201d\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\uff0c\u5373\u4e0d\u4f1a\u5bf9\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u9020\u6210\u5b9e\u8d28\u7684\u4fee\u6539\u3002</p> <p>\u6309\u7167\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u53ea\u6709GET\u548cHEAD\u65b9\u6cd5\u662f\u201c\u5b89\u5168\u201d\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u201c\u53ea\u8bfb\u201d\u64cd\u4f5c\uff0c\u53ea\u8981\u670d\u52a1\u5668\u4e0d\u6545\u610f\u66f2\u89e3\u8bf7\u6c42\u65b9\u6cd5\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u65e0\u8bbaGET\u548cHEAD\u64cd\u4f5c\u591a\u5c11\u6b21\uff0c\u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\u90fd\u662f\u201c\u5b89\u5168\u7684\u201d\u3002</p> <p>\u800cPOST/PUT/DELETE\u64cd\u4f5c\u4f1a\u4fee\u6539\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\uff0c\u589e\u52a0\u6216\u5220\u9664\u6570\u636e\uff0c\u6240\u4ee5\u662f\u201c\u4e0d\u5b89\u5168\u201d\u7684\u3002</p> <p>\u6240\u8c13\u7684\u201c\u5e42\u7b49\u201d\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6570\u5b66\u7528\u8bed\uff0c\u88ab\u501f\u7528\u5230\u4e86HTTP\u534f\u8bae\u91cc\uff0c\u610f\u601d\u662f\u591a\u6b21\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\uff0c\u7ed3\u679c\u4e5f\u90fd\u662f\u76f8\u540c\u7684\uff0c\u5373\u591a\u6b21\u201c\u5e42\u201d\u540e\u7ed3\u679c\u201c\u76f8\u7b49\u201d\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_24","title":"\u5c0f\u7ed3","text":"<p>\u4eca\u5929\u6211\u4eec\u5b66\u4e60\u4e86HTTP\u62a5\u6587\u91cc\u8bf7\u6c42\u65b9\u6cd5\u76f8\u5173\u7684\u77e5\u8bc6\uff0c\u7b80\u5355\u5c0f\u7ed3\u4e00\u4e0b\u3002</p> <ol> <li>\u8bf7\u6c42\u65b9\u6cd5\u662f\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u3001\u8981\u6c42\u670d\u52a1\u5668\u6267\u884c\u7684\u3001\u5bf9\u8d44\u6e90\u7684\u4e00\u79cd\u64cd\u4f5c\uff1b</li> <li>\u8bf7\u6c42\u65b9\u6cd5\u662f\u5bf9\u670d\u52a1\u5668\u7684\u201c\u6307\u793a\u201d\uff0c\u771f\u6b63\u5e94\u5982\u4f55\u5904\u7406\u7531\u670d\u52a1\u5668\u6765\u51b3\u5b9a\uff1b</li> <li>\u6700\u5e38\u7528\u7684\u8bf7\u6c42\u65b9\u6cd5\u662fGET\u548cPOST\uff0c\u5206\u522b\u662f\u83b7\u53d6\u6570\u636e\u548c\u53d1\u9001\u6570\u636e\uff1b</li> <li>HEAD\u65b9\u6cd5\u662f\u8f7b\u91cf\u7ea7\u7684GET\uff0c\u7528\u6765\u83b7\u53d6\u8d44\u6e90\u7684\u5143\u4fe1\u606f\uff1b</li> <li>PUT\u57fa\u672c\u4e0a\u662fPOST\u7684\u540c\u4e49\u8bcd\uff0c\u591a\u7528\u4e8e\u66f4\u65b0\u6570\u636e\uff1b</li> <li>\u201c\u5b89\u5168\u201d\u4e0e\u201c\u5e42\u7b49\u201d\u662f\u63cf\u8ff0\u8bf7\u6c42\u65b9\u6cd5\u7684\u4e24\u4e2a\u91cd\u8981\u5c5e\u6027\uff0c\u5177\u6709\u7406\u8bba\u6307\u5bfc\u610f\u4e49\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8bbe\u8ba1\u7cfb\u7edf\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uri","title":"\u4e5d\u3001URI\u6df1\u5ea6\u7406\u89e3","text":"<p>URI\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u4f5c\u7528\u662f\u552f\u4e00\u5730\u6807\u8bb0\u8d44\u6e90\u7684\u4f4d\u7f6e\u6216\u8005\u540d\u5b57\u3002</p> <p>URI\u6700\u5e38\u7528\u7684\u5f62\u5f0f\uff0c\u7531scheme\u3001host:port\u3001path\u548cquery\u56db\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u4f46\u6709\u7684\u90e8\u5206\u53ef\u4ee5\u89c6\u60c5\u51b5\u7701\u7565\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uri_1","title":"URI\u7684\u57fa\u672c\u7ec4\u6210","text":"<p>URI\u7b2c\u4e00\u4e2a\u7ec4\u6210\u90e8\u5206\u53ebscheme\uff0c\u7ffb\u8bd1\u6210\u4e2d\u6587\u53eb\u201c\u65b9\u6848\u540d\u201d\u6216\u8005\u201c\u534f\u8bae\u540d\u201d\uff0c\u8868\u793a\u8d44\u6e90\u5e94\u8be5\u4f7f\u7528\u54ea\u79cd\u534f\u8bae\u6765\u8bbf\u95ee\u3002</p> <p>\u6700\u5e38\u89c1\u7684\u5f53\u7136\u5c31\u662f\u201chttp\u201d\u4e86\uff0c\u8868\u793a\u4f7f\u7528HTTP\u534f\u8bae\u3002\u53e6\u5916\u8fd8\u6709\u201chttps\u201d\uff0c\u8868\u793a\u4f7f\u7528\u7ecf\u8fc7\u52a0\u5bc6\u3001\u5b89\u5168\u7684HTTPS\u534f\u8bae\u3002\u6b64\u5916\u8fd8\u6709\u5176\u4ed6\u4e0d\u662f\u5f88\u5e38\u89c1\u7684scheme\uff0c\u4f8b\u5982ftp\u3001ldap\u3001file\u3001news\u7b49\u3002</p> <p>\u5728scheme\u4e4b\u540e\uff0c\u5fc5\u987b\u662f\u4e09\u4e2a\u7279\u5b9a\u7684\u5b57\u7b26\u201c://\u201d\uff0c\u5b83\u628ascheme\u548c\u540e\u9762\u7684\u90e8\u5206\u5206\u79bb\u5f00\u3002</p> <p>\u5728\u201c://\u201d\u4e4b\u540e\uff0c\u662f\u88ab\u79f0\u4e3a\u201cauthority\u201d\u7684\u90e8\u5206\uff0c\u8868\u793a\u8d44\u6e90\u6240\u5728\u7684\u4e3b\u673a\u540d\uff0c\u901a\u5e38\u7684\u5f62\u5f0f\u662f\u201chost:port\u201d\uff0c\u5373\u4e3b\u673a\u540d\u52a0\u7aef\u53e3\u53f7\u3002</p> <p>\u6709\u4e86\u534f\u8bae\u540d\u548c\u4e3b\u673a\u5730\u5740\u3001\u7aef\u53e3\u53f7\uff0c\u518d\u52a0\u4e0a\u540e\u9762\u6807\u8bb0\u8d44\u6e90\u6240\u5728\u4f4d\u7f6e\u7684path\uff0c\u6d4f\u89c8\u5668\u5c31\u53ef\u4ee5\u8fde\u63a5\u670d\u52a1\u5668\u8bbf\u95ee\u8d44\u6e90\u4e86\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uri_2","title":"URI\u7684\u67e5\u8be2\u53c2\u6570","text":"<p>URI\u540e\u9762\u8fd8\u6709\u4e00\u4e2a\u201cquery\u201d\u90e8\u5206\uff0c\u5b83\u5728path\u4e4b\u540e\uff0c\u7528\u4e00\u4e2a\u201c?\u201d\u5f00\u59cb\uff0c\u4f46\u4e0d\u5305\u542b\u201c?\u201d\uff0c\u8868\u793a\u5bf9\u8d44\u6e90\u9644\u52a0\u7684\u989d\u5916\u8981\u6c42\u3002\u8fd9\u662f\u4e2a\u5f88\u5f62\u8c61\u7684\u7b26\u53f7\uff0c\u6bd4\u201c://\u201d\u8981\u597d\u7684\u591a\uff0c\u5f88\u660e\u663e\u5730\u8868\u793a\u4e86\u201c\u67e5\u8be2\u201d\u7684\u542b\u4e49\u3002</p> <p>\u67e5\u8be2\u53c2\u6570query\u6709\u4e00\u5957\u81ea\u5df1\u7684\u683c\u5f0f\uff0c\u662f\u591a\u4e2a\u201ckey=value\u201d\u7684\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e9bKV\u503c\u7528\u5b57\u7b26\u201c&amp;\u201d\u8fde\u63a5\uff0c\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u6309\u7167\u8fd9\u4e2a\u683c\u5f0f\u628a\u957f\u4e32\u7684\u67e5\u8be2\u53c2\u6570\u89e3\u6790\u6210\u53ef\u7406\u89e3\u7684\u5b57\u5178\u6216\u5173\u8054\u6570\u7ec4\u5f62\u5f0f\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u5b9e\u9a8c\u73af\u5883\u91cc\u7528Chrome\u8bd5\u8bd5\u4e0b\u9762\u8fd9\u4e2a\u52a0\u4e86query\u53c2\u6570\u7684URI\uff1a</p> <pre><code>http://www.chrono.com:8080/11-1?uid=1234&amp;name=mario&amp;referer=xxx\n</code></pre> <p>Chrome\u7684\u5f00\u53d1\u8005\u5de5\u5177\u4e5f\u80fd\u89e3\u7801\u51faquery\u91cc\u7684KV\u5bf9\uff0c\u7701\u5f97\u6211\u4eec\u201c\u4eba\u8089\u201d\u5206\u89e3\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uri_3","title":"URI\u7684\u5b8c\u6574\u683c\u5f0f","text":"<p>\u8fd9\u4e2a\u201c\u771f\u6b63\u201d\u5f62\u6001\u6bd4\u57fa\u672c\u5f62\u6001\u591a\u4e86\u4e24\u90e8\u5206\u3002</p> <p>\u7b2c\u4e00\u4e2a\u591a\u51fa\u7684\u90e8\u5206\u662f\u534f\u8bae\u540d\u4e4b\u540e\u3001\u4e3b\u673a\u540d\u4e4b\u524d\u7684\u8eab\u4efd\u4fe1\u606f\u201cuser:passwd@\u201d\uff0c\u8868\u793a\u767b\u5f55\u4e3b\u673a\u65f6\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u4f46\u73b0\u5728\u5df2\u7ecf\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u4e86\uff08RFC7230\uff09\uff0c\u56e0\u4e3a\u5b83\u628a\u654f\u611f\u4fe1\u606f\u4ee5\u660e\u6587\u5f62\u5f0f\u66b4\u9732\u51fa\u6765\uff0c\u5b58\u5728\u4e25\u91cd\u7684\u5b89\u5168\u9690\u60a3\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u591a\u51fa\u7684\u90e8\u5206\u662f\u67e5\u8be2\u53c2\u6570\u540e\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u201c#fragment\u201d\uff0c\u5b83\u662fURI\u6240\u5b9a\u4f4d\u7684\u8d44\u6e90\u5185\u90e8\u7684\u4e00\u4e2a\u201c\u951a\u70b9\u201d\u6216\u8005\u8bf4\u662f\u201c\u6807\u7b7e\u201d\uff0c\u6d4f\u89c8\u5668\u53ef\u4ee5\u5728\u83b7\u53d6\u8d44\u6e90\u540e\u76f4\u63a5\u8df3\u8f6c\u5230\u5b83\u6307\u793a\u7684\u4f4d\u7f6e\u3002</p> <p>\u4f46\u7247\u6bb5\u6807\u8bc6\u7b26\u4ec5\u80fd\u7531\u6d4f\u89c8\u5668\u8fd9\u6837\u7684\u5ba2\u6237\u7aef\u4f7f\u7528\uff0c\u670d\u52a1\u5668\u662f\u770b\u4e0d\u5230\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6d4f\u89c8\u5668\u6c38\u8fdc\u4e0d\u4f1a\u628a\u5e26\u201c#fragment\u201d\u7684URI\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u4e5f\u6c38\u8fdc\u4e0d\u4f1a\u7528\u8fd9\u79cd\u65b9\u5f0f\u53bb\u5904\u7406\u8d44\u6e90\u7684\u7247\u6bb5\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#uri_4","title":"URI\u7684\u7f16\u7801","text":"<p>\u5728URI\u91cc\u53ea\u80fd\u4f7f\u7528ASCII\u7801\uff0c\u4f46\u5982\u679c\u8981\u5728URI\u91cc\u4f7f\u7528\u82f1\u8bed\u4ee5\u5916\u7684\u6c49\u8bed\u3001\u65e5\u8bed\u7b49\u5176\u4ed6\u8bed\u8a00\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u8fd8\u6709\uff0c\u67d0\u4e9b\u7279\u6b8a\u7684URI\uff0c\u4f1a\u5728path\u3001query\u91cc\u51fa\u73b0\u201c@&amp;?\"\u7b49\u8d77\u754c\u5b9a\u7b26\u4f5c\u7528\u7684\u5b57\u7b26\uff0c\u4f1a\u5bfc\u81f4URI\u89e3\u6790\u9519\u8bef\uff0c\u8fd9\u65f6\u53c8\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u6240\u4ee5\uff0cURI\u5f15\u5165\u4e86\u7f16\u7801\u673a\u5236\uff0c\u5bf9\u4e8eASCII\u7801\u4ee5\u5916\u7684\u5b57\u7b26\u96c6\u548c\u7279\u6b8a\u5b57\u7b26\u505a\u4e00\u4e2a\u7279\u6b8a\u7684\u64cd\u4f5c\uff0c\u628a\u5b83\u4eec\u8f6c\u6362\u6210\u4e0eURI\u8bed\u4e49\u4e0d\u51b2\u7a81\u7684\u5f62\u5f0f\u3002\u8fd9\u5728RFC\u89c4\u8303\u91cc\u79f0\u4e3a\u201cescape\u201d\u548c\u201cunescape\u201d\uff0c\u4fd7\u79f0\u201c\u8f6c\u4e49\u201d\u3002</p> <p>URI\u8f6c\u4e49\u7684\u89c4\u5219\u6709\u70b9\u201c\u7b80\u5355\u7c97\u66b4\u201d\uff0c\u76f4\u63a5\u628a\u975eASCII\u7801\u6216\u7279\u6b8a\u5b57\u7b26\u8f6c\u6362\u6210\u5341\u516d\u8fdb\u5236\u5b57\u8282\u503c\uff0c\u7136\u540e\u524d\u9762\u518d\u52a0\u4e0a\u4e00\u4e2a\u201c%\u201d\u3002</p> <p>\u4f8b\u5982\uff0c\u7a7a\u683c\u88ab\u8f6c\u4e49\u6210\u201c%20\u201d\uff0c\u201c?\u201d\u88ab\u8f6c\u4e49\u6210\u201c%3F\u201d\u3002\u800c\u4e2d\u6587\u3001\u65e5\u6587\u7b49\u5219\u901a\u5e38\u4f7f\u7528UTF-8\u7f16\u7801\u540e\u518d\u8f6c\u4e49\uff0c\u4f8b\u5982\u201c\u94f6\u6cb3\u201d\u4f1a\u88ab\u8f6c\u4e49\u6210\u201c%E9%93%B6%E6%B2%B3\u201d\u3002</p> <p>\u6709\u4e86\u8fd9\u4e2a\u7f16\u7801\u89c4\u5219\u540e\uff0cURI\u5c31\u66f4\u52a0\u5b8c\u7f8e\u4e86\uff0c\u53ef\u4ee5\u652f\u6301\u4efb\u610f\u7684\u5b57\u7b26\u96c6\u7528\u4efb\u4f55\u8bed\u8a00\u6765\u6807\u8bb0\u8d44\u6e90\u3002</p> <p>\u4e0d\u8fc7\u6211\u4eec\u5728\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u91cc\u901a\u5e38\u662f\u4e0d\u4f1a\u770b\u5230\u8fd9\u4e9b\u8f6c\u4e49\u540e\u7684\u201c\u4e71\u7801\u201d\u7684\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u6d4f\u89c8\u5668\u4e00\u79cd\u201c\u53cb\u597d\u201d\u8868\u73b0\uff0c\u9690\u85cf\u4e86URI\u7f16\u7801\u540e\u7684\u201c\u4e11\u964b\u4e00\u9762\u201d\uff0c\u4e0d\u4fe1\u4f60\u53ef\u4ee5\u8bd5\u8bd5\u4e0b\u9762\u7684\u8fd9\u4e2aURI\u3002</p> <pre><code>http://www.chrono.com:8080/11-1?\u5938\u7236\u9010\u65e5\n</code></pre> <p>\u5148\u5728Chrome\u7684\u5730\u5740\u680f\u91cc\u8f93\u5165\u8fd9\u4e2aquery\u91cc\u542b\u6709\u4e2d\u6587\u7684URI\uff0c\u7136\u540e\u70b9\u51fb\u5730\u5740\u680f\uff0c\u628a\u5b83\u518d\u62f7\u8d1d\u5230\u5176\u4ed6\u7684\u7f16\u8f91\u5668\u91cc\uff0c\u5b83\u5c31\u4f1a\u201c\u73b0\u51fa\u539f\u5f62\u201d\uff1a</p> <pre><code>http://www.chrono.com:8080/11-1?%E5%A4%B8%E7%88%B6%E9%80%90%E6%97%A5\n</code></pre>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_25","title":"\u5c0f\u7ed3","text":"<p>\u4eca\u5929\u6211\u4eec\u5b66\u4e60\u4e86\u7f51\u5740\u4e5f\u5c31\u662fURI\u7684\u77e5\u8bc6\uff0c\u5728\u8fd9\u91cc\u5c0f\u7ed3\u4e00\u4e0b\u4eca\u5929\u7684\u5185\u5bb9\u3002</p> <ol> <li>URI\u662f\u7528\u6765\u552f\u4e00\u6807\u8bb0\u670d\u52a1\u5668\u4e0a\u8d44\u6e90\u7684\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u901a\u5e38\u4e5f\u79f0\u4e3aURL\uff1b</li> <li>URI\u901a\u5e38\u7531scheme\u3001host:port\u3001path\u548cquery\u56db\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u6709\u7684\u53ef\u4ee5\u7701\u7565\uff1b</li> <li>scheme\u53eb\u201c\u65b9\u6848\u540d\u201d\u6216\u8005\u201c\u534f\u8bae\u540d\u201d\uff0c\u8868\u793a\u8d44\u6e90\u5e94\u8be5\u4f7f\u7528\u54ea\u79cd\u534f\u8bae\u6765\u8bbf\u95ee\uff1b</li> <li>\u201chost:port\u201d\u8868\u793a\u8d44\u6e90\u6240\u5728\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u53f7\uff1b</li> <li>path\u6807\u8bb0\u8d44\u6e90\u6240\u5728\u7684\u4f4d\u7f6e\uff1b</li> <li>query\u8868\u793a\u5bf9\u8d44\u6e90\u9644\u52a0\u7684\u989d\u5916\u8981\u6c42\uff1b</li> <li>\u5728URI\u91cc\u5bf9\u201c@&amp;/\u201d\u7b49\u7279\u6b8a\u5b57\u7b26\u548c\u6c49\u5b57\u5fc5\u987b\u8981\u505a\u7f16\u7801\uff0c\u5426\u5219\u670d\u52a1\u5668\u6536\u5230HTTP\u62a5\u6587\u540e\u4f1a\u65e0\u6cd5\u6b63\u786e\u5904\u7406\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_26","title":"\u5341\u3001\u72b6\u6001\u7801","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_27","title":"\u72b6\u6001\u884c","text":"<p>\u72b6\u6001\u884c\u7684\u7ed3\u6784\uff0c\u6709\u4e09\u90e8\u5206\uff1a</p> <p> </p> <p>\u5f00\u5934\u7684Version\u90e8\u5206\u662fHTTP\u534f\u8bae\u7684\u7248\u672c\u53f7\uff0c\u901a\u5e38\u662fHTTP/1.1\uff0c\u7528\u5904\u4e0d\u662f\u5f88\u5927\u3002</p> <p>\u540e\u9762\u7684Reason\u90e8\u5206\u662f\u539f\u56e0\u77ed\u8bed\uff0c\u662f\u72b6\u6001\u7801\u7684\u7b80\u77ed\u6587\u5b57\u63cf\u8ff0\uff0c\u4f8b\u5982\u201cOK\u201d\u201cNot Found\u201d\u7b49\u7b49\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002\u4f46\u5b83\u53ea\u662f\u4e3a\u4e86\u517c\u5bb9\u65e9\u671f\u7684\u6587\u672c\u5ba2\u6237\u7aef\u800c\u5b58\u5728\uff0c\u63d0\u4f9b\u7684\u4fe1\u606f\u5f88\u6709\u9650\uff0c\u76ee\u524d\u7684\u5927\u591a\u6570\u5ba2\u6237\u7aef\u90fd\u4f1a\u5ffd\u7565\u5b83\u3002</p> <p>\u6240\u4ee5\uff0c\u72b6\u6001\u884c\u91cc\u6709\u7528\u7684\u5c31\u53ea\u5269\u4e0b\u4e2d\u95f4\u7684\u72b6\u6001\u7801\uff08Status Code\uff09\u4e86\u3002\u5b83\u662f\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\uff0c\u4ee5\u4ee3\u7801\u7684\u5f62\u5f0f\u8868\u793a\u670d\u52a1\u5668\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u7ed3\u679c\uff0c\u5c31\u50cf\u6211\u4eec\u901a\u5e38\u7f16\u5199\u7a0b\u5e8f\u65f6\u51fd\u6570\u8fd4\u56de\u7684\u9519\u8bef\u7801\u4e00\u6837\u3002</p> <p>\u540d\u5b57\u662f\u201c\u72b6\u6001\u7801\u201d\u800c\u4e0d\u662f\u201c\u9519\u8bef\u7801\u201d\uff0c\u5b83\u7684\u542b\u4e49\u4e0d\u4ec5\u662f\u9519\u8bef\uff0c\u66f4\u91cd\u8981\u7684\u610f\u4e49\u5728\u4e8e\u8868\u8fbeHTTP\u6570\u636e\u5904\u7406\u7684\u201c\u72b6\u6001\u201d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f9d\u636e\u4ee3\u7801\u9002\u65f6\u8f6c\u6362\u5904\u7406\u72b6\u6001\uff0c\u4f8b\u5982\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u3001\u5207\u6362\u534f\u8bae\uff0c\u91cd\u5b9a\u5411\u8df3\u8f6c\u7b49\uff0c\u6709\u90a3\u4e48\u70b9TCP\u72b6\u6001\u8f6c\u6362\u7684\u610f\u601d\u3002</p> <p>\u76ee\u524dRFC\u6807\u51c6\u91cc\u89c4\u5b9a\u7684\u72b6\u6001\u7801\u662f\u4e09\u4f4d\u6570\uff0c\u6240\u4ee5\u53d6\u503c\u8303\u56f4\u5c31\u662f\u4ece000\u5230999\u3002\u4f46\u5982\u679c\u628a\u4ee3\u7801\u7b80\u5355\u5730\u4ece000\u5f00\u59cb\u987a\u5e8f\u7f16\u4e0b\u53bb\u5c31\u663e\u5f97\u6709\u70b9\u592a\u201clow\u201d\uff0c\u4e0d\u7075\u6d3b\u3001\u4e0d\u5229\u4e8e\u6269\u5c55\uff0c\u6240\u4ee5\u72b6\u6001\u7801\u4e5f\u88ab\u8bbe\u8ba1\u6210\u6709\u4e00\u5b9a\u7684\u683c\u5f0f\u3002</p> <p>RFC\u6807\u51c6\u628a\u72b6\u6001\u7801\u5206\u6210\u4e86\u4e94\u7c7b\uff0c\u7528\u6570\u5b57\u7684\u7b2c\u4e00\u4f4d\u8868\u793a\u5206\u7c7b\uff0c\u800c0~99\u4e0d\u7528\uff0c\u8fd9\u6837\u72b6\u6001\u7801\u7684\u5b9e\u9645\u53ef\u7528\u8303\u56f4\u5c31\u5927\u5927\u7f29\u5c0f\u4e86\uff0c\u7531000~999\u53d8\u6210\u4e86100~599\u3002</p> <p>\u8fd9\u4e94\u7c7b\u7684\u5177\u4f53\u542b\u4e49\u662f\uff1a</p> <ul> <li>1\u00d7\u00d7\uff1a\u63d0\u793a\u4fe1\u606f\uff0c\u8868\u793a\u76ee\u524d\u662f\u534f\u8bae\u5904\u7406\u7684\u4e2d\u95f4\u72b6\u6001\uff0c\u8fd8\u9700\u8981\u540e\u7eed\u7684\u64cd\u4f5c\uff1b</li> <li>2\u00d7\u00d7\uff1a\u6210\u529f\uff0c\u62a5\u6587\u5df2\u7ecf\u6536\u5230\u5e76\u88ab\u6b63\u786e\u5904\u7406\uff1b</li> <li>3\u00d7\u00d7\uff1a\u91cd\u5b9a\u5411\uff0c\u8d44\u6e90\u4f4d\u7f6e\u53d1\u751f\u53d8\u52a8\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff1b</li> <li>4\u00d7\u00d7\uff1a\u5ba2\u6237\u7aef\u9519\u8bef\uff0c\u8bf7\u6c42\u62a5\u6587\u6709\u8bef\uff0c\u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406\uff1b</li> <li>5\u00d7\u00d7\uff1a\u670d\u52a1\u5668\u9519\u8bef\uff0c\u670d\u52a1\u5668\u5728\u5904\u7406\u8bf7\u6c42\u65f6\u5185\u90e8\u53d1\u751f\u4e86\u9519\u8bef\u3002</li> </ul> <p>\u5728HTTP\u534f\u8bae\u4e2d\uff0c\u6b63\u786e\u5730\u7406\u89e3\u5e76\u5e94\u7528\u8fd9\u4e9b\u72b6\u6001\u7801\u4e0d\u662f\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u5355\u65b9\u7684\u8d23\u4efb\uff0c\u800c\u662f\u53cc\u65b9\u5171\u540c\u7684\u8d23\u4efb\u3002</p> <p>\u9645\u5f00\u53d1\u4e2d\u6bd4\u8f83\u6709\u4ef7\u503c\u7684\u72b6\u6001\u7801\u9010\u4e2a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#1","title":"1\u00d7\u00d7","text":"<p>1\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u5c5e\u4e8e\u63d0\u793a\u4fe1\u606f\uff0c\u662f\u534f\u8bae\u5904\u7406\u7684\u4e2d\u95f4\u72b6\u6001\uff0c\u5b9e\u9645\u80fd\u591f\u7528\u5230\u7684\u65f6\u5019\u5f88\u5c11\u3002</p> <p>\u6211\u4eec\u5076\u5c14\u80fd\u591f\u89c1\u5230\u7684\u662f\u201c101 Switching Protocols\u201d\u3002\u5b83\u7684\u610f\u601d\u662f\u5ba2\u6237\u7aef\u4f7f\u7528Upgrade\u5934\u5b57\u6bb5\uff0c\u8981\u6c42\u5728HTTP\u534f\u8bae\u7684\u57fa\u7840\u4e0a\u6539\u6210\u5176\u4ed6\u7684\u534f\u8bae\u7ee7\u7eed\u901a\u4fe1\uff0c\u6bd4\u5982WebSocket\u3002\u800c\u5982\u679c\u670d\u52a1\u5668\u4e5f\u540c\u610f\u53d8\u66f4\u534f\u8bae\uff0c\u5c31\u4f1a\u53d1\u9001\u72b6\u6001\u7801101\uff0c\u4f46\u8fd9\u4e4b\u540e\u7684\u6570\u636e\u4f20\u8f93\u5c31\u4e0d\u4f1a\u518d\u4f7f\u7528HTTP\u4e86\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#2","title":"2\u00d7\u00d7","text":"<p>2\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u6536\u5230\u5e76\u6210\u529f\u5904\u7406\u4e86\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u8fd9\u4e5f\u662f\u5ba2\u6237\u7aef\u6700\u613f\u610f\u770b\u5230\u7684\u72b6\u6001\u7801\u3002</p> <p>\u201c200 OK\u201d\u662f\u6700\u5e38\u89c1\u7684\u6210\u529f\u72b6\u6001\u7801\uff0c\u8868\u793a\u4e00\u5207\u6b63\u5e38\uff0c\u670d\u52a1\u5668\u5982\u5ba2\u6237\u7aef\u6240\u671f\u671b\u7684\u90a3\u6837\u8fd4\u56de\u4e86\u5904\u7406\u7ed3\u679c\uff0c\u5982\u679c\u662f\u975eHEAD\u8bf7\u6c42\uff0c\u901a\u5e38\u5728\u54cd\u5e94\u5934\u540e\u90fd\u4f1a\u6709body\u6570\u636e\u3002</p> <p>\u201c204 No Content\u201d\u662f\u53e6\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u6210\u529f\u72b6\u6001\u7801\uff0c\u5b83\u7684\u542b\u4e49\u4e0e\u201c200 OK\u201d\u57fa\u672c\u76f8\u540c\uff0c\u4f46\u54cd\u5e94\u5934\u540e\u6ca1\u6709body\u6570\u636e\u3002\u6240\u4ee5\u5bf9\u4e8eWeb\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u6b63\u786e\u5730\u533a\u5206200\u548c204\u662f\u5f88\u5fc5\u8981\u7684\u3002</p> <p>\u201c206 Partial Content\u201d\u662fHTTP\u5206\u5757\u4e0b\u8f7d\u6216\u65ad\u70b9\u7eed\u4f20\u7684\u57fa\u7840\uff0c\u5728\u5ba2\u6237\u7aef\u53d1\u9001\u201c\u8303\u56f4\u8bf7\u6c42\u201d\u3001\u8981\u6c42\u83b7\u53d6\u8d44\u6e90\u7684\u90e8\u5206\u6570\u636e\u65f6\u51fa\u73b0\uff0c\u5b83\u4e0e200\u4e00\u6837\uff0c\u4e5f\u662f\u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4f46body\u91cc\u7684\u6570\u636e\u4e0d\u662f\u8d44\u6e90\u7684\u5168\u90e8\uff0c\u800c\u662f\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u72b6\u6001\u7801206\u901a\u5e38\u8fd8\u4f1a\u4f34\u968f\u7740\u5934\u5b57\u6bb5\u201cContent-Range\u201d\uff0c\u8868\u793a\u54cd\u5e94\u62a5\u6587\u91ccbody\u6570\u636e\u7684\u5177\u4f53\u8303\u56f4\uff0c\u4f9b\u5ba2\u6237\u7aef\u786e\u8ba4\uff0c\u4f8b\u5982\u201cContent-Range: bytes 0-99/2000\u201d\uff0c\u610f\u601d\u662f\u6b64\u6b21\u83b7\u53d6\u7684\u662f\u603b\u8ba12000\u4e2a\u5b57\u8282\u7684\u524d100\u4e2a\u5b57\u8282\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#3","title":"3\u00d7\u00d7","text":"<p>3\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u8d44\u6e90\u53d1\u751f\u4e86\u53d8\u52a8\uff0c\u5ba2\u6237\u7aef\u5fc5\u987b\u7528\u65b0\u7684URI\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\uff0c\u4e5f\u5c31\u662f\u901a\u5e38\u6240\u8bf4\u7684\u201c\u91cd\u5b9a\u5411\u201d\uff0c\u5305\u62ec\u8457\u540d\u7684301\u3001302\u8df3\u8f6c\u3002</p> <p>\u201c301 Moved Permanently\u201d\u4fd7\u79f0\u201c\u6c38\u4e45\u91cd\u5b9a\u5411\u201d\uff0c\u542b\u4e49\u662f\u6b64\u6b21\u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u9700\u8981\u6539\u7528\u65b0\u7684URI\u518d\u6b21\u8bbf\u95ee\u3002</p> <p>\u4e0e\u5b83\u7c7b\u4f3c\u7684\u662f\u201c302 Found\u201d\uff0c\u66fe\u7ecf\u7684\u63cf\u8ff0\u77ed\u8bed\u662f\u201cMoved Temporarily\u201d\uff0c\u4fd7\u79f0\u201c\u4e34\u65f6\u91cd\u5b9a\u5411\u201d\uff0c\u610f\u601d\u662f\u8bf7\u6c42\u7684\u8d44\u6e90\u8fd8\u5728\uff0c\u4f46\u9700\u8981\u6682\u65f6\u7528\u53e6\u4e00\u4e2aURI\u6765\u8bbf\u95ee\u3002</p> <p>301\u548c302\u90fd\u4f1a\u5728\u54cd\u5e94\u5934\u91cc\u4f7f\u7528\u5b57\u6bb5Location\u6307\u660e\u540e\u7eed\u8981\u8df3\u8f6c\u7684URI\uff0c\u6700\u7ec8\u7684\u6548\u679c\u5f88\u76f8\u4f3c\uff0c\u6d4f\u89c8\u5668\u90fd\u4f1a\u91cd\u5b9a\u5411\u5230\u65b0\u7684URI\u3002\u4e24\u8005\u7684\u6839\u672c\u533a\u522b\u5728\u4e8e\u8bed\u4e49\uff0c\u4e00\u4e2a\u662f\u201c\u6c38\u4e45\u201d\uff0c\u4e00\u4e2a\u662f\u201c\u4e34\u65f6\u201d\uff0c\u6240\u4ee5\u5728\u573a\u666f\u3001\u7528\u6cd5\u4e0a\u5dee\u8ddd\u5f88\u5927\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u7684\u7f51\u7ad9\u5347\u7ea7\u5230\u4e86HTTPS\uff0c\u539f\u6765\u7684HTTP\u4e0d\u6253\u7b97\u7528\u4e86\uff0c\u8fd9\u5c31\u662f\u201c\u6c38\u4e45\u201d\u7684\uff0c\u6240\u4ee5\u8981\u914d\u7f6e301\u8df3\u8f6c\uff0c\u628a\u6240\u6709\u7684HTTP\u6d41\u91cf\u90fd\u5207\u6362\u5230HTTPS\u3002</p> <p>\u518d\u6bd4\u5982\uff0c\u4eca\u5929\u591c\u91cc\u7f51\u7ad9\u540e\u53f0\u8981\u7cfb\u7edf\u7ef4\u62a4\uff0c\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u8fd9\u5c31\u5c5e\u4e8e\u201c\u4e34\u65f6\u201d\u7684\uff0c\u53ef\u4ee5\u914d\u7f6e\u6210302\u8df3\u8f6c\uff0c\u628a\u6d41\u91cf\u4e34\u65f6\u5207\u6362\u5230\u4e00\u4e2a\u9759\u6001\u901a\u77e5\u9875\u9762\uff0c\u6d4f\u89c8\u5668\u770b\u5230\u8fd9\u4e2a302\u5c31\u77e5\u9053\u8fd9\u53ea\u662f\u6682\u65f6\u7684\u60c5\u51b5\uff0c\u4e0d\u4f1a\u505a\u7f13\u5b58\u4f18\u5316\uff0c\u7b2c\u4e8c\u5929\u8fd8\u4f1a\u8bbf\u95ee\u539f\u6765\u7684\u5730\u5740\u3002</p> <p>\u201c304 Not Modified\u201d \u662f\u4e00\u4e2a\u6bd4\u8f83\u6709\u610f\u601d\u7684\u72b6\u6001\u7801\uff0c\u5b83\u7528\u4e8eIf-Modified-Since\u7b49\u6761\u4ef6\u8bf7\u6c42\uff0c\u8868\u793a\u8d44\u6e90\u672a\u4fee\u6539\uff0c\u7528\u4e8e\u7f13\u5b58\u63a7\u5236\u3002\u5b83\u4e0d\u5177\u6709\u901a\u5e38\u7684\u8df3\u8f6c\u542b\u4e49\uff0c\u4f46\u53ef\u4ee5\u7406\u89e3\u6210\u201c\u91cd\u5b9a\u5411\u5df2\u5230\u7f13\u5b58\u7684\u6587\u4ef6\u201d\uff08\u5373\u201c\u7f13\u5b58\u91cd\u5b9a\u5411\u201d\uff09\u3002</p> <p>301\u3001302\u548c304\u5206\u522b\u6d89\u53ca\u4e86HTTP\u534f\u8bae\u91cc\u91cd\u8981\u7684\u201c\u91cd\u5b9a\u5411\u8df3\u8f6c\u201d\u548c\u201c\u7f13\u5b58\u63a7\u5236\u201d\uff0c\u5728\u4e4b\u540e\u7684\u8bfe\u7a0b\u4e2d\u6211\u8fd8\u4f1a\u7ec6\u8bb2\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#4","title":"4\u00d7\u00d7","text":"<p>4\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bf7\u6c42\u62a5\u6587\u6709\u8bef\uff0c\u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406\uff0c\u5b83\u5c31\u662f\u771f\u6b63\u7684\u201c\u9519\u8bef\u7801\u201d\u542b\u4e49\u4e86\u3002</p> <p>\u201c400 Bad Request\u201d\u662f\u4e00\u4e2a\u901a\u7528\u7684\u9519\u8bef\u7801\uff0c\u8868\u793a\u8bf7\u6c42\u62a5\u6587\u6709\u9519\u8bef\uff0c\u4f46\u5177\u4f53\u662f\u6570\u636e\u683c\u5f0f\u9519\u8bef\u3001\u7f3a\u5c11\u8bf7\u6c42\u5934\u8fd8\u662fURI\u8d85\u957f\u5b83\u6ca1\u6709\u660e\u786e\u8bf4\uff0c\u53ea\u662f\u4e00\u4e2a\u7b3c\u7edf\u7684\u9519\u8bef\uff0c\u5ba2\u6237\u7aef\u770b\u5230400\u53ea\u4f1a\u662f\u201c\u4e00\u5934\u96fe\u6c34\u201d\u201c\u4e0d\u77e5\u6240\u63aa\u201d\u3002\u6240\u4ee5\uff0c\u5728\u5f00\u53d1Web\u5e94\u7528\u65f6\u5e94\u5f53\u5c3d\u91cf\u907f\u514d\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de400\uff0c\u800c\u662f\u8981\u7528\u5176\u4ed6\u66f4\u6709\u660e\u786e\u542b\u4e49\u7684\u72b6\u6001\u7801\u3002</p> <p>\u201c403 Forbidden\u201d\u5b9e\u9645\u4e0a\u4e0d\u662f\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u51fa\u9519\uff0c\u800c\u662f\u8868\u793a\u670d\u52a1\u5668\u7981\u6b62\u8bbf\u95ee\u8d44\u6e90\u3002\u539f\u56e0\u53ef\u80fd\u591a\u79cd\u591a\u6837\uff0c\u4f8b\u5982\u4fe1\u606f\u654f\u611f\u3001\u6cd5\u5f8b\u7981\u6b62\u7b49\uff0c\u5982\u679c\u670d\u52a1\u5668\u53cb\u597d\u4e00\u70b9\uff0c\u53ef\u4ee5\u5728body\u91cc\u8be6\u7ec6\u8bf4\u660e\u62d2\u7edd\u8bf7\u6c42\u7684\u539f\u56e0\uff0c\u4e0d\u8fc7\u73b0\u5b9e\u4e2d\u901a\u5e38\u90fd\u662f\u76f4\u63a5\u7ed9\u4e00\u4e2a\u201c\u95ed\u95e8\u7fb9\u201d\u3002</p> <p>\u201c404 Not Found\u201d\u53ef\u80fd\u662f\u6211\u4eec\u6700\u5e38\u770b\u89c1\u4e5f\u662f\u6700\u4e0d\u613f\u610f\u770b\u5230\u7684\u4e00\u4e2a\u72b6\u6001\u7801\uff0c\u5b83\u7684\u539f\u610f\u662f\u8d44\u6e90\u5728\u672c\u670d\u52a1\u5668\u4e0a\u672a\u627e\u5230\uff0c\u6240\u4ee5\u65e0\u6cd5\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u3002\u4f46\u73b0\u5728\u5df2\u7ecf\u88ab\u201c\u7528\u6ee5\u4e86\u201d\uff0c\u53ea\u8981\u670d\u52a1\u5668\u201c\u4e0d\u9ad8\u5174\u201d\u5c31\u53ef\u4ee5\u7ed9\u51fa\u4e2a404\uff0c\u800c\u6211\u4eec\u4e5f\u65e0\u4ece\u5f97\u77e5\u540e\u9762\u5230\u5e95\u662f\u771f\u7684\u672a\u627e\u5230\uff0c\u8fd8\u662f\u6709\u4ec0\u4e48\u522b\u7684\u539f\u56e0\uff0c\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u5b83\u6bd4403\u8fd8\u8981\u4ee4\u4eba\u8ba8\u538c\u3002</p> <p>4\u00d7\u00d7\u91cc\u5269\u4e0b\u7684\u4e00\u4e9b\u4ee3\u7801\u8f83\u660e\u786e\u5730\u8bf4\u660e\u4e86\u9519\u8bef\u7684\u539f\u56e0\uff0c\u90fd\u5f88\u597d\u7406\u89e3\uff0c\u5f00\u53d1\u4e2d\u5e38\u7528\u7684\u6709\uff1a</p> <ul> <li>405 Method Not Allowed\uff1a\u4e0d\u5141\u8bb8\u4f7f\u7528\u67d0\u4e9b\u65b9\u6cd5\u64cd\u4f5c\u8d44\u6e90\uff0c\u4f8b\u5982\u4e0d\u5141\u8bb8POST\u53ea\u80fdGET\uff1b</li> <li>406 Not Acceptable\uff1a\u8d44\u6e90\u65e0\u6cd5\u6ee1\u8db3\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u6761\u4ef6\uff0c\u4f8b\u5982\u8bf7\u6c42\u4e2d\u6587\u4f46\u53ea\u6709\u82f1\u6587\uff1b</li> <li>408 Request Timeout\uff1a\u8bf7\u6c42\u8d85\u65f6\uff0c\u670d\u52a1\u5668\u7b49\u5f85\u4e86\u8fc7\u957f\u7684\u65f6\u95f4\uff1b</li> <li>409 Conflict\uff1a\u591a\u4e2a\u8bf7\u6c42\u53d1\u751f\u4e86\u51b2\u7a81\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u591a\u7ebf\u7a0b\u5e76\u53d1\u65f6\u7684\u7ade\u6001\uff1b</li> <li>413 Request Entity Too Large\uff1a\u8bf7\u6c42\u62a5\u6587\u91cc\u7684body\u592a\u5927\uff1b</li> <li>414 Request-URI Too Long\uff1a\u8bf7\u6c42\u884c\u91cc\u7684URI\u592a\u5927\uff1b</li> <li>429 Too Many Requests\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u4e86\u592a\u591a\u7684\u8bf7\u6c42\uff0c\u901a\u5e38\u662f\u7531\u4e8e\u670d\u52a1\u5668\u7684\u9650\u8fde\u7b56\u7565\uff1b</li> <li>431 Request Header Fields Too Large\uff1a\u8bf7\u6c42\u5934\u67d0\u4e2a\u5b57\u6bb5\u6216\u603b\u4f53\u592a\u5927\uff1b</li> </ul>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#5","title":"5\u00d7\u00d7","text":"<p>5\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u5ba2\u6237\u7aef\u8bf7\u6c42\u62a5\u6587\u6b63\u786e\uff0c\u4f46\u670d\u52a1\u5668\u5728\u5904\u7406\u65f6\u5185\u90e8\u53d1\u751f\u4e86\u9519\u8bef\uff0c\u65e0\u6cd5\u8fd4\u56de\u5e94\u6709\u7684\u54cd\u5e94\u6570\u636e\uff0c\u662f\u670d\u52a1\u5668\u7aef\u7684\u201c\u9519\u8bef\u7801\u201d\u3002</p> <p>\u201c500 Internal Server Error\u201d\u4e0e400\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u4e2a\u901a\u7528\u7684\u9519\u8bef\u7801\uff0c\u670d\u52a1\u5668\u7a76\u7adf\u53d1\u751f\u4e86\u4ec0\u4e48\u9519\u8bef\u6211\u4eec\u662f\u4e0d\u77e5\u9053\u7684\u3002\u4e0d\u8fc7\u5bf9\u4e8e\u670d\u52a1\u5668\u6765\u8bf4\u8fd9\u5e94\u8be5\u7b97\u662f\u597d\u4e8b\uff0c\u901a\u5e38\u4e0d\u5e94\u8be5\u628a\u670d\u52a1\u5668\u5185\u90e8\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u51fa\u9519\u7684\u51fd\u6570\u8c03\u7528\u6808\u544a\u8bc9\u5916\u754c\u3002\u867d\u7136\u4e0d\u5229\u4e8e\u8c03\u8bd5\uff0c\u4f46\u80fd\u591f\u9632\u6b62\u9ed1\u5ba2\u7684\u7aa5\u63a2\u6216\u8005\u5206\u6790\u3002</p> <p>\u201c501 Not Implemented\u201d\u8868\u793a\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u529f\u80fd\u8fd8\u4e0d\u652f\u6301\uff0c\u8fd9\u4e2a\u9519\u8bef\u7801\u6bd4500\u8981\u201c\u6e29\u548c\u201d\u4e00\u4e9b\uff0c\u548c\u201c\u5373\u5c06\u5f00\u4e1a\uff0c\u656c\u8bf7\u671f\u5f85\u201d\u7684\u610f\u601d\u5dee\u4e0d\u591a\uff0c\u4e0d\u8fc7\u5177\u4f53\u4ec0\u4e48\u65f6\u5019\u201c\u5f00\u4e1a\u201d\u5c31\u4e0d\u597d\u8bf4\u4e86\u3002</p> <p>\u201c502 Bad Gateway\u201d\u901a\u5e38\u662f\u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u65f6\u8fd4\u56de\u7684\u9519\u8bef\u7801\uff0c\u8868\u793a\u670d\u52a1\u5668\u81ea\u8eab\u5de5\u4f5c\u6b63\u5e38\uff0c\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff0c\u4f46\u5177\u4f53\u7684\u9519\u8bef\u539f\u56e0\u4e5f\u662f\u4e0d\u77e5\u9053\u7684\u3002</p> <p>\u201c503 Service Unavailable\u201d\u8868\u793a\u670d\u52a1\u5668\u5f53\u524d\u5f88\u5fd9\uff0c\u6682\u65f6\u65e0\u6cd5\u54cd\u5e94\u670d\u52a1\uff0c\u6211\u4eec\u4e0a\u7f51\u65f6\u6709\u65f6\u5019\u9047\u5230\u7684\u201c\u7f51\u7edc\u670d\u52a1\u6b63\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u201d\u7684\u63d0\u793a\u4fe1\u606f\u5c31\u662f\u72b6\u6001\u7801503\u3002</p> <p>503\u662f\u4e00\u4e2a\u201c\u4e34\u65f6\u201d\u7684\u72b6\u6001\uff0c\u5f88\u53ef\u80fd\u8fc7\u51e0\u79d2\u949f\u540e\u670d\u52a1\u5668\u5c31\u4e0d\u90a3\u4e48\u5fd9\u4e86\uff0c\u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u6240\u4ee5503\u54cd\u5e94\u62a5\u6587\u91cc\u901a\u5e38\u8fd8\u4f1a\u6709\u4e00\u4e2a\u201cRetry-After\u201d\u5b57\u6bb5\uff0c\u6307\u793a\u5ba2\u6237\u7aef\u53ef\u4ee5\u5728\u591a\u4e45\u4ee5\u540e\u518d\u6b21\u5c1d\u8bd5\u53d1\u9001\u8bf7\u6c42\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_28","title":"\u5c0f\u7ed3","text":"<ol> <li>\u72b6\u6001\u7801\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u8868\u793a\u4e86\u670d\u52a1\u5668\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u7ed3\u679c\uff1b</li> <li>\u72b6\u6001\u7801\u540e\u7684\u539f\u56e0\u77ed\u8bed\u662f\u7b80\u5355\u7684\u6587\u5b57\u63cf\u8ff0\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff1b</li> <li>\u72b6\u6001\u7801\u662f\u5341\u8fdb\u5236\u7684\u4e09\u4f4d\u6570\uff0c\u5206\u4e3a\u4e94\u7c7b\uff0c\u4ece100\u5230599\uff1b</li> <li>2\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u6210\u529f\uff0c\u5e38\u7528\u7684\u6709200\u3001204\u3001206\uff1b</li> <li>3\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u91cd\u5b9a\u5411\uff0c\u5e38\u7528\u7684\u6709301\u3001302\u3001304\uff1b</li> <li>4\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u5ba2\u6237\u7aef\u9519\u8bef\uff0c\u5e38\u7528\u7684\u6709400\u3001403\u3001404\uff1b</li> <li>5\u00d7\u00d7\u7c7b\u72b6\u6001\u7801\u8868\u793a\u670d\u52a1\u5668\u9519\u8bef\uff0c\u5e38\u7528\u7684\u6709500\u3001501\u3001502\u3001503\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_8","title":"\u5341\u4e00\u3001http\u7279\u70b9","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_29","title":"\u7075\u6d3b\u53ef\u6269\u5c55","text":"<p>\u9996\u5148\uff0c HTTP\u534f\u8bae\u662f\u4e00\u4e2a\u201c\u7075\u6d3b\u53ef\u6269\u5c55\u201d\u7684\u4f20\u8f93\u534f\u8bae\u3002</p> <p>HTTP\u534f\u8bae\u6700\u521d\u8bde\u751f\u7684\u65f6\u5019\u5c31\u6bd4\u8f83\u7b80\u5355\uff0c\u672c\u7740\u5f00\u653e\u7684\u7cbe\u795e\u53ea\u89c4\u5b9a\u4e86\u62a5\u6587\u7684\u57fa\u672c\u683c\u5f0f\uff0c\u6bd4\u5982\u7528\u7a7a\u683c\u5206\u9694\u5355\u8bcd\uff0c\u7528\u6362\u884c\u5206\u9694\u5b57\u6bb5\uff0c\u201cheader+body\u201d\u7b49\uff0c\u62a5\u6587\u91cc\u7684\u5404\u4e2a\u7ec4\u6210\u90e8\u5206\u90fd\u6ca1\u6709\u505a\u4e25\u683c\u7684\u8bed\u6cd5\u8bed\u4e49\u9650\u5236\uff0c\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u4efb\u610f\u5b9a\u5236\u3002</p> <p>\u6240\u4ee5\uff0cHTTP\u534f\u8bae\u5c31\u968f\u7740\u4e92\u8054\u7f51\u7684\u53d1\u5c55\u4e00\u540c\u6210\u957f\u8d77\u6765\u4e86\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cHTTP\u534f\u8bae\u9010\u6e10\u589e\u52a0\u4e86\u8bf7\u6c42\u65b9\u6cd5\u3001\u7248\u672c\u53f7\u3001\u72b6\u6001\u7801\u3001\u5934\u5b57\u6bb5\u7b49\u7279\u6027\u3002\u800cbody\u4e5f\u4e0d\u518d\u9650\u4e8e\u6587\u672c\u5f62\u5f0f\u7684TXT\u6216HTML\uff0c\u800c\u662f\u80fd\u591f\u4f20\u8f93\u56fe\u7247\u3001\u97f3\u9891\u89c6\u9891\u7b49\u4efb\u610f\u6570\u636e\uff0c\u8fd9\u4e9b\u90fd\u662f\u6e90\u4e8e\u5b83\u7684\u201c\u7075\u6d3b\u53ef\u6269\u5c55\u201d\u7684\u7279\u70b9\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_30","title":"\u53ef\u9760\u4f20\u8f93","text":"<p>\u7b2c\u4e8c\u4e2a\u7279\u70b9\uff0c HTTP\u534f\u8bae\u662f\u4e00\u4e2a\u201c\u53ef\u9760\u201d\u7684\u4f20\u8f93\u534f\u8bae\u3002</p> <p>\u8fd9\u4e2a\u7279\u70b9\u663e\u800c\u6613\u89c1\uff0c\u56e0\u4e3aHTTP\u534f\u8bae\u662f\u57fa\u4e8eTCP/IP\u7684\uff0c\u800cTCP\u672c\u8eab\u662f\u4e00\u4e2a\u201c\u53ef\u9760\u201d\u7684\u4f20\u8f93\u534f\u8bae\uff0c\u6240\u4ee5HTTP\u81ea\u7136\u4e5f\u5c31\u7ee7\u627f\u4e86\u8fd9\u4e2a\u7279\u6027\uff0c\u80fd\u591f\u5728\u8bf7\u6c42\u65b9\u548c\u5e94\u7b54\u65b9\u4e4b\u95f4\u201c\u53ef\u9760\u201d\u5730\u4f20\u8f93\u6570\u636e\u3002</p> <p>\u5b83\u7684\u5177\u4f53\u505a\u6cd5\u4e0eTCP/UDP\u5dee\u4e0d\u591a\uff0c\u90fd\u662f\u5bf9\u5b9e\u9645\u4f20\u8f93\u7684\u6570\u636e\uff08entity\uff09\u505a\u4e86\u4e00\u5c42\u5305\u88c5\uff0c\u52a0\u4e0a\u4e00\u4e2a\u5934\uff0c\u7136\u540e\u8c03\u7528Socket API\uff0c\u901a\u8fc7TCP/IP\u534f\u8bae\u6808\u53d1\u9001\u6216\u8005\u63a5\u6536\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_31","title":"\u5e94\u7528\u5c42\u534f\u8bae","text":"<p>\u7b2c\u4e09\u4e2a\u7279\u70b9\uff0cHTTP\u534f\u8bae\u662f\u4e00\u4e2a\u5e94\u7528\u5c42\u7684\u534f\u8bae\u3002</p> <p>\u8fd9\u4e2a\u7279\u70b9\u4e5f\u662f\u4e0d\u8a00\u81ea\u660e\u7684\uff0c\u4f46\u5374\u5f88\u91cd\u8981\u3002</p> <p>\u5728TCP/IP\u8bde\u751f\u540e\u7684\u51e0\u5341\u5e74\u91cc\uff0c\u867d\u7136\u51fa\u73b0\u4e86\u8bb8\u591a\u7684\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u4f46\u5b83\u4eec\u90fd\u4ec5\u5173\u6ce8\u5f88\u5c0f\u7684\u5e94\u7528\u9886\u57df\uff0c\u5c40\u9650\u5728\u5f88\u5c11\u7684\u5e94\u7528\u573a\u666f\u3002\u4f8b\u5982FTP\u53ea\u80fd\u4f20\u8f93\u6587\u4ef6\u3001SMTP\u53ea\u80fd\u53d1\u9001\u90ae\u4ef6\u3001SSH\u53ea\u80fd\u8fdc\u7a0b\u767b\u5f55\u7b49\uff0c\u5728\u901a\u7528\u7684\u6570\u636e\u4f20\u8f93\u65b9\u9762\u201c\u5b8c\u5168\u4e0d\u80fd\u6253\u201d\u3002</p> <p>\u6240\u4ee5HTTP\u51ed\u501f\u7740\u53ef\u643a\u5e26\u4efb\u610f\u5934\u5b57\u6bb5\u548c\u5b9e\u4f53\u6570\u636e\u7684\u62a5\u6587\u7ed3\u6784\uff0c\u4ee5\u53ca\u8fde\u63a5\u63a7\u5236\u3001\u7f13\u5b58\u4ee3\u7406\u7b49\u65b9\u4fbf\u6613\u7528\u7684\u7279\u6027\uff0c\u4e00\u51fa\u73b0\u5c31\u201c\u6280\u538b\u7fa4\u96c4\u201d\uff0c\u8fc5\u901f\u6210\u4e3a\u4e86\u5e94\u7528\u5c42\u91cc\u7684\u201c\u660e\u661f\u201d\u534f\u8bae\u3002\u53ea\u8981\u4e0d\u592a\u82db\u6c42\u6027\u80fd\uff0cHTTP\u51e0\u4e4e\u53ef\u4ee5\u4f20\u9012\u4e00\u5207\u4e1c\u897f\uff0c\u6ee1\u8db3\u5404\u79cd\u9700\u6c42\uff0c\u79f0\u5f97\u4e0a\u662f\u4e00\u4e2a\u201c\u4e07\u80fd\u201d\u7684\u534f\u8bae\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#-","title":"\u8bf7\u6c42-\u5e94\u7b54","text":"<p>\u7b2c\u56db\u4e2a\u7279\u70b9\uff0cHTTP\u534f\u8bae\u4f7f\u7528\u7684\u662f\u8bf7\u6c42-\u5e94\u7b54\u901a\u4fe1\u6a21\u5f0f\u3002</p> <p>\u8fd9\u4e2a\u8bf7\u6c42-\u5e94\u7b54\u6a21\u5f0f\u662fHTTP\u534f\u8bae\u6700\u6839\u672c\u7684\u901a\u4fe1\u6a21\u578b\uff0c\u901a\u4fd7\u6765\u8bb2\u5c31\u662f\u201c\u4e00\u53d1\u4e00\u6536\u201d\u201c\u6709\u6765\u6709\u53bb\u201d\uff0c\u5c31\u50cf\u662f\u5199\u4ee3\u7801\u65f6\u7684\u51fd\u6570\u8c03\u7528\uff0c\u53ea\u8981\u586b\u597d\u8bf7\u6c42\u5934\u91cc\u7684\u5b57\u6bb5\uff0c\u201c\u8c03\u7528\u201d\u540e\u5c31\u4f1a\u6536\u5230\u7b54\u590d\u3002</p> <p>\u8bf7\u6c42-\u5e94\u7b54\u6a21\u5f0f\u4e5f\u660e\u786e\u4e86HTTP\u534f\u8bae\u91cc\u901a\u4fe1\u53cc\u65b9\u7684\u5b9a\u4f4d\uff0c\u6c38\u8fdc\u662f\u8bf7\u6c42\u65b9\u5148\u53d1\u8d77\u8fde\u63a5\u548c\u8bf7\u6c42\uff0c\u662f\u4e3b\u52a8\u7684\uff0c\u800c\u5e94\u7b54\u65b9\u53ea\u6709\u5728\u6536\u5230\u8bf7\u6c42\u540e\u624d\u80fd\u7b54\u590d\uff0c\u662f\u88ab\u52a8\u7684\uff0c\u5982\u679c\u6ca1\u6709\u8bf7\u6c42\u65f6\u4e0d\u4f1a\u6709\u4efb\u4f55\u52a8\u4f5c\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_32","title":"\u65e0\u72b6\u6001","text":"<p>\u7b2c\u4e94\u4e2a\u7279\u70b9\uff0cHTTP\u534f\u8bae\u662f\u65e0\u72b6\u6001\u7684\u3002</p> <p>\u8fd9\u4e2a\u6240\u8c13\u7684\u201c\u72b6\u6001\u201d\u5e94\u8be5\u600e\u4e48\u7406\u89e3\u5462\uff1f</p> <p>\u201c\u72b6\u6001\u201d\u5176\u5b9e\u5c31\u662f\u5ba2\u6237\u7aef\u6216\u8005\u670d\u52a1\u5668\u91cc\u4fdd\u5b58\u7684\u4e00\u4e9b\u6570\u636e\u6216\u8005\u6807\u5fd7\uff0c\u8bb0\u5f55\u4e86\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e9b\u53d8\u5316\u4fe1\u606f\u3002</p> <p>\u4f60\u4e00\u5b9a\u77e5\u9053\uff0cTCP\u534f\u8bae\u662f\u6709\u72b6\u6001\u7684\uff0c\u4e00\u5f00\u59cb\u5904\u4e8eCLOSED\u72b6\u6001\uff0c\u8fde\u63a5\u6210\u529f\u540e\u662fESTABLISHED\u72b6\u6001\uff0c\u65ad\u5f00\u8fde\u63a5\u540e\u662fFIN-WAIT\u72b6\u6001\uff0c\u6700\u540e\u53c8\u662fCLOSED\u72b6\u6001\u3002</p> <p>\u8fd9\u4e9b\u201c\u72b6\u6001\u201d\u5c31\u9700\u8981TCP\u5728\u5185\u90e8\u7528\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u53bb\u7ef4\u62a4\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u60f3\u8c61\u6210\u662f\u4e2a\u6807\u5fd7\u91cf\uff0c\u6807\u8bb0\u5f53\u524d\u6240\u5904\u7684\u72b6\u6001\uff0c\u4f8b\u59820\u662fCLOSED\uff0c2\u662fESTABLISHED\u7b49\u7b49\u3002</p> <p>\u518d\u6765\u770bHTTP\uff0c\u90a3\u4e48\u5bf9\u6bd4\u4e00\u4e0bTCP\u5c31\u770b\u51fa\u6765\u4e86\uff0c\u5728\u6574\u4e2a\u534f\u8bae\u91cc\u6ca1\u6709\u89c4\u5b9a\u4efb\u4f55\u7684\u201c\u72b6\u6001\u201d\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u6c38\u8fdc\u662f\u5904\u5728\u4e00\u79cd\u201c\u65e0\u77e5\u201d\u7684\u72b6\u6001\u3002\u5efa\u7acb\u8fde\u63a5\u524d\u4e24\u8005\u4e92\u4e0d\u77e5\u60c5\uff0c\u6bcf\u6b21\u6536\u53d1\u7684\u62a5\u6587\u4e5f\u90fd\u662f\u4e92\u76f8\u72ec\u7acb\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u8054\u7cfb\u3002\u6536\u53d1\u62a5\u6587\u4e5f\u4e0d\u4f1a\u5bf9\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u4ea7\u751f\u4efb\u4f55\u5f71\u54cd\uff0c\u8fde\u63a5\u540e\u4e5f\u4e0d\u4f1a\u8981\u6c42\u4fdd\u5b58\u4efb\u4f55\u4fe1\u606f\u3002</p> <p>\u201c\u65e0\u72b6\u6001\u201d\u5f62\u8c61\u5730\u6765\u8bf4\u5c31\u662f\u201c\u6ca1\u6709\u8bb0\u5fc6\u80fd\u529b\u201d\u3002\u6bd4\u5982\uff0c\u6d4f\u89c8\u5668\u53d1\u4e86\u4e00\u4e2a\u8bf7\u6c42\uff0c\u8bf4\u201c\u6211\u662f\u5c0f\u660e\uff0c\u8bf7\u7ed9\u6211A\u6587\u4ef6\u3002\u201d\uff0c\u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\u5c31\u4f1a\u68c0\u67e5\u4e00\u4e0b\u6743\u9650\uff0c\u770b\u5c0f\u660e\u786e\u5b9e\u53ef\u4ee5\u8bbf\u95eeA\u6587\u4ef6\uff0c\u4e8e\u662f\u628a\u6587\u4ef6\u53d1\u56de\u7ed9\u6d4f\u89c8\u5668\u3002\u63a5\u7740\u6d4f\u89c8\u5668\u8fd8\u60f3\u8981B\u6587\u4ef6\uff0c\u4f46\u670d\u52a1\u5668\u4e0d\u4f1a\u8bb0\u5f55\u521a\u624d\u7684\u8bf7\u6c42\u72b6\u6001\uff0c\u4e0d\u77e5\u9053\u7b2c\u4e8c\u4e2a\u8bf7\u6c42\u548c\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u662f\u540c\u4e00\u4e2a\u6d4f\u89c8\u5668\u53d1\u6765\u7684\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u5fc5\u987b\u8fd8\u5f97\u91cd\u590d\u4e00\u6b21\u81ea\u5df1\u7684\u8eab\u4efd\u624d\u884c\uff1a\u201c\u6211\u662f\u521a\u624d\u7684\u5c0f\u660e\uff0c\u8bf7\u518d\u7ed9\u6211B\u6587\u4ef6\u3002\u201d</p> <p>\u6211\u4eec\u53ef\u4ee5\u518d\u5bf9\u6bd4\u4e00\u4e0bUDP\u534f\u8bae\uff0c\u4e0d\u8fc7\u5b83\u662f\u65e0\u8fde\u63a5\u4e5f\u65e0\u72b6\u6001\u7684\uff0c\u987a\u5e8f\u53d1\u5305\u4e71\u5e8f\u6536\u5305\uff0c\u6570\u636e\u5305\u53d1\u51fa\u53bb\u540e\u5c31\u4e0d\u7ba1\u4e86\uff0c\u6536\u5230\u540e\u4e5f\u4e0d\u4f1a\u987a\u5e8f\u6574\u7406\u3002\u800cHTTP\u662f\u6709\u8fde\u63a5\u65e0\u72b6\u6001\uff0c\u987a\u5e8f\u53d1\u5305\u987a\u5e8f\u6536\u5305\uff0c\u6309\u7167\u6536\u53d1\u7684\u987a\u5e8f\u7ba1\u7406\u62a5\u6587\u3002</p> <p>\u4f46\u4e0d\u8981\u5fd8\u4e86HTTP\u662f\u201c\u7075\u6d3b\u53ef\u6269\u5c55\u201d\u7684\uff0c\u867d\u7136\u6807\u51c6\u91cc\u6ca1\u6709\u89c4\u5b9a\u201c\u72b6\u6001\u201d\uff0c\u4f46\u5b8c\u5168\u80fd\u591f\u5728\u534f\u8bae\u7684\u6846\u67b6\u91cc\u7ed9\u5b83\u201c\u6253\u4e2a\u8865\u4e01\u201d\uff0c\u589e\u52a0\u8fd9\u4e2a\u7279\u6027\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_33","title":"\u5176\u4ed6\u7279\u70b9","text":"<p>\u9664\u4e86\u4ee5\u4e0a\u7684\u4e94\u5927\u7279\u70b9\uff0c\u5176\u5b9eHTTP\u534f\u8bae\u8fd8\u53ef\u4ee5\u5217\u51fa\u975e\u5e38\u591a\u7684\u7279\u70b9\uff0c\u4f8b\u5982\u4f20\u8f93\u7684\u5b9e\u4f53\u6570\u636e\u53ef\u7f13\u5b58\u53ef\u538b\u7f29\u3001\u53ef\u5206\u6bb5\u83b7\u53d6\u6570\u636e\u3001\u652f\u6301\u8eab\u4efd\u8ba4\u8bc1\u3001\u652f\u6301\u56fd\u9645\u5316\u8bed\u8a00\u7b49\u3002\u4f46\u8fd9\u4e9b\u5e76\u4e0d\u80fd\u7b97\u662fHTTP\u7684\u57fa\u672c\u7279\u70b9\uff0c\u56e0\u4e3a\u8fd9\u90fd\u662f\u7531\u7b2c\u4e00\u4e2a\u201c\u7075\u6d3b\u53ef\u6269\u5c55\u201d\u7684\u7279\u70b9\u6240\u884d\u751f\u51fa\u6765\u7684\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_34","title":"\u5c0f\u7ed3","text":"<ol> <li>HTTP\u662f\u7075\u6d3b\u53ef\u6269\u5c55\u7684\uff0c\u53ef\u4ee5\u4efb\u610f\u6dfb\u52a0\u5934\u5b57\u6bb5\u5b9e\u73b0\u4efb\u610f\u529f\u80fd\uff1b</li> <li>HTTP\u662f\u53ef\u9760\u4f20\u8f93\u534f\u8bae\uff0c\u57fa\u4e8eTCP/IP\u534f\u8bae\u201c\u5c3d\u91cf\u201d\u4fdd\u8bc1\u6570\u636e\u7684\u9001\u8fbe\uff1b</li> <li>HTTP\u662f\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u6bd4FTP\u3001SSH\u7b49\u66f4\u901a\u7528\u529f\u80fd\u66f4\u591a\uff0c\u80fd\u591f\u4f20\u8f93\u4efb\u610f\u6570\u636e\uff1b</li> <li>HTTP\u4f7f\u7528\u4e86\u8bf7\u6c42-\u5e94\u7b54\u6a21\u5f0f\uff0c\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u88ab\u52a8\u56de\u590d\u8bf7\u6c42\uff1b</li> <li>HTTP\u672c\u8d28\u4e0a\u662f\u65e0\u72b6\u6001\u7684\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u662f\u4e92\u76f8\u72ec\u7acb\u3001\u6beb\u65e0\u5173\u8054\u7684\uff0c\u534f\u8bae\u4e0d\u8981\u6c42\u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u8bb0\u5f55\u8bf7\u6c42\u76f8\u5173\u7684\u4fe1\u606f\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_9","title":"\u5341\u4e8c\u3001http\u4f18\u7f3a\u70b9","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_35","title":"\u7b80\u5355\u3001\u7075\u6d3b\u3001\u6613\u4e8e\u6269\u5c55","text":"<p>\u9996\u5148\uff0cHTTP\u6700\u91cd\u8981\u4e5f\u662f\u6700\u7a81\u51fa\u7684\u4f18\u70b9\u662f\u201c\u7b80\u5355\u3001\u7075\u6d3b\u3001\u6613\u4e8e\u6269\u5c55\u201d\u3002</p> <p>\u521d\u6b21\u63a5\u89e6HTTP\u7684\u4eba\u90fd\u4f1a\u8ba4\u4e3a\uff0cHTTP\u534f\u8bae\u662f\u5f88\u201c\u7b80\u5355\u201d\u7684\uff0c\u57fa\u672c\u7684\u62a5\u6587\u683c\u5f0f\u5c31\u662f\u201cheader+body\u201d\uff0c\u5934\u90e8\u4fe1\u606f\u4e5f\u662f\u7b80\u5355\u7684\u6587\u672c\u683c\u5f0f\uff0c\u7528\u7684\u4e5f\u90fd\u662f\u5e38\u89c1\u7684\u82f1\u6587\u5355\u8bcd\uff0c\u5373\u4f7f\u4e0d\u53bb\u770bRFC\u6587\u6863\uff0c\u53ea\u9760\u731c\u4e5f\u80fd\u731c\u51fa\u4e2a\u201c\u516b\u4e5d\u4e0d\u79bb\u5341\u201d\u3002</p> <p>\u53ef\u4e0d\u8981\u5c0f\u770b\u4e86\u201c\u7b80\u5355\u201d\u8fd9\u4e2a\u4f18\u70b9\uff0c\u5b83\u4e0d\u4ec5\u964d\u4f4e\u4e86\u5b66\u4e60\u548c\u4f7f\u7528\u7684\u95e8\u69db\uff0c\u80fd\u591f\u8ba9\u66f4\u591a\u7684\u4eba\u7814\u7a76\u548c\u5f00\u53d1HTTP\u5e94\u7528\uff0c\u800c\u4e14\u6211\u5728\u7b2c1\u8bb2\u65f6\u5c31\u8bf4\u8fc7\uff0c\u201c\u7b80\u5355\u201d\u8574\u542b\u4e86\u8fdb\u5316\u548c\u6269\u5c55\u7684\u53ef\u80fd\u6027\uff0c\u6240\u8c13\u201c\u5c11\u5373\u662f\u591a\u201d\uff0c\u201c\u628a\u7b80\u5355\u7684\u7cfb\u7edf\u53d8\u590d\u6742\u201d\uff0c\u8981\u6bd4\u201c\u628a\u590d\u6742\u7684\u7cfb\u7edf\u53d8\u7b80\u5355\u201d\u5bb9\u6613\u5f97\u591a\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_36","title":"\u5e94\u7528\u5e7f\u6cdb\u3001\u73af\u5883\u6210\u719f","text":"<p>HTTP\u534f\u8bae\u7684\u53e6\u4e00\u5927\u4f18\u70b9\u662f\u201c\u5e94\u7528\u5e7f\u6cdb\u201d\uff0c\u8f6f\u786c\u4ef6\u73af\u5883\u90fd\u975e\u5e38\u6210\u719f\u3002</p> <p>\u968f\u7740\u4e92\u8054\u7f51\u7279\u522b\u662f\u79fb\u52a8\u4e92\u8054\u7f51\u7684\u666e\u53ca\uff0cHTTP\u7684\u89e6\u89d2\u5df2\u7ecf\u5ef6\u4f38\u5230\u4e86\u4e16\u754c\u7684\u6bcf\u4e00\u4e2a\u89d2\u843d\uff1a\u4ece\u7b80\u5355\u7684Web\u9875\u9762\u5230\u590d\u6742\u7684JSON\u3001XML\u6570\u636e\uff0c\u4ece\u53f0\u5f0f\u673a\u4e0a\u7684\u6d4f\u89c8\u5668\u5230\u624b\u673a\u4e0a\u7684\u5404\u79cdAPP\uff0c\u4ece\u770b\u65b0\u95fb\u3001\u6ce1\u8bba\u575b\u5230\u8d2d\u7269\u3001\u7406\u8d22\u3001\u201c\u5403\u9e21\u201d\uff0c\u4f60\u5f88\u96be\u627e\u5230\u4e00\u4e2a\u6ca1\u6709\u4f7f\u7528HTTP\u7684\u5730\u65b9\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_37","title":"\u65e0\u72b6\u6001","text":"<p>\u770b\u8fc7\u4e86\u4e24\u4e2a\u4f18\u70b9\uff0c\u6211\u4eec\u518d\u6765\u770b\u770b\u4e00\u628a\u201c\u53cc\u5203\u5251\u201d\uff0c\u4e5f\u5c31\u662f\u4e0a\u4e00\u8bb2\u4e2d\u8bf4\u5230\u7684\u201c\u65e0\u72b6\u6001\u201d\uff0c\u5b83\u5bf9\u4e8eHTTP\u6765\u8bf4\u65e2\u662f\u4f18\u70b9\u4e5f\u662f\u7f3a\u70b9\u3002</p> <p>\u201c\u65e0\u72b6\u6001\u201d\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f</p> <p>\u56e0\u4e3a\u670d\u52a1\u5668\u6ca1\u6709\u201c\u8bb0\u5fc6\u80fd\u529b\u201d\uff0c\u6240\u4ee5\u5c31\u4e0d\u9700\u8981\u989d\u5916\u7684\u8d44\u6e90\u6765\u8bb0\u5f55\u72b6\u6001\u4fe1\u606f\uff0c\u4e0d\u4ec5\u5b9e\u73b0\u4e0a\u4f1a\u7b80\u5355\u4e00\u4e9b\uff0c\u800c\u4e14\u8fd8\u80fd\u51cf\u8f7b\u670d\u52a1\u5668\u7684\u8d1f\u62c5\uff0c\u80fd\u591f\u628a\u66f4\u591a\u7684CPU\u548c\u5185\u5b58\u7528\u6765\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u800c\u4e14\uff0c\u201c\u65e0\u72b6\u6001\u201d\u4e5f\u8868\u793a\u670d\u52a1\u5668\u90fd\u662f\u76f8\u540c\u7684\uff0c\u6ca1\u6709\u201c\u72b6\u6001\u201d\u7684\u5dee\u5f02\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7ec4\u6210\u96c6\u7fa4\uff0c\u8ba9\u8d1f\u8f7d\u5747\u8861\u628a\u8bf7\u6c42\u8f6c\u53d1\u5230\u4efb\u610f\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u72b6\u6001\u4e0d\u4e00\u81f4\u5bfc\u81f4\u5904\u7406\u51fa\u9519\uff0c\u4f7f\u7528\u201c\u5806\u673a\u5668\u201d\u7684\u201c\u7b28\u529e\u6cd5\u201d\u8f7b\u677e\u5b9e\u73b0\u9ad8\u5e76\u53d1\u9ad8\u53ef\u7528\u3002</p> <p>\u90a3\u4e48\uff0c\u201c\u65e0\u72b6\u6001\u201d\u53c8\u6709\u4ec0\u4e48\u574f\u5904\u5462\uff1f</p> <p>\u65e2\u7136\u670d\u52a1\u5668\u6ca1\u6709\u201c\u8bb0\u5fc6\u80fd\u529b\u201d\uff0c\u5b83\u5c31\u65e0\u6cd5\u652f\u6301\u9700\u8981\u8fde\u7eed\u591a\u4e2a\u6b65\u9aa4\u7684\u201c\u4e8b\u52a1\u201d\u64cd\u4f5c\u3002\u4f8b\u5982\u7535\u5546\u8d2d\u7269\uff0c\u9996\u5148\u8981\u767b\u5f55\uff0c\u7136\u540e\u6dfb\u52a0\u8d2d\u7269\u8f66\uff0c\u518d\u4e0b\u5355\u3001\u7ed3\u7b97\u3001\u652f\u4ed8\uff0c\u8fd9\u4e00\u7cfb\u5217\u64cd\u4f5c\u90fd\u9700\u8981\u77e5\u9053\u7528\u6237\u7684\u8eab\u4efd\u624d\u884c\uff0c\u4f46\u201c\u65e0\u72b6\u6001\u201d\u670d\u52a1\u5668\u662f\u4e0d\u77e5\u9053\u8fd9\u4e9b\u8bf7\u6c42\u662f\u76f8\u4e92\u5173\u8054\u7684\uff0c\u6bcf\u6b21\u90fd\u5f97\u95ee\u4e00\u904d\u8eab\u4efd\u4fe1\u606f\uff0c\u4e0d\u4ec5\u9ebb\u70e6\uff0c\u800c\u4e14\u8fd8\u589e\u52a0\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u4f20\u8f93\u91cf\u3002</p> <p>\u6240\u4ee5\uff0cHTTP\u534f\u8bae\u6700\u597d\u662f\u65e2\u201c\u65e0\u72b6\u6001\u201d\u53c8\u201c\u6709\u72b6\u6001\u201d\uff0c\u4e0d\u8fc7\u8fd8\u771f\u6709\u201c\u9c7c\u548c\u718a\u638c\u201d\u4e24\u8005\u517c\u5f97\u8fd9\u6837\u7684\u597d\u4e8b\uff0c\u8fd9\u5c31\u662f\u201c\u5c0f\u751c\u997c\u201dCookie\u6280\u672f\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_38","title":"\u660e\u6587","text":"<p>HTTP\u534f\u8bae\u91cc\u8fd8\u6709\u4e00\u628a\u4f18\u7f3a\u70b9\u4e00\u4f53\u7684\u201c\u53cc\u5203\u5251\u201d\uff0c\u5c31\u662f\u660e\u6587\u4f20\u8f93\u3002</p> <p>\u201c\u660e\u6587\u201d\u610f\u601d\u5c31\u662f\u534f\u8bae\u91cc\u7684\u62a5\u6587\uff08\u51c6\u786e\u5730\u8bf4\u662fheader\u90e8\u5206\uff09\u4e0d\u4f7f\u7528\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u800c\u662f\u7528\u7b80\u5355\u53ef\u9605\u8bfb\u7684\u6587\u672c\u5f62\u5f0f\u3002</p> <p>\u5bf9\u6bd4TCP\u3001UDP\u8fd9\u6837\u7684\u4e8c\u8fdb\u5236\u534f\u8bae\uff0c\u5b83\u7684\u4f18\u70b9\u663e\u800c\u6613\u89c1\uff0c\u4e0d\u9700\u8981\u501f\u52a9\u4efb\u4f55\u5916\u90e8\u5de5\u5177\uff0c\u7528\u6d4f\u89c8\u5668\u3001Wireshark\u6216\u8005tcpdump\u6293\u5305\u540e\uff0c\u76f4\u63a5\u7528\u8089\u773c\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u67e5\u770b\u6216\u8005\u4fee\u6539\uff0c\u4e3a\u6211\u4eec\u7684\u5f00\u53d1\u8c03\u8bd5\u5de5\u4f5c\u5e26\u6765\u6781\u5927\u7684\u4fbf\u5229\u3002</p> <p>\u5f53\u7136\uff0c\u660e\u6587\u7684\u7f3a\u70b9\u4e5f\u662f\u4e00\u6837\u663e\u800c\u6613\u89c1\uff0cHTTP\u62a5\u6587\u7684\u6240\u6709\u4fe1\u606f\u90fd\u4f1a\u66b4\u9732\u5728\u201c\u5149\u5929\u5316\u65e5\u4e4b\u4e0b\u201d\uff0c\u5728\u6f2b\u957f\u7684\u4f20\u8f93\u94fe\u8def\u7684\u6bcf\u4e00\u4e2a\u73af\u8282\u4e0a\u90fd\u6beb\u65e0\u9690\u79c1\u53ef\u8a00\uff0c\u4e0d\u6000\u597d\u610f\u7684\u4eba\u53ea\u8981\u4fb5\u5165\u4e86\u8fd9\u4e2a\u94fe\u8def\u91cc\u7684\u67d0\u4e2a\u8bbe\u5907\uff0c\u7b80\u5355\u5730\u201c\u65c1\u8def\u201d\u4e00\u4e0b\u6d41\u91cf\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u901a\u4fe1\u7684\u7aa5\u89c6\u3002</p> <p>\u4f60\u6709\u6ca1\u6709\u542c\u8bf4\u8fc7\u201c\u514d\u8d39WiFi\u9677\u9631\u201d\u4e4b\u7c7b\u7684\u65b0\u95fb\u5462\uff1f</p> <p>\u9ed1\u5ba2\u5c31\u662f\u5229\u7528\u4e86HTTP\u660e\u6587\u4f20\u8f93\u7684\u7f3a\u70b9\uff0c\u5728\u516c\u5171\u573a\u6240\u67b6\u8bbe\u4e00\u4e2aWiFi\u70ed\u70b9\u5f00\u59cb\u201c\u9493\u9c7c\u201d\uff0c\u8bf1\u9a97\u7f51\u6c11\u4e0a\u7f51\u3002\u4e00\u65e6\u4f60\u8fde\u4e0a\u4e86\u8fd9\u4e2aWiFi\u70ed\u70b9\uff0c\u6240\u6709\u7684\u6d41\u91cf\u90fd\u4f1a\u88ab\u622a\u83b7\u4fdd\u5b58\uff0c\u91cc\u9762\u5982\u679c\u6709\u94f6\u884c\u5361\u53f7\u3001\u7f51\u7ad9\u5bc6\u7801\u7b49\u654f\u611f\u4fe1\u606f\u7684\u8bdd\u90a3\u5c31\u5371\u9669\u4e86\uff0c\u9ed1\u5ba2\u62ff\u5230\u4e86\u8fd9\u4e9b\u6570\u636e\u5c31\u53ef\u4ee5\u5192\u5145\u4f60\u4e3a\u6240\u6b32\u4e3a\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_39","title":"\u4e0d\u5b89\u5168","text":"<p>\u4e0e\u201c\u660e\u6587\u201d\u7f3a\u70b9\u76f8\u5173\u4f46\u4e0d\u5b8c\u5168\u7b49\u540c\u7684\u53e6\u4e00\u4e2a\u7f3a\u70b9\u662f\u201c\u4e0d\u5b89\u5168\u201d\u3002</p> <p>\u5b89\u5168\u6709\u5f88\u591a\u7684\u65b9\u9762\uff0c\u660e\u6587\u53ea\u662f\u201c\u673a\u5bc6\u201d\u65b9\u9762\u7684\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5728\u201c\u8eab\u4efd\u8ba4\u8bc1\u201d\u548c\u201c\u5b8c\u6574\u6027\u6821\u9a8c\u201d\u8fd9\u4e24\u65b9\u9762HTTP\u4e5f\u662f\u6b20\u7f3a\u7684\u3002</p> <p>\u201c\u8eab\u4efd\u8ba4\u8bc1\u201d\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u201c\u600e\u4e48\u8bc1\u660e\u4f60\u5c31\u662f\u4f60\u201d\u3002\u5728\u73b0\u5b9e\u751f\u6d3b\u4e2d\u6bd4\u8f83\u597d\u529e\uff0c\u4f60\u53ef\u4ee5\u62ff\u51fa\u8eab\u4efd\u8bc1\u3001\u9a7e\u7167\u6216\u8005\u62a4\u7167\uff0c\u4e0a\u9762\u6709\u7167\u7247\u548c\u6743\u5a01\u673a\u6784\u7684\u76d6\u7ae0\uff0c\u80fd\u591f\u8bc1\u660e\u4f60\u7684\u8eab\u4efd\u3002</p> <p>\u4f46\u5728\u865a\u62df\u7684\u7f51\u7edc\u4e16\u754c\u91cc\u8fd9\u5374\u662f\u4e2a\u9ebb\u70e6\u4e8b\u3002HTTP\u6ca1\u6709\u63d0\u4f9b\u6709\u6548\u7684\u624b\u6bb5\u6765\u786e\u8ba4\u901a\u4fe1\u53cc\u65b9\u7684\u771f\u5b9e\u8eab\u4efd\u3002\u867d\u7136\u534f\u8bae\u91cc\u6709\u4e00\u4e2a\u57fa\u672c\u7684\u8ba4\u8bc1\u673a\u5236\uff0c\u4f46\u56e0\u4e3a\u521a\u624d\u6240\u8bf4\u7684\u660e\u6587\u4f20\u8f93\u7f3a\u70b9\uff0c\u8fd9\u4e2a\u673a\u5236\u51e0\u4e4e\u53ef\u4ee5\u8bf4\u662f\u201c\u7eb8\u7cca\u7684\u201d\uff0c\u975e\u5e38\u5bb9\u6613\u88ab\u653b\u7834\u3002\u5982\u679c\u4ec5\u4f7f\u7528HTTP\u534f\u8bae\uff0c\u5f88\u53ef\u80fd\u4f60\u4f1a\u8fde\u5230\u4e00\u4e2a\u9875\u9762\u4e00\u6a21\u4e00\u6837\u4f46\u5374\u662f\u4e2a\u5047\u5192\u7684\u7f51\u7ad9\uff0c\u7136\u540e\u518d\u88ab\u201c\u9493\u201d\u8d70\u5404\u79cd\u79c1\u4eba\u4fe1\u606f\u3002</p> <p>HTTP\u534f\u8bae\u4e5f\u4e0d\u652f\u6301\u201c\u5b8c\u6574\u6027\u6821\u9a8c\u201d\uff0c\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u5bb9\u6613\u88ab\u7be1\u6539\u800c\u65e0\u6cd5\u9a8c\u8bc1\u771f\u4f2a\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u6536\u5230\u4e86\u4e00\u6761\u94f6\u884c\u7528HTTP\u53d1\u6765\u7684\u6d88\u606f\uff1a\u201c\u5c0f\u660e\u5411\u4f60\u8f6c\u8d26\u4e00\u767e\u5143\u201d\uff0c\u4f60\u65e0\u6cd5\u77e5\u9053\u5c0f\u660e\u662f\u5426\u771f\u7684\u5c31\u53ea\u8f6c\u4e86\u4e00\u767e\u5143\uff0c\u4e5f\u8bb8\u4ed6\u8f6c\u4e86\u4e00\u5343\u5143\u6216\u8005\u4e94\u5341\u5143\uff0c\u4f46\u88ab\u9ed1\u5ba2\u7be1\u6539\u6210\u4e86\u4e00\u767e\u5143\uff0c\u771f\u5b9e\u60c5\u51b5\u5230\u5e95\u662f\u4ec0\u4e48\u6837\u5b50HTTP\u534f\u8bae\u6ca1\u6709\u529e\u6cd5\u7ed9\u4f60\u7b54\u6848\u3002</p> <p>\u867d\u7136\u94f6\u884c\u53ef\u4ee5\u7528MD5\u3001SHA1\u7b49\u7b97\u6cd5\u7ed9\u62a5\u6587\u52a0\u4e0a\u6570\u5b57\u6458\u8981\uff0c\u4f46\u8fd8\u662f\u56e0\u4e3a\u201c\u660e\u6587\u201d\u8fd9\u4e2a\u81f4\u547d\u7f3a\u70b9\uff0c\u9ed1\u5ba2\u53ef\u4ee5\u8fde\u540c\u6458\u8981\u4e00\u540c\u4fee\u6539\uff0c\u6700\u7ec8\u8fd8\u662f\u5224\u65ad\u4e0d\u51fa\u62a5\u6587\u662f\u5426\u88ab\u7be1\u6539\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_40","title":"\u6027\u80fd","text":"<p>\u6700\u540e\u6211\u4eec\u6765\u8c08\u8c08HTTP\u7684\u6027\u80fd\uff0c\u53ef\u4ee5\u7528\u516d\u4e2a\u5b57\u6765\u6982\u62ec\uff1a\u201c\u4e0d\u7b97\u5dee\uff0c\u4e0d\u591f\u597d\u201d\u3002</p> <p>HTTP\u534f\u8bae\u57fa\u4e8eTCP/IP\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u7684\u901a\u4fe1\u6a21\u5f0f\uff0c\u6240\u4ee5\u6027\u80fd\u7684\u5173\u952e\u5c31\u5728\u8fd9\u4e24\u70b9\u4e0a\u3002</p> <p>\u5fc5\u987b\u8981\u8bf4\u7684\u662f\uff0cTCP\u7684\u6027\u80fd\u662f\u4e0d\u5dee\u7684\uff0c\u5426\u5219\u4e5f\u4e0d\u4f1a\u7eb5\u6a2a\u4e92\u8054\u7f51\u6c5f\u6e56\u56db\u5341\u4f59\u8f7d\u4e86\uff0c\u800c\u4e14\u5b83\u5df2\u7ecf\u88ab\u7814\u7a76\u7684\u5f88\u900f\uff0c\u96c6\u6210\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u91cc\u7ecf\u8fc7\u4e86\u7ec6\u81f4\u7684\u4f18\u5316\uff0c\u8db3\u4ee5\u5e94\u4ed8\u5927\u591a\u6570\u7684\u573a\u666f\u3002</p> <p>\u53ea\u53ef\u60dc\u5982\u4eca\u7684\u6c5f\u6e56\u5df2\u7ecf\u4e0d\u662f\u4ece\u524d\u7684\u6c5f\u6e56\uff0c\u73b0\u5728\u4e92\u8054\u7f51\u7684\u7279\u70b9\u662f\u79fb\u52a8\u548c\u9ad8\u5e76\u53d1\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u7a33\u5b9a\u7684\u8fde\u63a5\u8d28\u91cf\uff0c\u6240\u4ee5\u5728TCP\u5c42\u9762\u4e0aHTTP\u534f\u8bae\u6709\u65f6\u5019\u5c31\u4f1a\u8868\u73b0\u7684\u4e0d\u591f\u597d\u3002</p> <p>\u800c\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u6a21\u5f0f\u5219\u52a0\u5267\u4e86HTTP\u7684\u6027\u80fd\u95ee\u9898\uff0c\u8fd9\u5c31\u662f\u8457\u540d\u7684\u201c\u961f\u5934\u963b\u585e\u201d\uff08Head-of-line blocking\uff09\uff0c\u5f53\u987a\u5e8f\u53d1\u9001\u7684\u8bf7\u6c42\u5e8f\u5217\u4e2d\u7684\u4e00\u4e2a\u8bf7\u6c42\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u88ab\u963b\u585e\u65f6\uff0c\u5728\u540e\u9762\u6392\u961f\u7684\u6240\u6709\u8bf7\u6c42\u4e5f\u4e00\u5e76\u88ab\u963b\u585e\uff0c\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u8fdf\u8fdf\u6536\u4e0d\u5230\u6570\u636e\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u8bde\u751f\u51fa\u4e86\u4e00\u4e2a\u4e13\u95e8\u7684\u7814\u7a76\u8bfe\u9898\u201cWeb\u6027\u80fd\u4f18\u5316\u201d\uff0cHTTP\u5b98\u65b9\u6807\u51c6\u91cc\u5c31\u6709\u201c\u7f13\u5b58\u201d\u4e00\u7ae0\uff08RFC7234\uff09\uff0c\u975e\u5b98\u65b9\u7684\u201c\u82b1\u62db\u201d\u5c31\u66f4\u591a\u4e86\uff0c\u4f8b\u5982\u5207\u56fe\u3001\u6570\u636e\u5185\u5d4c\u4e0e\u5408\u5e76\uff0c\u57df\u540d\u5206\u7247\u3001JavaScript\u201c\u9ed1\u79d1\u6280\u201d\u7b49\u7b49\u3002</p> <p>\u4e0d\u8fc7\u73b0\u5728\u5df2\u7ecf\u6709\u4e86\u7ec8\u6781\u89e3\u51b3\u65b9\u6848\uff1aHTTP/2\u548cHTTP/3\uff0c</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_41","title":"\u5c0f\u7ed3","text":"<ol> <li>HTTP\u6700\u5927\u7684\u4f18\u70b9\u662f\u7b80\u5355\u3001\u7075\u6d3b\u548c\u6613\u4e8e\u6269\u5c55\uff1b</li> <li>HTTP\u62e5\u6709\u6210\u719f\u7684\u8f6f\u786c\u4ef6\u73af\u5883\uff0c\u5e94\u7528\u7684\u975e\u5e38\u5e7f\u6cdb\uff0c\u662f\u4e92\u8054\u7f51\u7684\u57fa\u7840\u8bbe\u65bd\uff1b</li> <li>HTTP\u662f\u65e0\u72b6\u6001\u7684\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u96c6\u7fa4\u5316\uff0c\u6269\u5c55\u6027\u80fd\uff0c\u4f46\u6709\u65f6\u4e5f\u9700\u8981\u7528Cookie\u6280\u672f\u6765\u5b9e\u73b0\u201c\u6709\u72b6\u6001\u201d\uff1b</li> <li>HTTP\u662f\u660e\u6587\u4f20\u8f93\uff0c\u6570\u636e\u5b8c\u5168\u8089\u773c\u53ef\u89c1\uff0c\u80fd\u591f\u65b9\u4fbf\u5730\u7814\u7a76\u5206\u6790\uff0c\u4f46\u4e5f\u5bb9\u6613\u88ab\u7a83\u542c\uff1b</li> <li>HTTP\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u65e0\u6cd5\u9a8c\u8bc1\u901a\u4fe1\u53cc\u65b9\u7684\u8eab\u4efd\uff0c\u4e5f\u4e0d\u80fd\u5224\u65ad\u62a5\u6587\u662f\u5426\u88ab\u7be1\u6539\uff1b</li> <li>HTTP\u7684\u6027\u80fd\u4e0d\u7b97\u5dee\uff0c\u4f46\u4e0d\u5b8c\u5168\u9002\u5e94\u73b0\u5728\u7684\u4e92\u8054\u7f51\uff0c\u8fd8\u6709\u5f88\u5927\u7684\u63d0\u5347\u7a7a\u95f4\u3002</li> </ol> <p>\u867d\u7136HTTP\u514d\u4e0d\u4e86\u8fd9\u6837\u90a3\u6837\u7684\u7f3a\u70b9\uff0c\u4f46\u4f60\u4e5f\u4e0d\u8981\u6015\uff0c\u522b\u5fd8\u4e86\u5b83\u6709\u4e00\u4e2a\u6700\u91cd\u8981\u7684\u201c\u7075\u6d3b\u53ef\u6269\u5c55\u201d\u7684\u4f18\u70b9\uff0c\u6240\u6709\u7684\u7f3a\u70b9\u90fd\u53ef\u4ee5\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\u60f3\u529e\u6cd5\u89e3\u51b3\uff0c\u63a5\u4e0b\u6765\u7684\u201c\u8fdb\u9636\u7bc7\u201d\u548c\u201c\u5b89\u5168\u7bc7\u201d\u5c31\u4f1a\u8bb2\u5230\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#https_1","title":"\u5341\u4e09\u3001https\u534f\u8bae\u539f\u7406","text":"<p>HTTPS\u5176\u5b9e\u662f\u4e00\u4e2a\u201c\u975e\u5e38\u7b80\u5355\u201d\u7684\u534f\u8bae\uff0cRFC\u6587\u6863\u5f88\u5c0f\uff0c\u53ea\u6709\u77ed\u77ed\u76847\u9875\uff0c\u91cc\u9762\u89c4\u5b9a\u4e86\u65b0\u7684\u534f\u8bae\u540d\u201chttps\u201d\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7443\uff0c\u81f3\u4e8e\u5176\u4ed6\u7684\u4ec0\u4e48\u8bf7\u6c42-\u5e94\u7b54\u6a21\u5f0f\u3001\u62a5\u6587\u7ed3\u6784\u3001\u8bf7\u6c42\u65b9\u6cd5\u3001URI\u3001\u5934\u5b57\u6bb5\u3001\u8fde\u63a5\u7ba1\u7406\u7b49\u7b49\u90fd\u5b8c\u5168\u6cbf\u7528HTTP\uff0c\u6ca1\u6709\u4efb\u4f55\u65b0\u7684\u4e1c\u897f\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u9664\u4e86\u534f\u8bae\u540d\u201chttp\u201d\u548c\u7aef\u53e3\u53f780\u8fd9\u4e24\u70b9\u4e0d\u540c\uff0cHTTPS\u534f\u8bae\u5728\u8bed\u6cd5\u3001\u8bed\u4e49\u4e0a\u548cHTTP\u5b8c\u5168\u4e00\u6837\uff0c\u4f18\u7f3a\u70b9\u4e5f\u201c\u7167\u5355\u5168\u6536\u201d\uff08\u5f53\u7136\u8981\u9664\u53bb\u201c\u660e\u6587\u201d\u548c\u201c\u4e0d\u5b89\u5168\u201d\uff09\u3002</p> <p>HTTPS\u51ed\u4ec0\u4e48\u5c31\u80fd\u505a\u5230\u673a\u5bc6\u6027\u3001\u5b8c\u6574\u6027\u8fd9\u4e9b\u5b89\u5168\u7279\u6027\u5462\uff1f</p> <p>\u79d8\u5bc6\u5c31\u5728\u4e8eHTTPS\u540d\u5b57\u91cc\u7684\u201cS\u201d\uff0c\u5b83\u628aHTTP\u4e0b\u5c42\u7684\u4f20\u8f93\u534f\u8bae\u7531TCP/IP\u6362\u6210\u4e86SSL/TLS\uff0c\u7531\u201cHTTP over TCP/IP\u201d\u53d8\u6210\u4e86\u201cHTTP over SSL/TLS\u201d\uff0c\u8ba9HTTP\u8fd0\u884c\u5728\u4e86\u5b89\u5168\u7684SSL/TLS\u534f\u8bae\u4e0a\uff08\u53ef\u53c2\u8003\u7b2c4\u8bb2\u548c\u7b2c5\u8bb2\uff09\uff0c\u6536\u53d1\u62a5\u6587\u4e0d\u518d\u4f7f\u7528Socket API\uff0c\u800c\u662f\u8c03\u7528\u4e13\u95e8\u7684\u5b89\u5168\u63a5\u53e3\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#ssltls","title":"SSL/TLS","text":"<p>\u73b0\u5728\u6211\u4eec\u5c31\u6765\u770b\u770bSSL/TLS\uff0c\u5b83\u5230\u5e95\u662f\u4e2a\u4ec0\u4e48\u6765\u5386\u3002</p> <p>SSL\u5373\u5b89\u5168\u5957\u63a5\u5c42\uff08Secure Sockets Layer\uff09\uff0c\u5728OSI\u6a21\u578b\u4e2d\u5904\u4e8e\u7b2c5\u5c42\uff08\u4f1a\u8bdd\u5c42\uff09\uff0c\u7531\u7f51\u666f\u516c\u53f8\u4e8e1994\u5e74\u53d1\u660e\uff0c\u6709v2\u548cv3\u4e24\u4e2a\u7248\u672c\uff0c\u800cv1\u56e0\u4e3a\u6709\u4e25\u91cd\u7684\u7f3a\u9677\u4ece\u672a\u516c\u5f00\u8fc7\u3002</p> <p>SSL\u53d1\u5c55\u5230v3\u65f6\u5df2\u7ecf\u8bc1\u660e\u4e86\u5b83\u81ea\u8eab\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u5b89\u5168\u901a\u4fe1\u534f\u8bae\uff0c\u4e8e\u662f\u4e92\u8054\u7f51\u5de5\u7a0b\u7ec4IETF\u57281999\u5e74\u628a\u5b83\u6539\u540d\u4e3aTLS\uff08\u4f20\u8f93\u5c42\u5b89\u5168\uff0cTransport Layer Security\uff09\uff0c\u6b63\u5f0f\u6807\u51c6\u5316\uff0c\u7248\u672c\u53f7\u4ece1.0\u91cd\u65b0\u7b97\u8d77\uff0c\u6240\u4ee5TLS1.0\u5b9e\u9645\u4e0a\u5c31\u662fSSLv3.1\u3002</p> <p>\u5230\u4eca\u5929TLS\u5df2\u7ecf\u53d1\u5c55\u51fa\u4e86\u4e09\u4e2a\u7248\u672c\uff0c\u5206\u522b\u662f2006\u5e74\u76841.1\u30012008\u5e74\u76841.2\u548c\u53bb\u5e74\uff082018\uff09\u76841.3\uff0c\u6bcf\u4e2a\u65b0\u7248\u672c\u90fd\u7d27\u8ddf\u5bc6\u7801\u5b66\u7684\u53d1\u5c55\u548c\u4e92\u8054\u7f51\u7684\u73b0\u72b6\uff0c\u6301\u7eed\u5f3a\u5316\u5b89\u5168\u548c\u6027\u80fd\uff0c\u5df2\u7ecf\u6210\u4e3a\u4e86\u4fe1\u606f\u5b89\u5168\u9886\u57df\u4e2d\u7684\u6743\u5a01\u6807\u51c6\u3002</p> <p>\u76ee\u524d\u5e94\u7528\u7684\u6700\u5e7f\u6cdb\u7684TLS\u662f1.2\uff0c\u800c\u4e4b\u524d\u7684\u534f\u8bae\uff08TLS1.1/1.0\u3001SSLv3/v2\uff09\u90fd\u5df2\u7ecf\u88ab\u8ba4\u4e3a\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u5404\u5927\u6d4f\u89c8\u5668\u5373\u5c06\u57282020\u5e74\u5de6\u53f3\u505c\u6b62\u652f\u6301\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765\u7684\u8bb2\u89e3\u90fd\u9488\u5bf9\u7684\u662fTLS1.2\u3002</p> <p>TLS\u7531\u8bb0\u5f55\u534f\u8bae\u3001\u63e1\u624b\u534f\u8bae\u3001\u8b66\u544a\u534f\u8bae\u3001\u53d8\u66f4\u5bc6\u7801\u89c4\u8303\u534f\u8bae\u3001\u6269\u5c55\u534f\u8bae\u7b49\u51e0\u4e2a\u5b50\u534f\u8bae\u7ec4\u6210\uff0c\u7efc\u5408\u4f7f\u7528\u4e86\u5bf9\u79f0\u52a0\u5bc6\u3001\u975e\u5bf9\u79f0\u52a0\u5bc6\u3001\u8eab\u4efd\u8ba4\u8bc1\u7b49\u8bb8\u591a\u5bc6\u7801\u5b66\u524d\u6cbf\u6280\u672f\u3002</p> <p>\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u5728\u4f7f\u7528TLS\u5efa\u7acb\u8fde\u63a5\u65f6\u9700\u8981\u9009\u62e9\u4e00\u7ec4\u6070\u5f53\u7684\u52a0\u5bc6\u7b97\u6cd5\u6765\u5b9e\u73b0\u5b89\u5168\u901a\u4fe1\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u7684\u7ec4\u5408\u88ab\u79f0\u4e3a\u201c\u5bc6\u7801\u5957\u4ef6\u201d\uff08cipher suite\uff0c\u4e5f\u53eb\u52a0\u5bc6\u5957\u4ef6\uff09\u3002</p> <p>\u8bbf\u95ee\u5b9e\u9a8c\u73af\u5883\u7684URI\u201c/23-1\u201d\uff0c\u5bf9TLS\u548c\u5bc6\u7801\u5957\u4ef6\u6709\u4e2a\u611f\u6027\u7684\u8ba4\u8bc6\u3002</p> <p> </p> <p>\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u5b9e\u9a8c\u73af\u5883\u4f7f\u7528\u7684TLS\u662f1.2\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301\u975e\u5e38\u591a\u7684\u5bc6\u7801\u5957\u4ef6\uff0c\u800c\u6700\u540e\u534f\u5546\u9009\u5b9a\u7684\u662f\u201cECDHE-RSA-AES256-GCM-SHA384\u201d\u3002</p> <p>\u8fd9\u4e48\u957f\u7684\u540d\u5b57\u770b\u7740\u6709\u70b9\u6655\u5427\uff0c\u4e0d\u7528\u6015\uff0c\u5176\u5b9eTLS\u7684\u5bc6\u7801\u5957\u4ef6\u547d\u540d\u975e\u5e38\u89c4\u8303\uff0c\u683c\u5f0f\u5f88\u56fa\u5b9a\u3002\u57fa\u672c\u7684\u5f62\u5f0f\u662f\u201c\u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5+\u7b7e\u540d\u7b97\u6cd5+\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5+\u6458\u8981\u7b97\u6cd5\u201d\uff0c\u6bd4\u5982\u521a\u624d\u7684\u5bc6\u7801\u5957\u4ef6\u7684\u610f\u601d\u5c31\u662f\uff1a</p> <p>\u201c\u63e1\u624b\u65f6\u4f7f\u7528ECDHE\u7b97\u6cd5\u8fdb\u884c\u5bc6\u94a5\u4ea4\u6362\uff0c\u7528RSA\u7b7e\u540d\u548c\u8eab\u4efd\u8ba4\u8bc1\uff0c\u63e1\u624b\u540e\u7684\u901a\u4fe1\u4f7f\u7528AES\u5bf9\u79f0\u7b97\u6cd5\uff0c\u5bc6\u94a5\u957f\u5ea6256\u4f4d\uff0c\u5206\u7ec4\u6a21\u5f0f\u662fGCM\uff0c\u6458\u8981\u7b97\u6cd5SHA384\u7528\u4e8e\u6d88\u606f\u8ba4\u8bc1\u548c\u4ea7\u751f\u968f\u673a\u6570\u3002\u201d</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#openssl","title":"OpenSSL","text":"<p>\u8bf4\u5230TLS\uff0c\u5c31\u4e0d\u80fd\u4e0d\u8c08\u5230OpenSSL\uff0c\u5b83\u662f\u4e00\u4e2a\u8457\u540d\u7684\u5f00\u6e90\u5bc6\u7801\u5b66\u7a0b\u5e8f\u5e93\u548c\u5de5\u5177\u5305\uff0c\u51e0\u4e4e\u652f\u6301\u6240\u6709\u516c\u5f00\u7684\u52a0\u5bc6\u7b97\u6cd5\u548c\u534f\u8bae\uff0c\u5df2\u7ecf\u6210\u4e3a\u4e86\u4e8b\u5b9e\u4e0a\u7684\u6807\u51c6\uff0c\u8bb8\u591a\u5e94\u7528\u8f6f\u4ef6\u90fd\u4f1a\u4f7f\u7528\u5b83\u4f5c\u4e3a\u5e95\u5c42\u5e93\u6765\u5b9e\u73b0TLS\u529f\u80fd\uff0c\u5305\u62ec\u5e38\u7528\u7684Web\u670d\u52a1\u5668Apache\u3001Nginx\u7b49\u3002</p> <p>OpenSSL\u662f\u4ece\u53e6\u4e00\u4e2a\u5f00\u6e90\u5e93SSLeay\u53d1\u5c55\u51fa\u6765\u7684\uff0c\u66fe\u7ecf\u8003\u8651\u547d\u540d\u4e3a\u201cOpenTLS\u201d\uff0c\u4f46\u5f53\u65f6\uff081998\u5e74\uff09TLS\u8fd8\u672a\u6b63\u5f0f\u786e\u7acb\uff0c\u800cSSL\u65e9\u5df2\u5e7f\u4e3a\u4eba\u77e5\uff0c\u6240\u4ee5\u6700\u7ec8\u4f7f\u7528\u4e86\u201cOpenSSL\u201d\u7684\u540d\u5b57\u3002</p> <p>OpenSSL\u76ee\u524d\u6709\u4e09\u4e2a\u4e3b\u8981\u7684\u5206\u652f\uff0c1.0.2\u548c1.1.0\u90fd\u5c06\u5728\u4eca\u5e74\uff082019\uff09\u5e74\u5e95\u4e0d\u518d\u7ef4\u62a4\uff0c\u6700\u65b0\u7684\u957f\u671f\u652f\u6301\u7248\u672c\u662f1.1.1\uff0c\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u4f7f\u7528\u7684OpenSSL\u662f\u201c1.1.0j\u201d\u3002</p> <p>\u7531\u4e8eOpenSSL\u662f\u5f00\u6e90\u7684\uff0c\u6240\u4ee5\u5b83\u8fd8\u6709\u4e00\u4e9b\u4ee3\u7801\u5206\u652f\uff0c\u6bd4\u5982Google\u7684BoringSSL\u3001OpenBSD\u7684LibreSSL\uff0c\u8fd9\u4e9b\u5206\u652f\u5728OpenSSL\u7684\u57fa\u7840\u4e0a\u5220\u9664\u4e86\u4e00\u4e9b\u8001\u65e7\u4ee3\u7801\uff0c\u4e5f\u589e\u52a0\u4e86\u4e00\u4e9b\u65b0\u7279\u6027\uff0c\u867d\u7136\u80cc\u540e\u6709\u201c\u5927\u91d1\u4e3b\u201d\uff0c\u4f46\u79bb\u53d6\u4ee3OpenSSL\u8fd8\u5dee\u5f97\u5f88\u8fdc\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_42","title":"\u5c0f\u7ed3","text":"<ol> <li> <p>\u56e0\u4e3aHTTP\u662f\u660e\u6587\u4f20\u8f93\uff0c\u6240\u4ee5\u4e0d\u5b89\u5168\uff0c\u5bb9\u6613\u88ab\u9ed1\u5ba2\u7a83\u542c\u6216\u7be1\u6539\uff1b</p> </li> <li> <p>\u901a\u4fe1\u5b89\u5168\u5fc5\u987b\u540c\u65f6\u5177\u5907\u673a\u5bc6\u6027\u3001\u5b8c\u6574\u6027\u3001\u8eab\u4efd\u8ba4\u8bc1\u548c\u4e0d\u53ef\u5426\u8ba4\u8fd9\u56db\u4e2a\u7279\u6027\uff1b</p> </li> <li> <p>HTTPS\u7684\u8bed\u6cd5\u3001\u8bed\u4e49\u4ecd\u7136\u662fHTTP\uff0c\u4f46\u628a\u4e0b\u5c42\u7684\u534f\u8bae\u7531TCP/IP\u6362\u6210\u4e86SSL/TLS\uff1b</p> </li> <li> <p>SSL/TLS\u662f\u4fe1\u606f\u5b89\u5168\u9886\u57df\u4e2d\u7684\u6743\u5a01\u6807\u51c6\uff0c\u91c7\u7528\u591a\u79cd\u5148\u8fdb\u7684\u52a0\u5bc6\u6280\u672f\u4fdd\u8bc1\u901a\u4fe1\u5b89\u5168\uff1b</p> </li> <li> <p>OpenSSL\u662f\u8457\u540d\u7684\u5f00\u6e90\u5bc6\u7801\u5b66\u5de5\u5177\u5305\uff0c\u662fSSL/TLS\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p> </li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_43","title":"\u5341\u56db\u3001\u5bf9\u79f0\u4e0e\u975e\u5bf9\u79f0\u52a0\u5bc6","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_44","title":"\u5bf9\u79f0\u52a0\u5bc6","text":"<p>\u201c\u5bf9\u79f0\u52a0\u5bc6\u201d\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u6307\u52a0\u5bc6\u548c\u89e3\u5bc6\u65f6\u4f7f\u7528\u7684\u5bc6\u94a5\u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u662f\u201c\u5bf9\u79f0\u201d\u7684\u3002\u53ea\u8981\u4fdd\u8bc1\u4e86\u5bc6\u94a5\u7684\u5b89\u5168\uff0c\u90a3\u6574\u4e2a\u901a\u4fe1\u8fc7\u7a0b\u5c31\u53ef\u4ee5\u8bf4\u5177\u6709\u4e86\u673a\u5bc6\u6027\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u60f3\u8981\u767b\u5f55\u67d0\u7f51\u7ad9\uff0c\u53ea\u8981\u4e8b\u5148\u548c\u5b83\u7ea6\u5b9a\u597d\u4f7f\u7528\u4e00\u4e2a\u5bf9\u79f0\u5bc6\u94a5\uff0c\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u4f20\u8f93\u7684\u5168\u662f\u7528\u5bc6\u94a5\u52a0\u5bc6\u540e\u7684\u5bc6\u6587\uff0c\u53ea\u6709\u4f60\u548c\u7f51\u7ad9\u624d\u80fd\u89e3\u5bc6\u3002\u9ed1\u5ba2\u5373\u4f7f\u80fd\u591f\u7a83\u542c\uff0c\u770b\u5230\u7684\u4e5f\u53ea\u662f\u4e71\u7801\uff0c\u56e0\u4e3a\u6ca1\u6709\u5bc6\u94a5\u65e0\u6cd5\u89e3\u51fa\u660e\u6587\uff0c\u6240\u4ee5\u5c31\u5b9e\u73b0\u4e86\u673a\u5bc6\u6027\u3002</p> <p> </p> <p>TLS\u91cc\u6709\u975e\u5e38\u591a\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u53ef\u4f9b\u9009\u62e9\uff0c\u6bd4\u5982RC4\u3001DES\u30013DES\u3001AES\u3001ChaCha20\u7b49\uff0c\u4f46\u524d\u4e09\u79cd\u7b97\u6cd5\u90fd\u88ab\u8ba4\u4e3a\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u901a\u5e38\u90fd\u7981\u6b62\u4f7f\u7528\uff0c\u76ee\u524d\u5e38\u7528\u7684\u53ea\u6709AES\u548cChaCha20\u3002</p> <p>AES\u7684\u610f\u601d\u662f\u201c\u9ad8\u7ea7\u52a0\u5bc6\u6807\u51c6\u201d\uff08Advanced Encryption Standard\uff09\uff0c\u5bc6\u94a5\u957f\u5ea6\u53ef\u4ee5\u662f128\u3001192\u6216256\u3002\u5b83\u662fDES\u7b97\u6cd5\u7684\u66ff\u4ee3\u8005\uff0c\u5b89\u5168\u5f3a\u5ea6\u5f88\u9ad8\uff0c\u6027\u80fd\u4e5f\u5f88\u597d\uff0c\u800c\u4e14\u6709\u7684\u786c\u4ef6\u8fd8\u4f1a\u505a\u7279\u6b8a\u4f18\u5316\uff0c\u6240\u4ee5\u975e\u5e38\u6d41\u884c\uff0c\u662f\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u3002</p> <p>ChaCha20\u662fGoogle\u8bbe\u8ba1\u7684\u53e6\u4e00\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5bc6\u94a5\u957f\u5ea6\u56fa\u5b9a\u4e3a256\u4f4d\uff0c\u7eaf\u8f6f\u4ef6\u8fd0\u884c\u6027\u80fd\u8981\u8d85\u8fc7AES\uff0c\u66fe\u7ecf\u5728\u79fb\u52a8\u5ba2\u6237\u7aef\u4e0a\u6bd4\u8f83\u6d41\u884c\uff0c\u4f46ARMv8\u4e4b\u540e\u4e5f\u52a0\u5165\u4e86AES\u786c\u4ef6\u4f18\u5316\uff0c\u6240\u4ee5\u73b0\u5728\u4e0d\u518d\u5177\u6709\u660e\u663e\u7684\u4f18\u52bf\uff0c\u4f46\u4ecd\u7136\u7b97\u5f97\u4e0a\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u7b97\u6cd5\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_45","title":"\u975e\u5bf9\u79f0\u52a0\u5bc6","text":"<p>\u5bf9\u79f0\u52a0\u5bc6\u770b\u4e0a\u53bb\u597d\u50cf\u5b8c\u7f8e\u5730\u5b9e\u73b0\u4e86\u673a\u5bc6\u6027\uff0c\u4f46\u5176\u4e2d\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff1a\u5982\u4f55\u628a\u5bc6\u94a5\u5b89\u5168\u5730\u4f20\u9012\u7ed9\u5bf9\u65b9\uff0c\u672f\u8bed\u53eb\u201c\u5bc6\u94a5\u4ea4\u6362\u201d\u3002</p> <p>\u56e0\u4e3a\u5728\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u4e2d\u53ea\u8981\u6301\u6709\u5bc6\u94a5\u5c31\u53ef\u4ee5\u89e3\u5bc6\u3002\u5982\u679c\u4f60\u548c\u7f51\u7ad9\u7ea6\u5b9a\u7684\u5bc6\u94a5\u5728\u4f20\u9012\u9014\u4e2d\u88ab\u9ed1\u5ba2\u7a83\u53d6\uff0c\u90a3\u4ed6\u5c31\u53ef\u4ee5\u5728\u4e4b\u540e\u968f\u610f\u89e3\u5bc6\u6536\u53d1\u7684\u6570\u636e\uff0c\u901a\u4fe1\u8fc7\u7a0b\u4e5f\u5c31\u6ca1\u6709\u673a\u5bc6\u6027\u53ef\u8a00\u4e86\u3002</p> <p>\u8fd9\u4e2a\u95ee\u9898\u8be5\u600e\u4e48\u89e3\u51b3\u5462\uff1f</p> <p>\u4f60\u6216\u8bb8\u4f1a\u8bf4\uff1a\u201c\u628a\u5bc6\u94a5\u518d\u52a0\u5bc6\u4e00\u4e0b\u53d1\u8fc7\u53bb\u5c31\u597d\u4e86\u201d\uff0c\u4f46\u4f20\u8f93\u201c\u52a0\u5bc6\u5bc6\u94a5\u7684\u5bc6\u94a5\u201d\u53c8\u6210\u4e86\u65b0\u95ee\u9898\u3002\u8fd9\u5c31\u50cf\u662f\u201c\u9e21\u751f\u86cb\u3001\u86cb\u751f\u9e21\u201d\uff0c\u53ef\u4ee5\u65e0\u9650\u9012\u5f52\u4e0b\u53bb\u3002\u53ea\u7528\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\uff0c\u662f\u7edd\u5bf9\u65e0\u6cd5\u89e3\u51b3\u5bc6\u94a5\u4ea4\u6362\u7684\u95ee\u9898\u7684\u3002</p> <p>\u6240\u4ee5\uff0c\u5c31\u51fa\u73b0\u4e86\u975e\u5bf9\u79f0\u52a0\u5bc6\uff08\u4e5f\u53eb\u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\uff09\u3002</p> <p>\u5b83\u6709\u4e24\u4e2a\u5bc6\u94a5\uff0c\u4e00\u4e2a\u53eb\u201c\u516c\u94a5\u201d\uff08public key\uff09\uff0c\u4e00\u4e2a\u53eb\u201c\u79c1\u94a5\u201d\uff08private key\uff09\u3002\u4e24\u4e2a\u5bc6\u94a5\u662f\u4e0d\u540c\u7684\uff0c\u201c\u4e0d\u5bf9\u79f0\u201d\uff0c\u516c\u94a5\u53ef\u4ee5\u516c\u5f00\u7ed9\u4efb\u4f55\u4eba\u4f7f\u7528\uff0c\u800c\u79c1\u94a5\u5fc5\u987b\u4e25\u683c\u4fdd\u5bc6\u3002</p> <p>\u516c\u94a5\u548c\u79c1\u94a5\u6709\u4e2a\u7279\u522b\u7684\u201c\u5355\u5411\u201d\u6027\uff0c\u867d\u7136\u90fd\u53ef\u4ee5\u7528\u6765\u52a0\u5bc6\u89e3\u5bc6\uff0c\u4f46\u516c\u94a5\u52a0\u5bc6\u540e\u53ea\u80fd\u7528\u79c1\u94a5\u89e3\u5bc6\uff0c\u53cd\u8fc7\u6765\uff0c\u79c1\u94a5\u52a0\u5bc6\u540e\u4e5f\u53ea\u80fd\u7528\u516c\u94a5\u89e3\u5bc6\u3002</p> <p>\u975e\u5bf9\u79f0\u52a0\u5bc6\u53ef\u4ee5\u89e3\u51b3\u201c\u5bc6\u94a5\u4ea4\u6362\u201d\u7684\u95ee\u9898\u3002\u7f51\u7ad9\u79d8\u5bc6\u4fdd\u7ba1\u79c1\u94a5\uff0c\u5728\u7f51\u4e0a\u4efb\u610f\u5206\u53d1\u516c\u94a5\uff0c\u4f60\u60f3\u8981\u767b\u5f55\u7f51\u7ad9\u53ea\u8981\u7528\u516c\u94a5\u52a0\u5bc6\u5c31\u884c\u4e86\uff0c\u5bc6\u6587\u53ea\u80fd\u7531\u79c1\u94a5\u6301\u6709\u8005\u624d\u80fd\u89e3\u5bc6\u3002\u800c\u9ed1\u5ba2\u56e0\u4e3a\u6ca1\u6709\u79c1\u94a5\uff0c\u6240\u4ee5\u5c31\u65e0\u6cd5\u7834\u89e3\u5bc6\u6587\u3002</p> <p> </p> <p>\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u7684\u8bbe\u8ba1\u8981\u6bd4\u5bf9\u79f0\u7b97\u6cd5\u96be\u5f97\u591a\uff0c\u5728TLS\u91cc\u53ea\u6709\u5f88\u5c11\u7684\u51e0\u79cd\uff0c\u6bd4\u5982DH\u3001DSA\u3001RSA\u3001ECC\u7b49\u3002</p> <p>RSA\u53ef\u80fd\u662f\u5176\u4e2d\u6700\u8457\u540d\u7684\u4e00\u4e2a\uff0c\u51e0\u4e4e\u53ef\u4ee5\u8bf4\u662f\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u4ee3\u540d\u8bcd\uff0c\u5b83\u7684\u5b89\u5168\u6027\u57fa\u4e8e\u201c\u6574\u6570\u5206\u89e3\u201d\u7684\u6570\u5b66\u96be\u9898\uff0c\u4f7f\u7528\u4e24\u4e2a\u8d85\u5927\u7d20\u6570\u7684\u4e58\u79ef\u4f5c\u4e3a\u751f\u6210\u5bc6\u94a5\u7684\u6750\u6599\uff0c\u60f3\u8981\u4ece\u516c\u94a5\u63a8\u7b97\u51fa\u79c1\u94a5\u662f\u975e\u5e38\u56f0\u96be\u7684\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_46","title":"\u6df7\u5408\u52a0\u5bc6","text":"<p>\u770b\u5230\u8fd9\u91cc\uff0c\u4f60\u662f\u4e0d\u662f\u8ba4\u4e3a\u53ef\u4ee5\u629b\u5f03\u5bf9\u79f0\u52a0\u5bc6\uff0c\u53ea\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u6765\u5b9e\u73b0\u673a\u5bc6\u6027\u5462\uff1f</p> <p>\u5f88\u9057\u61be\uff0c\u867d\u7136\u975e\u5bf9\u79f0\u52a0\u5bc6\u6ca1\u6709\u201c\u5bc6\u94a5\u4ea4\u6362\u201d\u7684\u95ee\u9898\uff0c\u4f46\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u57fa\u4e8e\u590d\u6742\u7684\u6570\u5b66\u96be\u9898\uff0c\u8fd0\u7b97\u901f\u5ea6\u5f88\u6162\uff0c\u5373\u4f7f\u662fECC\u4e5f\u8981\u6bd4AES\u5dee\u4e0a\u597d\u51e0\u4e2a\u6570\u91cf\u7ea7\u3002\u5982\u679c\u4ec5\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u867d\u7136\u4fdd\u8bc1\u4e86\u5b89\u5168\uff0c\u4f46\u901a\u4fe1\u901f\u5ea6\u6709\u5982\u4e4c\u9f9f\u3001\u8717\u725b\uff0c\u5b9e\u7528\u6027\u5c31\u53d8\u6210\u4e86\u96f6\u3002</p> <p>\u5b9e\u9a8c\u73af\u5883\u7684URI\u201c/24-3\u201d\u5bf9\u6bd4\u4e86AES\u548cRSA\u8fd9\u4e24\u79cd\u7b97\u6cd5\u7684\u6027\u80fd\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u6b21\u6d4b\u8bd5\u7684\u7ed3\u679c\uff1a</p> <pre><code>aes_128_cbc enc/dec 1000 times : 0.97ms, 13.11MB/s\n\nrsa_1024 enc/dec 1000 times : 138.59ms, 93.80KB/s\nrsa_1024/aes ratio = 143.17\n\nrsa_2048 enc/dec 1000 times : 840.35ms, 15.47KB/s\nrsa_2048/aes ratio = 868.13\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0cRSA\u7684\u8fd0\u7b97\u901f\u5ea6\u662f\u975e\u5e38\u6162\u7684\uff0c2048\u4f4d\u7684\u52a0\u89e3\u5bc6\u5927\u7ea6\u662f15KB/S\uff08\u5fae\u79d2\u6216\u6beb\u79d2\u7ea7\uff09\uff0c\u800cAES128\u5219\u662f13MB/S\uff08\u7eb3\u79d2\u7ea7\uff09\uff0c\u5dee\u4e86\u51e0\u767e\u500d\u3002</p> <p>\u90a3\u4e48\uff0c\u662f\u4e0d\u662f\u80fd\u591f\u628a\u5bf9\u79f0\u52a0\u5bc6\u548c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7ed3\u5408\u8d77\u6765\u5462\uff0c\u4e24\u8005\u4e92\u76f8\u53d6\u957f\u8865\u77ed\uff0c\u5373\u80fd\u9ad8\u6548\u5730\u52a0\u5bc6\u89e3\u5bc6\uff0c\u53c8\u80fd\u5b89\u5168\u5730\u5bc6\u94a5\u4ea4\u6362\u3002</p> <p>\u8fd9\u5c31\u662f\u73b0\u5728TLS\u91cc\u4f7f\u7528\u7684\u6df7\u5408\u52a0\u5bc6\u65b9\u5f0f\uff0c\u5176\u5b9e\u8bf4\u7a7f\u4e86\u4e5f\u5f88\u7b80\u5355\uff1a</p> <p>\u5728\u901a\u4fe1\u521a\u5f00\u59cb\u7684\u65f6\u5019\u4f7f\u7528\u975e\u5bf9\u79f0\u7b97\u6cd5\uff0c\u6bd4\u5982RSA\u3001ECDHE\uff0c\u9996\u5148\u89e3\u51b3\u5bc6\u94a5\u4ea4\u6362\u7684\u95ee\u9898\u3002</p> <p>\u7136\u540e\u7528\u968f\u673a\u6570\u4ea7\u751f\u5bf9\u79f0\u7b97\u6cd5\u4f7f\u7528\u7684\u201c\u4f1a\u8bdd\u5bc6\u94a5\u201d\uff08session key\uff09\uff0c\u518d\u7528\u516c\u94a5\u52a0\u5bc6\u3002\u56e0\u4e3a\u4f1a\u8bdd\u5bc6\u94a5\u5f88\u77ed\uff0c\u901a\u5e38\u53ea\u670916\u5b57\u8282\u621632\u5b57\u8282\uff0c\u6240\u4ee5\u6162\u4e00\u70b9\u4e5f\u65e0\u6240\u8c13\u3002</p> <p>\u5bf9\u65b9\u62ff\u5230\u5bc6\u6587\u540e\u7528\u79c1\u94a5\u89e3\u5bc6\uff0c\u53d6\u51fa\u4f1a\u8bdd\u5bc6\u94a5\u3002\u8fd9\u6837\uff0c\u53cc\u65b9\u5c31\u5b9e\u73b0\u4e86\u5bf9\u79f0\u5bc6\u94a5\u7684\u5b89\u5168\u4ea4\u6362\uff0c\u540e\u7eed\u5c31\u4e0d\u518d\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u5168\u90fd\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_47","title":"\u5c0f\u7ed3","text":"<ol> <li>\u52a0\u5bc6\u7b97\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\u201c\u628a\u4e00\u4e2a\u5c0f\u79d8\u5bc6\uff08\u5bc6\u94a5\uff09\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5927\u79d8\u5bc6\uff08\u5bc6\u6587\u6d88\u606f\uff09\u201d\uff0c\u5b88\u4f4f\u4e86\u5c0f\u79d8\u5bc6\uff0c\u4e5f\u5c31\u5b88\u4f4f\u4e86\u5927\u79d8\u5bc6\uff1b</li> <li>\u5bf9\u79f0\u52a0\u5bc6\u53ea\u4f7f\u7528\u4e00\u4e2a\u5bc6\u94a5\uff0c\u8fd0\u7b97\u901f\u5ea6\u5feb\uff0c\u5bc6\u94a5\u5fc5\u987b\u4fdd\u5bc6\uff0c\u65e0\u6cd5\u505a\u5230\u5b89\u5168\u7684\u5bc6\u94a5\u4ea4\u6362\uff0c\u5e38\u7528\u7684\u6709AES\u548cChaCha20\uff1b</li> <li>\u975e\u5bf9\u79f0\u52a0\u5bc6\u4f7f\u7528\u4e24\u4e2a\u5bc6\u94a5\uff1a\u516c\u94a5\u548c\u79c1\u94a5\uff0c\u516c\u94a5\u53ef\u4ee5\u4efb\u610f\u5206\u53d1\u800c\u79c1\u94a5\u4fdd\u5bc6\uff0c\u89e3\u51b3\u4e86\u5bc6\u94a5\u4ea4\u6362\u95ee\u9898\u4f46\u901f\u5ea6\u6162\uff0c\u5e38\u7528\u7684\u6709RSA\u548cECC\uff1b</li> <li>\u628a\u5bf9\u79f0\u52a0\u5bc6\u548c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7ed3\u5408\u8d77\u6765\u5c31\u5f97\u5230\u4e86\u201c\u53c8\u597d\u53c8\u5feb\u201d\u7684\u6df7\u5408\u52a0\u5bc6\uff0c\u4e5f\u5c31\u662fTLS\u91cc\u4f7f\u7528\u7684\u52a0\u5bc6\u65b9\u5f0f\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_10","title":"\u5341\u4e94\u3001HTTP\u5b9e\u4f53\u6570\u636e","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_48","title":"\u6570\u636e\u7c7b\u578b\u4e0e\u7f16\u7801","text":"<p>HTTP\u534f\u8bae\u8bde\u751f\u4e4b\u524d\u5c31\u5df2\u7ecf\u6709\u4e86\u9488\u5bf9\u8fd9\u79cd\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4e0d\u8fc7\u5b83\u662f\u7528\u5728\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u91cc\u7684\uff0c\u8ba9\u7535\u5b50\u90ae\u4ef6\u53ef\u4ee5\u53d1\u9001ASCII\u7801\u4ee5\u5916\u7684\u4efb\u610f\u6570\u636e\uff0c\u65b9\u6848\u7684\u540d\u5b57\u53eb\u505a\u201c\u591a\u7528\u9014\u4e92\u8054\u7f51\u90ae\u4ef6\u6269\u5c55\u201d\uff08Multipurpose Internet Mail Extensions\uff09\uff0c\u7b80\u79f0\u4e3aMIME\u3002</p> <p>MIME\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u6807\u51c6\u89c4\u8303\uff0c\u4f46HTTP\u53ea\u201c\u987a\u624b\u7275\u7f8a\u201d\u53d6\u4e86\u5176\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u7528\u6765\u6807\u8bb0body\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u5e73\u5e38\u603b\u80fd\u542c\u5230\u7684\u201cMIME type\u201d\u3002</p> <p>MIME\u628a\u6570\u636e\u5206\u6210\u4e86\u516b\u5927\u7c7b\uff0c\u6bcf\u4e2a\u5927\u7c7b\u4e0b\u518d\u7ec6\u5206\u51fa\u591a\u4e2a\u5b50\u7c7b\uff0c\u5f62\u5f0f\u662f\u201ctype/subtype\u201d\u7684\u5b57\u7b26\u4e32\uff0c\u5de7\u5f97\u5f88\uff0c\u521a\u597d\u4e5f\u7b26\u5408\u4e86HTTP\u660e\u6587\u7684\u7279\u70b9\uff0c\u6240\u4ee5\u80fd\u591f\u5f88\u5bb9\u6613\u5730\u7eb3\u5165HTTP\u5934\u5b57\u6bb5\u91cc\u3002</p> <p>HTTP\u91cc\u7ecf\u5e38\u9047\u5230\u7684\u51e0\u4e2a\u7c7b\u522b\uff1a</p> <ol> <li>text\uff1a\u5373\u6587\u672c\u683c\u5f0f\u7684\u53ef\u8bfb\u6570\u636e\uff0c\u6211\u4eec\u6700\u719f\u6089\u7684\u5e94\u8be5\u5c31\u662ftext/html\u4e86\uff0c\u8868\u793a\u8d85\u6587\u672c\u6587\u6863\uff0c\u6b64\u5916\u8fd8\u6709\u7eaf\u6587\u672ctext/plain\u3001\u6837\u5f0f\u8868text/css\u7b49\u3002</li> <li>image\uff1a\u5373\u56fe\u50cf\u6587\u4ef6\uff0c\u6709image/gif\u3001image/jpeg\u3001image/png\u7b49\u3002</li> <li>audio/video\uff1a\u97f3\u9891\u548c\u89c6\u9891\u6570\u636e\uff0c\u4f8b\u5982audio/mpeg\u3001video/mp4\u7b49\u3002</li> <li>application\uff1a\u6570\u636e\u683c\u5f0f\u4e0d\u56fa\u5b9a\uff0c\u53ef\u80fd\u662f\u6587\u672c\u4e5f\u53ef\u80fd\u662f\u4e8c\u8fdb\u5236\uff0c\u5fc5\u987b\u7531\u4e0a\u5c42\u5e94\u7528\u7a0b\u5e8f\u6765\u89e3\u91ca\u3002\u5e38\u89c1\u7684\u6709application/json\uff0capplication/javascript\u3001application/pdf\u7b49\uff0c\u53e6\u5916\uff0c\u5982\u679c\u5b9e\u5728\u662f\u4e0d\u77e5\u9053\u6570\u636e\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u50cf\u521a\u624d\u8bf4\u7684\u201c\u9ed1\u76d2\u201d\uff0c\u5c31\u4f1a\u662fapplication/octet-stream\uff0c\u5373\u4e0d\u900f\u660e\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> </ol> <p>\u4f46\u4ec5\u6709MIME type\u8fd8\u4e0d\u591f\uff0c\u56e0\u4e3aHTTP\u5728\u4f20\u8f93\u65f6\u4e3a\u4e86\u8282\u7ea6\u5e26\u5bbd\uff0c\u6709\u65f6\u5019\u8fd8\u4f1a\u538b\u7f29\u6570\u636e\uff0c\u4e3a\u4e86\u4e0d\u8981\u8ba9\u6d4f\u89c8\u5668\u7ee7\u7eed\u201c\u731c\u201d\uff0c\u8fd8\u9700\u8981\u6709\u4e00\u4e2a\u201cEncoding type\u201d\uff0c\u544a\u8bc9\u6570\u636e\u662f\u7528\u7684\u4ec0\u4e48\u7f16\u7801\u683c\u5f0f\uff0c\u8fd9\u6837\u5bf9\u65b9\u624d\u80fd\u6b63\u786e\u89e3\u538b\u7f29\uff0c\u8fd8\u539f\u51fa\u539f\u59cb\u7684\u6570\u636e\u3002</p> <p>\u6bd4\u8d77MIME type\u6765\u8bf4\uff0cEncoding type\u5c31\u5c11\u4e86\u5f88\u591a\uff0c\u5e38\u7528\u7684\u53ea\u6709\u4e0b\u9762\u4e09\u79cd\uff1a</p> <ol> <li> <p>gzip\uff1aGNU zip\u538b\u7f29\u683c\u5f0f\uff0c\u4e5f\u662f\u4e92\u8054\u7f51\u4e0a\u6700\u6d41\u884c\u7684\u538b\u7f29\u683c\u5f0f\uff1b</p> </li> <li> <p>deflate\uff1azlib\uff08deflate\uff09\u538b\u7f29\u683c\u5f0f\uff0c\u6d41\u884c\u7a0b\u5ea6\u4ec5\u6b21\u4e8egzip\uff1b</p> </li> <li> <p>br\uff1a\u4e00\u79cd\u4e13\u95e8\u4e3aHTTP\u4f18\u5316\u7684\u65b0\u538b\u7f29\u7b97\u6cd5\uff08Brotli\uff09\u3002</p> </li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_49","title":"\u6570\u636e\u7c7b\u578b\u4f7f\u7528\u7684\u5934\u5b57\u6bb5","text":"<p>\u6709\u4e86MIME type\u548cEncoding type\uff0c\u65e0\u8bba\u662f\u6d4f\u89c8\u5668\u8fd8\u662f\u670d\u52a1\u5668\u5c31\u90fd\u53ef\u4ee5\u8f7b\u677e\u8bc6\u522b\u51fabody\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u80fd\u591f\u6b63\u786e\u5904\u7406\u6570\u636e\u4e86\u3002</p> <p>HTTP\u534f\u8bae\u4e3a\u6b64\u5b9a\u4e49\u4e86\u4e24\u4e2aAccept\u8bf7\u6c42\u5934\u5b57\u6bb5\u548c\u4e24\u4e2aContent\u5b9e\u4f53\u5934\u5b57\u6bb5\uff0c\u7528\u4e8e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u8fdb\u884c\u201c\u5185\u5bb9\u534f\u5546\u201d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5ba2\u6237\u7aef\u7528Accept\u5934\u544a\u8bc9\u670d\u52a1\u5668\u5e0c\u671b\u63a5\u6536\u4ec0\u4e48\u6837\u7684\u6570\u636e\uff0c\u800c\u670d\u52a1\u5668\u7528Content\u5934\u544a\u8bc9\u5ba2\u6237\u7aef\u5b9e\u9645\u53d1\u9001\u4e86\u4ec0\u4e48\u6837\u7684\u6570\u636e\u3002</p> <p> </p> <p>Accept\u5b57\u6bb5\u6807\u8bb0\u7684\u662f\u5ba2\u6237\u7aef\u53ef\u7406\u89e3\u7684MIME type\uff0c\u53ef\u4ee5\u7528\u201c,\u201d\u505a\u5206\u9694\u7b26\u5217\u51fa\u591a\u4e2a\u7c7b\u578b\uff0c\u8ba9\u670d\u52a1\u5668\u6709\u66f4\u591a\u7684\u9009\u62e9\u4f59\u5730\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u8fd9\u4e2a\u5934\uff1a</p> <pre><code>Accept: text/html,application/xml,image/webp,image/png\n</code></pre> <p>\u8fd9\u5c31\u662f\u544a\u8bc9\u670d\u52a1\u5668\uff1a\u201c\u6211\u80fd\u591f\u770b\u61c2HTML\u3001XML\u7684\u6587\u672c\uff0c\u8fd8\u6709webp\u548cpng\u7684\u56fe\u7247\uff0c\u8bf7\u7ed9\u6211\u8fd9\u56db\u7c7b\u683c\u5f0f\u7684\u6570\u636e\u201d\u3002</p> <p>\u76f8\u5e94\u7684\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u7528\u5934\u5b57\u6bb5Content-Type\u544a\u8bc9\u5b9e\u4f53\u6570\u636e\u7684\u771f\u5b9e\u7c7b\u578b\uff1a</p> <pre><code>Content-Type: text/html\nContent-Type: image/png\n</code></pre> <p>\u8fd9\u6837\u6d4f\u89c8\u5668\u770b\u5230\u62a5\u6587\u91cc\u7684\u7c7b\u578b\u662f\u201ctext/html\u201d\u5c31\u77e5\u9053\u662fHTML\u6587\u4ef6\uff0c\u4f1a\u8c03\u7528\u6392\u7248\u5f15\u64ce\u6e32\u67d3\u51fa\u9875\u9762\uff0c\u770b\u5230\u201cimage/png\u201d\u5c31\u77e5\u9053\u662f\u4e00\u4e2aPNG\u6587\u4ef6\uff0c\u5c31\u4f1a\u5728\u9875\u9762\u4e0a\u663e\u793a\u51fa\u56fe\u50cf\u3002</p> <p>Accept-Encoding\u5b57\u6bb5\u6807\u8bb0\u7684\u662f\u5ba2\u6237\u7aef\u652f\u6301\u7684\u538b\u7f29\u683c\u5f0f\uff0c\u4f8b\u5982\u4e0a\u9762\u8bf4\u7684gzip\u3001deflate\u7b49\uff0c\u540c\u6837\u4e5f\u53ef\u4ee5\u7528\u201c,\u201d\u5217\u51fa\u591a\u4e2a\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\u6765\u538b\u7f29\u6570\u636e\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u538b\u7f29\u683c\u5f0f\u653e\u5728\u54cd\u5e94\u5934\u5b57\u6bb5Content-Encoding\u91cc\u3002</p> <pre><code>Accept-Encoding: gzip, deflate, br\nContent-Encoding: gzip\n</code></pre> <p>\u4e0d\u8fc7\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u662f\u53ef\u4ee5\u7701\u7565\u7684\uff0c\u5982\u679c\u8bf7\u6c42\u62a5\u6587\u91cc\u6ca1\u6709Accept-Encoding\u5b57\u6bb5\uff0c\u5c31\u8868\u793a\u5ba2\u6237\u7aef\u4e0d\u652f\u6301\u538b\u7f29\u6570\u636e\uff1b\u5982\u679c\u54cd\u5e94\u62a5\u6587\u91cc\u6ca1\u6709Content-Encoding\u5b57\u6bb5\uff0c\u5c31\u8868\u793a\u54cd\u5e94\u6570\u636e\u6ca1\u6709\u88ab\u538b\u7f29\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_50","title":"\u5185\u5bb9\u534f\u5546\u7684\u8d28\u91cf\u503c","text":"<p>\u5728HTTP\u534f\u8bae\u91cc\u7528Accept\u3001Accept-Encoding\u3001Accept-Language\u7b49\u8bf7\u6c42\u5934\u5b57\u6bb5\u8fdb\u884c\u5185\u5bb9\u534f\u5546\u7684\u65f6\u5019\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e00\u79cd\u7279\u6b8a\u7684\u201cq\u201d\u53c2\u6570\u8868\u793a\u6743\u91cd\u6765\u8bbe\u5b9a\u4f18\u5148\u7ea7\uff0c\u8fd9\u91cc\u7684\u201cq\u201d\u662f\u201cquality factor\u201d\u7684\u610f\u601d\u3002</p> <p>\u6743\u91cd\u7684\u6700\u5927\u503c\u662f1\uff0c\u6700\u5c0f\u503c\u662f0.01\uff0c\u9ed8\u8ba4\u503c\u662f1\uff0c\u5982\u679c\u503c\u662f0\u5c31\u8868\u793a\u62d2\u7edd\u3002\u5177\u4f53\u7684\u5f62\u5f0f\u662f\u5728\u6570\u636e\u7c7b\u578b\u6216\u8bed\u8a00\u4ee3\u7801\u540e\u9762\u52a0\u4e00\u4e2a\u201c;\u201d\uff0c\u7136\u540e\u662f\u201cq=value\u201d\u3002</p> <p>\u8fd9\u91cc\u8981\u63d0\u9192\u7684\u662f\u201c;\u201d\u7684\u7528\u6cd5\uff0c\u5728\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u91cc\u201c;\u201d\u7684\u65ad\u53e5\u8bed\u6c14\u8981\u5f3a\u4e8e\u201c,\u201d\uff0c\u800c\u5728HTTP\u7684\u5185\u5bb9\u534f\u5546\u91cc\u5374\u6070\u597d\u53cd\u4e86\u8fc7\u6765\uff0c\u201c;\u201d\u7684\u610f\u4e49\u662f\u5c0f\u4e8e\u201c,\u201d\u7684\u3002</p> <p>\u4f8b\u5982\u4e0b\u9762\u7684Accept\u5b57\u6bb5\uff1a</p> <pre><code>Accept: text/html,application/xml;q=0.9,*/*;q=0.8\n</code></pre> <p>\u5b83\u8868\u793a\u6d4f\u89c8\u5668\u6700\u5e0c\u671b\u4f7f\u7528\u7684\u662fHTML\u6587\u4ef6\uff0c\u6743\u91cd\u662f1\uff0c\u5176\u6b21\u662fXML\u6587\u4ef6\uff0c\u6743\u91cd\u662f0.9\uff0c\u6700\u540e\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff0c\u6743\u91cd\u662f0.8\u3002\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u5934\u540e\uff0c\u5c31\u4f1a\u8ba1\u7b97\u6743\u91cd\uff0c\u518d\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u4f18\u5148\u8f93\u51faHTML\u6216\u8005XML\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_51","title":"\u5185\u5bb9\u534f\u5546\u7684\u7ed3\u679c","text":"<p>\u5185\u5bb9\u534f\u5546\u7684\u8fc7\u7a0b\u662f\u4e0d\u900f\u660e\u7684\uff0c\u6bcf\u4e2aWeb\u670d\u52a1\u5668\u4f7f\u7528\u7684\u7b97\u6cd5\u90fd\u4e0d\u4e00\u6837\u3002\u4f46\u6709\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u54cd\u5e94\u5934\u91cc\u591a\u52a0\u4e00\u4e2aVary\u5b57\u6bb5\uff0c\u8bb0\u5f55\u670d\u52a1\u5668\u5728\u5185\u5bb9\u534f\u5546\u65f6\u53c2\u8003\u7684\u8bf7\u6c42\u5934\u5b57\u6bb5\uff0c\u7ed9\u51fa\u4e00\u70b9\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>Vary: Accept-Encoding,User-Agent,Accept\n</code></pre> <p>\u8fd9\u4e2aVary\u5b57\u6bb5\u8868\u793a\u670d\u52a1\u5668\u4f9d\u636e\u4e86Accept-Encoding\u3001User-Agent\u548cAccept\u8fd9\u4e09\u4e2a\u5934\u5b57\u6bb5\uff0c\u7136\u540e\u51b3\u5b9a\u4e86\u53d1\u56de\u7684\u54cd\u5e94\u62a5\u6587\u3002</p> <p>Vary\u5b57\u6bb5\u53ef\u4ee5\u8ba4\u4e3a\u662f\u54cd\u5e94\u62a5\u6587\u7684\u4e00\u4e2a\u7279\u6b8a\u7684\u201c\u7248\u672c\u6807\u8bb0\u201d\u3002\u6bcf\u5f53Accept\u7b49\u8bf7\u6c42\u5934\u53d8\u5316\u65f6\uff0cVary\u4e5f\u4f1a\u968f\u7740\u54cd\u5e94\u62a5\u6587\u4e00\u8d77\u53d8\u5316\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u540c\u4e00\u4e2aURI\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u201c\u7248\u672c\u201d\uff0c\u4e3b\u8981\u7528\u5728\u4f20\u8f93\u94fe\u8def\u4e2d\u95f4\u7684\u4ee3\u7406\u670d\u52a1\u5668\u5b9e\u73b0\u7f13\u5b58\u670d\u52a1\uff0c\u8fd9\u4e2a\u4e4b\u540e\u8bb2\u201cHTTP\u7f13\u5b58\u201d\u65f6\u8fd8\u4f1a\u518d\u63d0\u5230\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_52","title":"\u5c0f\u7ed3","text":"<ol> <li>\u6570\u636e\u7c7b\u578b\u8868\u793a\u5b9e\u4f53\u6570\u636e\u7684\u5185\u5bb9\u662f\u4ec0\u4e48\uff0c\u4f7f\u7528\u7684\u662fMIME type\uff0c\u76f8\u5173\u7684\u5934\u5b57\u6bb5\u662fAccept\u548cContent-Type\uff1b</li> <li>\u6570\u636e\u7f16\u7801\u8868\u793a\u5b9e\u4f53\u6570\u636e\u7684\u538b\u7f29\u65b9\u5f0f\uff0c\u76f8\u5173\u7684\u5934\u5b57\u6bb5\u662fAccept-Encoding\u548cContent-Encoding\uff1b</li> <li>\u8bed\u8a00\u7c7b\u578b\u8868\u793a\u5b9e\u4f53\u6570\u636e\u7684\u81ea\u7136\u8bed\u8a00\uff0c\u76f8\u5173\u7684\u5934\u5b57\u6bb5\u662fAccept-Language\u548cContent-Language\uff1b</li> <li>\u5b57\u7b26\u96c6\u8868\u793a\u5b9e\u4f53\u6570\u636e\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u76f8\u5173\u7684\u5934\u5b57\u6bb5\u662fAccept-Charset\u548cContent-Type\uff1b</li> <li>\u5ba2\u6237\u7aef\u9700\u8981\u5728\u8bf7\u6c42\u5934\u91cc\u4f7f\u7528Accept\u7b49\u5934\u5b57\u6bb5\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u201c\u5185\u5bb9\u534f\u5546\u201d\uff0c\u8981\u6c42\u670d\u52a1\u5668\u8fd4\u56de\u6700\u5408\u9002\u7684\u6570\u636e\uff1b</li> <li>Accept\u7b49\u5934\u5b57\u6bb5\u53ef\u4ee5\u7528\u201c,\u201d\u987a\u5e8f\u5217\u51fa\u591a\u4e2a\u53ef\u80fd\u7684\u9009\u9879\uff0c\u8fd8\u53ef\u4ee5\u7528\u201c;q=\u201d\u53c2\u6570\u6765\u7cbe\u786e\u6307\u5b9a\u6743\u91cd\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_53","title":"\u8bfe\u4e0b\u4f5c\u4e1a","text":"<ol> <li>\u8bd5\u7740\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u8bf7\u6c42\u5934\u201cAccept-Encoding: gzip, deflate;q=1.0, *;q=0.5, br;q=0\u201d\uff0c\u518d\u6a21\u62df\u4e00\u4e0b\u670d\u52a1\u5668\u7684\u54cd\u5e94\u5934\u3002</li> </ol> <pre><code>\u5ba2\u6237\u7aef\u6700\u5e0c\u671b\u4f7f\u7528\u7684\u662fgzip\u6216deflate\uff0c\u6743\u91cd\u90fd\u662f1\uff1b\u5176\u4ed6\u975ebr\u7c7b\u578b\u7684\u6743\u91cd0.5\uff1b\u4e0d\u80fd\u662fbr\u7c7b\u578b\n</code></pre> <ol> <li>\u5047\u8bbe\u4f60\u8981\u4f7f\u7528POST\u65b9\u6cd5\u5411\u670d\u52a1\u5668\u63d0\u4ea4\u4e00\u4e9bJSON\u683c\u5f0f\u7684\u6570\u636e\uff0c\u91cc\u9762\u5305\u542b\u6709\u4e2d\u6587\uff0c\u8bf7\u6c42\u5934\u5e94\u8be5\u662f\u4ec0\u4e48\u6837\u5b50\u7684\u5462\uff1f</li> </ol> <pre><code>Accept: text/plain, */*;q=0.01\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN\n...\n</code></pre> <ol> <li>\u8bd5\u7740\u7528\u5feb\u9012\u53d1\u8d27\u6536\u8d27\u6bd4\u55bb\u4e00\u4e0bMIME\u3001Encoding\u7b49\u6982\u5ff5\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_54","title":"\u5341\u516d\u3001\u6570\u636e\u4f20\u8f93","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_55","title":"\u6570\u636e\u538b\u7f29","text":"<p>\u901a\u5e38\u6d4f\u89c8\u5668\u5728\u53d1\u9001\u8bf7\u6c42\u65f6\u90fd\u4f1a\u5e26\u7740\u201cAccept-Encoding\u201d\u5934\u5b57\u6bb5\uff0c\u91cc\u9762\u662f\u6d4f\u89c8\u5668\u652f\u6301\u7684\u538b\u7f29\u683c\u5f0f\u5217\u8868\uff0c\u4f8b\u5982gzip\u3001deflate\u3001br\u7b49\uff0c\u8fd9\u6837\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u4ece\u4e2d\u9009\u62e9\u4e00\u79cd\u538b\u7f29\u7b97\u6cd5\uff0c\u653e\u8fdb\u201cContent-Encoding\u201d\u54cd\u5e94\u5934\u91cc\uff0c\u518d\u628a\u539f\u6570\u636e\u538b\u7f29\u540e\u53d1\u7ed9\u6d4f\u89c8\u5668\u3002</p> <p>\u5982\u679c\u538b\u7f29\u7387\u80fd\u670950%\uff0c\u4e5f\u5c31\u662f\u8bf4100K\u7684\u6570\u636e\u80fd\u591f\u538b\u7f29\u621050K\u7684\u5927\u5c0f\uff0c\u90a3\u4e48\u5c31\u76f8\u5f53\u4e8e\u5728\u5e26\u5bbd\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u7f51\u901f\u63d0\u5347\u4e86\u4e00\u500d\uff0c\u52a0\u901f\u7684\u6548\u679c\u662f\u975e\u5e38\u660e\u663e\u7684\u3002</p> <p>\u4e0d\u8fc7\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6cd5\u4e5f\u6709\u4e2a\u7f3a\u70b9\uff0cgzip\u7b49\u538b\u7f29\u7b97\u6cd5\u901a\u5e38\u53ea\u5bf9\u6587\u672c\u6587\u4ef6\u6709\u8f83\u597d\u7684\u538b\u7f29\u7387\uff0c\u800c\u56fe\u7247\u3001\u97f3\u9891\u89c6\u9891\u7b49\u591a\u5a92\u4f53\u6570\u636e\u672c\u8eab\u5c31\u5df2\u7ecf\u662f\u9ad8\u5ea6\u538b\u7f29\u7684\uff0c\u518d\u7528gzip\u5904\u7406\u4e5f\u4e0d\u4f1a\u53d8\u5c0f\uff08\u751a\u81f3\u8fd8\u6709\u53ef\u80fd\u4f1a\u589e\u5927\u4e00\u70b9\uff09\uff0c\u6240\u4ee5\u5b83\u5c31\u5931\u6548\u4e86\u3002</p> <p>\u4e0d\u8fc7\u6570\u636e\u538b\u7f29\u5728\u5904\u7406\u6587\u672c\u7684\u65f6\u5019\u6548\u679c\u8fd8\u662f\u5f88\u597d\u7684\uff0c\u6240\u4ee5\u5404\u5927\u7f51\u7ad9\u7684\u670d\u52a1\u5668\u90fd\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u624b\u6bb5\u4f5c\u4e3a\u201c\u4fdd\u5e95\u201d\u3002\u4f8b\u5982\uff0c\u5728Nginx\u91cc\u5c31\u4f1a\u4f7f\u7528\u201cgzip on\u201d\u6307\u4ee4\uff0c\u542f\u7528\u5bf9\u201ctext/html\u201d\u7684\u538b\u7f29\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_56","title":"\u5206\u5757\u4f20\u8f93","text":"<p>\u5728\u6570\u636e\u538b\u7f29\u4e4b\u5916\uff0c\u8fd8\u80fd\u6709\u4ec0\u4e48\u529e\u6cd5\u6765\u89e3\u51b3\u5927\u6587\u4ef6\u7684\u95ee\u9898\u5462\uff1f</p> <p>\u538b\u7f29\u662f\u628a\u5927\u6587\u4ef6\u6574\u4f53\u53d8\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u53cd\u8fc7\u6765\u601d\u8003\uff0c\u5982\u679c\u5927\u6587\u4ef6\u6574\u4f53\u4e0d\u80fd\u53d8\u5c0f\uff0c\u90a3\u5c31\u628a\u5b83\u201c\u62c6\u5f00\u201d\uff0c\u5206\u89e3\u6210\u591a\u4e2a\u5c0f\u5757\uff0c\u628a\u8fd9\u4e9b\u5c0f\u5757\u5206\u6279\u53d1\u7ed9\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u6536\u5230\u540e\u518d\u7ec4\u88c5\u590d\u539f\u3002</p> <p>\u8fd9\u6837\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u90fd\u4e0d\u7528\u5728\u5185\u5b58\u91cc\u4fdd\u5b58\u6587\u4ef6\u7684\u5168\u90e8\uff0c\u6bcf\u6b21\u53ea\u6536\u53d1\u4e00\u5c0f\u90e8\u5206\uff0c\u7f51\u7edc\u4e5f\u4e0d\u4f1a\u88ab\u5927\u6587\u4ef6\u957f\u65f6\u95f4\u5360\u7528\uff0c\u5185\u5b58\u3001\u5e26\u5bbd\u7b49\u8d44\u6e90\u4e5f\u5c31\u8282\u7701\u4e0b\u6765\u4e86\u3002</p> <p>\u8fd9\u79cd\u201c\u5316\u6574\u4e3a\u96f6\u201d\u7684\u601d\u8def\u5728HTTP\u534f\u8bae\u91cc\u5c31\u662f\u201cchunked\u201d\u5206\u5757\u4f20\u8f93\u7f16\u7801\uff0c\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u7528\u5934\u5b57\u6bb5\u201cTransfer-Encoding: chunked\u201d\u6765\u8868\u793a\uff0c\u610f\u601d\u662f\u62a5\u6587\u91cc\u7684body\u90e8\u5206\u4e0d\u662f\u4e00\u6b21\u6027\u53d1\u8fc7\u6765\u7684\uff0c\u800c\u662f\u5206\u6210\u4e86\u8bb8\u591a\u7684\u5757\uff08chunk\uff09\u9010\u4e2a\u53d1\u9001\u3002</p> <p>\u8fd9\u5c31\u597d\u6bd4\u662f\u7528\u9b54\u6cd5\u628a\u5927\u8c61\u53d8\u6210\u201c\u4e50\u9ad8\u79ef\u6728\u201d\uff0c\u62c6\u6563\u4e86\u9010\u4e2a\u88c5\u8fdb\u51b0\u7bb1\uff0c\u5230\u8fbe\u76ee\u7684\u5730\u540e\u518d\u65bd\u6cd5\u62fc\u8d77\u6765\u201c\u6ee1\u8840\u590d\u6d3b\u201d\u3002</p> <p>\u5206\u5757\u4f20\u8f93\u4e5f\u53ef\u4ee5\u7528\u4e8e\u201c\u6d41\u5f0f\u6570\u636e\u201d\uff0c\u4f8b\u5982\u7531\u6570\u636e\u5e93\u52a8\u6001\u751f\u6210\u7684\u8868\u5355\u9875\u9762\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0bbody\u6570\u636e\u7684\u957f\u5ea6\u662f\u672a\u77e5\u7684\uff0c\u65e0\u6cd5\u5728\u5934\u5b57\u6bb5\u201cContent-Length\u201d\u91cc\u7ed9\u51fa\u786e\u5207\u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u4e5f\u53ea\u80fd\u7528chunked\u65b9\u5f0f\u5206\u5757\u53d1\u9001\u3002</p> <p>\u201cTransfer-Encoding: chunked\u201d\u548c\u201cContent-Length\u201d\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u662f\u4e92\u65a5\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u54cd\u5e94\u62a5\u6587\u91cc\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\uff0c\u4e00\u4e2a\u54cd\u5e94\u62a5\u6587\u7684\u4f20\u8f93\u8981\u4e48\u662f\u957f\u5ea6\u5df2\u77e5\uff0c\u8981\u4e48\u662f\u957f\u5ea6\u672a\u77e5\uff08chunked\uff09\uff0c\u8fd9\u4e00\u70b9\u4f60\u4e00\u5b9a\u8981\u8bb0\u4f4f\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5206\u5757\u4f20\u8f93\u7684\u7f16\u7801\u89c4\u5219\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff0c\u540c\u6837\u91c7\u7528\u4e86\u660e\u6587\u7684\u65b9\u5f0f\uff0c\u5f88\u7c7b\u4f3c\u54cd\u5e94\u5934\u3002</p> <ol> <li>\u6bcf\u4e2a\u5206\u5757\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u957f\u5ea6\u5934\u548c\u6570\u636e\u5757\uff1b</li> <li>\u957f\u5ea6\u5934\u662f\u4ee5CRLF\uff08\u56de\u8f66\u6362\u884c\uff0c\u5373\\r\\n\uff09\u7ed3\u5c3e\u7684\u4e00\u884c\u660e\u6587\uff0c\u752816\u8fdb\u5236\u6570\u5b57\u8868\u793a\u957f\u5ea6\uff1b</li> <li>\u6570\u636e\u5757\u7d27\u8ddf\u5728\u957f\u5ea6\u5934\u540e\uff0c\u6700\u540e\u4e5f\u7528CRLF\u7ed3\u5c3e\uff0c\u4f46\u6570\u636e\u4e0d\u5305\u542bCRLF\uff1b</li> <li>\u6700\u540e\u7528\u4e00\u4e2a\u957f\u5ea6\u4e3a0\u7684\u5757\u8868\u793a\u7ed3\u675f\uff0c\u5373\u201c0\\r\\n\\r\\n\u201d\u3002</li> </ol> <p>\u542c\u8d77\u6765\u597d\u50cf\u6709\u70b9\u96be\u61c2\uff0c\u770b\u4e00\u4e0b\u56fe\u5c31\u597d\u7406\u89e3\u4e86\uff1a</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_57","title":"\u8303\u56f4\u8bf7\u6c42","text":"<p>HTTP\u534f\u8bae\u4e3a\u4e86\u6ee1\u8db3\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u63d0\u51fa\u4e86\u201c\u8303\u56f4\u8bf7\u6c42\u201d\uff08range requests\uff09\u7684\u6982\u5ff5\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u8bf7\u6c42\u5934\u91cc\u4f7f\u7528\u4e13\u7528\u5b57\u6bb5\u6765\u8868\u793a\u53ea\u83b7\u53d6\u6587\u4ef6\u7684\u4e00\u90e8\u5206\uff0c\u76f8\u5f53\u4e8e\u662f\u5ba2\u6237\u7aef\u7684\u201c\u5316\u6574\u4e3a\u96f6\u201d\u3002</p> <p>\u8303\u56f4\u8bf7\u6c42\u4e0d\u662fWeb\u670d\u52a1\u5668\u5fc5\u5907\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e5f\u53ef\u4ee5\u4e0d\u5b9e\u73b0\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u5fc5\u987b\u5728\u54cd\u5e94\u5934\u91cc\u4f7f\u7528\u5b57\u6bb5\u201cAccept-Ranges: bytes\u201d\u660e\u786e\u544a\u77e5\u5ba2\u6237\u7aef\uff1a\u201c\u6211\u662f\u652f\u6301\u8303\u56f4\u8bf7\u6c42\u7684\u201d\u3002</p> <p>\u5982\u679c\u4e0d\u652f\u6301\u7684\u8bdd\u8be5\u600e\u4e48\u529e\u5462\uff1f\u670d\u52a1\u5668\u53ef\u4ee5\u53d1\u9001\u201cAccept-Ranges: none\u201d\uff0c\u6216\u8005\u5e72\u8106\u4e0d\u53d1\u9001\u201cAccept-Ranges\u201d\u5b57\u6bb5\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u5c31\u8ba4\u4e3a\u670d\u52a1\u5668\u6ca1\u6709\u5b9e\u73b0\u8303\u56f4\u8bf7\u6c42\u529f\u80fd\uff0c\u53ea\u80fd\u8001\u8001\u5b9e\u5b9e\u5730\u6536\u53d1\u6574\u5757\u6587\u4ef6\u4e86\u3002</p> <p>\u8bf7\u6c42\u5934Range\u662fHTTP\u8303\u56f4\u8bf7\u6c42\u7684\u4e13\u7528\u5b57\u6bb5\uff0c\u683c\u5f0f\u662f\u201cbytes=x-y\u201d\uff0c\u5176\u4e2d\u7684x\u548cy\u662f\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\u6570\u636e\u8303\u56f4\u3002</p> <p>\u8981\u6ce8\u610fx\u3001y\u8868\u793a\u7684\u662f\u201c\u504f\u79fb\u91cf\u201d\uff0c\u8303\u56f4\u5fc5\u987b\u4ece0\u8ba1\u6570\uff0c\u4f8b\u5982\u524d10\u4e2a\u5b57\u8282\u8868\u793a\u4e3a\u201c0-9\u201d\uff0c\u7b2c\u4e8c\u4e2a10\u5b57\u8282\u8868\u793a\u4e3a\u201c10-19\u201d\uff0c\u800c\u201c0-10\u201d\u5b9e\u9645\u4e0a\u662f\u524d11\u4e2a\u5b57\u8282\u3002</p> <p>Range\u7684\u683c\u5f0f\u4e5f\u5f88\u7075\u6d3b\uff0c\u8d77\u70b9x\u548c\u7ec8\u70b9y\u53ef\u4ee5\u7701\u7565\uff0c\u80fd\u591f\u5f88\u65b9\u4fbf\u5730\u8868\u793a\u6b63\u6570\u6216\u8005\u5012\u6570\u7684\u8303\u56f4\u3002\u5047\u8bbe\u6587\u4ef6\u662f100\u4e2a\u5b57\u8282\uff0c\u90a3\u4e48\uff1a</p> <ul> <li>\u201c0-\u201d\u8868\u793a\u4ece\u6587\u6863\u8d77\u70b9\u5230\u6587\u6863\u7ec8\u70b9\uff0c\u76f8\u5f53\u4e8e\u201c0-99\u201d\uff0c\u5373\u6574\u4e2a\u6587\u4ef6\uff1b</li> <li>\u201c10-\u201d\u662f\u4ece\u7b2c10\u4e2a\u5b57\u8282\u5f00\u59cb\u5230\u6587\u6863\u672b\u5c3e\uff0c\u76f8\u5f53\u4e8e\u201c10-99\u201d\uff1b</li> <li>\u201c-1\u201d\u662f\u6587\u6863\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u8282\uff0c\u76f8\u5f53\u4e8e\u201c99-99\u201d\uff1b</li> <li>\u201c-10\u201d\u662f\u4ece\u6587\u6863\u672b\u5c3e\u5012\u657010\u4e2a\u5b57\u8282\uff0c\u76f8\u5f53\u4e8e\u201c90-99\u201d\u3002</li> </ul> <p>\u670d\u52a1\u5668\u6536\u5230Range\u5b57\u6bb5\u540e\uff0c\u9700\u8981\u505a\u56db\u4ef6\u4e8b\u3002</p> <p>\u7b2c\u4e00\uff0c\u5b83\u5fc5\u987b\u68c0\u67e5\u8303\u56f4\u662f\u5426\u5408\u6cd5\uff0c\u6bd4\u5982\u6587\u4ef6\u53ea\u6709100\u4e2a\u5b57\u8282\uff0c\u4f46\u8bf7\u6c42\u201c200-300\u201d\uff0c\u8fd9\u5c31\u662f\u8303\u56f4\u8d8a\u754c\u4e86\u3002\u670d\u52a1\u5668\u5c31\u4f1a\u8fd4\u56de\u72b6\u6001\u7801416\uff0c\u610f\u601d\u662f\u201c\u4f60\u7684\u8303\u56f4\u8bf7\u6c42\u6709\u8bef\uff0c\u6211\u65e0\u6cd5\u5904\u7406\uff0c\u8bf7\u518d\u68c0\u67e5\u4e00\u4e0b\u201d\u3002</p> <p>\u7b2c\u4e8c\uff0c\u5982\u679c\u8303\u56f4\u6b63\u786e\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u6839\u636eRange\u5934\u8ba1\u7b97\u504f\u79fb\u91cf\uff0c\u8bfb\u53d6\u6587\u4ef6\u7684\u7247\u6bb5\u4e86\uff0c\u8fd4\u56de\u72b6\u6001\u7801\u201c206 Partial Content\u201d\uff0c\u548c200\u7684\u610f\u601d\u5dee\u4e0d\u591a\uff0c\u4f46\u8868\u793abody\u53ea\u662f\u539f\u6570\u636e\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u7b2c\u4e09\uff0c\u670d\u52a1\u5668\u8981\u6dfb\u52a0\u4e00\u4e2a\u54cd\u5e94\u5934\u5b57\u6bb5Content-Range\uff0c\u544a\u8bc9\u7247\u6bb5\u7684\u5b9e\u9645\u504f\u79fb\u91cf\u548c\u8d44\u6e90\u7684\u603b\u5927\u5c0f\uff0c\u683c\u5f0f\u662f\u201cbytes x-y/length\u201d\uff0c\u4e0eRange\u5934\u533a\u522b\u5728\u6ca1\u6709\u201c=\u201d\uff0c\u8303\u56f4\u540e\u591a\u4e86\u603b\u957f\u5ea6\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u201c0-10\u201d\u7684\u8303\u56f4\u8bf7\u6c42\uff0c\u503c\u5c31\u662f\u201cbytes 0-10/100\u201d\u3002</p> <p>\u6700\u540e\u5269\u4e0b\u7684\u5c31\u662f\u53d1\u9001\u6570\u636e\u4e86\uff0c\u76f4\u63a5\u628a\u7247\u6bb5\u7528TCP\u53d1\u7ed9\u5ba2\u6237\u7aef\uff0c\u4e00\u4e2a\u8303\u56f4\u8bf7\u6c42\u5c31\u7b97\u662f\u5904\u7406\u5b8c\u4e86\u3002</p> <p>\u4f60\u53ef\u4ee5\u7528\u5b9e\u9a8c\u73af\u5883\u7684URI\u201c/16-2\u201d\u6765\u6d4b\u8bd5\u8303\u56f4\u8bf7\u6c42\uff0c\u5b83\u5904\u7406\u7684\u5bf9\u8c61\u662f\u201c/mime/a.txt\u201d\u3002\u4e0d\u8fc7\u6211\u4eec\u4e0d\u80fd\u7528Chrome\u6d4f\u89c8\u5668\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u7f16\u8f91HTTP\u8bf7\u6c42\u5934\u7684\u529f\u80fd\uff08\u8fd9\u70b9\u4e0a\u4e0d\u5982Firefox\u65b9\u4fbf\uff09\uff0c\u6240\u4ee5\u8fd8\u662f\u8981\u7528Telnet\u3002</p> <p>\u5982\u4e0b\u9762\u7684\u8fd9\u4e2a\u8bf7\u6c42\u4f7f\u7528Range\u5b57\u6bb5\u83b7\u53d6\u4e86\u6587\u4ef6\u7684\u524d32\u4e2a\u5b57\u8282\uff1a</p> <pre><code>GET /16-2 HTTP/1.1\nHost: www.chrono.com\nRange: bytes=0-31\n</code></pre> <p>\u8fd4\u56de\u7684\u6570\u636e\u662f\uff08\u53bb\u6389\u4e86\u51e0\u4e2a\u65e0\u5173\u5b57\u6bb5\uff09\uff1a</p> <pre><code>HTTP/1.1 206 Partial Content\nContent-Length: 32\nAccept-Ranges: bytes\nContent-Range: bytes 0-31/96\n\n// this is a plain text json doc\n</code></pre> <p>\u6709\u4e86\u8303\u56f4\u8bf7\u6c42\u4e4b\u540e\uff0cHTTP\u5904\u7406\u5927\u6587\u4ef6\u5c31\u66f4\u52a0\u8f7b\u677e\u4e86\uff0c\u770b\u89c6\u9891\u65f6\u53ef\u4ee5\u6839\u636e\u65f6\u95f4\u70b9\u8ba1\u7b97\u51fa\u6587\u4ef6\u7684Range\uff0c\u4e0d\u7528\u4e0b\u8f7d\u6574\u4e2a\u6587\u4ef6\uff0c\u76f4\u63a5\u7cbe\u786e\u83b7\u53d6\u7247\u6bb5\u6240\u5728\u7684\u6570\u636e\u5185\u5bb9\u3002</p> <p>\u4e0d\u4ec5\u770b\u89c6\u9891\u7684\u62d6\u62fd\u8fdb\u5ea6\u9700\u8981\u8303\u56f4\u8bf7\u6c42\uff0c\u5e38\u7528\u7684\u4e0b\u8f7d\u5de5\u5177\u91cc\u7684\u591a\u6bb5\u4e0b\u8f7d\u3001\u65ad\u70b9\u7eed\u4f20\u4e5f\u662f\u57fa\u4e8e\u5b83\u5b9e\u73b0\u7684\uff0c\u8981\u70b9\u662f\uff1a</p> <ul> <li>\u5148\u53d1\u4e2aHEAD\uff0c\u770b\u670d\u52a1\u5668\u662f\u5426\u652f\u6301\u8303\u56f4\u8bf7\u6c42\uff0c\u540c\u65f6\u83b7\u53d6\u6587\u4ef6\u7684\u5927\u5c0f\uff1b</li> <li>\u5f00N\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u4f7f\u7528Range\u5b57\u6bb5\u5212\u5206\u51fa\u5404\u81ea\u8d1f\u8d23\u4e0b\u8f7d\u7684\u7247\u6bb5\uff0c\u53d1\u8bf7\u6c42\u4f20\u8f93\u6570\u636e\uff1b</li> <li>\u4e0b\u8f7d\u610f\u5916\u4e2d\u65ad\u4e5f\u4e0d\u6015\uff0c\u4e0d\u5fc5\u91cd\u5934\u518d\u6765\u4e00\u904d\uff0c\u53ea\u8981\u6839\u636e\u4e0a\u6b21\u7684\u4e0b\u8f7d\u8bb0\u5f55\uff0c\u7528Range\u8bf7\u6c42\u5269\u4e0b\u7684\u90a3\u4e00\u90e8\u5206\u5c31\u53ef\u4ee5\u4e86\u3002</li> </ul>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_58","title":"\u591a\u6bb5\u6570\u636e","text":"<p>\u521a\u624d\u8bf4\u7684\u8303\u56f4\u8bf7\u6c42\u4e00\u6b21\u53ea\u83b7\u53d6\u4e00\u4e2a\u7247\u6bb5\uff0c\u5176\u5b9e\u5b83\u8fd8\u652f\u6301\u5728Range\u5934\u91cc\u4f7f\u7528\u591a\u4e2a\u201cx-y\u201d\uff0c\u4e00\u6b21\u6027\u83b7\u53d6\u591a\u4e2a\u7247\u6bb5\u6570\u636e\u3002</p> <p>\u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u4f7f\u7528\u4e00\u79cd\u7279\u6b8a\u7684MIME\u7c7b\u578b\uff1a\u201cmultipart/byteranges\u201d\uff0c\u8868\u793a\u62a5\u6587\u7684body\u662f\u7531\u591a\u6bb5\u5b57\u8282\u5e8f\u5217\u7ec4\u6210\u7684\uff0c\u5e76\u4e14\u8fd8\u8981\u7528\u4e00\u4e2a\u53c2\u6570\u201cboundary=xxx\u201d\u7ed9\u51fa\u6bb5\u4e4b\u95f4\u7684\u5206\u9694\u6807\u8bb0\u3002</p> <p>\u591a\u6bb5\u6570\u636e\u7684\u683c\u5f0f\u4e0e\u5206\u5757\u4f20\u8f93\u4e5f\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u4f46\u5b83\u9700\u8981\u7528\u5206\u9694\u6807\u8bb0boundary\u6765\u533a\u5206\u4e0d\u540c\u7684\u7247\u6bb5\uff0c\u53ef\u4ee5\u901a\u8fc7\u56fe\u6765\u5bf9\u6bd4\u4e00\u4e0b\u3002</p> <p> </p> <p>\u6bcf\u4e00\u4e2a\u5206\u6bb5\u5fc5\u987b\u4ee5\u201c- -boundary\u201d\u5f00\u59cb\uff08\u524d\u9762\u52a0\u4e24\u4e2a\u201c-\u201d\uff09\uff0c\u4e4b\u540e\u8981\u7528\u201cContent-Type\u201d\u548c\u201cContent-Range\u201d\u6807\u8bb0\u8fd9\u6bb5\u6570\u636e\u7684\u7c7b\u578b\u548c\u6240\u5728\u8303\u56f4\uff0c\u7136\u540e\u5c31\u50cf\u666e\u901a\u7684\u54cd\u5e94\u5934\u4e00\u6837\u4ee5\u56de\u8f66\u6362\u884c\u7ed3\u675f\uff0c\u518d\u52a0\u4e0a\u5206\u6bb5\u6570\u636e\uff0c\u6700\u540e\u7528\u4e00\u4e2a\u201c- -boundary- -\u201d\uff08\u524d\u540e\u5404\u6709\u4e24\u4e2a\u201c-\u201d\uff09\u8868\u793a\u6240\u6709\u7684\u5206\u6bb5\u7ed3\u675f\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u5728\u5b9e\u9a8c\u73af\u5883\u91cc\u7528Telnet\u53d1\u51fa\u6709\u4e24\u4e2a\u8303\u56f4\u7684\u8bf7\u6c42\uff1a</p> <pre><code>GET /16-2 HTTP/1.1\nHost: www.chrono.com\nRange: bytes=0-9, 20-29\n</code></pre> <p>\u5f97\u5230\u7684\u5c31\u4f1a\u662f\u4e0b\u9762\u8fd9\u6837\uff1a</p> <pre><code>HTTP/1.1 206 Partial Content\nContent-Type: multipart/byteranges; boundary=00000000001\nContent-Length: 189\nConnection: keep-alive\nAccept-Ranges: bytes\n\n\n--00000000001\nContent-Type: text/plain\nContent-Range: bytes 0-9/96\n\n// this is\n--00000000001\nContent-Type: text/plain\nContent-Range: bytes 20-29/96\n\next json d\n--00000000001--\n</code></pre> <p>\u62a5\u6587\u91cc\u7684\u201c- -00000000001\u201d\u5c31\u662f\u591a\u6bb5\u7684\u5206\u9694\u7b26\uff0c\u4f7f\u7528\u5b83\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u533a\u5206\u51fa\u591a\u6bb5Range \u6570\u636e\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_59","title":"\u5c0f\u7ed3","text":"<p>\u4eca\u5929\u6211\u4eec\u5b66\u4e60\u4e86HTTP\u4f20\u8f93\u5927\u6587\u4ef6\u76f8\u5173\u7684\u77e5\u8bc6\uff0c\u5728\u8fd9\u91cc\u505a\u4e00\u4e0b\u7b80\u5355\u5c0f\u7ed3\uff1a</p> <ol> <li>\u538b\u7f29HTML\u7b49\u6587\u672c\u6587\u4ef6\u662f\u4f20\u8f93\u5927\u6587\u4ef6\u6700\u57fa\u672c\u7684\u65b9\u6cd5\uff1b</li> <li>\u5206\u5757\u4f20\u8f93\u53ef\u4ee5\u6d41\u5f0f\u6536\u53d1\u6570\u636e\uff0c\u8282\u7ea6\u5185\u5b58\u548c\u5e26\u5bbd\uff0c\u4f7f\u7528\u54cd\u5e94\u5934\u5b57\u6bb5\u201cTransfer-Encoding: chunked\u201d\u6765\u8868\u793a\uff0c\u5206\u5757\u7684\u683c\u5f0f\u662f16\u8fdb\u5236\u957f\u5ea6\u5934+\u6570\u636e\u5757\uff1b</li> <li>\u8303\u56f4\u8bf7\u6c42\u53ef\u4ee5\u53ea\u83b7\u53d6\u90e8\u5206\u6570\u636e\uff0c\u5373\u201c\u5206\u5757\u8bf7\u6c42\u201d\uff0c\u5b9e\u73b0\u89c6\u9891\u62d6\u62fd\u6216\u8005\u65ad\u70b9\u7eed\u4f20\uff0c\u4f7f\u7528\u8bf7\u6c42\u5934\u5b57\u6bb5\u201cRange\u201d\u548c\u54cd\u5e94\u5934\u5b57\u6bb5\u201cContent-Range\u201d\uff0c\u54cd\u5e94\u72b6\u6001\u7801\u5fc5\u987b\u662f206\uff1b</li> <li>\u4e5f\u53ef\u4ee5\u4e00\u6b21\u8bf7\u6c42\u591a\u4e2a\u8303\u56f4\uff0c\u8fd9\u65f6\u5019\u54cd\u5e94\u62a5\u6587\u7684\u6570\u636e\u7c7b\u578b\u662f\u201cmultipart/byteranges\u201d\uff0cbody\u91cc\u7684\u591a\u4e2a\u90e8\u5206\u4f1a\u7528boundary\u5b57\u7b26\u4e32\u5206\u9694\u3002</li> </ol> <p>\u8981\u6ce8\u610f\u8fd9\u56db\u79cd\u65b9\u6cd5\u4e0d\u662f\u4e92\u65a5\u7684\uff0c\u800c\u662f\u53ef\u4ee5\u6df7\u5408\u8d77\u6765\u4f7f\u7528\uff0c\u4f8b\u5982\u538b\u7f29\u540e\u518d\u5206\u5757\u4f20\u8f93\uff0c\u6216\u8005\u5206\u6bb5\u540e\u518d\u5206\u5757\uff0c\u5b9e\u9a8c\u73af\u5883\u7684URI\u201c/16-3\u201d\u5c31\u6a21\u62df\u4e86\u540e\u4e00\u79cd\u7684\u60c5\u5f62\uff0c\u4f60\u53ef\u4ee5\u81ea\u5df1\u7528Telnet\u8bd5\u4e00\u4e0b\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_11","title":"\u5341\u4e03\u3001http\u8fde\u63a5\u7ba1\u7406","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_60","title":"\u77ed\u8fde\u63a5","text":"<p>HTTP\u534f\u8bae\u6700\u521d\uff080.9/1.0\uff09\u662f\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u534f\u8bae\uff0c\u901a\u4fe1\u8fc7\u7a0b\u4e5f\u91c7\u7528\u4e86\u7b80\u5355\u7684\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u65b9\u5f0f\u3002</p> <p>\u5b83\u5e95\u5c42\u7684\u6570\u636e\u4f20\u8f93\u57fa\u4e8eTCP/IP\uff0c\u6bcf\u6b21\u53d1\u9001\u8bf7\u6c42\u524d\u9700\u8981\u5148\u4e0e\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff0c\u6536\u5230\u54cd\u5e94\u62a5\u6587\u540e\u4f1a\u7acb\u5373\u5173\u95ed\u8fde\u63a5\u3002</p> <p>\u56e0\u4e3a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7684\u6574\u4e2a\u8fde\u63a5\u8fc7\u7a0b\u5f88\u77ed\u6682\uff0c\u4e0d\u4f1a\u4e0e\u670d\u52a1\u5668\u4fdd\u6301\u957f\u65f6\u95f4\u7684\u8fde\u63a5\u72b6\u6001\uff0c\u6240\u4ee5\u5c31\u88ab\u79f0\u4e3a\u201c\u77ed\u8fde\u63a5\u201d\uff08short-lived connections\uff09\u3002\u65e9\u671f\u7684HTTP\u534f\u8bae\u4e5f\u88ab\u79f0\u4e3a\u662f\u201c\u65e0\u8fde\u63a5\u201d\u7684\u534f\u8bae\u3002</p> <p>\u77ed\u8fde\u63a5\u7684\u7f3a\u70b9\u76f8\u5f53\u4e25\u91cd\uff0c\u56e0\u4e3a\u5728TCP\u534f\u8bae\u91cc\uff0c\u5efa\u7acb\u8fde\u63a5\u548c\u5173\u95ed\u8fde\u63a5\u90fd\u662f\u975e\u5e38\u201c\u6602\u8d35\u201d\u7684\u64cd\u4f5c\u3002TCP\u5efa\u7acb\u8fde\u63a5\u8981\u6709\u201c\u4e09\u6b21\u63e1\u624b\u201d\uff0c\u53d1\u90013\u4e2a\u6570\u636e\u5305\uff0c\u9700\u89811\u4e2aRTT\uff1b\u5173\u95ed\u8fde\u63a5\u662f\u201c\u56db\u6b21\u6325\u624b\u201d\uff0c4\u4e2a\u6570\u636e\u5305\u9700\u89812\u4e2aRTT\u3002</p> <p>\u800cHTTP\u7684\u4e00\u6b21\u7b80\u5355\u201c\u8bf7\u6c42-\u54cd\u5e94\u201d\u901a\u5e38\u53ea\u9700\u89814\u4e2a\u5305\uff0c\u5982\u679c\u4e0d\u7b97\u670d\u52a1\u5668\u5185\u90e8\u7684\u5904\u7406\u65f6\u95f4\uff0c\u6700\u591a\u662f2\u4e2aRTT\u3002\u8fd9\u4e48\u7b97\u4e0b\u6765\uff0c\u6d6a\u8d39\u7684\u65f6\u95f4\u5c31\u662f\u201c3\u00f75=60%\u201d\uff0c\u6709\u4e09\u5206\u4e4b\u4e8c\u7684\u65f6\u95f4\u88ab\u6d6a\u8d39\u6389\u4e86\uff0c\u4f20\u8f93\u6548\u7387\u4f4e\u5f97\u60ca\u4eba\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_61","title":"\u957f\u8fde\u63a5","text":"<p>\u9488\u5bf9\u77ed\u8fde\u63a5\u66b4\u9732\u51fa\u7684\u7f3a\u70b9\uff0cHTTP\u534f\u8bae\u5c31\u63d0\u51fa\u4e86\u201c\u957f\u8fde\u63a5\u201d\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u4e5f\u53eb\u201c\u6301\u4e45\u8fde\u63a5\u201d\uff08persistent connections\uff09\u3001\u201c\u8fde\u63a5\u4fdd\u6d3b\u201d\uff08keep alive\uff09\u3001\u201c\u8fde\u63a5\u590d\u7528\u201d\uff08connection reuse\uff09\u3002</p> <p>\u5176\u5b9e\u89e3\u51b3\u529e\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u7528\u7684\u5c31\u662f\u201c\u6210\u672c\u5747\u644a\u201d\u7684\u601d\u8def\uff0c\u65e2\u7136TCP\u7684\u8fde\u63a5\u548c\u5173\u95ed\u975e\u5e38\u8017\u65f6\u95f4\uff0c\u90a3\u4e48\u5c31\u628a\u8fd9\u4e2a\u65f6\u95f4\u6210\u672c\u7531\u539f\u6765\u7684\u4e00\u4e2a\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u5747\u644a\u5230\u591a\u4e2a\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u4e0a\u3002</p> <p>\u8fd9\u6837\u867d\u7136\u4e0d\u80fd\u6539\u5584TCP\u7684\u8fde\u63a5\u6548\u7387\uff0c\u4f46\u57fa\u4e8e\u201c\u5206\u6bcd\u6548\u5e94\u201d\uff0c\u6bcf\u4e2a\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u7684\u65e0\u6548\u65f6\u95f4\u5c31\u4f1a\u964d\u4f4e\u4e0d\u5c11\uff0c\u6574\u4f53\u4f20\u8f93\u6548\u7387\u4e5f\u5c31\u63d0\u9ad8\u4e86\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_62","title":"\u8fde\u63a5\u76f8\u5173\u7684\u5934\u5b57\u6bb5","text":"<p>\u7531\u4e8e\u957f\u8fde\u63a5\u5bf9\u6027\u80fd\u7684\u6539\u5584\u6548\u679c\u975e\u5e38\u663e\u8457\uff0c\u6240\u4ee5\u5728HTTP/1.1\u4e2d\u7684\u8fde\u63a5\u90fd\u4f1a\u9ed8\u8ba4\u542f\u7528\u957f\u8fde\u63a5\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u8bf7\u6c42\u5934\u91cc\u660e\u786e\u5730\u8981\u6c42\u4f7f\u7528\u957f\u8fde\u63a5\u673a\u5236\uff0c\u4f7f\u7528\u7684\u5b57\u6bb5\u662fConnection\uff0c\u503c\u662f\u201ckeep-alive\u201d\u3002</p> <p>\u4e0d\u8fc7\u4e0d\u7ba1\u5ba2\u6237\u7aef\u662f\u5426\u663e\u5f0f\u8981\u6c42\u957f\u8fde\u63a5\uff0c\u5982\u679c\u670d\u52a1\u5668\u652f\u6301\u957f\u8fde\u63a5\uff0c\u5b83\u603b\u4f1a\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u653e\u4e00\u4e2a\u201cConnection: keep-alive\u201d\u5b57\u6bb5\uff0c\u544a\u8bc9\u5ba2\u6237\u7aef\uff1a\u201c\u6211\u662f\u652f\u6301\u957f\u8fde\u63a5\u7684\uff0c\u63a5\u4e0b\u6765\u5c31\u7528\u8fd9\u4e2aTCP\u4e00\u76f4\u6536\u53d1\u6570\u636e\u5427\u201d\u3002</p> <p>\u4e0d\u8fc7\u957f\u8fde\u63a5\u4e5f\u6709\u4e00\u4e9b\u5c0f\u7f3a\u70b9\uff0c\u95ee\u9898\u5c31\u51fa\u5728\u5b83\u7684\u201c\u957f\u201d\u5b57\u4e0a\u3002</p> <p>\u56e0\u4e3aTCP\u8fde\u63a5\u957f\u65f6\u95f4\u4e0d\u5173\u95ed\uff0c\u670d\u52a1\u5668\u5fc5\u987b\u5728\u5185\u5b58\u91cc\u4fdd\u5b58\u5b83\u7684\u72b6\u6001\uff0c\u8fd9\u5c31\u5360\u7528\u4e86\u670d\u52a1\u5668\u7684\u8d44\u6e90\u3002\u5982\u679c\u6709\u5927\u91cf\u7684\u7a7a\u95f2\u957f\u8fde\u63a5\u53ea\u8fde\u4e0d\u53d1\uff0c\u5c31\u4f1a\u5f88\u5feb\u8017\u5c3d\u670d\u52a1\u5668\u7684\u8d44\u6e90\uff0c\u5bfc\u81f4\u670d\u52a1\u5668\u65e0\u6cd5\u4e3a\u771f\u6b63\u6709\u9700\u8981\u7684\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u6240\u4ee5\uff0c\u957f\u8fde\u63a5\u4e5f\u9700\u8981\u5728\u6070\u5f53\u7684\u65f6\u95f4\u5173\u95ed\uff0c\u4e0d\u80fd\u6c38\u8fdc\u4fdd\u6301\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff0c\u8fd9\u5728\u5ba2\u6237\u7aef\u6216\u8005\u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u505a\u5230\u3002</p> <p>\u5728\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42\u5934\u91cc\u52a0\u4e0a\u201cConnection: close\u201d\u5b57\u6bb5\uff0c\u544a\u8bc9\u670d\u52a1\u5668\uff1a\u201c\u8fd9\u6b21\u901a\u4fe1\u540e\u5c31\u5173\u95ed\u8fde\u63a5\u201d\u3002\u670d\u52a1\u5668\u770b\u5230\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u5c31\u77e5\u9053\u5ba2\u6237\u7aef\u8981\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u4e8e\u662f\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u4e5f\u52a0\u4e0a\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u53d1\u9001\u4e4b\u540e\u5c31\u8c03\u7528Socket API\u5173\u95edTCP\u8fde\u63a5\u3002</p> <p>\u670d\u52a1\u5668\u7aef\u901a\u5e38\u4e0d\u4f1a\u4e3b\u52a8\u5173\u95ed\u8fde\u63a5\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u7b56\u7565\u3002\u62ffNginx\u6765\u4e3e\u4f8b\uff0c\u5b83\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u4f7f\u7528\u201ckeepalive_timeout\u201d\u6307\u4ee4\uff0c\u8bbe\u7f6e\u957f\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5982\u679c\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u8fde\u63a5\u4e0a\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u6536\u53d1\u5c31\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\uff0c\u907f\u514d\u7a7a\u95f2\u8fde\u63a5\u5360\u7528\u7cfb\u7edf\u8d44\u6e90\u3002</li> <li>\u4f7f\u7528\u201ckeepalive_requests\u201d\u6307\u4ee4\uff0c\u8bbe\u7f6e\u957f\u8fde\u63a5\u4e0a\u53ef\u53d1\u9001\u7684\u6700\u5927\u8bf7\u6c42\u6b21\u6570\u3002\u6bd4\u5982\u8bbe\u7f6e\u62101000\uff0c\u90a3\u4e48\u5f53Nginx\u5728\u8fd9\u4e2a\u8fde\u63a5\u4e0a\u5904\u7406\u4e861000\u4e2a\u8bf7\u6c42\u540e\uff0c\u4e5f\u4f1a\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\u3002</li> </ol> <p>\u53e6\u5916\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u53ef\u4ee5\u5728\u62a5\u6587\u91cc\u9644\u52a0\u901a\u7528\u5934\u5b57\u6bb5\u201cKeep-Alive: timeout=value\u201d\uff0c\u9650\u5b9a\u957f\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u4f46\u8fd9\u4e2a\u5b57\u6bb5\u7684\u7ea6\u675f\u529b\u5e76\u4e0d\u5f3a\uff0c\u901a\u4fe1\u7684\u53cc\u65b9\u53ef\u80fd\u5e76\u4e0d\u4f1a\u9075\u5b88\uff0c\u6240\u4ee5\u4e0d\u592a\u5e38\u89c1\u3002</p> <p>\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e\u4e86\u201ckeepalive_timeout 60\u201d\u548c\u201ckeepalive_requests 5\u201d\uff0c\u610f\u601d\u662f\u7a7a\u95f2\u8fde\u63a5\u6700\u591a60\u79d2\uff0c\u6700\u591a\u53d1\u90015\u4e2a\u8bf7\u6c42\u3002\u6240\u4ee5\uff0c\u5982\u679c\u8fde\u7eed\u5237\u65b0\u4e94\u6b21\u9875\u9762\uff0c\u5c31\u80fd\u770b\u5230\u54cd\u5e94\u5934\u91cc\u7684\u201cConnection: close\u201d\u4e86\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_63","title":"\u961f\u5934\u963b\u585e","text":"<p>\u770b\u5b8c\u4e86\u77ed\u8fde\u63a5\u548c\u957f\u8fde\u63a5\uff0c\u63a5\u4e0b\u6765\u5c31\u8981\u8bf4\u5230\u8457\u540d\u7684\u201c\u961f\u5934\u963b\u585e\u201d\uff08Head-of-line blocking\uff0c\u4e5f\u53eb\u201c\u961f\u9996\u963b\u585e\u201d\uff09\u4e86\u3002</p> <p>\u201c\u961f\u5934\u963b\u585e\u201d\u4e0e\u77ed\u8fde\u63a5\u548c\u957f\u8fde\u63a5\u65e0\u5173\uff0c\u800c\u662f\u7531HTTP\u57fa\u672c\u7684\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u6a21\u578b\u6240\u5bfc\u81f4\u7684\u3002</p> <p>\u56e0\u4e3aHTTP\u89c4\u5b9a\u62a5\u6587\u5fc5\u987b\u662f\u201c\u4e00\u53d1\u4e00\u6536\u201d\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\u7684\u201c\u4e32\u884c\u201d\u961f\u5217\u3002\u961f\u5217\u91cc\u7684\u8bf7\u6c42\u6ca1\u6709\u8f7b\u91cd\u7f13\u6025\u7684\u4f18\u5148\u7ea7\uff0c\u53ea\u6709\u5165\u961f\u7684\u5148\u540e\u987a\u5e8f\uff0c\u6392\u5728\u6700\u524d\u9762\u7684\u8bf7\u6c42\u88ab\u6700\u4f18\u5148\u5904\u7406\u3002</p> <p>\u5982\u679c\u961f\u9996\u7684\u8bf7\u6c42\u56e0\u4e3a\u5904\u7406\u7684\u592a\u6162\u803d\u8bef\u4e86\u65f6\u95f4\uff0c\u90a3\u4e48\u961f\u5217\u91cc\u540e\u9762\u7684\u6240\u6709\u8bf7\u6c42\u4e5f\u4e0d\u5f97\u4e0d\u8ddf\u7740\u4e00\u8d77\u7b49\u5f85\uff0c\u7ed3\u679c\u5c31\u662f\u5176\u4ed6\u7684\u8bf7\u6c42\u627f\u62c5\u4e86\u4e0d\u5e94\u6709\u7684\u65f6\u95f4\u6210\u672c\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_64","title":"\u6027\u80fd\u4f18\u5316","text":"<p>\u56e0\u4e3a\u5728\u4e00\u6761\u957f\u8fde\u63a5\u4e2d\uff0c\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u6a21\u578b\u4e0d\u80fd\u53d8\uff0c\u6240\u4ee5\u201c\u961f\u5934\u963b\u585e\u201d\u95ee\u9898\u5728HTTP/1.1\u91cc\u65e0\u6cd5\u89e3\u51b3\uff0c\u53ea\u80fd\u7f13\u89e3\uff0c\u6709\u4ec0\u4e48\u529e\u6cd5\u5462\uff1f</p> <ul> <li>\u5e76\u53d1\u8fde\u63a5</li> </ul> <p>\u201c\u5e76\u53d1\u8fde\u63a5\u201d\uff08concurrent connections\uff09\uff0c\u4e5f\u5c31\u662f\u540c\u65f6\u5bf9\u4e00\u4e2a\u57df\u540d\u53d1\u8d77\u591a\u4e2a\u957f\u8fde\u63a5\uff0c\u7528\u6570\u91cf\u6765\u89e3\u51b3\u8d28\u91cf\u7684\u95ee\u9898\u3002</p> <ul> <li>\u57df\u540d\u5206\u7247</li> </ul> <p>\u201c\u57df\u540d\u5206\u7247\u201d\uff08domain sharding\uff09\u6280\u672f\uff0c\u8fd8\u662f\u7528\u6570\u91cf\u6765\u89e3\u51b3\u8d28\u91cf\u7684\u601d\u8def\u3002</p> <p>HTTP\u534f\u8bae\u548c\u6d4f\u89c8\u5668\u4e0d\u662f\u9650\u5236\u5e76\u53d1\u8fde\u63a5\u6570\u91cf\u5417\uff1f\u597d\uff0c\u90a3\u6211\u5c31\u591a\u5f00\u51e0\u4e2a\u57df\u540d\uff0c\u6bd4\u5982shard1.chrono.com\u3001shard2.chrono.com\uff0c\u800c\u8fd9\u4e9b\u57df\u540d\u90fd\u6307\u5411\u540c\u4e00\u53f0\u670d\u52a1\u5668www.chrono.com\uff0c\u8fd9\u6837\u5b9e\u9645\u957f\u8fde\u63a5\u7684\u6570\u91cf\u5c31\u53c8\u4e0a\u53bb\u4e86\uff0c\u771f\u662f\u201c\u7f8e\u6ecb\u6ecb\u201d\u3002\u4e0d\u8fc7\u5b9e\u5728\u662f\u6709\u70b9\u201c\u4e0a\u6709\u653f\u7b56\uff0c\u4e0b\u6709\u5bf9\u7b56\u201d\u7684\u5473\u9053\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_65","title":"\u5c0f\u7ed3","text":"<ol> <li>\u65e9\u671f\u7684HTTP\u534f\u8bae\u4f7f\u7528\u77ed\u8fde\u63a5\uff0c\u6536\u5230\u54cd\u5e94\u540e\u5c31\u7acb\u5373\u5173\u95ed\u8fde\u63a5\uff0c\u6548\u7387\u5f88\u4f4e\uff1b</li> <li>HTTP/1.1\u9ed8\u8ba4\u542f\u7528\u957f\u8fde\u63a5\uff0c\u5728\u4e00\u4e2a\u8fde\u63a5\u4e0a\u6536\u53d1\u591a\u4e2a\u8bf7\u6c42\u54cd\u5e94\uff0c\u63d0\u9ad8\u4e86\u4f20\u8f93\u6548\u7387\uff1b</li> <li>\u670d\u52a1\u5668\u4f1a\u53d1\u9001\u201cConnection: keep-alive\u201d\u5b57\u6bb5\u8868\u793a\u542f\u7528\u4e86\u957f\u8fde\u63a5\uff1b</li> <li>\u62a5\u6587\u5934\u91cc\u5982\u679c\u6709\u201cConnection: close\u201d\u5c31\u610f\u5473\u7740\u957f\u8fde\u63a5\u5373\u5c06\u5173\u95ed\uff1b</li> <li>\u8fc7\u591a\u7684\u957f\u8fde\u63a5\u4f1a\u5360\u7528\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u4f1a\u7528\u4e00\u4e9b\u7b56\u7565\u6709\u9009\u62e9\u5730\u5173\u95ed\u957f\u8fde\u63a5\uff1b</li> <li>\u201c\u961f\u5934\u963b\u585e\u201d\u95ee\u9898\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff0c\u53ef\u4ee5\u7528\u201c\u5e76\u53d1\u8fde\u63a5\u201d\u548c\u201c\u57df\u540d\u5206\u7247\u201d\u6280\u672f\u7f13\u89e3\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_66","title":"\u5341\u516b\u3001\u91cd\u5b9a\u5411\u4e0e\u8df3\u8f6c","text":"<p>\u70b9\u51fb\u9875\u9762\u201c\u94fe\u63a5\u201d\u65f6\u7684\u8df3\u8f6c\u662f\u600e\u6837\u7684\u5462\uff1f\u5177\u4f53\u4e00\u70b9\uff0c\u6bd4\u5982\u5728Nginx\u7684\u4e3b\u9875\u4e0a\u70b9\u4e86\u4e00\u4e0b\u201cdownload\u201d\u94fe\u63a5\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1f</p> <p>\u7ed3\u5408\u4e4b\u524d\u7684\u8bfe\u7a0b\uff0c\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\u4f60\u5c31\u80fd\u5f97\u5230\u7b54\u6848\uff1a\u6d4f\u89c8\u5668\u9996\u5148\u8981\u89e3\u6790\u94fe\u63a5\u6587\u5b57\u91cc\u7684URI\u3002</p> <pre><code>http://nginx.org/en/download.html\n</code></pre> <p>\u518d\u7528\u8fd9\u4e2aURI\u53d1\u8d77\u4e00\u4e2a\u65b0\u7684HTTP\u8bf7\u6c42\uff0c\u83b7\u53d6\u54cd\u5e94\u62a5\u6587\u540e\u5c31\u4f1a\u5207\u6362\u663e\u793a\u5185\u5bb9\uff0c\u6e32\u67d3\u51fa\u65b0URI\u6307\u5411\u7684\u9875\u9762\u3002</p> <p>\u8fd9\u6837\u7684\u8df3\u8f6c\u52a8\u4f5c\u662f\u7531\u6d4f\u89c8\u5668\u7684\u4f7f\u7528\u8005\u4e3b\u52a8\u53d1\u8d77\u7684\uff0c\u53ef\u4ee5\u79f0\u4e3a\u201c\u4e3b\u52a8\u8df3\u8f6c\u201d\uff0c\u4f46\u8fd8\u6709\u4e00\u7c7b\u8df3\u8f6c\u662f\u7531\u670d\u52a1\u5668\u6765\u53d1\u8d77\u7684\uff0c\u6d4f\u89c8\u5668\u4f7f\u7528\u8005\u65e0\u6cd5\u63a7\u5236\uff0c\u76f8\u5bf9\u5730\u5c31\u53ef\u4ee5\u79f0\u4e3a\u201c\u88ab\u52a8\u8df3\u8f6c\u201d\uff0c\u8fd9\u5728HTTP\u534f\u8bae\u91cc\u6709\u4e2a\u4e13\u95e8\u7684\u540d\u8bcd\uff0c\u53eb\u505a\u201c\u91cd\u5b9a\u5411\u201d\uff08Redirection\uff09\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_67","title":"\u91cd\u5b9a\u5411\u7684\u8fc7\u7a0b","text":"<p>\u5148\u5728\u5b9e\u9a8c\u73af\u5883\u91cc\u770b\u4e00\u4e0b\u91cd\u5b9a\u5411\u7684\u8fc7\u7a0b\u5427\uff0c\u7528Chrome\u8bbf\u95eeURI \u201c/18-1\u201d\uff0c\u5b83\u4f1a\u4f7f\u7528302\u7acb\u5373\u8df3\u8f6c\u5230\u201c/index.html\u201d\u3002</p> <p> </p> <p>\u4ece\u8fd9\u4e2a\u5b9e\u9a8c\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e00\u6b21\u201c\u91cd\u5b9a\u5411\u201d\u5b9e\u9645\u4e0a\u53d1\u9001\u4e86\u4e24\u6b21HTTP\u8bf7\u6c42\uff0c\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u8fd4\u56de\u4e86302\uff0c\u7136\u540e\u7b2c\u4e8c\u4e2a\u8bf7\u6c42\u5c31\u88ab\u91cd\u5b9a\u5411\u5230\u4e86\u201c/index.html\u201d\u3002\u4f46\u5982\u679c\u4e0d\u7528\u5f00\u53d1\u8005\u5de5\u5177\u7684\u8bdd\uff0c\u4f60\u662f\u5b8c\u5168\u770b\u4e0d\u5230\u8fd9\u4e2a\u8df3\u8f6c\u8fc7\u7a0b\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u91cd\u5b9a\u5411\u662f\u201c\u7528\u6237\u65e0\u611f\u77e5\u201d\u7684\u3002</p> <p>\u6211\u4eec\u518d\u6765\u770b\u770b\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u8fd4\u56de\u7684\u54cd\u5e94\u62a5\u6587\uff1a</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_68","title":"\u5c0f\u7ed3","text":"<ol> <li>\u91cd\u5b9a\u5411\u662f\u670d\u52a1\u5668\u53d1\u8d77\u7684\u8df3\u8f6c\uff0c\u8981\u6c42\u5ba2\u6237\u7aef\u6539\u7528\u65b0\u7684URI\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\uff0c\u901a\u5e38\u4f1a\u81ea\u52a8\u8fdb\u884c\uff0c\u7528\u6237\u662f\u65e0\u611f\u77e5\u7684\uff1b</li> <li>301/302\u662f\u6700\u5e38\u7528\u7684\u91cd\u5b9a\u5411\u72b6\u6001\u7801\uff0c\u5206\u522b\u662f\u201c\u6c38\u4e45\u91cd\u5b9a\u5411\u201d\u548c\u201c\u4e34\u65f6\u91cd\u5b9a\u5411\u201d\uff1b</li> <li>\u54cd\u5e94\u5934\u5b57\u6bb5Location\u6307\u793a\u4e86\u8981\u8df3\u8f6c\u7684URI\uff0c\u53ef\u4ee5\u7528\u7edd\u5bf9\u6216\u76f8\u5bf9\u7684\u5f62\u5f0f\uff1b</li> <li>\u91cd\u5b9a\u5411\u53ef\u4ee5\u628a\u4e00\u4e2aURI\u6307\u5411\u53e6\u4e00\u4e2aURI\uff0c\u4e5f\u53ef\u4ee5\u628a\u591a\u4e2aURI\u6307\u5411\u540c\u4e00\u4e2aURI\uff0c\u7528\u9014\u5f88\u591a\uff1b</li> <li>\u4f7f\u7528\u91cd\u5b9a\u5411\u65f6\u9700\u8981\u5f53\u5fc3\u6027\u80fd\u635f\u8017\uff0c\u8fd8\u8981\u907f\u514d\u51fa\u73b0\u5faa\u73af\u8df3\u8f6c\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cookie","title":"\u5341\u4e5d\u3001Cookie","text":"<p>HTTP\u7684Cookie\u673a\u5236\uff0c\u65e2\u7136\u670d\u52a1\u5668\u6ca1\u6709\u8bb0\u4f4f\u7528\u6237\u7684\u529f\u80fd\uff0c\u90a3\u5c31\u5728\u5916\u90e8\u60f3\u529e\u6cd5\u8bb0\u4f4f\u3002\u76f8\u5f53\u4e8e\u662f\u670d\u52a1\u5668\u7ed9\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u8d34\u4e0a\u4e00\u5f20\u5c0f\u7eb8\u6761\uff0c\u4e0a\u9762\u5199\u4e86\u4e00\u4e9b\u53ea\u6709\u670d\u52a1\u5668\u624d\u80fd\u7406\u89e3\u7684\u6570\u636e\uff0c\u9700\u8981\u7684\u65f6\u5019\u5ba2\u6237\u7aef\u628a\u8fd9\u4e9b\u4fe1\u606f\u53d1\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u770b\u5230Cookie\uff0c\u5c31\u80fd\u591f\u8ba4\u51fa\u5bf9\u65b9\u662f\u8c01\u4e86\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cookie_1","title":"Cookie\u7684\u5de5\u4f5c\u8fc7\u7a0b","text":"<p>\u90a3\u4e48\uff0cCookie\u8fd9\u5f20\u5c0f\u7eb8\u6761\u662f\u600e\u4e48\u4f20\u9012\u7684\u5462\uff1f</p> <p>\u8fd9\u8981\u7528\u5230\u4e24\u4e2a\u5b57\u6bb5\uff1a\u54cd\u5e94\u5934\u5b57\u6bb5Set-Cookie\u548c\u8bf7\u6c42\u5934\u5b57\u6bb5Cookie\u3002</p> <p>\u5f53\u7528\u6237\u901a\u8fc7\u6d4f\u89c8\u5668\u7b2c\u4e00\u6b21\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u80af\u5b9a\u662f\u4e0d\u77e5\u9053\u4ed6\u7684\u8eab\u4efd\u7684\u3002\u6240\u4ee5\uff0c\u5c31\u8981\u521b\u5efa\u4e00\u4e2a\u72ec\u7279\u7684\u8eab\u4efd\u6807\u8bc6\u6570\u636e\uff0c\u683c\u5f0f\u662f\u201ckey=value\u201d\uff0c\u7136\u540e\u653e\u8fdbSet-Cookie\u5b57\u6bb5\u91cc\uff0c\u968f\u7740\u54cd\u5e94\u62a5\u6587\u4e00\u540c\u53d1\u7ed9\u6d4f\u89c8\u5668\u3002</p> <p>\u6d4f\u89c8\u5668\u6536\u5230\u54cd\u5e94\u62a5\u6587\uff0c\u770b\u5230\u91cc\u9762\u6709Set-Cookie\uff0c\u77e5\u9053\u8fd9\u662f\u670d\u52a1\u5668\u7ed9\u7684\u8eab\u4efd\u6807\u8bc6\uff0c\u4e8e\u662f\u5c31\u4fdd\u5b58\u8d77\u6765\uff0c\u4e0b\u6b21\u518d\u8bf7\u6c42\u7684\u65f6\u5019\u5c31\u81ea\u52a8\u628a\u8fd9\u4e2a\u503c\u653e\u8fdbCookie\u5b57\u6bb5\u91cc\u53d1\u7ed9\u670d\u52a1\u5668\u3002</p> <p>\u56e0\u4e3a\u7b2c\u4e8c\u6b21\u8bf7\u6c42\u91cc\u9762\u6709\u4e86Cookie\u5b57\u6bb5\uff0c\u670d\u52a1\u5668\u5c31\u77e5\u9053\u8fd9\u4e2a\u7528\u6237\u4e0d\u662f\u65b0\u4eba\uff0c\u4e4b\u524d\u6765\u8fc7\uff0c\u5c31\u53ef\u4ee5\u62ff\u51faCookie\u91cc\u7684\u503c\uff0c\u8bc6\u522b\u51fa\u7528\u6237\u7684\u8eab\u4efd\uff0c\u7136\u540e\u63d0\u4f9b\u4e2a\u6027\u5316\u7684\u670d\u52a1\u3002</p> <p>\u4e0d\u8fc7\u56e0\u4e3a\u670d\u52a1\u5668\u7684\u201c\u8bb0\u5fc6\u80fd\u529b\u201d\u5b9e\u5728\u662f\u592a\u5dee\uff0c\u4e00\u5f20\u5c0f\u7eb8\u6761\u7ecf\u5e38\u4e0d\u591f\u7528\u3002\u6240\u4ee5\uff0c\u670d\u52a1\u5668\u6709\u65f6\u4f1a\u5728\u54cd\u5e94\u5934\u91cc\u6dfb\u52a0\u591a\u4e2aSet-Cookie\uff0c\u5b58\u50a8\u591a\u4e2a\u201ckey=value\u201d\u3002\u4f46\u6d4f\u89c8\u5668\u8fd9\u8fb9\u53d1\u9001\u65f6\u4e0d\u9700\u8981\u7528\u591a\u4e2aCookie\u5b57\u6bb5\uff0c\u53ea\u8981\u5728\u4e00\u884c\u91cc\u7528\u201c;\u201d\u9694\u5f00\u5c31\u884c\u3002</p> <p> </p> <p>Cookie\u662f\u7531\u6d4f\u89c8\u5668\u8d1f\u8d23\u5b58\u50a8\u7684\uff0c\u800c\u4e0d\u662f\u64cd\u4f5c\u7cfb\u7edf\u3002\u6240\u4ee5\uff0c\u5b83\u662f\u201c\u6d4f\u89c8\u5668\u7ed1\u5b9a\u201d\u7684\uff0c\u53ea\u80fd\u5728\u672c\u6d4f\u89c8\u5668\u5185\u751f\u6548\u3002</p> <p>\u5982\u679c\u4f60\u6362\u4e2a\u6d4f\u89c8\u5668\u6216\u8005\u6362\u53f0\u7535\u8111\uff0c\u65b0\u7684\u6d4f\u89c8\u5668\u91cc\u6ca1\u6709\u670d\u52a1\u5668\u5bf9\u5e94\u7684Cookie\uff0c\u5c31\u597d\u50cf\u662f\u8131\u6389\u4e86\u8d34\u7740\u7eb8\u6761\u7684\u8863\u670d\uff0c\u201c\u5065\u5fd8\u201d\u7684\u670d\u52a1\u5668\u4e5f\u5c31\u8ba4\u4e0d\u51fa\u6765\u4e86\uff0c\u53ea\u80fd\u518d\u8d70\u4e00\u904dSet-Cookie\u6d41\u7a0b\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cookie_2","title":"Cookie\u7684\u5c5e\u6027","text":"<p>\u8bf4\u5230\u8fd9\u91cc\uff0c\u4f60\u5e94\u8be5\u77e5\u9053\u4e86\uff0cCookie\u5c31\u662f\u670d\u52a1\u5668\u59d4\u6258\u6d4f\u89c8\u5668\u5b58\u50a8\u5728\u5ba2\u6237\u7aef\u91cc\u7684\u4e00\u4e9b\u6570\u636e\uff0c\u800c\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u90fd\u4f1a\u8bb0\u5f55\u7528\u6237\u7684\u5173\u952e\u8bc6\u522b\u4fe1\u606f\u3002\u6240\u4ee5\uff0c\u5c31\u9700\u8981\u5728\u201ckey=value\u201d\u5916\u518d\u7528\u4e00\u4e9b\u624b\u6bb5\u6765\u4fdd\u62a4\uff0c\u9632\u6b62\u5916\u6cc4\u6216\u7a83\u53d6\uff0c\u8fd9\u4e9b\u624b\u6bb5\u5c31\u662fCookie\u7684\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u8fd9\u4e2a\u622a\u56fe\u662f\u5b9e\u9a8c\u73af\u5883\u201c/19-2\u201d\u7684\u54cd\u5e94\u5934\uff0c\u6211\u6765\u5bf9\u7740\u8fd9\u4e2a\u5b9e\u9645\u6848\u4f8b\u8bb2\u4e00\u4e0b\u90fd\u6709\u54ea\u4e9b\u5e38\u89c1\u7684Cookie\u5c5e\u6027\u3002</p> <p> </p> <p>\u9996\u5148\uff0c\u6211\u4eec\u5e94\u8be5\u8bbe\u7f6eCookie\u7684\u751f\u5b58\u5468\u671f\uff0c\u4e5f\u5c31\u662f\u5b83\u7684\u6709\u6548\u671f\uff0c\u8ba9\u5b83\u53ea\u80fd\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u53ef\u7528\uff0c\u5c31\u50cf\u662f\u98df\u54c1\u7684\u201c\u4fdd\u9c9c\u671f\u201d\uff0c\u4e00\u65e6\u8d85\u8fc7\u8fd9\u4e2a\u671f\u9650\u6d4f\u89c8\u5668\u5c31\u8ba4\u4e3a\u662fCookie\u5931\u6548\uff0c\u5728\u5b58\u50a8\u91cc\u5220\u9664\uff0c\u4e5f\u4e0d\u4f1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</p> <p>Cookie\u7684\u6709\u6548\u671f\u53ef\u4ee5\u4f7f\u7528Expires\u548cMax-Age\u4e24\u4e2a\u5c5e\u6027\u6765\u8bbe\u7f6e\u3002</p> <p>\u201cExpires\u201d\u4fd7\u79f0\u201c\u8fc7\u671f\u65f6\u95f4\u201d\uff0c\u7528\u7684\u662f\u7edd\u5bf9\u65f6\u95f4\u70b9\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u622a\u6b62\u65e5\u671f\u201d\uff08deadline\uff09\u3002\u201cMax-Age\u201d\u7528\u7684\u662f\u76f8\u5bf9\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u6d4f\u89c8\u5668\u7528\u6536\u5230\u62a5\u6587\u7684\u65f6\u95f4\u70b9\u518d\u52a0\u4e0aMax-Age\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u5931\u6548\u7684\u7edd\u5bf9\u65f6\u95f4\u3002</p> <p>Expires\u548cMax-Age\u53ef\u4ee5\u540c\u65f6\u51fa\u73b0\uff0c\u4e24\u8005\u7684\u5931\u6548\u65f6\u95f4\u53ef\u4ee5\u4e00\u81f4\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u4e00\u81f4\uff0c\u4f46\u6d4f\u89c8\u5668\u4f1a\u4f18\u5148\u91c7\u7528Max-Age\u8ba1\u7b97\u5931\u6548\u671f\u3002</p> <p>\u6bd4\u5982\u5728\u8fd9\u4e2a\u4f8b\u5b50\u91cc\uff0cExpires\u6807\u8bb0\u7684\u8fc7\u671f\u65f6\u95f4\u662f\u201cGMT 2019\u5e746\u67087\u53f78\u70b919\u5206\u201d\uff0c\u800cMax-Age\u5219\u53ea\u670910\u79d2\uff0c\u5982\u679c\u73b0\u5728\u662f6\u67086\u53f7\u96f6\u70b9\uff0c\u90a3\u4e48Cookie\u7684\u5b9e\u9645\u6709\u6548\u671f\u5c31\u662f\u201c6\u67086\u53f7\u96f6\u70b9\u8fc710\u79d2\u201d\u3002</p> <p>\u5176\u6b21\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7f6eCookie\u7684\u4f5c\u7528\u57df\uff0c\u8ba9\u6d4f\u89c8\u5668\u4ec5\u53d1\u9001\u7ed9\u7279\u5b9a\u7684\u670d\u52a1\u5668\u548cURI\uff0c\u907f\u514d\u88ab\u5176\u4ed6\u7f51\u7ad9\u76d7\u7528\u3002</p> <p>\u4f5c\u7528\u57df\u7684\u8bbe\u7f6e\u6bd4\u8f83\u7b80\u5355\uff0c\u201cDomain\u201d\u548c\u201cPath\u201d\u6307\u5b9a\u4e86Cookie\u6240\u5c5e\u7684\u57df\u540d\u548c\u8def\u5f84\uff0c\u6d4f\u89c8\u5668\u5728\u53d1\u9001Cookie\u524d\u4f1a\u4eceURI\u4e2d\u63d0\u53d6\u51fahost\u548cpath\u90e8\u5206\uff0c\u5bf9\u6bd4Cookie\u7684\u5c5e\u6027\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u4e0d\u4f1a\u5728\u8bf7\u6c42\u5934\u91cc\u53d1\u9001Cookie\u3002</p> <p>\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5c5e\u6027\u53ef\u4ee5\u4e3a\u4e0d\u540c\u7684\u57df\u540d\u548c\u8def\u5f84\u5206\u522b\u8bbe\u7f6e\u5404\u81ea\u7684Cookie\uff0c\u6bd4\u5982\u201c/19-1\u201d\u7528\u4e00\u4e2aCookie\uff0c\u201c/19-2\u201d\u518d\u7528\u53e6\u5916\u4e00\u4e2aCookie\uff0c\u4e24\u8005\u4e92\u4e0d\u5e72\u6270\u3002\u4e0d\u8fc7\u73b0\u5b9e\u4e2d\u4e3a\u4e86\u7701\u4e8b\uff0c\u901a\u5e38Path\u5c31\u7528\u4e00\u4e2a\u201c/\u201d\u6216\u8005\u76f4\u63a5\u7701\u7565\uff0c\u8868\u793a\u57df\u540d\u4e0b\u7684\u4efb\u610f\u8def\u5f84\u90fd\u5141\u8bb8\u4f7f\u7528Cookie\uff0c\u8ba9\u670d\u52a1\u5668\u81ea\u5df1\u53bb\u6311\u3002</p> <p>\u6700\u540e\u8981\u8003\u8651\u7684\u5c31\u662fCookie\u7684\u5b89\u5168\u6027\u4e86\uff0c\u5c3d\u91cf\u4e0d\u8981\u8ba9\u670d\u52a1\u5668\u4ee5\u5916\u7684\u4eba\u770b\u5230\u3002</p> <p>\u5199\u8fc7\u524d\u7aef\u7684\u540c\u5b66\u4e00\u5b9a\u77e5\u9053\uff0c\u5728JS\u811a\u672c\u91cc\u53ef\u4ee5\u7528document.cookie\u6765\u8bfb\u5199Cookie\u6570\u636e\uff0c\u8fd9\u5c31\u5e26\u6765\u4e86\u5b89\u5168\u9690\u60a3\uff0c\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4\u201c\u8de8\u7ad9\u811a\u672c\u201d\uff08XSS\uff09\u653b\u51fb\u7a83\u53d6\u6570\u636e\u3002</p> <p>\u5c5e\u6027\u201cHttpOnly\u201d\u4f1a\u544a\u8bc9\u6d4f\u89c8\u5668\uff0c\u6b64Cookie\u53ea\u80fd\u901a\u8fc7\u6d4f\u89c8\u5668HTTP\u534f\u8bae\u4f20\u8f93\uff0c\u7981\u6b62\u5176\u4ed6\u65b9\u5f0f\u8bbf\u95ee\uff0c\u6d4f\u89c8\u5668\u7684JS\u5f15\u64ce\u5c31\u4f1a\u7981\u7528document.cookie\u7b49\u4e00\u5207\u76f8\u5173\u7684API\uff0c\u811a\u672c\u653b\u51fb\u4e5f\u5c31\u65e0\u4ece\u8c08\u8d77\u4e86\u3002</p> <p>\u53e6\u4e00\u4e2a\u5c5e\u6027\u201cSameSite\u201d\u53ef\u4ee5\u9632\u8303\u201c\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u201d\uff08XSRF\uff09\u653b\u51fb\uff0c\u8bbe\u7f6e\u6210\u201cSameSite=Strict\u201d\u53ef\u4ee5\u4e25\u683c\u9650\u5b9aCookie\u4e0d\u80fd\u968f\u7740\u8df3\u8f6c\u94fe\u63a5\u8de8\u7ad9\u53d1\u9001\uff0c\u800c\u201cSameSite=Lax\u201d\u5219\u7565\u5bbd\u677e\u4e00\u70b9\uff0c\u5141\u8bb8GET/HEAD\u7b49\u5b89\u5168\u65b9\u6cd5\uff0c\u4f46\u7981\u6b62POST\u8de8\u7ad9\u53d1\u9001\u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u5c5e\u6027\u53eb\u201cSecure\u201d\uff0c\u8868\u793a\u8fd9\u4e2aCookie\u4ec5\u80fd\u7528HTTPS\u534f\u8bae\u52a0\u5bc6\u4f20\u8f93\uff0c\u660e\u6587\u7684HTTP\u534f\u8bae\u4f1a\u7981\u6b62\u53d1\u9001\u3002\u4f46Cookie\u672c\u8eab\u4e0d\u662f\u52a0\u5bc6\u7684\uff0c\u6d4f\u89c8\u5668\u91cc\u8fd8\u662f\u4ee5\u660e\u6587\u7684\u5f62\u5f0f\u5b58\u5728\u3002</p> <p>Chrome\u5f00\u53d1\u8005\u5de5\u5177\u662f\u67e5\u770bCookie\u7684\u6709\u529b\u5de5\u5177\uff0c\u5728\u201cNetwork-Cookies\u201d\u91cc\u53ef\u4ee5\u770b\u5230\u5355\u4e2a\u9875\u9762Cookie\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u53e6\u4e00\u4e2a\u201cApplication\u201d\u9762\u677f\u91cc\u5219\u80fd\u591f\u65b9\u4fbf\u5730\u770b\u5230\u5168\u7ad9\u7684\u6240\u6709Cookie\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cookie_3","title":"Cookie\u7684\u5e94\u7528","text":"<p>\u73b0\u5728\u56de\u5230\u6211\u4eec\u6700\u5f00\u59cb\u7684\u8bdd\u9898\uff0c\u6709\u4e86Cookie\uff0c\u670d\u52a1\u5668\u5c31\u6709\u4e86\u201c\u8bb0\u5fc6\u80fd\u529b\u201d\uff0c\u80fd\u591f\u4fdd\u5b58\u201c\u72b6\u6001\u201d\uff0c\u90a3\u4e48\u5e94\u8be5\u5982\u4f55\u4f7f\u7528Cookie\u5462\uff1f</p> <p>Cookie\u6700\u57fa\u672c\u7684\u4e00\u4e2a\u7528\u9014\u5c31\u662f\u8eab\u4efd\u8bc6\u522b\uff0c\u4fdd\u5b58\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\uff0c\u5b9e\u73b0\u4f1a\u8bdd\u4e8b\u52a1\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u7528\u8d26\u53f7\u548c\u5bc6\u7801\u767b\u5f55\u67d0\u7535\u5546\uff0c\u767b\u5f55\u6210\u529f\u540e\u7f51\u7ad9\u670d\u52a1\u5668\u5c31\u4f1a\u53d1\u7ed9\u6d4f\u89c8\u5668\u4e00\u4e2aCookie\uff0c\u5185\u5bb9\u5927\u6982\u662f\u201cname=yourid\u201d\uff0c\u8fd9\u6837\u5c31\u6210\u529f\u5730\u628a\u8eab\u4efd\u6807\u7b7e\u8d34\u5728\u4e86\u4f60\u8eab\u4e0a\u3002</p> <p>\u4e4b\u540e\u4f60\u5728\u7f51\u7ad9\u91cc\u968f\u4fbf\u8bbf\u95ee\u54ea\u4ef6\u5546\u54c1\u7684\u9875\u9762\uff0c\u6d4f\u89c8\u5668\u90fd\u4f1a\u81ea\u52a8\u628a\u8eab\u4efdCookie\u53d1\u7ed9\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u603b\u4f1a\u77e5\u9053\u4f60\u7684\u8eab\u4efd\uff0c\u4e00\u65b9\u9762\u514d\u53bb\u4e86\u91cd\u590d\u767b\u5f55\u7684\u9ebb\u70e6\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u80fd\u591f\u81ea\u52a8\u8bb0\u5f55\u4f60\u7684\u6d4f\u89c8\u8bb0\u5f55\u548c\u8d2d\u7269\u4e0b\u5355\uff08\u5728\u540e\u53f0\u6570\u636e\u5e93\u6216\u8005\u4e5f\u7528Cookie\uff09\uff0c\u5b9e\u73b0\u4e86\u201c\u72b6\u6001\u4fdd\u6301\u201d\u3002</p> <p>Cookie\u7684\u53e6\u4e00\u4e2a\u5e38\u89c1\u7528\u9014\u662f\u5e7f\u544a\u8ddf\u8e2a\u3002</p> <p>\u4f60\u4e0a\u7f51\u7684\u65f6\u5019\u80af\u5b9a\u770b\u8fc7\u5f88\u591a\u7684\u5e7f\u544a\u56fe\u7247\uff0c\u8fd9\u4e9b\u56fe\u7247\u80cc\u540e\u90fd\u662f\u5e7f\u544a\u5546\u7f51\u7ad9\uff08\u4f8b\u5982Google\uff09\uff0c\u5b83\u4f1a\u201c\u5077\u5077\u5730\u201d\u7ed9\u4f60\u8d34\u4e0aCookie\u5c0f\u7eb8\u6761\uff0c\u8fd9\u6837\u4f60\u4e0a\u5176\u4ed6\u7684\u7f51\u7ad9\uff0c\u522b\u7684\u5e7f\u544a\u5c31\u80fd\u7528Cookie\u8bfb\u51fa\u4f60\u7684\u8eab\u4efd\uff0c\u7136\u540e\u505a\u884c\u4e3a\u5206\u6790\uff0c\u518d\u63a8\u7ed9\u4f60\u5e7f\u544a\u3002</p> <p>\u8fd9\u79cdCookie\u4e0d\u662f\u7531\u8bbf\u95ee\u7684\u4e3b\u7ad9\u5b58\u50a8\u7684\uff0c\u6240\u4ee5\u53c8\u53eb\u201c\u7b2c\u4e09\u65b9Cookie\u201d\uff08third-party cookie\uff09\u3002\u5982\u679c\u5e7f\u544a\u5546\u52bf\u529b\u5f88\u5927\uff0c\u5e7f\u544a\u5230\u5904\u90fd\u662f\uff0c\u90a3\u4e48\u5c31\u6bd4\u8f83\u201c\u6050\u6016\u201d\u4e86\uff0c\u65e0\u8bba\u4f60\u8d70\u5230\u54ea\u91cc\u5b83\u90fd\u4f1a\u901a\u8fc7Cookie\u8ba4\u51fa\u4f60\u6765\uff0c\u5b9e\u73b0\u5e7f\u544a\u201c\u7cbe\u51c6\u6253\u51fb\u201d\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u6ee5\u7528Cookie\u641c\u96c6\u7528\u6237\u9690\u79c1\uff0c\u4e92\u8054\u7f51\u7ec4\u7ec7\u76f8\u7ee7\u63d0\u51fa\u4e86DNT\uff08Do Not Track\uff09\u548cP3P\uff08Platform for Privacy Preferences Project\uff09\uff0c\u4f46\u5b9e\u9645\u4f5c\u7528\u4e0d\u5927\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_69","title":"\u5c0f\u7ed3","text":"<p>\u4eca\u5929\u6211\u4eec\u5b66\u4e60\u4e86HTTP\u91cc\u7684Cookie\u77e5\u8bc6\u3002\u867d\u7136\u73b0\u5728\u5df2\u7ecf\u51fa\u73b0\u4e86\u591a\u79cdLocal Web Storage\u6280\u672f\uff0c\u80fd\u591f\u6bd4Cookie\u5b58\u50a8\u66f4\u591a\u7684\u6570\u636e\uff0c\u4f46Cookie\u4ecd\u7136\u662f\u6700\u901a\u7528\u3001\u517c\u5bb9\u6027\u6700\u5f3a\u7684\u5ba2\u6237\u7aef\u6570\u636e\u5b58\u50a8\u624b\u6bb5\u3002</p> <p>\u7b80\u5355\u5c0f\u7ed3\u4e00\u4e0b\u4eca\u5929\u7684\u5185\u5bb9\uff1a</p> <ol> <li>Cookie\u662f\u670d\u52a1\u5668\u59d4\u6258\u6d4f\u89c8\u5668\u5b58\u50a8\u7684\u4e00\u4e9b\u6570\u636e\uff0c\u8ba9\u670d\u52a1\u5668\u6709\u4e86\u201c\u8bb0\u5fc6\u80fd\u529b\u201d\uff1b</li> <li>\u54cd\u5e94\u62a5\u6587\u4f7f\u7528Set-Cookie\u5b57\u6bb5\u53d1\u9001\u201ckey=value\u201d\u5f62\u5f0f\u7684Cookie\u503c\uff1b</li> <li>\u8bf7\u6c42\u62a5\u6587\u91cc\u7528Cookie\u5b57\u6bb5\u53d1\u9001\u591a\u4e2aCookie\u503c\uff1b</li> <li>\u4e3a\u4e86\u4fdd\u62a4Cookie\uff0c\u8fd8\u8981\u7ed9\u5b83\u8bbe\u7f6e\u6709\u6548\u671f\u3001\u4f5c\u7528\u57df\u7b49\u5c5e\u6027\uff0c\u5e38\u7528\u7684\u6709Max-Age\u3001Expires\u3001Domain\u3001HttpOnly\u7b49\uff1b</li> <li>Cookie\u6700\u57fa\u672c\u7684\u7528\u9014\u662f\u8eab\u4efd\u8bc6\u522b\uff0c\u5b9e\u73b0\u6709\u72b6\u6001\u7684\u4f1a\u8bdd\u4e8b\u52a1\u3002</li> </ol> <p>\u8fd8\u8981\u63d0\u9192\u4f60\u4e00\u70b9\uff0c\u56e0\u4e3aCookie\u5e76\u4e0d\u5c5e\u4e8eHTTP\u6807\u51c6\uff08RFC6265\uff0c\u800c\u4e0d\u662fRFC2616/7230\uff09\uff0c\u6240\u4ee5\u8bed\u6cd5\u4e0a\u4e0e\u5176\u4ed6\u5b57\u6bb5\u4e0d\u592a\u4e00\u81f4\uff0c\u4f7f\u7528\u7684\u5206\u9694\u7b26\u662f\u201c;\u201d\uff0c\u4e0eAccept\u7b49\u5b57\u6bb5\u7684\u201c,\u201d\u4e0d\u540c\uff0c\u5c0f\u5fc3\u4e0d\u8981\u5f04\u9519\u4e86\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#cache","title":"\u4e8c\u5341\u3001\u7f13\u5b58\uff08Cache\uff09","text":""},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_70","title":"\u670d\u52a1\u5668\u7684\u7f13\u5b58\u63a7\u5236","text":"<p>\u670d\u52a1\u5668\u6807\u8bb0\u8d44\u6e90\u6709\u6548\u671f\u4f7f\u7528\u7684\u5934\u5b57\u6bb5\u662f\u201cCache-Control\u201d\uff0c\u91cc\u9762\u7684\u503c\u201cmax-age=30\u201d\u5c31\u662f\u8d44\u6e90\u7684\u6709\u6548\u65f6\u95f4\uff0c\u76f8\u5f53\u4e8e\u544a\u8bc9\u6d4f\u89c8\u5668\uff0c\u201c\u8fd9\u4e2a\u9875\u9762\u53ea\u80fd\u7f13\u5b5830\u79d2\uff0c\u4e4b\u540e\u5c31\u7b97\u662f\u8fc7\u671f\uff0c\u4e0d\u80fd\u7528\u3002\u201d</p> <p> </p> <p>\u201cCache-Control\u201d\u5b57\u6bb5\u91cc\u7684\u201cmax-age\u201d\u548c\u4e0a\u4e00\u8bb2\u91ccCookie\u6709\u70b9\u50cf\uff0c\u90fd\u662f\u6807\u8bb0\u8d44\u6e90\u7684\u6709\u6548\u671f\u3002</p> <p>\u4f46\u6211\u5fc5\u987b\u63d0\u9192\u4f60\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684max-age\u662f\u201c\u751f\u5b58\u65f6\u95f4\u201d\uff08\u53c8\u53eb\u201c\u65b0\u9c9c\u5ea6\u201d\u201c\u7f13\u5b58\u5bff\u547d\u201d\uff0c\u7c7b\u4f3cTTL\uff0cTime-To-Live\uff09\uff0c\u65f6\u95f4\u7684\u8ba1\u7b97\u8d77\u70b9\u662f\u54cd\u5e94\u62a5\u6587\u7684\u521b\u5efa\u65f6\u523b\uff08\u5373Date\u5b57\u6bb5\uff0c\u4e5f\u5c31\u662f\u79bb\u5f00\u670d\u52a1\u5668\u7684\u65f6\u523b\uff09\uff0c\u800c\u4e0d\u662f\u5ba2\u6237\u7aef\u6536\u5230\u62a5\u6587\u7684\u65f6\u523b\uff0c\u4e5f\u5c31\u662f\u8bf4\u5305\u542b\u4e86\u5728\u94fe\u8def\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6240\u6709\u8282\u70b9\u6240\u505c\u7559\u7684\u65f6\u95f4\u3002</p> <p>\u6bd4\u5982\uff0c\u670d\u52a1\u5668\u8bbe\u5b9a\u201cmax-age=5\u201d\uff0c\u4f46\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u5f88\u7cdf\u7cd5\uff0c\u7b49\u6d4f\u89c8\u5668\u6536\u5230\u54cd\u5e94\u62a5\u6587\u5df2\u7ecf\u8fc7\u53bb\u4e864\u79d2\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8d44\u6e90\u5728\u5ba2\u6237\u7aef\u5c31\u6700\u591a\u80fd\u591f\u518d\u5b581\u79d2\u949f\uff0c\u4e4b\u540e\u5c31\u4f1a\u5931\u6548\u3002</p> <p>\u201cmax-age\u201d\u662fHTTP\u7f13\u5b58\u63a7\u5236\u6700\u5e38\u7528\u7684\u5c5e\u6027\uff0c\u6b64\u5916\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u8fd8\u53ef\u4ee5\u7528\u5176\u4ed6\u7684\u5c5e\u6027\u6765\u66f4\u7cbe\u786e\u5730\u6307\u793a\u6d4f\u89c8\u5668\u5e94\u8be5\u5982\u4f55\u4f7f\u7528\u7f13\u5b58\uff1a</p> <ul> <li>no-store\uff1a\u4e0d\u5141\u8bb8\u7f13\u5b58\uff0c\u7528\u4e8e\u67d0\u4e9b\u53d8\u5316\u975e\u5e38\u9891\u7e41\u7684\u6570\u636e\uff0c\u4f8b\u5982\u79d2\u6740\u9875\u9762\uff1b</li> <li>no-cache\uff1a\u5b83\u7684\u5b57\u9762\u542b\u4e49\u5bb9\u6613\u4e0eno-store\u641e\u6df7\uff0c\u5b9e\u9645\u7684\u610f\u601d\u5e76\u4e0d\u662f\u4e0d\u5141\u8bb8\u7f13\u5b58\uff0c\u800c\u662f\u53ef\u4ee5\u7f13\u5b58\uff0c\u4f46\u5728\u4f7f\u7528\u4e4b\u524d\u5fc5\u987b\u8981\u53bb\u670d\u52a1\u5668\u9a8c\u8bc1\u662f\u5426\u8fc7\u671f\uff0c\u662f\u5426\u6709\u6700\u65b0\u7684\u7248\u672c\uff1b</li> <li>must-revalidate\uff1a\u53c8\u662f\u4e00\u4e2a\u548cno-cache\u76f8\u4f3c\u7684\u8bcd\uff0c\u5b83\u7684\u610f\u601d\u662f\u5982\u679c\u7f13\u5b58\u4e0d\u8fc7\u671f\u5c31\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u8fc7\u671f\u4e86\u5982\u679c\u8fd8\u60f3\u7528\u5c31\u5fc5\u987b\u53bb\u670d\u52a1\u5668\u9a8c\u8bc1\u3002</li> </ul>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_71","title":"\u5ba2\u6237\u7aef\u7684\u7f13\u5b58\u63a7\u5236","text":"<p>\u73b0\u5728\u51b0\u7bb1\u91cc\u5df2\u7ecf\u6709\u4e86\u201c\u7f13\u5b58\u201d\u7684\u897f\u74dc\uff0c\u662f\u4e0d\u662f\u5c31\u53ef\u4ee5\u76f4\u63a5\u5f00\u5403\u4e86\u5462\uff1f</p> <p>\u4f60\u53ef\u4ee5\u5728Chrome\u91cc\u70b9\u51e0\u6b21\u201c\u5237\u65b0\u201d\u6309\u94ae\uff0c\u4f30\u8ba1\u4f60\u4f1a\u5931\u671b\uff0c\u9875\u9762\u4e0a\u7684ID\u4e00\u76f4\u5728\u53d8\uff0c\u6839\u672c\u4e0d\u662f\u7f13\u5b58\u7684\u7ed3\u679c\uff0c\u660e\u660e\u8bf4\u7f13\u5b5830\u79d2\uff0c\u600e\u4e48\u5c31\u4e0d\u8d77\u4f5c\u7528\u5462\uff1f</p> <p>\u5176\u5b9e\u4e0d\u6b62\u670d\u52a1\u5668\u53ef\u4ee5\u53d1\u201cCache-Control\u201d\u5934\uff0c\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u53d1\u201cCache-Control\u201d\uff0c\u4e5f\u5c31\u662f\u8bf4\u8bf7\u6c42-\u5e94\u7b54\u7684\u53cc\u65b9\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u5b57\u6bb5\u8fdb\u884c\u7f13\u5b58\u63a7\u5236\uff0c\u4e92\u76f8\u534f\u5546\u7f13\u5b58\u7684\u4f7f\u7528\u7b56\u7565\u3002</p> <p>\u5f53\u4f60\u70b9\u201c\u5237\u65b0\u201d\u6309\u94ae\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u8bf7\u6c42\u5934\u91cc\u52a0\u4e00\u4e2a\u201cCache-Control: max-age=0\u201d\u3002\u56e0\u4e3amax-age\u662f\u201c\u751f\u5b58\u65f6\u95f4\u201d\uff0cmax-age=0\u7684\u610f\u601d\u5c31\u662f\u201c\u6211\u8981\u4e00\u4e2a\u6700\u6700\u65b0\u9c9c\u7684\u897f\u74dc\u201d\uff0c\u800c\u672c\u5730\u7f13\u5b58\u91cc\u7684\u6570\u636e\u81f3\u5c11\u4fdd\u5b58\u4e86\u51e0\u79d2\u949f\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u5c31\u4e0d\u4f1a\u4f7f\u7528\u7f13\u5b58\uff0c\u800c\u662f\u5411\u670d\u52a1\u5668\u53d1\u8bf7\u6c42\u3002\u670d\u52a1\u5668\u770b\u5230max-age=0\uff0c\u4e5f\u5c31\u4f1a\u7528\u4e00\u4e2a\u6700\u65b0\u751f\u6210\u7684\u62a5\u6587\u56de\u5e94\u6d4f\u89c8\u5668\u3002</p> <p>Ctrl+F5\u7684\u201c\u5f3a\u5236\u5237\u65b0\u201d\u53c8\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f</p> <p>\u5b83\u5176\u5b9e\u662f\u53d1\u4e86\u4e00\u4e2a\u201cCache-Control: no-cache\u201d\uff0c\u542b\u4e49\u548c\u201cmax-age=0\u201d\u57fa\u672c\u4e00\u6837\uff0c\u5c31\u770b\u540e\u53f0\u7684\u670d\u52a1\u5668\u600e\u4e48\u7406\u89e3\uff0c\u901a\u5e38\u4e24\u8005\u7684\u6548\u679c\u662f\u76f8\u540c\u7684\u3002</p> <p> </p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_72","title":"\u6761\u4ef6\u8bf7\u6c42","text":"<p>\u6d4f\u89c8\u5668\u7528\u201cCache-Control\u201d\u505a\u7f13\u5b58\u63a7\u5236\u53ea\u80fd\u662f\u5237\u65b0\u6570\u636e\uff0c\u4e0d\u80fd\u5f88\u597d\u5730\u5229\u7528\u7f13\u5b58\u6570\u636e\uff0c\u53c8\u56e0\u4e3a\u7f13\u5b58\u4f1a\u5931\u6548\uff0c\u4f7f\u7528\u524d\u8fd8\u5fc5\u987b\u8981\u53bb\u670d\u52a1\u5668\u9a8c\u8bc1\u662f\u5426\u662f\u6700\u65b0\u7248\u3002</p> <p>\u90a3\u4e48\u8be5\u600e\u4e48\u505a\u5462\uff1f</p> <p>\u6d4f\u89c8\u5668\u53ef\u4ee5\u7528\u4e24\u4e2a\u8fde\u7eed\u7684\u8bf7\u6c42\u7ec4\u6210\u201c\u9a8c\u8bc1\u52a8\u4f5c\u201d\uff1a\u5148\u662f\u4e00\u4e2aHEAD\uff0c\u83b7\u53d6\u8d44\u6e90\u7684\u4fee\u6539\u65f6\u95f4\u7b49\u5143\u4fe1\u606f\uff0c\u7136\u540e\u4e0e\u7f13\u5b58\u6570\u636e\u6bd4\u8f83\uff0c\u5982\u679c\u6ca1\u6709\u6539\u52a8\u5c31\u4f7f\u7528\u7f13\u5b58\uff0c\u8282\u7701\u7f51\u7edc\u6d41\u91cf\uff0c\u5426\u5219\u5c31\u518d\u53d1\u4e00\u4e2aGET\u8bf7\u6c42\uff0c\u83b7\u53d6\u6700\u65b0\u7684\u7248\u672c\u3002</p> <p>\u4f46\u8fd9\u6837\u7684\u4e24\u4e2a\u8bf7\u6c42\u7f51\u7edc\u6210\u672c\u592a\u9ad8\u4e86\uff0c\u6240\u4ee5HTTP\u534f\u8bae\u5c31\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u201cIf\u201d\u5f00\u5934\u7684\u201c\u6761\u4ef6\u8bf7\u6c42\u201d\u5b57\u6bb5\uff0c\u4e13\u95e8\u7528\u6765\u68c0\u67e5\u9a8c\u8bc1\u8d44\u6e90\u662f\u5426\u8fc7\u671f\uff0c\u628a\u4e24\u4e2a\u8bf7\u6c42\u624d\u80fd\u5b8c\u6210\u7684\u5de5\u4f5c\u5408\u5e76\u5728\u4e00\u4e2a\u8bf7\u6c42\u91cc\u505a\u3002\u800c\u4e14\uff0c\u9a8c\u8bc1\u7684\u8d23\u4efb\u4e5f\u4ea4\u7ed9\u670d\u52a1\u5668\uff0c\u6d4f\u89c8\u5668\u53ea\u9700\u201c\u5750\u4eab\u5176\u6210\u201d\u3002</p> <p>\u6761\u4ef6\u8bf7\u6c42\u4e00\u5171\u67095\u4e2a\u5934\u5b57\u6bb5\uff0c\u6211\u4eec\u6700\u5e38\u7528\u7684\u662f\u201cif-Modified-Since\u201d\u548c\u201cIf-None-Match\u201d\u8fd9\u4e24\u4e2a\u3002\u9700\u8981\u7b2c\u4e00\u6b21\u7684\u54cd\u5e94\u62a5\u6587\u9884\u5148\u63d0\u4f9b\u201cLast-modified\u201d\u548c\u201cETag\u201d\uff0c\u7136\u540e\u7b2c\u4e8c\u6b21\u8bf7\u6c42\u65f6\u5c31\u53ef\u4ee5\u5e26\u4e0a\u7f13\u5b58\u91cc\u7684\u539f\u503c\uff0c\u9a8c\u8bc1\u8d44\u6e90\u662f\u5426\u662f\u6700\u65b0\u7684\u3002</p> <p>\u5982\u679c\u8d44\u6e90\u6ca1\u6709\u53d8\uff0c\u670d\u52a1\u5668\u5c31\u56de\u5e94\u4e00\u4e2a\u201c304 Not Modified\u201d\uff0c\u8868\u793a\u7f13\u5b58\u4f9d\u7136\u6709\u6548\uff0c\u6d4f\u89c8\u5668\u5c31\u53ef\u4ee5\u66f4\u65b0\u4e00\u4e0b\u6709\u6548\u671f\uff0c\u7136\u540e\u653e\u5fc3\u5927\u80c6\u5730\u4f7f\u7528\u7f13\u5b58\u4e86\u3002</p> <p> </p> <p>\u201cLast-modified\u201d\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u6587\u4ef6\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002ETag\u662f\u4ec0\u4e48\u5462\uff1f</p> <p>ETag\u662f\u201c\u5b9e\u4f53\u6807\u7b7e\u201d\uff08Entity Tag\uff09\u7684\u7f29\u5199\uff0c\u662f\u8d44\u6e90\u7684\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\uff0c\u4e3b\u8981\u662f\u7528\u6765\u89e3\u51b3\u4fee\u6539\u65f6\u95f4\u65e0\u6cd5\u51c6\u786e\u533a\u5206\u6587\u4ef6\u53d8\u5316\u7684\u95ee\u9898\u3002</p> <p>\u6bd4\u5982\uff0c\u4e00\u4e2a\u6587\u4ef6\u5728\u4e00\u79d2\u5185\u4fee\u6539\u4e86\u591a\u6b21\uff0c\u4f46\u56e0\u4e3a\u4fee\u6539\u65f6\u95f4\u662f\u79d2\u7ea7\uff0c\u6240\u4ee5\u8fd9\u4e00\u79d2\u5185\u7684\u65b0\u7248\u672c\u65e0\u6cd5\u533a\u5206\u3002</p> <p>\u518d\u6bd4\u5982\uff0c\u4e00\u4e2a\u6587\u4ef6\u5b9a\u671f\u66f4\u65b0\uff0c\u4f46\u6709\u65f6\u4f1a\u662f\u540c\u6837\u7684\u5185\u5bb9\uff0c\u5b9e\u9645\u4e0a\u6ca1\u6709\u53d8\u5316\uff0c\u7528\u4fee\u6539\u65f6\u95f4\u5c31\u4f1a\u8bef\u4ee5\u4e3a\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f20\u9001\u7ed9\u6d4f\u89c8\u5668\u5c31\u4f1a\u6d6a\u8d39\u5e26\u5bbd\u3002</p> <p>\u4f7f\u7528ETag\u5c31\u53ef\u4ee5\u7cbe\u786e\u5730\u8bc6\u522b\u8d44\u6e90\u7684\u53d8\u52a8\u60c5\u51b5\uff0c\u8ba9\u6d4f\u89c8\u5668\u80fd\u591f\u66f4\u6709\u6548\u5730\u5229\u7528\u7f13\u5b58\u3002</p> <p>ETag\u8fd8\u6709\u201c\u5f3a\u201d\u201c\u5f31\u201d\u4e4b\u5206\u3002</p> <p>\u5f3aETag\u8981\u6c42\u8d44\u6e90\u5728\u5b57\u8282\u7ea7\u522b\u5fc5\u987b\u5b8c\u5168\u76f8\u7b26\uff0c\u5f31ETag\u5728\u503c\u524d\u6709\u4e2a\u201cW/\u201d\u6807\u8bb0\uff0c\u53ea\u8981\u6c42\u8d44\u6e90\u5728\u8bed\u4e49\u4e0a\u6ca1\u6709\u53d8\u5316\uff0c\u4f46\u5185\u90e8\u53ef\u80fd\u4f1a\u6709\u90e8\u5206\u53d1\u751f\u4e86\u6539\u53d8\uff08\u4f8b\u5982HTML\u91cc\u7684\u6807\u7b7e\u987a\u5e8f\u8c03\u6574\uff0c\u6216\u8005\u591a\u4e86\u51e0\u4e2a\u7a7a\u683c\uff09\u3002</p> <p>\u518d\u6765\u770b\u770b\u5b9e\u9a8c\u73af\u5883\u7684URI \u201c/20-2\u201d\u3002\u5b83\u4e3a\u8d44\u6e90\u589e\u52a0\u4e86ETag\u5b57\u6bb5\uff0c\u5237\u65b0\u9875\u9762\u65f6\u6d4f\u89c8\u5668\u5c31\u4f1a\u540c\u65f6\u53d1\u9001\u7f13\u5b58\u63a7\u5236\u5934\u201cmax-age=0\u201d\u548c\u6761\u4ef6\u8bf7\u6c42\u5934\u201cIf-None-Match\u201d\uff0c\u5982\u679c\u7f13\u5b58\u6709\u6548\u670d\u52a1\u5668\u5c31\u4f1a\u8fd4\u56de304\uff1a</p> <p> </p> <p>\u6761\u4ef6\u8bf7\u6c42\u91cc\u5176\u4ed6\u7684\u4e09\u4e2a\u5934\u5b57\u6bb5\u662f\u201cIf-Unmodified-Since\u201d\u201cIf-Match\u201d\u548c\u201cIf-Range\u201d\uff0c\u5176\u5b9e\u53ea\u8981\u4f60\u638c\u63e1\u4e86\u201cif-Modified-Since\u201d\u548c\u201cIf-None-Match\u201d\uff0c\u53ef\u4ee5\u8f7b\u6613\u5730\u201c\u4e3e\u4e00\u53cd\u4e09\u201d\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_73","title":"\u5c0f\u7ed3","text":"<ol> <li>\u7f13\u5b58\u662f\u4f18\u5316\u7cfb\u7edf\u6027\u80fd\u7684\u91cd\u8981\u624b\u6bb5\uff0cHTTP\u4f20\u8f93\u7684\u6bcf\u4e00\u4e2a\u73af\u8282\u4e2d\u90fd\u53ef\u4ee5\u6709\u7f13\u5b58\uff1b</li> <li>\u670d\u52a1\u5668\u4f7f\u7528\u201cCache-Control\u201d\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u5e38\u7528\u7684\u662f\u201cmax-age\u201d\uff0c\u8868\u793a\u8d44\u6e90\u7684\u6709\u6548\u671f\uff1b</li> <li>\u6d4f\u89c8\u5668\u6536\u5230\u6570\u636e\u5c31\u4f1a\u5b58\u5165\u7f13\u5b58\uff0c\u5982\u679c\u6ca1\u8fc7\u671f\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u8fc7\u671f\u5c31\u8981\u53bb\u670d\u52a1\u5668\u9a8c\u8bc1\u662f\u5426\u4ecd\u7136\u53ef\u7528\uff1b</li> <li>\u9a8c\u8bc1\u8d44\u6e90\u662f\u5426\u5931\u6548\u9700\u8981\u4f7f\u7528\u201c\u6761\u4ef6\u8bf7\u6c42\u201d\uff0c\u5e38\u7528\u7684\u662f\u201cif-Modified-Since\u201d\u548c\u201cIf-None-Match\u201d\uff0c\u6536\u5230304\u5c31\u53ef\u4ee5\u590d\u7528\u7f13\u5b58\u91cc\u7684\u8d44\u6e90\uff1b</li> <li>\u9a8c\u8bc1\u8d44\u6e90\u662f\u5426\u88ab\u4fee\u6539\u7684\u6761\u4ef6\u6709\u4e24\u4e2a\uff1a\u201cLast-modified\u201d\u548c\u201cETag\u201d\uff0c\u9700\u8981\u670d\u52a1\u5668\u9884\u5148\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u8bbe\u7f6e\uff0c\u642d\u914d\u6761\u4ef6\u8bf7\u6c42\u4f7f\u7528\uff1b</li> <li>\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u53d1\u9001\u201cCache-Control\u201d\u5b57\u6bb5\uff0c\u4f7f\u7528\u201cmax-age=0\u201d\u6216\u201cno_cache\u201d\u5237\u65b0\u6570\u636e\u3002</li> </ol> <p>HTTP\u7f13\u5b58\u770b\u4e0a\u53bb\u5f88\u590d\u6742\uff0c\u4f46\u57fa\u672c\u539f\u7406\u8bf4\u767d\u4e86\u5c31\u662f\u4e00\u53e5\u8bdd\uff1a\u201c\u6ca1\u6709\u6d88\u606f\u5c31\u662f\u597d\u6d88\u606f\u201d\uff0c\u201c\u6ca1\u6709\u8bf7\u6c42\u7684\u8bf7\u6c42\uff0c\u624d\u662f\u6700\u5feb\u7684\u8bf7\u6c42\u3002\u201d</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#http_12","title":"\u4e8c\u5341\u4e00\u3001http\u4ee3\u7406\u670d\u52a1","text":"<p>HTTP\u534f\u8bae\u4e25\u683c\u9075\u5faa\u4e86HTTP\u7684\u201c\u8bf7\u6c42-\u5e94\u7b54\u201d\u6a21\u578b\uff0c\u534f\u8bae\u4e2d\u53ea\u6709\u4e24\u4e2a\u4e92\u76f8\u901a\u4fe1\u7684\u89d2\u8272\uff0c\u5206\u522b\u662f\u201c\u8bf7\u6c42\u65b9\u201d\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u548c\u201c\u5e94\u7b54\u65b9\u201d\u670d\u52a1\u5668\u3002</p> <p>\u4eca\u5929\uff0c\u6211\u4eec\u8981\u5728\u8fd9\u4e2a\u6a21\u578b\u91cc\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u89d2\u8272\uff0c\u90a3\u5c31\u662fHTTP\u4ee3\u7406\u3002</p> <p>\u5f15\u5165HTTP\u4ee3\u7406\u540e\uff0c\u539f\u6765\u7b80\u5355\u7684\u53cc\u65b9\u901a\u4fe1\u5c31\u53d8\u590d\u6742\u4e86\u4e00\u4e9b\uff0c\u52a0\u5165\u4e86\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u4e2d\u95f4\u4eba\uff0c\u4f46\u6574\u4f53\u4e0a\u6765\u770b\uff0c\u8fd8\u662f\u4e00\u4e2a\u6709\u987a\u5e8f\u5173\u7cfb\u7684\u94fe\u6761\uff0c\u800c\u4e14\u94fe\u6761\u91cc\u76f8\u90bb\u7684\u4e24\u4e2a\u89d2\u8272\u4ecd\u7136\u662f\u7b80\u5355\u7684\u4e00\u5bf9\u4e00\u901a\u4fe1\uff0c\u4e0d\u4f1a\u51fa\u73b0\u8d8a\u7ea7\u7684\u60c5\u51b5\u3002</p> <p> </p> <p>\u94fe\u6761\u7684\u8d77\u70b9\u8fd8\u662f\u5ba2\u6237\u7aef\uff08\u4e5f\u5c31\u662f\u6d4f\u89c8\u5668\uff09\uff0c\u4e2d\u95f4\u7684\u89d2\u8272\u88ab\u79f0\u4e3a\u4ee3\u7406\u670d\u52a1\u5668\uff08proxy server\uff09\uff0c\u94fe\u6761\u7684\u7ec8\u70b9\u88ab\u79f0\u4e3a\u6e90\u670d\u52a1\u5668\uff08origin server\uff09\uff0c\u610f\u601d\u662f\u6570\u636e\u7684\u201c\u6e90\u5934\u201d\u201c\u8d77\u6e90\u201d\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_74","title":"\u4ee3\u7406\u670d\u52a1","text":"<p>\u4ee3\u7406\uff0cHTTP\u534f\u8bae\u91cc\u5bf9\u5b83\u5e76\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u7684\u63cf\u8ff0\uff0c\u5b83\u5c31\u662f\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u539f\u672c\u7684\u901a\u4fe1\u94fe\u8def\u4e2d\u63d2\u5165\u7684\u4e00\u4e2a\u4e2d\u95f4\u73af\u8282\uff0c\u4e5f\u662f\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u4f46\u63d0\u4f9b\u7684\u662f\u201c\u4ee3\u7406\u670d\u52a1\u201d\u3002</p> <p>\u6240\u8c13\u7684\u201c\u4ee3\u7406\u670d\u52a1\u201d\u5c31\u662f\u6307\u670d\u52a1\u672c\u8eab\u4e0d\u751f\u4ea7\u5185\u5bb9\uff0c\u800c\u662f\u5904\u4e8e\u4e2d\u95f4\u4f4d\u7f6e\u8f6c\u53d1\u4e0a\u4e0b\u6e38\u7684\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u5177\u6709\u53cc\u91cd\u8eab\u4efd\uff1a\u9762\u5411\u4e0b\u6e38\u7684\u7528\u6237\u65f6\uff0c\u8868\u73b0\u4e3a\u670d\u52a1\u5668\uff0c\u4ee3\u8868\u6e90\u670d\u52a1\u5668\u54cd\u5e94\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff1b\u800c\u9762\u5411\u4e0a\u6e38\u7684\u6e90\u670d\u52a1\u5668\u65f6\uff0c\u53c8\u8868\u73b0\u4e3a\u5ba2\u6237\u7aef\uff0c\u4ee3\u8868\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_75","title":"\u4ee3\u7406\u7684\u4f5c\u7528","text":"<p>\u4e3a\u4ec0\u4e48\u8981\u6709\u4ee3\u7406\u5462\uff1f\u6362\u53e5\u8bdd\u8bf4\uff0c\u4ee3\u7406\u80fd\u5e72\u4ec0\u4e48\u3001\u5e26\u6765\u4ec0\u4e48\u597d\u5904\u5462\uff1f</p> <p>\u4f60\u4e5f\u8bb8\u542c\u8fc7\u8fd9\u6837\u4e00\u53e5\u81f3\u7406\u540d\u8a00\uff1a\u201c\u8ba1\u7b97\u673a\u79d1\u5b66\u9886\u57df\u91cc\u7684\u4efb\u4f55\u95ee\u9898\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u4e2d\u95f4\u5c42\u6765\u89e3\u51b3\u201d\uff08\u5728\u8fd9\u53e5\u8bdd\u540e\u9762\u8fd8\u53ef\u4ee5\u518d\u52a0\u4e0a\u4e00\u53e5\u201c\u5982\u679c\u4e00\u4e2a\u4e2d\u95f4\u5c42\u89e3\u51b3\u4e0d\u4e86\u95ee\u9898\uff0c\u90a3\u5c31\u518d\u52a0\u4e00\u4e2a\u4e2d\u95f4\u5c42\u201d\uff09\u3002</p> <p>TCP/IP\u534f\u8bae\u6808\u662f\u8fd9\u6837\uff0c\u800c\u4ee3\u7406\u4e5f\u662f\u8fd9\u6837\u3002</p> <p>\u7531\u4e8e\u4ee3\u7406\u5904\u5728HTTP\u901a\u4fe1\u8fc7\u7a0b\u7684\u4e2d\u95f4\u4f4d\u7f6e\uff0c\u76f8\u5e94\u5730\u5c31\u5bf9\u4e0a\u5c4f\u853d\u4e86\u771f\u5b9e\u5ba2\u6237\u7aef\uff0c\u5bf9\u4e0b\u5c4f\u853d\u4e86\u771f\u5b9e\u670d\u52a1\u5668\uff0c\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u201c\u6b3a\u4e0a\u7792\u4e0b\u201d\u3002\u5728\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u7684\u201c\u5c0f\u5929\u5730\u201d\u91cc\u5c31\u53ef\u4ee5\u505a\u5f88\u591a\u7684\u4e8b\u60c5\uff0c\u4e3aHTTP\u534f\u8bae\u589e\u52a0\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u5b9e\u73b0\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u201c\u53cc\u8d62\u201d\u3002</p> <p>\u4ee3\u7406\u6700\u57fa\u672c\u7684\u4e00\u4e2a\u529f\u80fd\u662f\u8d1f\u8f7d\u5747\u8861\u3002\u56e0\u4e3a\u5728\u9762\u5411\u5ba2\u6237\u7aef\u65f6\u5c4f\u853d\u4e86\u6e90\u670d\u52a1\u5668\uff0c\u5ba2\u6237\u7aef\u770b\u5230\u7684\u53ea\u662f\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u6e90\u670d\u52a1\u5668\u7a76\u7adf\u6709\u591a\u5c11\u53f0\u3001\u662f\u54ea\u4e9bIP\u5730\u5740\u90fd\u4e0d\u77e5\u9053\u3002\u4e8e\u662f\u4ee3\u7406\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u638c\u63e1\u8bf7\u6c42\u5206\u53d1\u7684\u201c\u5927\u6743\u201d\uff0c\u51b3\u5b9a\u7531\u540e\u9762\u7684\u54ea\u53f0\u670d\u52a1\u5668\u6765\u54cd\u5e94\u8bf7\u6c42\u3002</p> <p> </p> <p>\u4ee3\u7406\u4e2d\u5e38\u7528\u7684\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u4f60\u5e94\u8be5\u4e5f\u6709\u6240\u8033\u95fb\u5427\uff0c\u6bd4\u5982\u8f6e\u8be2\u3001\u4e00\u81f4\u6027\u54c8\u5e0c\u7b49\u7b49\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u7684\u76ee\u6807\u90fd\u662f\u5c3d\u91cf\u628a\u5916\u90e8\u7684\u6d41\u91cf\u5408\u7406\u5730\u5206\u6563\u5230\u591a\u53f0\u6e90\u670d\u52a1\u5668\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6574\u4f53\u8d44\u6e90\u5229\u7528\u7387\u548c\u6027\u80fd\u3002</p> <p>\u5728\u8d1f\u8f7d\u5747\u8861\u7684\u540c\u65f6\uff0c\u4ee3\u7406\u670d\u52a1\u8fd8\u53ef\u4ee5\u6267\u884c\u66f4\u591a\u7684\u529f\u80fd\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>\u5065\u5eb7\u68c0\u67e5\uff1a\u4f7f\u7528\u201c\u5fc3\u8df3\u201d\u7b49\u673a\u5236\u76d1\u63a7\u540e\u7aef\u670d\u52a1\u5668\uff0c\u53d1\u73b0\u6709\u6545\u969c\u5c31\u53ca\u65f6\u201c\u8e22\u51fa\u201d\u96c6\u7fa4\uff0c\u4fdd\u8bc1\u670d\u52a1\u9ad8\u53ef\u7528\uff1b</li> <li>\u5b89\u5168\u9632\u62a4\uff1a\u4fdd\u62a4\u88ab\u4ee3\u7406\u7684\u540e\u7aef\u670d\u52a1\u5668\uff0c\u9650\u5236IP\u5730\u5740\u6216\u6d41\u91cf\uff0c\u62b5\u5fa1\u7f51\u7edc\u653b\u51fb\u548c\u8fc7\u8f7d\uff1b</li> <li>\u52a0\u5bc6\u5378\u8f7d\uff1a\u5bf9\u5916\u7f51\u4f7f\u7528SSL/TLS\u52a0\u5bc6\u901a\u4fe1\u8ba4\u8bc1\uff0c\u800c\u5728\u5b89\u5168\u7684\u5185\u7f51\u4e0d\u52a0\u5bc6\uff0c\u6d88\u9664\u52a0\u89e3\u5bc6\u6210\u672c\uff1b</li> <li>\u6570\u636e\u8fc7\u6ee4\uff1a\u62e6\u622a\u4e0a\u4e0b\u884c\u7684\u6570\u636e\uff0c\u4efb\u610f\u6307\u5b9a\u7b56\u7565\u4fee\u6539\u8bf7\u6c42\u6216\u8005\u54cd\u5e94\uff1b</li> <li>\u5185\u5bb9\u7f13\u5b58\uff1a\u6682\u5b58\u3001\u590d\u7528\u670d\u52a1\u5668\u54cd\u5e94\uff0c\u8fd9\u4e2a\u4e0e\u7b2c20\u8bb2\u5bc6\u5207\u76f8\u5173\uff0c\u6211\u4eec\u7a0d\u540e\u518d\u8bf4\u3002</li> </ul>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_76","title":"\u4ee3\u7406\u76f8\u5173\u5934\u5b57\u6bb5","text":"<p>\u4ee3\u7406\u7684\u597d\u5904\u5f88\u591a\uff0c\u4f46\u56e0\u4e3a\u5b83\u201c\u6b3a\u4e0a\u7792\u4e0b\u201d\u7684\u7279\u70b9\uff0c\u9690\u85cf\u4e86\u771f\u5b9e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\uff0c\u5982\u679c\u53cc\u65b9\u60f3\u8981\u83b7\u5f97\u8fd9\u4e9b\u201c\u4e22\u5931\u201d\u7684\u539f\u59cb\u4fe1\u606f\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u9996\u5148\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u9700\u8981\u7528\u5b57\u6bb5\u201cVia\u201d\u6807\u660e\u4ee3\u7406\u7684\u8eab\u4efd\u3002</p> <p>Via\u662f\u4e00\u4e2a\u901a\u7528\u5b57\u6bb5\uff0c\u8bf7\u6c42\u5934\u6216\u54cd\u5e94\u5934\u91cc\u90fd\u53ef\u4ee5\u51fa\u73b0\u3002\u6bcf\u5f53\u62a5\u6587\u7ecf\u8fc7\u4e00\u4e2a\u4ee3\u7406\u8282\u70b9\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u5c31\u4f1a\u628a\u81ea\u8eab\u7684\u4fe1\u606f\u8ffd\u52a0\u5230\u5b57\u6bb5\u7684\u672b\u5c3e\uff0c\u5c31\u50cf\u662f\u7ecf\u624b\u4eba\u76d6\u4e86\u4e00\u4e2a\u7ae0\u3002</p> <p>\u5982\u679c\u901a\u4fe1\u94fe\u8def\u4e2d\u6709\u5f88\u591a\u4e2d\u95f4\u4ee3\u7406\uff0c\u5c31\u4f1a\u5728Via\u91cc\u5f62\u6210\u4e00\u4e2a\u94fe\u8868\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u77e5\u9053\u62a5\u6587\u7a76\u7adf\u8d70\u8fc7\u4e86\u591a\u5c11\u4e2a\u73af\u8282\u624d\u5230\u8fbe\u4e86\u76ee\u7684\u5730\u3002</p> <p>\u4f8b\u5982\u4e0b\u56fe\u4e2d\u6709\u4e24\u4e2a\u4ee3\u7406\uff1aproxy1\u548cproxy2\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u4f1a\u7ecf\u8fc7\u8fd9\u4e24\u4e2a\u4ee3\u7406\uff0c\u4f9d\u6b21\u6dfb\u52a0\u5c31\u662f\u201cVia: proxy1, proxy2\u201d\uff0c\u7b49\u5230\u670d\u52a1\u5668\u8fd4\u56de\u54cd\u5e94\u62a5\u6587\u7684\u65f6\u5019\u5c31\u8981\u53cd\u8fc7\u6765\u8d70\uff0c\u5934\u5b57\u6bb5\u5c31\u662f\u201cVia: proxy2, proxy1\u201d\u3002</p> <p> </p> <p>Via\u5b57\u6bb5\u53ea\u89e3\u51b3\u4e86\u5ba2\u6237\u7aef\u548c\u6e90\u670d\u52a1\u5668\u5224\u65ad\u662f\u5426\u5b58\u5728\u4ee3\u7406\u7684\u95ee\u9898\uff0c\u8fd8\u4e0d\u80fd\u77e5\u9053\u5bf9\u65b9\u7684\u771f\u5b9e\u4fe1\u606f\u3002</p> <p>\u4f46\u670d\u52a1\u5668\u7684IP\u5730\u5740\u5e94\u8be5\u662f\u4fdd\u5bc6\u7684\uff0c\u5173\u7cfb\u5230\u4f01\u4e1a\u7684\u5185\u7f51\u5b89\u5168\uff0c\u6240\u4ee5\u4e00\u822c\u4e0d\u4f1a\u8ba9\u5ba2\u6237\u7aef\u77e5\u9053\u3002\u4e0d\u8fc7\u53cd\u8fc7\u6765\uff0c\u901a\u5e38\u670d\u52a1\u5668\u9700\u8981\u77e5\u9053\u5ba2\u6237\u7aef\u7684\u771f\u5b9eIP\u5730\u5740\uff0c\u65b9\u4fbf\u505a\u8bbf\u95ee\u63a7\u5236\u3001\u7528\u6237\u753b\u50cf\u3001\u7edf\u8ba1\u5206\u6790\u3002</p> <p>\u53ef\u60dc\u7684\u662fHTTP\u6807\u51c6\u91cc\u5e76\u6ca1\u6709\u4e3a\u6b64\u5b9a\u4e49\u5934\u5b57\u6bb5\uff0c\u4f46\u5df2\u7ecf\u51fa\u73b0\u4e86\u5f88\u591a\u201c\u4e8b\u5b9e\u4e0a\u7684\u6807\u51c6\u201d\uff0c\u6700\u5e38\u7528\u7684\u4e24\u4e2a\u5934\u5b57\u6bb5\u662f\u201cX-Forwarded-For\u201d\u548c\u201cX-Real-IP\u201d\u3002</p> <p>\u201cX-Forwarded-For\u201d\u7684\u5b57\u9762\u610f\u601d\u662f\u201c\u4e3a\u8c01\u800c\u8f6c\u53d1\u201d\uff0c\u5f62\u5f0f\u4e0a\u548c\u201cVia\u201d\u5dee\u4e0d\u591a\uff0c\u4e5f\u662f\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u4ee3\u7406\u8282\u70b9\u5c31\u4f1a\u5728\u5b57\u6bb5\u91cc\u8ffd\u52a0\u4e00\u4e2a\u4fe1\u606f\u3002\u4f46\u201cVia\u201d\u8ffd\u52a0\u7684\u662f\u4ee3\u7406\u4e3b\u673a\u540d\uff08\u6216\u8005\u57df\u540d\uff09\uff0c\u800c\u201cX-Forwarded-For\u201d\u8ffd\u52a0\u7684\u662f\u8bf7\u6c42\u65b9\u7684IP\u5730\u5740\u3002\u6240\u4ee5\uff0c\u5728\u5b57\u6bb5\u91cc\u6700\u5de6\u8fb9\u7684IP\u5730\u5740\u5c31\u662f\u5ba2\u6237\u7aef\u7684\u5730\u5740\u3002</p> <p>\u201cX-Real-IP\u201d\u662f\u53e6\u4e00\u79cd\u83b7\u53d6\u5ba2\u6237\u7aef\u771f\u5b9eIP\u7684\u624b\u6bb5\uff0c\u5b83\u7684\u4f5c\u7528\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8bb0\u5f55\u5ba2\u6237\u7aefIP\u5730\u5740\uff0c\u6ca1\u6709\u4e2d\u95f4\u7684\u4ee3\u7406\u4fe1\u606f\uff0c\u76f8\u5f53\u4e8e\u662f\u201cX-Forwarded-For\u201d\u7684\u7b80\u5316\u7248\u3002\u5982\u679c\u5ba2\u6237\u7aef\u548c\u6e90\u670d\u52a1\u5668\u4e4b\u95f4\u53ea\u6709\u4e00\u4e2a\u4ee3\u7406\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u7684\u503c\u5c31\u662f\u76f8\u540c\u7684\u3002</p> <p>\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u5b9e\u73b0\u4e86\u4e00\u4e2a\u53cd\u5411\u4ee3\u7406\uff0c\u8bbf\u95ee\u201chttp://www.chrono.com/21-1\u201d\uff0c\u5b83\u4f1a\u8f6c\u800c\u8bbf\u95ee\u201chttp://origin.io\u201d\u3002\u8fd9\u91cc\u7684\u201corigin.io\u201d\u5c31\u662f\u6e90\u7ad9\uff0c\u5b83\u4f1a\u5728\u54cd\u5e94\u62a5\u6587\u91cc\u8f93\u51fa\u201cVia\u201d\u201cX-Forwarded-For\u201d\u7b49\u4ee3\u7406\u5934\u5b57\u6bb5\u4fe1\u606f\uff1a</p> <p> </p> <p>\u5355\u4ece\u6d4f\u89c8\u5668\u7684\u9875\u9762\u4e0a\u5f88\u96be\u770b\u51fa\u4ee3\u7406\u505a\u4e86\u54ea\u4e9b\u5de5\u4f5c\uff0c\u56e0\u4e3a\u4ee3\u7406\u7684\u8f6c\u53d1\u90fd\u5728\u540e\u53f0\u4e0d\u53ef\u89c1\uff0c\u6240\u4ee5\u6211\u628a\u8fd9\u4e2a\u8fc7\u7a0b\u7528Wireshark\u6293\u4e86\u4e00\u4e2a\u5305\uff1a</p> <p> </p> <p>\u4ece\u6293\u5305\u91cc\u5c31\u53ef\u4ee5\u6e05\u6670\u5730\u770b\u51fa\u4ee3\u7406\u4e0e\u5ba2\u6237\u7aef\u3001\u6e90\u670d\u52a1\u5668\u7684\u901a\u4fe1\u8fc7\u7a0b\uff1a</p> <ol> <li>\u5ba2\u6237\u7aef55061\u5148\u7528\u4e09\u6b21\u63e1\u624b\u8fde\u63a5\u5230\u4ee3\u7406\u768480\u7aef\u53e3\uff0c\u7136\u540e\u53d1\u9001GET\u8bf7\u6c42\uff1b</li> <li>\u4ee3\u7406\u4e0d\u76f4\u63a5\u751f\u4ea7\u5185\u5bb9\uff0c\u6240\u4ee5\u5c31\u4ee3\u8868\u5ba2\u6237\u7aef\uff0c\u752855063\u7aef\u53e3\u8fde\u63a5\u5230\u6e90\u670d\u52a1\u5668\uff0c\u4e5f\u662f\u4e09\u6b21\u63e1\u624b\uff1b</li> <li>\u4ee3\u7406\u6210\u529f\u8fde\u63a5\u6e90\u670d\u52a1\u5668\u540e\uff0c\u53d1\u51fa\u4e86\u4e00\u4e2aHTTP/1.0 \u7684GET\u8bf7\u6c42\uff1b</li> <li>\u56e0\u4e3aHTTP/1.0\u9ed8\u8ba4\u662f\u77ed\u8fde\u63a5\uff0c\u6240\u4ee5\u6e90\u670d\u52a1\u5668\u53d1\u9001\u54cd\u5e94\u62a5\u6587\u540e\u7acb\u5373\u7528\u56db\u6b21\u6325\u624b\u5173\u95ed\u8fde\u63a5\uff1b</li> <li>\u4ee3\u7406\u62ff\u5230\u54cd\u5e94\u62a5\u6587\u540e\u518d\u53d1\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5b8c\u6210\u4e86\u4e00\u6b21\u4ee3\u7406\u670d\u52a1\u3002</li> </ol> <p>\u5728\u8fd9\u4e2a\u5b9e\u9a8c\u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u9664\u4e86\u201cX-Forwarded-For\u201d\u548c\u201cX-Real-IP\u201d\uff0c\u8fd8\u51fa\u73b0\u4e86\u4e24\u4e2a\u5b57\u6bb5\uff1a\u201cX-Forwarded-Host\u201d\u548c\u201cX-Forwarded-Proto\u201d\uff0c\u5b83\u4eec\u7684\u4f5c\u7528\u4e0e\u201cX-Real-IP\u201d\u7c7b\u4f3c\uff0c\u53ea\u8bb0\u5f55\u5ba2\u6237\u7aef\u7684\u4fe1\u606f\uff0c\u5206\u522b\u662f\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u539f\u59cb\u57df\u540d\u548c\u539f\u59cb\u534f\u8bae\u540d\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_77","title":"\u4ee3\u7406\u534f\u8bae","text":"<p>\u6709\u4e86\u201cX-Forwarded-For\u201d\u7b49\u5934\u5b57\u6bb5\uff0c\u6e90\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u62ff\u5230\u51c6\u786e\u7684\u5ba2\u6237\u7aef\u4fe1\u606f\u4e86\u3002\u4f46\u5bf9\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u6765\u8bf4\u5b83\u5e76\u4e0d\u662f\u4e00\u4e2a\u6700\u4f73\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u56e0\u4e3a\u901a\u8fc7\u201cX-Forwarded-For\u201d\u64cd\u4f5c\u4ee3\u7406\u4fe1\u606f\u5fc5\u987b\u8981\u89e3\u6790HTTP\u62a5\u6587\u5934\uff0c\u8fd9\u5bf9\u4e8e\u4ee3\u7406\u6765\u8bf4\u6210\u672c\u6bd4\u8f83\u9ad8\uff0c\u539f\u672c\u53ea\u9700\u8981\u7b80\u5355\u5730\u8f6c\u53d1\u6d88\u606f\u5c31\u597d\uff0c\u800c\u73b0\u5728\u5374\u5fc5\u987b\u8981\u8d39\u529b\u89e3\u6790\u6570\u636e\u518d\u4fee\u6539\u6570\u636e\uff0c\u4f1a\u964d\u4f4e\u4ee3\u7406\u7684\u8f6c\u53d1\u6027\u80fd\u3002</p> <p>\u53e6\u4e00\u4e2a\u95ee\u9898\u662f\u201cX-Forwarded-For\u201d\u7b49\u5934\u5fc5\u987b\u8981\u4fee\u6539\u539f\u59cb\u62a5\u6587\uff0c\u800c\u6709\u4e9b\u60c5\u51b5\u4e0b\u662f\u4e0d\u5141\u8bb8\u751a\u81f3\u4e0d\u53ef\u80fd\u7684\uff08\u6bd4\u5982\u4f7f\u7528HTTPS\u901a\u4fe1\u88ab\u52a0\u5bc6\uff09\u3002</p> <p>\u6240\u4ee5\u5c31\u51fa\u73b0\u4e86\u4e00\u4e2a\u4e13\u95e8\u7684\u201c\u4ee3\u7406\u534f\u8bae\u201d\uff08The PROXY protocol\uff09\uff0c\u5b83\u7531\u77e5\u540d\u7684\u4ee3\u7406\u8f6f\u4ef6HAProxy\u6240\u5b9a\u4e49\uff0c\u4e5f\u662f\u4e00\u4e2a\u201c\u4e8b\u5b9e\u6807\u51c6\u201d\uff0c\u88ab\u5e7f\u6cdb\u91c7\u7528\uff08\u6ce8\u610f\u5e76\u4e0d\u662fRFC\uff09\u3002</p> <p>\u201c\u4ee3\u7406\u534f\u8bae\u201d\u6709v1\u548cv2\u4e24\u4e2a\u7248\u672c\uff0cv1\u548cHTTP\u5dee\u4e0d\u591a\uff0c\u4e5f\u662f\u660e\u6587\uff0c\u800cv2\u662f\u4e8c\u8fdb\u5236\u683c\u5f0f\u3002\u4eca\u5929\u53ea\u4ecb\u7ecd\u6bd4\u8f83\u597d\u7406\u89e3\u7684v1\uff0c\u5b83\u5728HTTP\u62a5\u6587\u524d\u589e\u52a0\u4e86\u4e00\u884cASCII\u7801\u6587\u672c\uff0c\u76f8\u5f53\u4e8e\u53c8\u591a\u4e86\u4e00\u4e2a\u5934\u3002</p> <p>\u8fd9\u4e00\u884c\u6587\u672c\u5176\u5b9e\u975e\u5e38\u7b80\u5355\uff0c\u5f00\u5934\u5fc5\u987b\u662f\u201cPROXY\u201d\u4e94\u4e2a\u5927\u5199\u5b57\u6bcd\uff0c\u7136\u540e\u662f\u201cTCP4\u201d\u6216\u8005\u201cTCP6\u201d\uff0c\u8868\u793a\u5ba2\u6237\u7aef\u7684IP\u5730\u5740\u7c7b\u578b\uff0c\u518d\u540e\u9762\u662f\u8bf7\u6c42\u65b9\u5730\u5740\u3001\u5e94\u7b54\u65b9\u5730\u5740\u3001\u8bf7\u6c42\u65b9\u7aef\u53e3\u53f7\u3001\u5e94\u7b54\u65b9\u7aef\u53e3\u53f7\uff0c\u6700\u540e\u7528\u4e00\u4e2a\u56de\u8f66\u6362\u884c\uff08\\r\\n\uff09\u7ed3\u675f\u3002</p> <p>\u4f8b\u5982\u4e0b\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5728GET\u8bf7\u6c42\u884c\u524d\u591a\u51fa\u4e86PROXY\u4fe1\u606f\u884c\uff0c\u5ba2\u6237\u7aef\u7684\u771f\u5b9eIP\u5730\u5740\u662f\u201c1.1.1.1\u201d\uff0c\u7aef\u53e3\u53f7\u662f55555\u3002</p> <pre><code>PROXY TCP4 1.1.1.1 2.2.2.2 55555 80\\r\\n\nGET / HTTP/1.1\\r\\n\nHost: www.xxx.com\\r\\n\n\\r\\n\n</code></pre> <p>\u670d\u52a1\u5668\u770b\u5230\u8fd9\u6837\u7684\u62a5\u6587\uff0c\u53ea\u8981\u89e3\u6790\u7b2c\u4e00\u884c\u5c31\u53ef\u4ee5\u62ff\u5230\u5ba2\u6237\u7aef\u5730\u5740\uff0c\u4e0d\u9700\u8981\u518d\u53bb\u7406\u4f1a\u540e\u9762\u7684HTTP\u6570\u636e\uff0c\u7701\u4e86\u5f88\u591a\u4e8b\u60c5\u3002</p> <p>\u4e0d\u8fc7\u4ee3\u7406\u534f\u8bae\u5e76\u4e0d\u652f\u6301\u201cX-Forwarded-For\u201d\u7684\u94fe\u5f0f\u5730\u5740\u5f62\u5f0f\uff0c\u6240\u4ee5\u62ff\u5230\u5ba2\u6237\u7aef\u5730\u5740\u540e\u518d\u5982\u4f55\u5904\u7406\u5c31\u9700\u8981\u4ee3\u7406\u670d\u52a1\u5668\u4e0e\u540e\u7aef\u81ea\u884c\u7ea6\u5b9a\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_78","title":"\u5c0f\u7ed3","text":"<ol> <li>HTTP\u4ee3\u7406\u5c31\u662f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u901a\u4fe1\u94fe\u8def\u4e2d\u7684\u4e00\u4e2a\u4e2d\u95f4\u73af\u8282\uff0c\u4e3a\u4e24\u7aef\u63d0\u4f9b\u201c\u4ee3\u7406\u670d\u52a1\u201d\uff1b</li> <li>\u4ee3\u7406\u5904\u4e8e\u4e2d\u95f4\u5c42\uff0c\u4e3aHTTP\u5904\u7406\u589e\u52a0\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3001\u5b89\u5168\u9632\u62a4\u3001\u6570\u636e\u8fc7\u6ee4\u7b49\u529f\u80fd\uff1b</li> <li>\u4ee3\u7406\u670d\u52a1\u5668\u9700\u8981\u4f7f\u7528\u5b57\u6bb5\u201cVia\u201d\u6807\u8bb0\u81ea\u5df1\u7684\u8eab\u4efd\uff0c\u591a\u4e2a\u4ee3\u7406\u4f1a\u5f62\u6210\u4e00\u4e2a\u5217\u8868\uff1b</li> <li>\u5982\u679c\u60f3\u8981\u77e5\u9053\u5ba2\u6237\u7aef\u7684\u771f\u5b9eIP\u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b57\u6bb5\u201cX-Forwarded-For\u201d\u548c\u201cX-Real-IP\u201d\uff1b</li> <li>\u4e13\u95e8\u7684\u201c\u4ee3\u7406\u534f\u8bae\u201d\u53ef\u4ee5\u5728\u4e0d\u6539\u52a8\u539f\u59cb\u62a5\u6587\u7684\u60c5\u51b5\u4e0b\u4f20\u9012\u5ba2\u6237\u7aef\u7684\u771f\u5b9eIP\u3002</li> </ol>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_79","title":"\u7f13\u5b58\u4ee3\u7406","text":"<p>\u4ee3\u7406\u201d\uff0c\u4e5f\u5c31\u662f\u652f\u6301\u7f13\u5b58\u63a7\u5236\u7684\u4ee3\u7406\u670d\u52a1\u3002</p> <p>\u4e4b\u524d\u8c08\u5230\u7f13\u5b58\u65f6\uff0c\u4e3b\u8981\u8bb2\u4e86\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u4e0a\u7684\u7f13\u5b58\u63a7\u5236\uff0c\u5b83\u80fd\u591f\u51cf\u5c11\u54cd\u5e94\u65f6\u95f4\u3001\u8282\u7ea6\u5e26\u5bbd\uff0c\u63d0\u5347\u5ba2\u6237\u7aef\u7684\u7528\u6237\u4f53\u9a8c\u3002</p> <p>\u4f46HTTP\u4f20\u8f93\u94fe\u8def\u4e0a\uff0c\u4e0d\u53ea\u662f\u5ba2\u6237\u7aef\u6709\u7f13\u5b58\uff0c\u670d\u52a1\u5668\u4e0a\u7684\u7f13\u5b58\u4e5f\u662f\u975e\u5e38\u6709\u4ef7\u503c\u7684\uff0c\u53ef\u4ee5\u8ba9\u8bf7\u6c42\u4e0d\u5fc5\u8d70\u5b8c\u6574\u4e2a\u540e\u7eed\u5904\u7406\u6d41\u7a0b\uff0c\u201c\u5c31\u8fd1\u201d\u83b7\u5f97\u54cd\u5e94\u7ed3\u679c\u3002</p> <p>\u7279\u522b\u662f\u5bf9\u4e8e\u90a3\u4e9b\u201c\u8bfb\u591a\u5199\u5c11\u201d\u7684\u6570\u636e\uff0c\u4f8b\u5982\u7a81\u53d1\u70ed\u70b9\u65b0\u95fb\u3001\u7206\u6b3e\u5546\u54c1\u7684\u8be6\u60c5\u9875\uff0c\u4e00\u79d2\u949f\u5185\u53ef\u80fd\u6709\u6210\u5343\u4e0a\u4e07\u6b21\u7684\u8bf7\u6c42\u3002\u5373\u4f7f\u4ec5\u4ec5\u7f13\u5b58\u6570\u79d2\u949f\uff0c\u4e5f\u80fd\u591f\u628a\u5de8\u5927\u7684\u8bbf\u95ee\u6d41\u91cf\u6321\u5728\u5916\u9762\uff0c\u8ba9RPS\uff08request per second\uff09\u964d\u4f4e\u597d\u51e0\u4e2a\u6570\u91cf\u7ea7\uff0c\u51cf\u8f7b\u5e94\u7528\u670d\u52a1\u5668\u7684\u5e76\u53d1\u538b\u529b\uff0c\u5bf9\u6027\u80fd\u7684\u6539\u5584\u662f\u975e\u5e38\u663e\u8457\u7684\u3002</p> <p>HTTP\u7684\u670d\u52a1\u5668\u7f13\u5b58\u529f\u80fd\u4e3b\u8981\u7531\u4ee3\u7406\u670d\u52a1\u5668\u6765\u5b9e\u73b0\uff08\u5373\u7f13\u5b58\u4ee3\u7406\uff09\uff0c\u800c\u6e90\u670d\u52a1\u5668\u7cfb\u7edf\u5185\u90e8\u867d\u7136\u4e5f\u7ecf\u5e38\u6709\u5404\u79cd\u7f13\u5b58\uff08\u5982Memcache\u3001Redis\u3001Varnish\u7b49\uff09\uff0c\u4f46\u4e0eHTTP\u6ca1\u6709\u592a\u591a\u5173\u7cfb\uff0c\u6240\u4ee5\u8fd9\u91cc\u6682\u4e14\u4e0d\u8bf4\u3002</p>"},{"location":"mds/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE-Note/http%E5%8D%8F%E8%AE%AE/#_80","title":"\u7f13\u5b58\u4ee3\u7406\u670d\u52a1","text":"<p>\u5728\u6ca1\u6709\u7f13\u5b58\u7684\u65f6\u5019\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u6bcf\u6b21\u90fd\u662f\u76f4\u63a5\u8f6c\u53d1\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684\u62a5\u6587\uff0c\u4e2d\u95f4\u4e0d\u4f1a\u5b58\u50a8\u4efb\u4f55\u6570\u636e\uff0c\u53ea\u6709\u6700\u7b80\u5355\u7684\u4e2d\u8f6c\u529f\u80fd\u3002</p> <p>\u52a0\u5165\u4e86\u7f13\u5b58\u540e\u5c31\u4e0d\u4e00\u6837\u4e86\u3002</p> <p>\u4ee3\u7406\u670d\u52a1\u6536\u5230\u6e90\u670d\u52a1\u5668\u53d1\u6765\u7684\u54cd\u5e94\u6570\u636e\u540e\u9700\u8981\u505a\u4e24\u4ef6\u4e8b\u3002\u7b2c\u4e00\u4e2a\u5f53\u7136\u662f\u628a\u62a5\u6587\u8f6c\u53d1\u7ed9\u5ba2\u6237\u7aef\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5c31\u662f\u628a\u62a5\u6587\u5b58\u5165\u81ea\u5df1\u7684Cache\u91cc\u3002</p> <p>\u4e0b\u4e00\u6b21\u518d\u6709\u76f8\u540c\u7684\u8bf7\u6c42\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u76f4\u63a5\u53d1\u9001304\u6216\u8005\u7f13\u5b58\u6570\u636e\uff0c\u4e0d\u5fc5\u518d\u4ece\u6e90\u670d\u52a1\u5668\u90a3\u91cc\u83b7\u53d6\u3002\u8fd9\u6837\u5c31\u964d\u4f4e\u4e86\u5ba2\u6237\u7aef\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u540c\u65f6\u8282\u7ea6\u4e86\u6e90\u670d\u52a1\u5668\u7684\u7f51\u7edc\u5e26\u5bbd\u3002</p> <p>\u5728HTTP\u7684\u7f13\u5b58\u4f53\u7cfb\u4e2d\uff0c\u7f13\u5b58\u4ee3\u7406\u7684\u8eab\u4efd\u5341\u5206\u7279\u6b8a\uff0c\u5b83\u201c\u65e2\u662f\u5ba2\u6237\u7aef\uff0c\u53c8\u662f\u670d\u52a1\u5668\u201d\uff0c\u540c\u65f6\u4e5f\u201c\u65e2\u4e0d\u662f\u5ba2\u6237\u7aef\uff0c\u53c8\u4e0d\u662f\u670d\u52a1\u5668\u201d\u3002</p> <p>\u8bf4\u5b83\u201c\u5373\u662f\u5ba2\u6237\u7aef\u53c8\u662f\u670d\u52a1\u5668\u201d\uff0c\u662f\u56e0\u4e3a\u5b83\u9762\u5411\u6e90\u670d\u52a1\u5668\u65f6\u662f\u5ba2\u6237\u7aef\uff0c\u5728\u9762\u5411\u5ba2\u6237\u7aef\u65f6\u53c8\u662f\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u5b83\u5373\u53ef\u4ee5\u7528\u5ba2\u6237\u7aef\u7684\u7f13\u5b58\u63a7\u5236\u7b56\u7565\u4e5f\u53ef\u4ee5\u7528\u670d\u52a1\u5668\u7aef\u7684\u7f13\u5b58\u63a7\u5236\u7b56\u7565\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u7b2c20\u8bb2\u7684\u5404\u79cd\u201cCache-Control\u201d\u5c5e\u6027\u3002</p> <p>\u4f46\u7f13\u5b58\u4ee3\u7406\u4e5f\u201c\u5373\u4e0d\u662f\u5ba2\u6237\u7aef\u53c8\u4e0d\u662f\u670d\u52a1\u5668\u201d\uff0c\u56e0\u4e3a\u5b83\u53ea\u662f\u4e00\u4e2a\u6570\u636e\u7684\u201c\u4e2d\u8f6c\u7ad9\u201d\uff0c\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u6570\u636e\u6d88\u8d39\u8005\u548c\u751f\u4ea7\u8005\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u6709\u4e00\u4e9b\u65b0\u7684\u201cCache-Control\u201d\u5c5e\u6027\u6765\u5bf9\u5b83\u505a\u7279\u522b\u7684\u7ea6\u675f\u3002</p>"}]}